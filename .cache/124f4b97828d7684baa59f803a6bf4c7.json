{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar nls = require(\"vs/nls\");\nvar path = require(\"vs/base/common/path\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar editorExtensions_1 = require(\"vs/editor/browser/editorExtensions\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar notification_1 = require(\"vs/platform/notification/common/notification\");\nvar storage_1 = require(\"vs/platform/storage/common/storage\");\n/**\n * Shows a message when opening a large file which has been memory optimized (and features disabled).\n */\nvar LargeFileOptimizationsWarner = /** @class */ (function (_super) {\n    tslib_1.__extends(LargeFileOptimizationsWarner, _super);\n    function LargeFileOptimizationsWarner(_editor, _notificationService, _configurationService, _storageService) {\n        var _this = _super.call(this) || this;\n        _this._editor = _editor;\n        _this._notificationService = _notificationService;\n        _this._configurationService = _configurationService;\n        _this._storageService = _storageService;\n        _this._isDisabled = Boolean(_this._storageService.getBoolean('editor.neverPromptForLargeFiles', storage_1.StorageScope.GLOBAL, false));\n        _this._register(_this._editor.onDidChangeModel(function (e) {\n            var model = _this._editor.getModel();\n            if (!model) {\n                return;\n            }\n            if (_this._isDisabled) {\n                return;\n            }\n            if (model.isTooLargeForTokenization()) {\n                var message = nls.localize({\n                    key: 'largeFile',\n                    comment: [\n                        'Variable 0 will be a file name.'\n                    ]\n                }, \"{0}: tokenization, wrapping and folding have been turned off for this large file in order to reduce memory usage and avoid freezing or crashing.\", path.basename(model.uri.path));\n                _this._notificationService.prompt(notification_1.Severity.Info, message, [\n                    {\n                        label: nls.localize('dontShowAgain', \"Don't Show Again\"),\n                        run: function () {\n                            _this._isDisabled = true;\n                            _this._storageService.store('editor.neverPromptForLargeFiles', true, storage_1.StorageScope.GLOBAL);\n                        }\n                    },\n                    {\n                        label: nls.localize('removeOptimizations', \"Forcefully enable features\"),\n                        run: function () {\n                            _this._configurationService.updateValue(\"editor.largeFileOptimizations\", false).then(function () {\n                                _this._notificationService.info(nls.localize('reopenFilePrompt', \"Please reopen file in order for this setting to take effect.\"));\n                            }, function (err) {\n                                _this._notificationService.error(err);\n                            });\n                        }\n                    }\n                ]);\n            }\n        }));\n        return _this;\n    }\n    LargeFileOptimizationsWarner.prototype.getId = function () {\n        return LargeFileOptimizationsWarner.ID;\n    };\n    LargeFileOptimizationsWarner.ID = 'editor.contrib.largeFileOptimizationsWarner';\n    LargeFileOptimizationsWarner = tslib_1.__decorate([\n        tslib_1.__param(1, notification_1.INotificationService),\n        tslib_1.__param(2, configuration_1.IConfigurationService),\n        tslib_1.__param(3, storage_1.IStorageService)\n    ], LargeFileOptimizationsWarner);\n    return LargeFileOptimizationsWarner;\n}(lifecycle_1.Disposable));\nexports.LargeFileOptimizationsWarner = LargeFileOptimizationsWarner;\neditorExtensions_1.registerEditorContribution(LargeFileOptimizationsWarner);\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts"],"names":[],"mappings":";AAAA;;;gGAGgG;;;AAEhG,4BAA8B;AAC9B,0CAA4C;AAC5C,sDAAsD;AAEtD,uEAAgF;AAEhF,gFAAuF;AACvF,6EAA8F;AAC9F,8DAAmF;AAEnF;;GAEG;AACH;IAAkD,wDAAU;IAM3D,sCACkB,OAAoB,EACE,oBAA0C,EACzC,qBAA4C,EAClD,eAAgC;QAJnE,YAMC,iBAAO,SA8CP;QAnDiB,aAAO,GAAP,OAAO,CAAa;QACE,0BAAoB,GAApB,oBAAoB,CAAsB;QACzC,2BAAqB,GAArB,qBAAqB,CAAuB;QAClD,qBAAe,GAAf,eAAe,CAAiB;QAIlE,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,iCAAiC,EAAE,sBAAY,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC;QAE3H,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAC,CAAC;YAC9C,IAAM,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtC,IAAI,CAAC,KAAK,EAAE;gBACX,OAAO;aACP;YACD,IAAI,KAAI,CAAC,WAAW,EAAE;gBACrB,OAAO;aACP;YAED,IAAI,KAAK,CAAC,yBAAyB,EAAE,EAAE;gBACtC,IAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAC3B;oBACC,GAAG,EAAE,WAAW;oBAChB,OAAO,EAAE;wBACR,iCAAiC;qBACjC;iBACD,EACD,kJAAkJ,EAClJ,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAC7B,CAAC;gBAEF,KAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,uBAAQ,CAAC,IAAI,EAAE,OAAO,EAAE;oBACxD;wBACC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,eAAe,EAAE,kBAAkB,CAAC;wBACxD,GAAG,EAAE;4BACJ,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;4BACxB,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,iCAAiC,EAAE,IAAI,EAAE,sBAAY,CAAC,MAAM,CAAC,CAAC;wBAC1F,CAAC;qBACD;oBACD;wBACC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,qBAAqB,EAAE,4BAA4B,CAAC;wBACxE,GAAG,EAAE;4BACJ,KAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC;gCACnF,KAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,kBAAkB,EAAE,8DAA8D,CAAC,CAAC,CAAC;4BAClI,CAAC,EAAE,UAAC,GAAG;gCACN,KAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BACtC,CAAC,CAAC,CAAC;wBACJ,CAAC;qBACD;iBACD,CAAC,CAAC;aACH;QACF,CAAC,CAAC,CAAC,CAAC;;IACL,CAAC;IAEM,4CAAK,GAAZ;QACC,OAAO,4BAA4B,CAAC,EAAE,CAAC;IACxC,CAAC;IA5DuB,+BAAE,GAAG,6CAA6C,CAAC;IAF/D,4BAA4B;QAQtC,mBAAA,mCAAoB,CAAA;QACpB,mBAAA,qCAAqB,CAAA;QACrB,mBAAA,yBAAe,CAAA;OAVL,4BAA4B,CA+DxC;IAAD,mCAAC;CAAA,AA/DD,CAAkD,sBAAU,GA+D3D;AA/DY,oEAA4B;AAiEzC,6CAA0B,CAAC,4BAA4B,CAAC,CAAC","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport * as path from 'vs/base/common/path';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { registerEditorContribution } from 'vs/editor/browser/editorExtensions';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IStorageService, StorageScope } from 'vs/platform/storage/common/storage';\n\n/**\n * Shows a message when opening a large file which has been memory optimized (and features disabled).\n */\nexport class LargeFileOptimizationsWarner extends Disposable implements IEditorContribution {\n\n\tprivate static readonly ID = 'editor.contrib.largeFileOptimizationsWarner';\n\n\tprivate _isDisabled: boolean;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t) {\n\t\tsuper();\n\n\t\tthis._isDisabled = Boolean(this._storageService.getBoolean('editor.neverPromptForLargeFiles', StorageScope.GLOBAL, false));\n\n\t\tthis._register(this._editor.onDidChangeModel((e) => {\n\t\t\tconst model = this._editor.getModel();\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._isDisabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (model.isTooLargeForTokenization()) {\n\t\t\t\tconst message = nls.localize(\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'largeFile',\n\t\t\t\t\t\tcomment: [\n\t\t\t\t\t\t\t'Variable 0 will be a file name.'\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t\"{0}: tokenization, wrapping and folding have been turned off for this large file in order to reduce memory usage and avoid freezing or crashing.\",\n\t\t\t\t\tpath.basename(model.uri.path)\n\t\t\t\t);\n\n\t\t\t\tthis._notificationService.prompt(Severity.Info, message, [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: nls.localize('dontShowAgain', \"Don't Show Again\"),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tthis._isDisabled = true;\n\t\t\t\t\t\t\tthis._storageService.store('editor.neverPromptForLargeFiles', true, StorageScope.GLOBAL);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: nls.localize('removeOptimizations', \"Forcefully enable features\"),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tthis._configurationService.updateValue(`editor.largeFileOptimizations`, false).then(() => {\n\t\t\t\t\t\t\t\tthis._notificationService.info(nls.localize('reopenFilePrompt', \"Please reopen file in order for this setting to take effect.\"));\n\t\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\t\tthis._notificationService.error(err);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getId(): string {\n\t\treturn LargeFileOptimizationsWarner.ID;\n\t}\n}\n\nregisterEditorContribution(LargeFileOptimizationsWarner);\n"]}]}