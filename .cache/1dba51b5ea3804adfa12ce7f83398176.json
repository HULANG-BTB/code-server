{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar dom = require(\"vs/base/browser/dom\");\nvar scrollableElement_1 = require(\"vs/base/browser/ui/scrollbar/scrollableElement\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar event_1 = require(\"vs/base/common/event\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar scrollable_1 = require(\"vs/base/common/scrollable\");\nrequire(\"vs/css!./breadcrumbsWidget\");\nvar BreadcrumbsItem = /** @class */ (function () {\n    function BreadcrumbsItem() {\n    }\n    BreadcrumbsItem.prototype.dispose = function () { };\n    return BreadcrumbsItem;\n}());\nexports.BreadcrumbsItem = BreadcrumbsItem;\nvar SimpleBreadcrumbsItem = /** @class */ (function (_super) {\n    tslib_1.__extends(SimpleBreadcrumbsItem, _super);\n    function SimpleBreadcrumbsItem(text, title) {\n        if (title === void 0) { title = text; }\n        var _this = _super.call(this) || this;\n        _this.text = text;\n        _this.title = title;\n        return _this;\n    }\n    SimpleBreadcrumbsItem.prototype.equals = function (other) {\n        return other === this || other instanceof SimpleBreadcrumbsItem && other.text === this.text && other.title === this.title;\n    };\n    SimpleBreadcrumbsItem.prototype.render = function (container) {\n        var node = document.createElement('div');\n        node.title = this.title;\n        node.innerText = this.text;\n        container.appendChild(node);\n    };\n    return SimpleBreadcrumbsItem;\n}(BreadcrumbsItem));\nexports.SimpleBreadcrumbsItem = SimpleBreadcrumbsItem;\nvar BreadcrumbsWidget = /** @class */ (function () {\n    function BreadcrumbsWidget(container) {\n        var _this = this;\n        this._disposables = new Array();\n        this._onDidSelectItem = new event_1.Emitter();\n        this._onDidFocusItem = new event_1.Emitter();\n        this._onDidChangeFocus = new event_1.Emitter();\n        this.onDidSelectItem = this._onDidSelectItem.event;\n        this.onDidFocusItem = this._onDidFocusItem.event;\n        this.onDidChangeFocus = this._onDidChangeFocus.event;\n        this._items = new Array();\n        this._nodes = new Array();\n        this._freeNodes = new Array();\n        this._focusedItemIdx = -1;\n        this._selectedItemIdx = -1;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-breadcrumbs';\n        this._domNode.tabIndex = 0;\n        this._domNode.setAttribute('role', 'list');\n        this._scrollable = new scrollableElement_1.DomScrollableElement(this._domNode, {\n            vertical: scrollable_1.ScrollbarVisibility.Hidden,\n            horizontal: scrollable_1.ScrollbarVisibility.Auto,\n            horizontalScrollbarSize: 3,\n            useShadows: false,\n            scrollYToX: true\n        });\n        this._disposables.push(this._scrollable);\n        this._disposables.push(dom.addStandardDisposableListener(this._domNode, 'click', function (e) { return _this._onClick(e); }));\n        container.appendChild(this._scrollable.getDomNode());\n        this._styleElement = dom.createStyleSheet(this._domNode);\n        var focusTracker = dom.trackFocus(this._domNode);\n        this._disposables.push(focusTracker);\n        this._disposables.push(focusTracker.onDidBlur(function (_) { return _this._onDidChangeFocus.fire(false); }));\n        this._disposables.push(focusTracker.onDidFocus(function (_) { return _this._onDidChangeFocus.fire(true); }));\n    }\n    BreadcrumbsWidget.prototype.dispose = function () {\n        lifecycle_1.dispose(this._disposables);\n        lifecycle_1.dispose(this._pendingLayout);\n        this._onDidSelectItem.dispose();\n        this._onDidFocusItem.dispose();\n        this._onDidChangeFocus.dispose();\n        this._domNode.remove();\n        this._disposables.length = 0;\n        this._nodes.length = 0;\n        this._freeNodes.length = 0;\n    };\n    BreadcrumbsWidget.prototype.layout = function (dim) {\n        if (dim && dom.Dimension.equals(dim, this._dimension)) {\n            return;\n        }\n        if (this._pendingLayout) {\n            this._pendingLayout.dispose();\n        }\n        if (dim) {\n            // only meaure\n            this._pendingLayout = this._updateDimensions(dim);\n        }\n        else {\n            this._pendingLayout = this._updateScrollbar();\n        }\n    };\n    BreadcrumbsWidget.prototype._updateDimensions = function (dim) {\n        var _this = this;\n        var disposables = [];\n        disposables.push(dom.modify(function () {\n            _this._dimension = dim;\n            _this._domNode.style.width = dim.width + \"px\";\n            _this._domNode.style.height = dim.height + \"px\";\n            disposables.push(_this._updateScrollbar());\n        }));\n        return lifecycle_1.combinedDisposable(disposables);\n    };\n    BreadcrumbsWidget.prototype._updateScrollbar = function () {\n        var _this = this;\n        return dom.measure(function () {\n            dom.measure(function () {\n                _this._scrollable.setRevealOnScroll(false);\n                _this._scrollable.scanDomNode();\n                _this._scrollable.setRevealOnScroll(true);\n            });\n        });\n    };\n    BreadcrumbsWidget.prototype.style = function (style) {\n        var content = '';\n        if (style.breadcrumbsBackground) {\n            content += \".monaco-breadcrumbs { background-color: \" + style.breadcrumbsBackground + \"}\";\n        }\n        if (style.breadcrumbsForeground) {\n            content += \".monaco-breadcrumbs .monaco-breadcrumb-item { color: \" + style.breadcrumbsForeground + \"}\\n\";\n        }\n        if (style.breadcrumbsFocusForeground) {\n            content += \".monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: \" + style.breadcrumbsFocusForeground + \"}\\n\";\n        }\n        if (style.breadcrumbsFocusAndSelectionForeground) {\n            content += \".monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: \" + style.breadcrumbsFocusAndSelectionForeground + \"}\\n\";\n        }\n        if (style.breadcrumbsHoverForeground) {\n            content += \".monaco-breadcrumbs .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: \" + style.breadcrumbsHoverForeground + \"}\\n\";\n        }\n        if (this._styleElement.innerHTML !== content) {\n            this._styleElement.innerHTML = content;\n        }\n    };\n    BreadcrumbsWidget.prototype.domFocus = function () {\n        var idx = this._focusedItemIdx >= 0 ? this._focusedItemIdx : this._items.length - 1;\n        if (idx >= 0 && idx < this._items.length) {\n            this._focus(idx, undefined);\n        }\n        else {\n            this._domNode.focus();\n        }\n    };\n    BreadcrumbsWidget.prototype.isDOMFocused = function () {\n        var candidate = document.activeElement;\n        while (candidate) {\n            if (this._domNode === candidate) {\n                return true;\n            }\n            candidate = candidate.parentElement;\n        }\n        return false;\n    };\n    BreadcrumbsWidget.prototype.getFocused = function () {\n        return this._items[this._focusedItemIdx];\n    };\n    BreadcrumbsWidget.prototype.setFocused = function (item, payload) {\n        this._focus(this._items.indexOf(item), payload);\n    };\n    BreadcrumbsWidget.prototype.focusPrev = function (payload) {\n        if (this._focusedItemIdx > 0) {\n            this._focus(this._focusedItemIdx - 1, payload);\n        }\n    };\n    BreadcrumbsWidget.prototype.focusNext = function (payload) {\n        if (this._focusedItemIdx + 1 < this._nodes.length) {\n            this._focus(this._focusedItemIdx + 1, payload);\n        }\n    };\n    BreadcrumbsWidget.prototype._focus = function (nth, payload) {\n        this._focusedItemIdx = -1;\n        for (var i = 0; i < this._nodes.length; i++) {\n            var node = this._nodes[i];\n            if (i !== nth) {\n                dom.removeClass(node, 'focused');\n            }\n            else {\n                this._focusedItemIdx = i;\n                dom.addClass(node, 'focused');\n                node.focus();\n            }\n        }\n        this._reveal(this._focusedItemIdx, true);\n        this._onDidFocusItem.fire({ type: 'focus', item: this._items[this._focusedItemIdx], node: this._nodes[this._focusedItemIdx], payload: payload });\n    };\n    BreadcrumbsWidget.prototype.reveal = function (item) {\n        var idx = this._items.indexOf(item);\n        if (idx >= 0) {\n            this._reveal(idx, false);\n        }\n    };\n    BreadcrumbsWidget.prototype._reveal = function (nth, minimal) {\n        var node = this._nodes[nth];\n        if (node) {\n            var width = this._scrollable.getScrollDimensions().width;\n            var scrollLeft = this._scrollable.getScrollPosition().scrollLeft;\n            if (!minimal || node.offsetLeft > scrollLeft + width || node.offsetLeft < scrollLeft) {\n                this._scrollable.setRevealOnScroll(false);\n                this._scrollable.setScrollPosition({ scrollLeft: node.offsetLeft });\n                this._scrollable.setRevealOnScroll(true);\n            }\n        }\n    };\n    BreadcrumbsWidget.prototype.getSelection = function () {\n        return this._items[this._selectedItemIdx];\n    };\n    BreadcrumbsWidget.prototype.setSelection = function (item, payload) {\n        this._select(this._items.indexOf(item), payload);\n    };\n    BreadcrumbsWidget.prototype._select = function (nth, payload) {\n        this._selectedItemIdx = -1;\n        for (var i = 0; i < this._nodes.length; i++) {\n            var node = this._nodes[i];\n            if (i !== nth) {\n                dom.removeClass(node, 'selected');\n            }\n            else {\n                this._selectedItemIdx = i;\n                dom.addClass(node, 'selected');\n            }\n        }\n        this._onDidSelectItem.fire({ type: 'select', item: this._items[this._selectedItemIdx], node: this._nodes[this._selectedItemIdx], payload: payload });\n    };\n    BreadcrumbsWidget.prototype.getItems = function () {\n        return this._items;\n    };\n    BreadcrumbsWidget.prototype.setItems = function (items) {\n        var _a;\n        var prefix;\n        var removed = [];\n        try {\n            prefix = arrays_1.commonPrefixLength(this._items, items, function (a, b) { return a.equals(b); });\n            removed = (_a = this._items).splice.apply(_a, [prefix, this._items.length - prefix].concat(items.slice(prefix)));\n            this._render(prefix);\n            lifecycle_1.dispose(removed);\n            this._focus(-1, undefined);\n        }\n        catch (e) {\n            var newError = new Error(\"BreadcrumbsItem#setItems: newItems: \" + items.length + \", prefix: \" + prefix + \", removed: \" + removed.length);\n            newError.name = e.name;\n            newError.stack = e.stack;\n            throw newError;\n        }\n    };\n    BreadcrumbsWidget.prototype._render = function (start) {\n        for (; start < this._items.length && start < this._nodes.length; start++) {\n            var item = this._items[start];\n            var node = this._nodes[start];\n            this._renderItem(item, node);\n        }\n        // case a: more nodes -> remove them\n        while (start < this._nodes.length) {\n            var free = this._nodes.pop();\n            if (free) {\n                this._freeNodes.push(free);\n                free.remove();\n            }\n        }\n        // case b: more items -> render them\n        for (; start < this._items.length; start++) {\n            var item = this._items[start];\n            var node = this._freeNodes.length > 0 ? this._freeNodes.pop() : document.createElement('div');\n            if (node) {\n                this._renderItem(item, node);\n                this._domNode.appendChild(node);\n                this._nodes.push(node);\n            }\n        }\n        this.layout(undefined);\n    };\n    BreadcrumbsWidget.prototype._renderItem = function (item, container) {\n        dom.clearNode(container);\n        container.className = '';\n        item.render(container);\n        container.tabIndex = -1;\n        container.setAttribute('role', 'listitem');\n        dom.addClass(container, 'monaco-breadcrumb-item');\n    };\n    BreadcrumbsWidget.prototype._onClick = function (event) {\n        for (var el = event.target; el; el = el.parentElement) {\n            var idx = this._nodes.indexOf(el);\n            if (idx >= 0) {\n                this._focus(idx, event);\n                this._select(idx, event);\n                break;\n            }\n        }\n    };\n    return BreadcrumbsWidget;\n}());\nexports.BreadcrumbsWidget = BreadcrumbsWidget;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { DomScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { commonPrefixLength } from 'vs/base/common/arrays';\nimport { Color } from 'vs/base/common/color';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { dispose, IDisposable, combinedDisposable } from 'vs/base/common/lifecycle';\nimport { ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport 'vs/css!./breadcrumbsWidget';\n\nexport abstract class BreadcrumbsItem {\n\tdispose(): void { }\n\tabstract equals(other: BreadcrumbsItem): boolean;\n\tabstract render(container: HTMLElement): void;\n}\n\nexport class SimpleBreadcrumbsItem extends BreadcrumbsItem {\n\n\tconstructor(\n\t\treadonly text: string,\n\t\treadonly title: string = text\n\t) {\n\t\tsuper();\n\t}\n\n\tequals(other: this) {\n\t\treturn other === this || other instanceof SimpleBreadcrumbsItem && other.text === this.text && other.title === this.title;\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tlet node = document.createElement('div');\n\t\tnode.title = this.title;\n\t\tnode.innerText = this.text;\n\t\tcontainer.appendChild(node);\n\t}\n}\n\nexport interface IBreadcrumbsWidgetStyles {\n\tbreadcrumbsBackground?: Color;\n\tbreadcrumbsForeground?: Color;\n\tbreadcrumbsHoverForeground?: Color;\n\tbreadcrumbsFocusForeground?: Color;\n\tbreadcrumbsFocusAndSelectionForeground?: Color;\n}\n\nexport interface IBreadcrumbsItemEvent {\n\ttype: 'select' | 'focus';\n\titem: BreadcrumbsItem;\n\tnode: HTMLElement;\n\tpayload: any;\n}\n\nexport class BreadcrumbsWidget {\n\n\tprivate readonly _disposables = new Array<IDisposable>();\n\tprivate readonly _domNode: HTMLDivElement;\n\tprivate readonly _styleElement: HTMLStyleElement;\n\tprivate readonly _scrollable: DomScrollableElement;\n\n\tprivate readonly _onDidSelectItem = new Emitter<IBreadcrumbsItemEvent>();\n\tprivate readonly _onDidFocusItem = new Emitter<IBreadcrumbsItemEvent>();\n\tprivate readonly _onDidChangeFocus = new Emitter<boolean>();\n\n\treadonly onDidSelectItem: Event<IBreadcrumbsItemEvent> = this._onDidSelectItem.event;\n\treadonly onDidFocusItem: Event<IBreadcrumbsItemEvent> = this._onDidFocusItem.event;\n\treadonly onDidChangeFocus: Event<boolean> = this._onDidChangeFocus.event;\n\n\tprivate readonly _items = new Array<BreadcrumbsItem>();\n\tprivate readonly _nodes = new Array<HTMLDivElement>();\n\tprivate readonly _freeNodes = new Array<HTMLDivElement>();\n\n\tprivate _focusedItemIdx: number = -1;\n\tprivate _selectedItemIdx: number = -1;\n\n\tprivate _pendingLayout: IDisposable;\n\tprivate _dimension: dom.Dimension;\n\n\tconstructor(\n\t\tcontainer: HTMLElement\n\t) {\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = 'monaco-breadcrumbs';\n\t\tthis._domNode.tabIndex = 0;\n\t\tthis._domNode.setAttribute('role', 'list');\n\t\tthis._scrollable = new DomScrollableElement(this._domNode, {\n\t\t\tvertical: ScrollbarVisibility.Hidden,\n\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\thorizontalScrollbarSize: 3,\n\t\t\tuseShadows: false,\n\t\t\tscrollYToX: true\n\t\t});\n\t\tthis._disposables.push(this._scrollable);\n\t\tthis._disposables.push(dom.addStandardDisposableListener(this._domNode, 'click', e => this._onClick(e)));\n\t\tcontainer.appendChild(this._scrollable.getDomNode());\n\n\t\tthis._styleElement = dom.createStyleSheet(this._domNode);\n\n\t\tlet focusTracker = dom.trackFocus(this._domNode);\n\t\tthis._disposables.push(focusTracker);\n\t\tthis._disposables.push(focusTracker.onDidBlur(_ => this._onDidChangeFocus.fire(false)));\n\t\tthis._disposables.push(focusTracker.onDidFocus(_ => this._onDidChangeFocus.fire(true)));\n\t}\n\n\tdispose(): void {\n\t\tdispose(this._disposables);\n\t\tdispose(this._pendingLayout);\n\t\tthis._onDidSelectItem.dispose();\n\t\tthis._onDidFocusItem.dispose();\n\t\tthis._onDidChangeFocus.dispose();\n\t\tthis._domNode.remove();\n\t\tthis._disposables.length = 0;\n\t\tthis._nodes.length = 0;\n\t\tthis._freeNodes.length = 0;\n\t}\n\n\tlayout(dim: dom.Dimension | undefined): void {\n\t\tif (dim && dom.Dimension.equals(dim, this._dimension)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._pendingLayout) {\n\t\t\tthis._pendingLayout.dispose();\n\t\t}\n\t\tif (dim) {\n\t\t\t// only meaure\n\t\t\tthis._pendingLayout = this._updateDimensions(dim);\n\t\t} else {\n\t\t\tthis._pendingLayout = this._updateScrollbar();\n\t\t}\n\t}\n\n\tprivate _updateDimensions(dim: dom.Dimension): IDisposable {\n\t\tlet disposables: IDisposable[] = [];\n\t\tdisposables.push(dom.modify(() => {\n\t\t\tthis._dimension = dim;\n\t\t\tthis._domNode.style.width = `${dim.width}px`;\n\t\t\tthis._domNode.style.height = `${dim.height}px`;\n\t\t\tdisposables.push(this._updateScrollbar());\n\t\t}));\n\t\treturn combinedDisposable(disposables);\n\t}\n\n\tprivate _updateScrollbar(): IDisposable {\n\t\treturn dom.measure(() => {\n\t\t\tdom.measure(() => { // double RAF\n\t\t\t\tthis._scrollable.setRevealOnScroll(false);\n\t\t\t\tthis._scrollable.scanDomNode();\n\t\t\t\tthis._scrollable.setRevealOnScroll(true);\n\t\t\t});\n\t\t});\n\t}\n\n\tstyle(style: IBreadcrumbsWidgetStyles): void {\n\t\tlet content = '';\n\t\tif (style.breadcrumbsBackground) {\n\t\t\tcontent += `.monaco-breadcrumbs { background-color: ${style.breadcrumbsBackground}}`;\n\t\t}\n\t\tif (style.breadcrumbsForeground) {\n\t\t\tcontent += `.monaco-breadcrumbs .monaco-breadcrumb-item { color: ${style.breadcrumbsForeground}}\\n`;\n\t\t}\n\t\tif (style.breadcrumbsFocusForeground) {\n\t\t\tcontent += `.monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: ${style.breadcrumbsFocusForeground}}\\n`;\n\t\t}\n\t\tif (style.breadcrumbsFocusAndSelectionForeground) {\n\t\t\tcontent += `.monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: ${style.breadcrumbsFocusAndSelectionForeground}}\\n`;\n\t\t}\n\t\tif (style.breadcrumbsHoverForeground) {\n\t\t\tcontent += `.monaco-breadcrumbs .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: ${style.breadcrumbsHoverForeground}}\\n`;\n\t\t}\n\t\tif (this._styleElement.innerHTML !== content) {\n\t\t\tthis._styleElement.innerHTML = content;\n\t\t}\n\t}\n\n\tdomFocus(): void {\n\t\tlet idx = this._focusedItemIdx >= 0 ? this._focusedItemIdx : this._items.length - 1;\n\t\tif (idx >= 0 && idx < this._items.length) {\n\t\t\tthis._focus(idx, undefined);\n\t\t} else {\n\t\t\tthis._domNode.focus();\n\t\t}\n\t}\n\n\tisDOMFocused(): boolean {\n\t\tlet candidate = document.activeElement;\n\t\twhile (candidate) {\n\t\t\tif (this._domNode === candidate) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcandidate = candidate.parentElement;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetFocused(): BreadcrumbsItem {\n\t\treturn this._items[this._focusedItemIdx];\n\t}\n\n\tsetFocused(item: BreadcrumbsItem | undefined, payload?: any): void {\n\t\tthis._focus(this._items.indexOf(item!), payload);\n\t}\n\n\tfocusPrev(payload?: any): any {\n\t\tif (this._focusedItemIdx > 0) {\n\t\t\tthis._focus(this._focusedItemIdx - 1, payload);\n\t\t}\n\t}\n\n\tfocusNext(payload?: any): any {\n\t\tif (this._focusedItemIdx + 1 < this._nodes.length) {\n\t\t\tthis._focus(this._focusedItemIdx + 1, payload);\n\t\t}\n\t}\n\n\tprivate _focus(nth: number, payload: any): void {\n\t\tthis._focusedItemIdx = -1;\n\t\tfor (let i = 0; i < this._nodes.length; i++) {\n\t\t\tconst node = this._nodes[i];\n\t\t\tif (i !== nth) {\n\t\t\t\tdom.removeClass(node, 'focused');\n\t\t\t} else {\n\t\t\t\tthis._focusedItemIdx = i;\n\t\t\t\tdom.addClass(node, 'focused');\n\t\t\t\tnode.focus();\n\t\t\t}\n\t\t}\n\t\tthis._reveal(this._focusedItemIdx, true);\n\t\tthis._onDidFocusItem.fire({ type: 'focus', item: this._items[this._focusedItemIdx], node: this._nodes[this._focusedItemIdx], payload });\n\t}\n\n\treveal(item: BreadcrumbsItem): void {\n\t\tlet idx = this._items.indexOf(item);\n\t\tif (idx >= 0) {\n\t\t\tthis._reveal(idx, false);\n\t\t}\n\t}\n\n\tprivate _reveal(nth: number, minimal: boolean): void {\n\t\tconst node = this._nodes[nth];\n\t\tif (node) {\n\t\t\tconst { width } = this._scrollable.getScrollDimensions();\n\t\t\tconst { scrollLeft } = this._scrollable.getScrollPosition();\n\t\t\tif (!minimal || node.offsetLeft > scrollLeft + width || node.offsetLeft < scrollLeft) {\n\t\t\t\tthis._scrollable.setRevealOnScroll(false);\n\t\t\t\tthis._scrollable.setScrollPosition({ scrollLeft: node.offsetLeft });\n\t\t\t\tthis._scrollable.setRevealOnScroll(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetSelection(): BreadcrumbsItem {\n\t\treturn this._items[this._selectedItemIdx];\n\t}\n\n\tsetSelection(item: BreadcrumbsItem | undefined, payload?: any): void {\n\t\tthis._select(this._items.indexOf(item!), payload);\n\t}\n\n\tprivate _select(nth: number, payload: any): void {\n\t\tthis._selectedItemIdx = -1;\n\t\tfor (let i = 0; i < this._nodes.length; i++) {\n\t\t\tconst node = this._nodes[i];\n\t\t\tif (i !== nth) {\n\t\t\t\tdom.removeClass(node, 'selected');\n\t\t\t} else {\n\t\t\t\tthis._selectedItemIdx = i;\n\t\t\t\tdom.addClass(node, 'selected');\n\t\t\t}\n\t\t}\n\t\tthis._onDidSelectItem.fire({ type: 'select', item: this._items[this._selectedItemIdx], node: this._nodes[this._selectedItemIdx], payload });\n\t}\n\n\tgetItems(): ReadonlyArray<BreadcrumbsItem> {\n\t\treturn this._items;\n\t}\n\n\tsetItems(items: BreadcrumbsItem[]): void {\n\t\tlet prefix: number | undefined;\n\t\tlet removed: BreadcrumbsItem[] = [];\n\t\ttry {\n\t\t\tprefix = commonPrefixLength(this._items, items, (a, b) => a.equals(b));\n\t\t\tremoved = this._items.splice(prefix, this._items.length - prefix, ...items.slice(prefix));\n\t\t\tthis._render(prefix);\n\t\t\tdispose(removed);\n\t\t\tthis._focus(-1, undefined);\n\t\t} catch (e) {\n\t\t\tlet newError = new Error(`BreadcrumbsItem#setItems: newItems: ${items.length}, prefix: ${prefix}, removed: ${removed.length}`);\n\t\t\tnewError.name = e.name;\n\t\t\tnewError.stack = e.stack;\n\t\t\tthrow newError;\n\t\t}\n\t}\n\n\tprivate _render(start: number): void {\n\t\tfor (; start < this._items.length && start < this._nodes.length; start++) {\n\t\t\tlet item = this._items[start];\n\t\t\tlet node = this._nodes[start];\n\t\t\tthis._renderItem(item, node);\n\t\t}\n\t\t// case a: more nodes -> remove them\n\t\twhile (start < this._nodes.length) {\n\t\t\tconst free = this._nodes.pop();\n\t\t\tif (free) {\n\t\t\t\tthis._freeNodes.push(free);\n\t\t\t\tfree.remove();\n\t\t\t}\n\t\t}\n\n\t\t// case b: more items -> render them\n\t\tfor (; start < this._items.length; start++) {\n\t\t\tlet item = this._items[start];\n\t\t\tlet node = this._freeNodes.length > 0 ? this._freeNodes.pop() : document.createElement('div');\n\t\t\tif (node) {\n\t\t\t\tthis._renderItem(item, node);\n\t\t\t\tthis._domNode.appendChild(node);\n\t\t\t\tthis._nodes.push(node);\n\t\t\t}\n\t\t}\n\t\tthis.layout(undefined);\n\t}\n\n\tprivate _renderItem(item: BreadcrumbsItem, container: HTMLDivElement): void {\n\t\tdom.clearNode(container);\n\t\tcontainer.className = '';\n\t\titem.render(container);\n\t\tcontainer.tabIndex = -1;\n\t\tcontainer.setAttribute('role', 'listitem');\n\t\tdom.addClass(container, 'monaco-breadcrumb-item');\n\t}\n\n\tprivate _onClick(event: IMouseEvent): void {\n\t\tfor (let el: HTMLElement | null = event.target; el; el = el.parentElement) {\n\t\t\tlet idx = this._nodes.indexOf(el as any);\n\t\t\tif (idx >= 0) {\n\t\t\t\tthis._focus(idx, event);\n\t\t\t\tthis._select(idx, event);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n"]}]}