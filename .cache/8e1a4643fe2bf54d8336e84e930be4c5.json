{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/terminal/browser/terminalWidgetManager.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/terminal/browser/terminalWidgetManager.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar WIDGET_HEIGHT = 29;\nvar TerminalWidgetManager = /** @class */ (function () {\n    function TerminalWidgetManager(terminalWrapper) {\n        this._messageListeners = [];\n        this._container = document.createElement('div');\n        this._container.classList.add('terminal-widget-overlay');\n        terminalWrapper.appendChild(this._container);\n        this._initTerminalHeightWatcher(terminalWrapper);\n    }\n    TerminalWidgetManager.prototype.dispose = function () {\n        if (this._container && this._container.parentElement) {\n            this._container.parentElement.removeChild(this._container);\n            this._container = null;\n        }\n        this._xtermViewport = null;\n    };\n    TerminalWidgetManager.prototype._initTerminalHeightWatcher = function (terminalWrapper) {\n        var _this = this;\n        // Watch the xterm.js viewport for style changes and do a layout if it changes\n        this._xtermViewport = terminalWrapper.querySelector('.xterm-viewport');\n        if (!this._xtermViewport) {\n            return;\n        }\n        var mutationObserver = new MutationObserver(function () { return _this._refreshHeight(); });\n        mutationObserver.observe(this._xtermViewport, { attributes: true, attributeFilter: ['style'] });\n    };\n    TerminalWidgetManager.prototype.showMessage = function (left, top, text) {\n        if (!this._container) {\n            return;\n        }\n        lifecycle_1.dispose(this._messageWidget);\n        this._messageListeners = lifecycle_1.dispose(this._messageListeners);\n        this._messageWidget = new MessageWidget(this._container, left, top, text);\n    };\n    TerminalWidgetManager.prototype.closeMessage = function () {\n        this._messageListeners = lifecycle_1.dispose(this._messageListeners);\n        if (this._messageWidget) {\n            this._messageListeners.push(MessageWidget.fadeOut(this._messageWidget));\n        }\n    };\n    TerminalWidgetManager.prototype._refreshHeight = function () {\n        if (!this._container || !this._xtermViewport) {\n            return;\n        }\n        this._container.style.height = this._xtermViewport.style.height;\n    };\n    return TerminalWidgetManager;\n}());\nexports.TerminalWidgetManager = TerminalWidgetManager;\nvar MessageWidget = /** @class */ (function () {\n    function MessageWidget(_container, _left, _top, _text) {\n        this._container = _container;\n        this._left = _left;\n        this._top = _top;\n        this._text = _text;\n        this._domNode = document.createElement('div');\n        this._domNode.style.position = 'absolute';\n        this._domNode.style.left = _left + \"px\";\n        this._domNode.style.bottom = _container.offsetHeight - Math.max(_top, WIDGET_HEIGHT) + \"px\";\n        this._domNode.classList.add('terminal-message-widget', 'fadeIn');\n        this._domNode.textContent = _text;\n        this._container.appendChild(this._domNode);\n    }\n    Object.defineProperty(MessageWidget.prototype, \"left\", {\n        get: function () { return this._left; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MessageWidget.prototype, \"top\", {\n        get: function () { return this._top; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MessageWidget.prototype, \"text\", {\n        get: function () { return this._text; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MessageWidget.prototype, \"domNode\", {\n        get: function () { return this._domNode; },\n        enumerable: true,\n        configurable: true\n    });\n    MessageWidget.fadeOut = function (messageWidget) {\n        var handle;\n        var dispose = function () {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.domNode.removeEventListener('animationend', dispose);\n        };\n        handle = setTimeout(dispose, 110);\n        messageWidget.domNode.addEventListener('animationend', dispose);\n        messageWidget.domNode.classList.add('fadeOut');\n        return { dispose: dispose };\n    };\n    MessageWidget.prototype.dispose = function () {\n        if (this.domNode.parentElement === this._container) {\n            this._container.removeChild(this.domNode);\n        }\n    };\n    return MessageWidget;\n}());\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/terminal/browser/terminalWidgetManager.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/terminal/browser/terminalWidgetManager.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\n\nconst WIDGET_HEIGHT = 29;\n\nexport class TerminalWidgetManager implements IDisposable {\n\tprivate _container: HTMLElement | null;\n\tprivate _xtermViewport: HTMLElement | null;\n\n\tprivate _messageWidget: MessageWidget;\n\tprivate _messageListeners: IDisposable[] = [];\n\n\tconstructor(\n\t\tterminalWrapper: HTMLElement\n\t) {\n\t\tthis._container = document.createElement('div');\n\t\tthis._container.classList.add('terminal-widget-overlay');\n\t\tterminalWrapper.appendChild(this._container);\n\n\t\tthis._initTerminalHeightWatcher(terminalWrapper);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._container && this._container.parentElement) {\n\t\t\tthis._container.parentElement.removeChild(this._container);\n\t\t\tthis._container = null;\n\t\t}\n\t\tthis._xtermViewport = null;\n\t}\n\n\tprivate _initTerminalHeightWatcher(terminalWrapper: HTMLElement) {\n\t\t// Watch the xterm.js viewport for style changes and do a layout if it changes\n\t\tthis._xtermViewport = <HTMLElement>terminalWrapper.querySelector('.xterm-viewport');\n\t\tif (!this._xtermViewport) {\n\t\t\treturn;\n\t\t}\n\t\tconst mutationObserver = new MutationObserver(() => this._refreshHeight());\n\t\tmutationObserver.observe(this._xtermViewport, { attributes: true, attributeFilter: ['style'] });\n\t}\n\n\tpublic showMessage(left: number, top: number, text: string): void {\n\t\tif (!this._container) {\n\t\t\treturn;\n\t\t}\n\t\tdispose(this._messageWidget);\n\t\tthis._messageListeners = dispose(this._messageListeners);\n\t\tthis._messageWidget = new MessageWidget(this._container, left, top, text);\n\t}\n\n\tpublic closeMessage(): void {\n\t\tthis._messageListeners = dispose(this._messageListeners);\n\t\tif (this._messageWidget) {\n\t\t\tthis._messageListeners.push(MessageWidget.fadeOut(this._messageWidget));\n\t\t}\n\t}\n\n\tprivate _refreshHeight(): void {\n\t\tif (!this._container || !this._xtermViewport) {\n\t\t\treturn;\n\t\t}\n\t\tthis._container.style.height = this._xtermViewport.style.height;\n\t}\n}\n\nclass MessageWidget {\n\tprivate _domNode: HTMLDivElement;\n\n\tpublic get left(): number { return this._left; }\n\tpublic get top(): number { return this._top; }\n\tpublic get text(): string { return this._text; }\n\tpublic get domNode(): HTMLElement { return this._domNode; }\n\n\tpublic static fadeOut(messageWidget: MessageWidget): IDisposable {\n\t\tlet handle: any;\n\t\tconst dispose = () => {\n\t\t\tmessageWidget.dispose();\n\t\t\tclearTimeout(handle);\n\t\t\tmessageWidget.domNode.removeEventListener('animationend', dispose);\n\t\t};\n\t\thandle = setTimeout(dispose, 110);\n\t\tmessageWidget.domNode.addEventListener('animationend', dispose);\n\t\tmessageWidget.domNode.classList.add('fadeOut');\n\t\treturn { dispose };\n\t}\n\n\tconstructor(\n\t\tprivate _container: HTMLElement,\n\t\tprivate _left: number,\n\t\tprivate _top: number,\n\t\tprivate _text: string\n\t) {\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.style.position = 'absolute';\n\t\tthis._domNode.style.left = `${_left}px`;\n\t\tthis._domNode.style.bottom = `${_container.offsetHeight - Math.max(_top, WIDGET_HEIGHT)}px`;\n\t\tthis._domNode.classList.add('terminal-message-widget', 'fadeIn');\n\t\tthis._domNode.textContent = _text;\n\t\tthis._container.appendChild(this._domNode);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.domNode.parentElement === this._container) {\n\t\t\tthis._container.removeChild(this.domNode);\n\t\t}\n\t}\n}"]}]}