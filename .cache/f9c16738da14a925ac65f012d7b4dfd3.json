{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanel.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanel.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./media/markers\");\nvar dom = require(\"vs/base/browser/dom\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar telemetry_1 = require(\"vs/platform/telemetry/common/telemetry\");\nvar panel_1 = require(\"vs/workbench/browser/panel\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar constants_1 = require(\"vs/workbench/contrib/markers/browser/constants\");\nvar markersModel_1 = require(\"vs/workbench/contrib/markers/browser/markersModel\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar markersPanelActions_1 = require(\"vs/workbench/contrib/markers/browser/markersPanelActions\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar messages_1 = require(\"vs/workbench/contrib/markers/browser/messages\");\nvar rangeDecorations_1 = require(\"vs/workbench/browser/parts/editor/rangeDecorations\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar markers_1 = require(\"vs/workbench/contrib/markers/browser/markers\");\nvar storage_1 = require(\"vs/platform/storage/common/storage\");\nvar nls_1 = require(\"vs/nls\");\nvar contextkey_1 = require(\"vs/platform/contextkey/common/contextkey\");\nvar iterator_1 = require(\"vs/base/common/iterator\");\nvar event_1 = require(\"vs/base/common/event\");\nvar listService_1 = require(\"vs/platform/list/browser/listService\");\nvar markersFilterOptions_1 = require(\"vs/workbench/contrib/markers/browser/markersFilterOptions\");\nvar objects_1 = require(\"vs/base/common/objects\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar markersTreeViewer_1 = require(\"vs/workbench/contrib/markers/browser/markersTreeViewer\");\nvar contextView_1 = require(\"vs/platform/contextview/browser/contextView\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar actions_2 = require(\"vs/platform/actions/common/actions\");\nvar keybinding_1 = require(\"vs/platform/keybinding/common/keybinding\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar event_2 = require(\"vs/base/browser/event\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar labels_1 = require(\"vs/workbench/browser/labels\");\nfunction createModelIterator(model) {\n    var resourcesIt = iterator_1.Iterator.fromArray(model.resourceMarkers);\n    return iterator_1.Iterator.map(resourcesIt, function (m) {\n        var markersIt = iterator_1.Iterator.fromArray(m.markers);\n        var children = iterator_1.Iterator.map(markersIt, function (m) {\n            var relatedInformationIt = iterator_1.Iterator.from(m.relatedInformation);\n            var children = iterator_1.Iterator.map(relatedInformationIt, function (r) { return ({ element: r }); });\n            return { element: m, children: children };\n        });\n        return { element: m, children: children };\n    });\n}\nvar MarkersPanel = /** @class */ (function (_super) {\n    tslib_1.__extends(MarkersPanel, _super);\n    function MarkersPanel(instantiationService, editorService, configurationService, telemetryService, themeService, markersWorkbenchService, storageService, contextKeyService, workspaceContextService, contextMenuService, menuService, keybindingService) {\n        var _this = _super.call(this, constants_1.default.MARKERS_PANEL_ID, telemetryService, themeService, storageService) || this;\n        _this.instantiationService = instantiationService;\n        _this.editorService = editorService;\n        _this.configurationService = configurationService;\n        _this.markersWorkbenchService = markersWorkbenchService;\n        _this.workspaceContextService = workspaceContextService;\n        _this.contextMenuService = contextMenuService;\n        _this.menuService = menuService;\n        _this.keybindingService = keybindingService;\n        _this.lastSelectedRelativeTop = 0;\n        _this.currentActiveResource = null;\n        _this._onDidFilter = new event_1.Emitter();\n        _this.onDidFilter = _this._onDidFilter.event;\n        _this.cachedFilterStats = undefined;\n        _this.currentResourceGotAddedToMarkersData = false;\n        _this.disposables = [];\n        _this.panelFoucusContextKey = constants_1.default.MarkerPanelFocusContextKey.bindTo(contextKeyService);\n        _this.panelState = _this.getMemento(storage_1.StorageScope.WORKSPACE);\n        _this.markersViewModel = instantiationService.createInstance(markersTreeViewer_1.MarkersViewModel, _this.panelState['multiline']);\n        _this.markersViewModel.onDidChange(_this.onDidChangeViewState, _this, _this.disposables);\n        _this.setCurrentActiveEditor();\n        return _this;\n    }\n    MarkersPanel.prototype.create = function (parent) {\n        var _this = this;\n        _super.prototype.create.call(this, parent);\n        this.rangeHighlightDecorations = this._register(this.instantiationService.createInstance(rangeDecorations_1.RangeHighlightDecorations));\n        dom.addClass(parent, 'markers-panel');\n        var container = dom.append(parent, dom.$('.markers-panel-container'));\n        this.createArialLabelElement(container);\n        this.createMessageBox(container);\n        this.createTree(container);\n        this.createActions();\n        this.createListeners();\n        this.updateFilter();\n        this._register(this.onDidFocus(function () { return _this.panelFoucusContextKey.set(true); }));\n        this._register(this.onDidBlur(function () { return _this.panelFoucusContextKey.set(false); }));\n        this._register(this.onDidChangeVisibility(function (visible) {\n            if (visible) {\n                _this.refreshPanel();\n            }\n            else {\n                _this.rangeHighlightDecorations.removeHighlightRange();\n            }\n        }));\n        this.render();\n    };\n    MarkersPanel.prototype.getTitle = function () {\n        return messages_1.default.MARKERS_PANEL_TITLE_PROBLEMS;\n    };\n    MarkersPanel.prototype.layout = function (dimension) {\n        this.treeContainer.style.height = dimension.height + \"px\";\n        this.tree.layout(dimension.height, dimension.width);\n        if (this.filterInputActionItem) {\n            this.filterInputActionItem.toggleLayout(dimension.width < 1200);\n        }\n    };\n    MarkersPanel.prototype.focus = function () {\n        if (this.tree.getHTMLElement() === document.activeElement) {\n            return;\n        }\n        this.tree.getHTMLElement().focus();\n    };\n    MarkersPanel.prototype.focusFilter = function () {\n        if (this.filterInputActionItem) {\n            this.filterInputActionItem.focus();\n        }\n    };\n    MarkersPanel.prototype.getActions = function () {\n        if (!this.actions) {\n            this.createActions();\n        }\n        return this.actions;\n    };\n    MarkersPanel.prototype.showQuickFixes = function (marker) {\n        var viewModel = this.markersViewModel.getViewModel(marker);\n        if (viewModel) {\n            viewModel.quickFixAction.run();\n        }\n    };\n    MarkersPanel.prototype.openFileAtElement = function (element, preserveFocus, sideByside, pinned) {\n        var _this = this;\n        var _a = element instanceof markersModel_1.Marker ? { resource: element.resource, selection: element.range, event: 'problems.selectDiagnostic', data: this.getTelemetryData(element.marker) } :\n            element instanceof markersModel_1.RelatedInformation ? { resource: element.raw.resource, selection: element.raw, event: 'problems.selectRelatedInformation', data: this.getTelemetryData(element.marker) } : { resource: null, selection: null, event: null, data: null }, resource = _a.resource, selection = _a.selection, event = _a.event, data = _a.data;\n        if (resource && selection && event) {\n            /* __GDPR__\n            \"problems.selectDiagnostic\" : {\n                \"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n                \"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n            }\n            */\n            /* __GDPR__\n                \"problems.selectRelatedInformation\" : {\n                    \"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n                    \"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n                }\n            */\n            this.telemetryService.publicLog(event, data);\n            this.editorService.openEditor({\n                resource: resource,\n                options: {\n                    selection: selection,\n                    preserveFocus: preserveFocus,\n                    pinned: pinned,\n                    revealIfVisible: true\n                },\n            }, sideByside ? editorService_1.SIDE_GROUP : editorService_1.ACTIVE_GROUP).then(function (editor) {\n                if (editor && preserveFocus) {\n                    _this.rangeHighlightDecorations.highlightRange({ resource: resource, range: selection }, editor.getControl());\n                }\n                else {\n                    _this.rangeHighlightDecorations.removeHighlightRange();\n                }\n            });\n            return true;\n        }\n        else {\n            this.rangeHighlightDecorations.removeHighlightRange();\n        }\n        return false;\n    };\n    MarkersPanel.prototype.refreshPanel = function (marker) {\n        if (this.isVisible()) {\n            this.cachedFilterStats = undefined;\n            if (marker) {\n                this.tree.rerender(marker);\n            }\n            else {\n                this.tree.setChildren(null, createModelIterator(this.markersWorkbenchService.markersModel));\n            }\n            var _a = this.getFilterStats(), total = _a.total, filtered = _a.filtered;\n            dom.toggleClass(this.treeContainer, 'hidden', total === 0 || filtered === 0);\n            this.renderMessage();\n            this._onDidFilter.fire();\n        }\n    };\n    MarkersPanel.prototype.onDidChangeViewState = function (marker) {\n        this.refreshPanel(marker);\n    };\n    MarkersPanel.prototype.updateFilter = function () {\n        this.cachedFilterStats = undefined;\n        this.filter.options = new markersFilterOptions_1.FilterOptions(this.filterAction.filterText, this.getFilesExcludeExpressions());\n        this.tree.refilter();\n        this._onDidFilter.fire();\n        var _a = this.getFilterStats(), total = _a.total, filtered = _a.filtered;\n        dom.toggleClass(this.treeContainer, 'hidden', total === 0 || filtered === 0);\n        this.renderMessage();\n    };\n    MarkersPanel.prototype.getFilesExcludeExpressions = function () {\n        var _this = this;\n        if (!this.filterAction.useFilesExclude) {\n            return [];\n        }\n        var workspaceFolders = this.workspaceContextService.getWorkspace().folders;\n        return workspaceFolders.length\n            ? workspaceFolders.map(function (workspaceFolder) { return ({ root: workspaceFolder.uri, expression: _this.getFilesExclude(workspaceFolder.uri) }); })\n            : this.getFilesExclude();\n    };\n    MarkersPanel.prototype.getFilesExclude = function (resource) {\n        return objects_1.deepClone(this.configurationService.getValue('files.exclude', { resource: resource })) || {};\n    };\n    MarkersPanel.prototype.createMessageBox = function (parent) {\n        this.messageBoxContainer = dom.append(parent, dom.$('.message-box-container'));\n        this.messageBoxContainer.setAttribute('aria-labelledby', 'markers-panel-arialabel');\n    };\n    MarkersPanel.prototype.createArialLabelElement = function (parent) {\n        this.ariaLabelElement = dom.append(parent, dom.$(''));\n        this.ariaLabelElement.setAttribute('id', 'markers-panel-arialabel');\n        this.ariaLabelElement.setAttribute('aria-live', 'polite');\n    };\n    MarkersPanel.prototype.createTree = function (parent) {\n        var _this = this;\n        this.treeContainer = dom.append(parent, dom.$('.tree-container.show-file-icons'));\n        var onDidChangeRenderNodeCount = new event_1.Relay();\n        this.treeLabels = this._register(this.instantiationService.createInstance(labels_1.ResourceLabels, this));\n        var virtualDelegate = new markersTreeViewer_1.VirtualDelegate(this.markersViewModel);\n        var renderers = [\n            this.instantiationService.createInstance(markersTreeViewer_1.ResourceMarkersRenderer, this.treeLabels, onDidChangeRenderNodeCount.event),\n            this.instantiationService.createInstance(markersTreeViewer_1.MarkerRenderer, this.markersViewModel),\n            this.instantiationService.createInstance(markersTreeViewer_1.RelatedInformationRenderer)\n        ];\n        this.filter = new markersTreeViewer_1.Filter(new markersFilterOptions_1.FilterOptions());\n        var accessibilityProvider = this.instantiationService.createInstance(markersTreeViewer_1.MarkersTreeAccessibilityProvider);\n        var identityProvider = {\n            getId: function (element) {\n                return element.hash;\n            }\n        };\n        this.tree = this.instantiationService.createInstance(listService_1.WorkbenchObjectTree, this.treeContainer, virtualDelegate, renderers, {\n            filter: this.filter,\n            accessibilityProvider: accessibilityProvider,\n            identityProvider: identityProvider,\n            dnd: new markersTreeViewer_1.ResourceDragAndDrop(this.instantiationService),\n            expandOnlyOnTwistieClick: function (e) { return e instanceof markersModel_1.Marker && e.relatedInformation.length > 0; }\n        });\n        onDidChangeRenderNodeCount.input = this.tree.onDidChangeRenderNodeCount;\n        var markerFocusContextKey = constants_1.default.MarkerFocusContextKey.bindTo(this.tree.contextKeyService);\n        var relatedInformationFocusContextKey = constants_1.default.RelatedInformationFocusContextKey.bindTo(this.tree.contextKeyService);\n        this._register(this.tree.onDidChangeFocus(function (focus) {\n            markerFocusContextKey.set(focus.elements.some(function (e) { return e instanceof markersModel_1.Marker; }));\n            relatedInformationFocusContextKey.set(focus.elements.some(function (e) { return e instanceof markersModel_1.RelatedInformation; }));\n        }));\n        var focusTracker = this._register(dom.trackFocus(this.tree.getHTMLElement()));\n        this._register(focusTracker.onDidBlur(function () {\n            markerFocusContextKey.set(false);\n            relatedInformationFocusContextKey.set(false);\n        }));\n        var markersNavigator = this._register(new listService_1.TreeResourceNavigator2(this.tree, { openOnFocus: true }));\n        this._register(event_1.Event.debounce(markersNavigator.onDidOpenResource, function (last, event) { return event; }, 75, true)(function (options) {\n            _this.openFileAtElement(options.element, !!options.editorOptions.preserveFocus, options.sideBySide, !!options.editorOptions.pinned);\n        }));\n        this._register(this.tree.onDidChangeCollapseState(function (_a) {\n            var node = _a.node;\n            var element = node.element;\n            if (element instanceof markersModel_1.RelatedInformation && !node.collapsed) {\n                /* __GDPR__\n                \"problems.expandRelatedInformation\" : {\n                    \"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n                    \"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n                }\n                */\n                _this.telemetryService.publicLog('problems.expandRelatedInformation', _this.getTelemetryData(element.marker));\n            }\n        }));\n        this.tree.onContextMenu(this.onContextMenu, this, this._toDispose);\n        this._register(this.configurationService.onDidChangeConfiguration(function (e) {\n            if (_this.filterAction.useFilesExclude && e.affectsConfiguration('files.exclude')) {\n                _this.updateFilter();\n            }\n        }));\n        // move focus to input, whenever a key is pressed in the panel container\n        this._register(event_2.domEvent(parent, 'keydown')(function (e) {\n            if (_this.filterInputActionItem && _this.keybindingService.mightProducePrintableCharacter(new keyboardEvent_1.StandardKeyboardEvent(e))) {\n                _this.filterInputActionItem.focus();\n            }\n        }));\n        this._register(event_1.Event.any(this.tree.onDidChangeSelection, this.tree.onDidChangeFocus)(function () {\n            var elements = _this.tree.getSelection().concat(_this.tree.getFocus());\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var element = elements_1[_i];\n                if (element instanceof markersModel_1.Marker) {\n                    var viewModel = _this.markersViewModel.getViewModel(element);\n                    if (viewModel) {\n                        viewModel.showLightBulb();\n                    }\n                }\n            }\n        }));\n    };\n    MarkersPanel.prototype.createActions = function () {\n        var _this = this;\n        this.collapseAllAction = new actions_1.Action('vs.tree.collapse', nls_1.localize('collapseAll', \"Collapse All\"), 'monaco-tree-action collapse-all', true, function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                this.tree.collapseAll();\n                this.tree.setSelection([]);\n                this.tree.setFocus([]);\n                this.tree.getHTMLElement().focus();\n                this.tree.focusFirst();\n                return [2 /*return*/];\n            });\n        }); });\n        this.filterAction = this.instantiationService.createInstance(markersPanelActions_1.MarkersFilterAction, { filterText: this.panelState['filter'] || '', filterHistory: this.panelState['filterHistory'] || [], useFilesExclude: !!this.panelState['useFilesExclude'] });\n        this.actions = [this.filterAction, this.collapseAllAction];\n    };\n    MarkersPanel.prototype.createListeners = function () {\n        var _this = this;\n        var onModelOrActiveEditorChanged = event_1.Event.debounce(event_1.Event.any(this.markersWorkbenchService.markersModel.onDidChange, event_1.Event.map(this.editorService.onDidActiveEditorChange, function () { return true; })), function (result, e) {\n            if (!result) {\n                result = {\n                    resources: [],\n                    activeEditorChanged: false\n                };\n            }\n            if (e === true) {\n                result.activeEditorChanged = true;\n            }\n            else {\n                result.resources.push(e);\n            }\n            return result;\n        }, 0);\n        this._register(onModelOrActiveEditorChanged(function (_a) {\n            var resources = _a.resources, activeEditorChanged = _a.activeEditorChanged;\n            if (resources) {\n                _this.onDidChangeModel(resources);\n            }\n            if (activeEditorChanged) {\n                _this.onActiveEditorChanged();\n            }\n        }, this));\n        this._register(this.tree.onDidChangeSelection(function () { return _this.onSelected(); }));\n        this._register(this.filterAction.onDidChange(function (event) {\n            if (event.filterText || event.useFilesExclude) {\n                _this.updateFilter();\n            }\n        }));\n        this.actions.forEach(function (a) { return _this._register(a); });\n    };\n    MarkersPanel.prototype.onDidChangeModel = function (resources) {\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            this.markersViewModel.remove(resource);\n            var resourceMarkers = this.markersWorkbenchService.markersModel.getResourceMarkers(resource);\n            if (resourceMarkers) {\n                for (var _a = 0, _b = resourceMarkers.markers; _a < _b.length; _a++) {\n                    var marker = _b[_a];\n                    this.markersViewModel.add(marker);\n                }\n            }\n        }\n        this.currentResourceGotAddedToMarkersData = this.currentResourceGotAddedToMarkersData || this.isCurrentResourceGotAddedToMarkersData(resources);\n        this.refreshPanel();\n        this.updateRangeHighlights();\n        if (this.currentResourceGotAddedToMarkersData) {\n            this.autoReveal();\n            this.currentResourceGotAddedToMarkersData = false;\n        }\n    };\n    MarkersPanel.prototype.isCurrentResourceGotAddedToMarkersData = function (changedResources) {\n        var currentlyActiveResource = this.currentActiveResource;\n        if (!currentlyActiveResource) {\n            return false;\n        }\n        var resourceForCurrentActiveResource = this.getResourceForCurrentActiveResource();\n        if (resourceForCurrentActiveResource) {\n            return false;\n        }\n        return changedResources.some(function (r) { return r.toString() === currentlyActiveResource.toString(); });\n    };\n    MarkersPanel.prototype.onActiveEditorChanged = function () {\n        this.setCurrentActiveEditor();\n        this.autoReveal();\n    };\n    MarkersPanel.prototype.setCurrentActiveEditor = function () {\n        var activeEditor = this.editorService.activeEditor;\n        this.currentActiveResource = activeEditor ? activeEditor.getResource() : null;\n    };\n    MarkersPanel.prototype.onSelected = function () {\n        var selection = this.tree.getSelection();\n        if (selection && selection.length > 0) {\n            this.lastSelectedRelativeTop = this.tree.getRelativeTop(selection[0]) || 0;\n        }\n    };\n    MarkersPanel.prototype.render = function () {\n        this.cachedFilterStats = undefined;\n        this.tree.setChildren(null, createModelIterator(this.markersWorkbenchService.markersModel));\n        var _a = this.getFilterStats(), total = _a.total, filtered = _a.filtered;\n        dom.toggleClass(this.treeContainer, 'hidden', total === 0 || filtered === 0);\n        this.renderMessage();\n    };\n    MarkersPanel.prototype.renderMessage = function () {\n        dom.clearNode(this.messageBoxContainer);\n        var _a = this.getFilterStats(), total = _a.total, filtered = _a.filtered;\n        if (filtered === 0) {\n            this.messageBoxContainer.style.display = 'block';\n            this.messageBoxContainer.setAttribute('tabIndex', '0');\n            if (total > 0) {\n                if (this.filter.options.filter) {\n                    this.renderFilteredByFilterMessage(this.messageBoxContainer);\n                }\n                else {\n                    this.renderFilteredByFilesExcludeMessage(this.messageBoxContainer);\n                }\n            }\n            else {\n                this.renderNoProblemsMessage(this.messageBoxContainer);\n            }\n        }\n        else {\n            this.messageBoxContainer.style.display = 'none';\n            if (filtered === total) {\n                this.ariaLabelElement.setAttribute('aria-label', nls_1.localize('No problems filtered', \"Showing {0} problems\", total));\n            }\n            else {\n                this.ariaLabelElement.setAttribute('aria-label', nls_1.localize('problems filtered', \"Showing {0} of {1} problems\", filtered, total));\n            }\n            this.messageBoxContainer.removeAttribute('tabIndex');\n        }\n    };\n    MarkersPanel.prototype.renderFilteredByFilesExcludeMessage = function (container) {\n        var _this = this;\n        var span1 = dom.append(container, dom.$('span'));\n        span1.textContent = messages_1.default.MARKERS_PANEL_NO_PROBLEMS_FILE_EXCLUSIONS_FILTER;\n        var link = dom.append(container, dom.$('a.messageAction'));\n        link.textContent = nls_1.localize('disableFilesExclude', \"Disable Files Exclude Filter.\");\n        link.setAttribute('tabIndex', '0');\n        dom.addStandardDisposableListener(link, dom.EventType.CLICK, function () { return _this.filterAction.useFilesExclude = false; });\n        dom.addStandardDisposableListener(link, dom.EventType.KEY_DOWN, function (e) {\n            if (e.equals(keyCodes_1.KeyCode.Enter) || e.equals(keyCodes_1.KeyCode.Space)) {\n                _this.filterAction.useFilesExclude = false;\n                e.stopPropagation();\n            }\n        });\n        this.ariaLabelElement.setAttribute('aria-label', messages_1.default.MARKERS_PANEL_NO_PROBLEMS_FILE_EXCLUSIONS_FILTER);\n    };\n    MarkersPanel.prototype.renderFilteredByFilterMessage = function (container) {\n        var _this = this;\n        var span1 = dom.append(container, dom.$('span'));\n        span1.textContent = messages_1.default.MARKERS_PANEL_NO_PROBLEMS_FILTERS;\n        var link = dom.append(container, dom.$('a.messageAction'));\n        link.textContent = nls_1.localize('clearFilter', \"Clear Filter.\");\n        link.setAttribute('tabIndex', '0');\n        dom.addStandardDisposableListener(link, dom.EventType.CLICK, function () { return _this.filterAction.filterText = ''; });\n        dom.addStandardDisposableListener(link, dom.EventType.KEY_DOWN, function (e) {\n            if (e.equals(keyCodes_1.KeyCode.Enter) || e.equals(keyCodes_1.KeyCode.Space)) {\n                _this.filterAction.filterText = '';\n                e.stopPropagation();\n            }\n        });\n        this.ariaLabelElement.setAttribute('aria-label', messages_1.default.MARKERS_PANEL_NO_PROBLEMS_FILTERS);\n    };\n    MarkersPanel.prototype.renderNoProblemsMessage = function (container) {\n        var span = dom.append(container, dom.$('span'));\n        span.textContent = messages_1.default.MARKERS_PANEL_NO_PROBLEMS_BUILT;\n        this.ariaLabelElement.setAttribute('aria-label', messages_1.default.MARKERS_PANEL_NO_PROBLEMS_BUILT);\n    };\n    MarkersPanel.prototype.autoReveal = function (focus) {\n        if (focus === void 0) { focus = false; }\n        var autoReveal = this.configurationService.getValue('problems.autoReveal');\n        if (typeof autoReveal === 'boolean' && autoReveal) {\n            this.revealMarkersForCurrentActiveEditor(focus);\n        }\n    };\n    MarkersPanel.prototype.revealMarkersForCurrentActiveEditor = function (focus) {\n        if (focus === void 0) { focus = false; }\n        var currentActiveResource = this.getResourceForCurrentActiveResource();\n        if (currentActiveResource) {\n            if (!this.tree.isCollapsed(currentActiveResource) && this.hasSelectedMarkerFor(currentActiveResource)) {\n                this.tree.reveal(this.tree.getSelection()[0], this.lastSelectedRelativeTop);\n                if (focus) {\n                    this.tree.setFocus(this.tree.getSelection());\n                }\n            }\n            else {\n                this.tree.expand(currentActiveResource);\n                this.tree.reveal(currentActiveResource, 0);\n                if (focus) {\n                    this.tree.setFocus([currentActiveResource]);\n                    this.tree.setSelection([currentActiveResource]);\n                }\n            }\n        }\n        else if (focus) {\n            this.tree.setSelection([]);\n            this.tree.focusFirst();\n        }\n    };\n    MarkersPanel.prototype.getResourceForCurrentActiveResource = function () {\n        return this.currentActiveResource ? this.markersWorkbenchService.markersModel.getResourceMarkers(this.currentActiveResource) : null;\n    };\n    MarkersPanel.prototype.hasSelectedMarkerFor = function (resource) {\n        var selectedElement = this.tree.getSelection();\n        if (selectedElement && selectedElement.length > 0) {\n            if (selectedElement[0] instanceof markersModel_1.Marker) {\n                if (resource.resource.toString() === selectedElement[0].marker.resource.toString()) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    MarkersPanel.prototype.updateRangeHighlights = function () {\n        this.rangeHighlightDecorations.removeHighlightRange();\n        if (this.tree.getHTMLElement() === document.activeElement) {\n            this.highlightCurrentSelectedMarkerRange();\n        }\n    };\n    MarkersPanel.prototype.highlightCurrentSelectedMarkerRange = function () {\n        var selections = this.tree.getSelection();\n        if (selections.length !== 1) {\n            return;\n        }\n        var selection = selections[0];\n        if (!(selection instanceof markersModel_1.Marker)) {\n            return;\n        }\n        this.rangeHighlightDecorations.highlightRange(selection);\n    };\n    MarkersPanel.prototype.onContextMenu = function (e) {\n        var _this = this;\n        var element = e.element;\n        if (!element) {\n            return;\n        }\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this.contextMenuService.showContextMenu({\n            getAnchor: function () { return e.anchor; },\n            getActions: function () { return _this.getMenuActions(element); },\n            getActionItem: function (action) {\n                var keybinding = _this.keybindingService.lookupKeybinding(action.id);\n                if (keybinding) {\n                    return new actionbar_1.ActionItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n                }\n                return undefined;\n            },\n            onHide: function (wasCancelled) {\n                if (wasCancelled) {\n                    _this.tree.domFocus();\n                }\n            }\n        });\n    };\n    MarkersPanel.prototype.getMenuActions = function (element) {\n        var result = [];\n        if (element instanceof markersModel_1.Marker) {\n            var viewModel = this.markersViewModel.getViewModel(element);\n            if (viewModel) {\n                var quickFixActions = viewModel.quickFixAction.quickFixes;\n                if (quickFixActions.length) {\n                    result.push.apply(result, quickFixActions);\n                    result.push(new actionbar_1.Separator());\n                }\n            }\n        }\n        var menu = this.menuService.createMenu(actions_2.MenuId.ProblemsPanelContext, this.tree.contextKeyService);\n        var groups = menu.getActions();\n        menu.dispose();\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var group = groups_1[_i];\n            var actions = group[1];\n            result.push.apply(result, actions);\n            result.push(new actionbar_1.Separator());\n        }\n        result.pop(); // remove last separator\n        return result;\n    };\n    MarkersPanel.prototype.getFocusElement = function () {\n        return this.tree.getFocus()[0];\n    };\n    MarkersPanel.prototype.getActionItem = function (action) {\n        if (action.id === markersPanelActions_1.MarkersFilterAction.ID) {\n            this.filterInputActionItem = this.instantiationService.createInstance(markersPanelActions_1.MarkersFilterActionItem, this.filterAction, this);\n            return this.filterInputActionItem;\n        }\n        return _super.prototype.getActionItem.call(this, action);\n    };\n    MarkersPanel.prototype.getFilterOptions = function () {\n        return this.filter.options;\n    };\n    MarkersPanel.prototype.getFilterStats = function () {\n        if (!this.cachedFilterStats) {\n            this.cachedFilterStats = this.computeFilterStats();\n        }\n        return this.cachedFilterStats;\n    };\n    MarkersPanel.prototype.computeFilterStats = function () {\n        var root = this.tree.getNode();\n        var total = 0;\n        var filtered = 0;\n        for (var _i = 0, _a = root.children; _i < _a.length; _i++) {\n            var resourceMarkerNode = _a[_i];\n            for (var _b = 0, _c = resourceMarkerNode.children; _b < _c.length; _b++) {\n                var markerNode = _c[_b];\n                total++;\n                if (resourceMarkerNode.visible && markerNode.visible) {\n                    filtered++;\n                }\n            }\n        }\n        return { total: total, filtered: filtered };\n    };\n    MarkersPanel.prototype.getTelemetryData = function (_a) {\n        var source = _a.source, code = _a.code;\n        return { source: source, code: code };\n    };\n    MarkersPanel.prototype.saveState = function () {\n        this.panelState['filter'] = this.filterAction.filterText;\n        this.panelState['filterHistory'] = this.filterAction.filterHistory;\n        this.panelState['useFilesExclude'] = this.filterAction.useFilesExclude;\n        this.panelState['multiline'] = this.markersViewModel.multiline;\n        _super.prototype.saveState.call(this);\n    };\n    MarkersPanel.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.tree.dispose();\n        this.markersViewModel.dispose();\n        this.disposables = lifecycle_1.dispose(this.disposables);\n    };\n    MarkersPanel = tslib_1.__decorate([\n        tslib_1.__param(0, instantiation_1.IInstantiationService),\n        tslib_1.__param(1, editorService_1.IEditorService),\n        tslib_1.__param(2, configuration_1.IConfigurationService),\n        tslib_1.__param(3, telemetry_1.ITelemetryService),\n        tslib_1.__param(4, themeService_1.IThemeService),\n        tslib_1.__param(5, markers_1.IMarkersWorkbenchService),\n        tslib_1.__param(6, storage_1.IStorageService),\n        tslib_1.__param(7, contextkey_1.IContextKeyService),\n        tslib_1.__param(8, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(9, contextView_1.IContextMenuService),\n        tslib_1.__param(10, actions_2.IMenuService),\n        tslib_1.__param(11, keybinding_1.IKeybindingService)\n    ], MarkersPanel);\n    return MarkersPanel;\n}(panel_1.Panel));\nexports.MarkersPanel = MarkersPanel;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanel.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanel.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/markers';\n\nimport { URI } from 'vs/base/common/uri';\nimport * as dom from 'vs/base/browser/dom';\nimport { IAction, IActionItem, Action } from 'vs/base/common/actions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { Panel } from 'vs/workbench/browser/panel';\nimport { IEditorService, SIDE_GROUP, ACTIVE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport Constants from 'vs/workbench/contrib/markers/browser/constants';\nimport { Marker, ResourceMarkers, RelatedInformation, MarkersModel } from 'vs/workbench/contrib/markers/browser/markersModel';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { MarkersFilterActionItem, MarkersFilterAction, IMarkersFilterActionChangeEvent, IMarkerFilterController } from 'vs/workbench/contrib/markers/browser/markersPanelActions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport Messages from 'vs/workbench/contrib/markers/browser/messages';\nimport { RangeHighlightDecorations } from 'vs/workbench/browser/parts/editor/rangeDecorations';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { IMarkersWorkbenchService } from 'vs/workbench/contrib/markers/browser/markers';\nimport { IStorageService, StorageScope } from 'vs/platform/storage/common/storage';\nimport { localize } from 'vs/nls';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { Iterator } from 'vs/base/common/iterator';\nimport { ITreeElement, ITreeNode, ITreeContextMenuEvent } from 'vs/base/browser/ui/tree/tree';\nimport { Relay, Event, Emitter } from 'vs/base/common/event';\nimport { WorkbenchObjectTree, TreeResourceNavigator2 } from 'vs/platform/list/browser/listService';\nimport { FilterOptions } from 'vs/workbench/contrib/markers/browser/markersFilterOptions';\nimport { IExpression } from 'vs/base/common/glob';\nimport { deepClone } from 'vs/base/common/objects';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { FilterData, Filter, VirtualDelegate, ResourceMarkersRenderer, MarkerRenderer, RelatedInformationRenderer, TreeElement, MarkersTreeAccessibilityProvider, MarkersViewModel, ResourceDragAndDrop } from 'vs/workbench/contrib/markers/browser/markersTreeViewer';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { Separator, ActionItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { domEvent } from 'vs/base/browser/event';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { ResourceLabels } from 'vs/workbench/browser/labels';\nimport { IMarker } from 'vs/platform/markers/common/markers';\n\nfunction createModelIterator(model: MarkersModel): Iterator<ITreeElement<TreeElement>> {\n\tconst resourcesIt = Iterator.fromArray(model.resourceMarkers);\n\n\treturn Iterator.map(resourcesIt, m => {\n\t\tconst markersIt = Iterator.fromArray(m.markers);\n\n\t\tconst children = Iterator.map(markersIt, m => {\n\t\t\tconst relatedInformationIt = Iterator.from(m.relatedInformation);\n\t\t\tconst children = Iterator.map(relatedInformationIt, r => ({ element: r }));\n\n\t\t\treturn { element: m, children };\n\t\t});\n\n\t\treturn { element: m, children };\n\t});\n}\n\nexport class MarkersPanel extends Panel implements IMarkerFilterController {\n\n\tprivate lastSelectedRelativeTop: number = 0;\n\tprivate currentActiveResource: URI | null = null;\n\n\tprivate tree: WorkbenchObjectTree<TreeElement, FilterData>;\n\tprivate treeLabels: ResourceLabels;\n\tprivate rangeHighlightDecorations: RangeHighlightDecorations;\n\n\tprivate actions: IAction[];\n\tprivate collapseAllAction: IAction;\n\tprivate filterAction: MarkersFilterAction;\n\tprivate filterInputActionItem: MarkersFilterActionItem;\n\n\tprivate treeContainer: HTMLElement;\n\tprivate messageBoxContainer: HTMLElement;\n\tprivate ariaLabelElement: HTMLElement;\n\tprivate panelState: object;\n\tprivate panelFoucusContextKey: IContextKey<boolean>;\n\n\tprivate filter: Filter;\n\n\tprivate _onDidFilter = new Emitter<void>();\n\treadonly onDidFilter: Event<void> = this._onDidFilter.event;\n\tprivate cachedFilterStats: { total: number; filtered: number; } | undefined = undefined;\n\n\tprivate currentResourceGotAddedToMarkersData: boolean = false;\n\treadonly markersViewModel: MarkersViewModel;\n\tprivate disposables: IDisposable[] = [];\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IMarkersWorkbenchService private readonly markersWorkbenchService: IMarkersWorkbenchService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(Constants.MARKERS_PANEL_ID, telemetryService, themeService, storageService);\n\t\tthis.panelFoucusContextKey = Constants.MarkerPanelFocusContextKey.bindTo(contextKeyService);\n\t\tthis.panelState = this.getMemento(StorageScope.WORKSPACE);\n\t\tthis.markersViewModel = instantiationService.createInstance(MarkersViewModel, this.panelState['multiline']);\n\t\tthis.markersViewModel.onDidChange(this.onDidChangeViewState, this, this.disposables);\n\t\tthis.setCurrentActiveEditor();\n\t}\n\n\tpublic create(parent: HTMLElement): void {\n\t\tsuper.create(parent);\n\n\t\tthis.rangeHighlightDecorations = this._register(this.instantiationService.createInstance(RangeHighlightDecorations));\n\n\t\tdom.addClass(parent, 'markers-panel');\n\n\t\tconst container = dom.append(parent, dom.$('.markers-panel-container'));\n\n\t\tthis.createArialLabelElement(container);\n\t\tthis.createMessageBox(container);\n\t\tthis.createTree(container);\n\t\tthis.createActions();\n\t\tthis.createListeners();\n\n\t\tthis.updateFilter();\n\n\t\tthis._register(this.onDidFocus(() => this.panelFoucusContextKey.set(true)));\n\t\tthis._register(this.onDidBlur(() => this.panelFoucusContextKey.set(false)));\n\n\t\tthis._register(this.onDidChangeVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tthis.refreshPanel();\n\t\t\t} else {\n\t\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t\t}\n\t\t}));\n\n\t\tthis.render();\n\t}\n\n\tpublic getTitle(): string {\n\t\treturn Messages.MARKERS_PANEL_TITLE_PROBLEMS;\n\t}\n\n\tpublic layout(dimension: dom.Dimension): void {\n\t\tthis.treeContainer.style.height = `${dimension.height}px`;\n\t\tthis.tree.layout(dimension.height, dimension.width);\n\t\tif (this.filterInputActionItem) {\n\t\t\tthis.filterInputActionItem.toggleLayout(dimension.width < 1200);\n\t\t}\n\t}\n\n\tpublic focus(): void {\n\t\tif (this.tree.getHTMLElement() === document.activeElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.getHTMLElement().focus();\n\t}\n\n\tpublic focusFilter(): void {\n\t\tif (this.filterInputActionItem) {\n\t\t\tthis.filterInputActionItem.focus();\n\t\t}\n\t}\n\n\tpublic getActions(): IAction[] {\n\t\tif (!this.actions) {\n\t\t\tthis.createActions();\n\t\t}\n\t\treturn this.actions;\n\t}\n\n\tpublic showQuickFixes(marker: Marker): void {\n\t\tconst viewModel = this.markersViewModel.getViewModel(marker);\n\t\tif (viewModel) {\n\t\t\tviewModel.quickFixAction.run();\n\t\t}\n\t}\n\n\tpublic openFileAtElement(element: any, preserveFocus: boolean, sideByside: boolean, pinned: boolean): boolean {\n\t\tconst { resource, selection, event, data } = element instanceof Marker ? { resource: element.resource, selection: element.range, event: 'problems.selectDiagnostic', data: this.getTelemetryData(element.marker) } :\n\t\t\telement instanceof RelatedInformation ? { resource: element.raw.resource, selection: element.raw, event: 'problems.selectRelatedInformation', data: this.getTelemetryData(element.marker) } : { resource: null, selection: null, event: null, data: null };\n\t\tif (resource && selection && event) {\n\t\t\t/* __GDPR__\n\t\t\t\"problems.selectDiagnostic\" : {\n\t\t\t\t\"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t\t*/\n\t\t\t/* __GDPR__\n\t\t\t\t\"problems.selectRelatedInformation\" : {\n\t\t\t\t\t\"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryService.publicLog(event, data);\n\t\t\tthis.editorService.openEditor({\n\t\t\t\tresource,\n\t\t\t\toptions: {\n\t\t\t\t\tselection,\n\t\t\t\t\tpreserveFocus,\n\t\t\t\t\tpinned,\n\t\t\t\t\trevealIfVisible: true\n\t\t\t\t},\n\t\t\t}, sideByside ? SIDE_GROUP : ACTIVE_GROUP).then(editor => {\n\t\t\t\tif (editor && preserveFocus) {\n\t\t\t\t\tthis.rangeHighlightDecorations.highlightRange({ resource, range: selection }, <ICodeEditor>editor.getControl());\n\t\t\t\t} else {\n\t\t\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate refreshPanel(marker?: Marker): void {\n\t\tif (this.isVisible()) {\n\t\t\tthis.cachedFilterStats = undefined;\n\n\t\t\tif (marker) {\n\t\t\t\tthis.tree.rerender(marker);\n\t\t\t} else {\n\t\t\t\tthis.tree.setChildren(null, createModelIterator(this.markersWorkbenchService.markersModel));\n\t\t\t}\n\n\t\t\tconst { total, filtered } = this.getFilterStats();\n\t\t\tdom.toggleClass(this.treeContainer, 'hidden', total === 0 || filtered === 0);\n\t\t\tthis.renderMessage();\n\t\t\tthis._onDidFilter.fire();\n\t\t}\n\t}\n\n\tprivate onDidChangeViewState(marker?: Marker): void {\n\t\tthis.refreshPanel(marker);\n\t}\n\n\tprivate updateFilter() {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.filter.options = new FilterOptions(this.filterAction.filterText, this.getFilesExcludeExpressions());\n\t\tthis.tree.refilter();\n\t\tthis._onDidFilter.fire();\n\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\tdom.toggleClass(this.treeContainer, 'hidden', total === 0 || filtered === 0);\n\t\tthis.renderMessage();\n\t}\n\n\tprivate getFilesExcludeExpressions(): { root: URI, expression: IExpression }[] | IExpression {\n\t\tif (!this.filterAction.useFilesExclude) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst workspaceFolders = this.workspaceContextService.getWorkspace().folders;\n\t\treturn workspaceFolders.length\n\t\t\t? workspaceFolders.map(workspaceFolder => ({ root: workspaceFolder.uri, expression: this.getFilesExclude(workspaceFolder.uri) }))\n\t\t\t: this.getFilesExclude();\n\t}\n\n\tprivate getFilesExclude(resource?: URI): IExpression {\n\t\treturn deepClone(this.configurationService.getValue('files.exclude', { resource })) || {};\n\t}\n\n\tprivate createMessageBox(parent: HTMLElement): void {\n\t\tthis.messageBoxContainer = dom.append(parent, dom.$('.message-box-container'));\n\t\tthis.messageBoxContainer.setAttribute('aria-labelledby', 'markers-panel-arialabel');\n\t}\n\n\tprivate createArialLabelElement(parent: HTMLElement): void {\n\t\tthis.ariaLabelElement = dom.append(parent, dom.$(''));\n\t\tthis.ariaLabelElement.setAttribute('id', 'markers-panel-arialabel');\n\t\tthis.ariaLabelElement.setAttribute('aria-live', 'polite');\n\t}\n\n\tprivate createTree(parent: HTMLElement): void {\n\t\tthis.treeContainer = dom.append(parent, dom.$('.tree-container.show-file-icons'));\n\n\t\tconst onDidChangeRenderNodeCount = new Relay<ITreeNode<any, any>>();\n\n\t\tthis.treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, this));\n\n\t\tconst virtualDelegate = new VirtualDelegate(this.markersViewModel);\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(ResourceMarkersRenderer, this.treeLabels, onDidChangeRenderNodeCount.event),\n\t\t\tthis.instantiationService.createInstance(MarkerRenderer, this.markersViewModel),\n\t\t\tthis.instantiationService.createInstance(RelatedInformationRenderer)\n\t\t];\n\t\tthis.filter = new Filter(new FilterOptions());\n\t\tconst accessibilityProvider = this.instantiationService.createInstance(MarkersTreeAccessibilityProvider);\n\n\t\tconst identityProvider = {\n\t\t\tgetId(element: TreeElement) {\n\t\t\t\treturn element.hash;\n\t\t\t}\n\t\t};\n\n\t\tthis.tree = this.instantiationService.createInstance(WorkbenchObjectTree,\n\t\t\tthis.treeContainer,\n\t\t\tvirtualDelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\tfilter: this.filter,\n\t\t\t\taccessibilityProvider,\n\t\t\t\tidentityProvider,\n\t\t\t\tdnd: new ResourceDragAndDrop(this.instantiationService),\n\t\t\t\texpandOnlyOnTwistieClick: (e: TreeElement) => e instanceof Marker && e.relatedInformation.length > 0\n\t\t\t}\n\t\t) as any as WorkbenchObjectTree<TreeElement, FilterData>;\n\n\t\tonDidChangeRenderNodeCount.input = this.tree.onDidChangeRenderNodeCount;\n\n\t\tconst markerFocusContextKey = Constants.MarkerFocusContextKey.bindTo(this.tree.contextKeyService);\n\t\tconst relatedInformationFocusContextKey = Constants.RelatedInformationFocusContextKey.bindTo(this.tree.contextKeyService);\n\t\tthis._register(this.tree.onDidChangeFocus(focus => {\n\t\t\tmarkerFocusContextKey.set(focus.elements.some(e => e instanceof Marker));\n\t\t\trelatedInformationFocusContextKey.set(focus.elements.some(e => e instanceof RelatedInformation));\n\t\t}));\n\t\tconst focusTracker = this._register(dom.trackFocus(this.tree.getHTMLElement()));\n\t\tthis._register(focusTracker.onDidBlur(() => {\n\t\t\tmarkerFocusContextKey.set(false);\n\t\t\trelatedInformationFocusContextKey.set(false);\n\t\t}));\n\n\t\tconst markersNavigator = this._register(new TreeResourceNavigator2(this.tree, { openOnFocus: true }));\n\t\tthis._register(Event.debounce(markersNavigator.onDidOpenResource, (last, event) => event, 75, true)(options => {\n\t\t\tthis.openFileAtElement(options.element, !!options.editorOptions.preserveFocus, options.sideBySide, !!options.editorOptions.pinned);\n\t\t}));\n\t\tthis._register(this.tree.onDidChangeCollapseState(({ node }) => {\n\t\t\tconst { element } = node;\n\t\t\tif (element instanceof RelatedInformation && !node.collapsed) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\"problems.expandRelatedInformation\" : {\n\t\t\t\t\t\"source\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"code\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tthis.telemetryService.publicLog('problems.expandRelatedInformation', this.getTelemetryData(element.marker));\n\t\t\t}\n\t\t}));\n\n\t\tthis.tree.onContextMenu(this.onContextMenu, this, this._toDispose);\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (this.filterAction.useFilesExclude && e.affectsConfiguration('files.exclude')) {\n\t\t\t\tthis.updateFilter();\n\t\t\t}\n\t\t}));\n\n\t\t// move focus to input, whenever a key is pressed in the panel container\n\t\tthis._register(domEvent(parent, 'keydown')(e => {\n\t\t\tif (this.filterInputActionItem && this.keybindingService.mightProducePrintableCharacter(new StandardKeyboardEvent(e))) {\n\t\t\t\tthis.filterInputActionItem.focus();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.any<any>(this.tree.onDidChangeSelection, this.tree.onDidChangeFocus)(() => {\n\t\t\tconst elements = [...this.tree.getSelection(), ...this.tree.getFocus()];\n\t\t\tfor (const element of elements) {\n\t\t\t\tif (element instanceof Marker) {\n\t\t\t\t\tconst viewModel = this.markersViewModel.getViewModel(element);\n\t\t\t\t\tif (viewModel) {\n\t\t\t\t\t\tviewModel.showLightBulb();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate createActions(): void {\n\t\tthis.collapseAllAction = new Action('vs.tree.collapse', localize('collapseAll', \"Collapse All\"), 'monaco-tree-action collapse-all', true, async () => {\n\t\t\tthis.tree.collapseAll();\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.setFocus([]);\n\t\t\tthis.tree.getHTMLElement().focus();\n\t\t\tthis.tree.focusFirst();\n\t\t});\n\n\t\tthis.filterAction = this.instantiationService.createInstance(MarkersFilterAction, { filterText: this.panelState['filter'] || '', filterHistory: this.panelState['filterHistory'] || [], useFilesExclude: !!this.panelState['useFilesExclude'] });\n\t\tthis.actions = [this.filterAction, this.collapseAllAction];\n\t}\n\n\tprivate createListeners(): void {\n\t\tconst onModelOrActiveEditorChanged = Event.debounce<URI | true, { resources: URI[], activeEditorChanged: boolean }>(Event.any<any>(this.markersWorkbenchService.markersModel.onDidChange, Event.map(this.editorService.onDidActiveEditorChange, () => true)), (result, e) => {\n\t\t\tif (!result) {\n\t\t\t\tresult = {\n\t\t\t\t\tresources: [],\n\t\t\t\t\tactiveEditorChanged: false\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (e === true) {\n\t\t\t\tresult.activeEditorChanged = true;\n\t\t\t} else {\n\t\t\t\tresult.resources.push(e);\n\t\t\t}\n\t\t\treturn result;\n\t\t}, 0);\n\n\t\tthis._register(onModelOrActiveEditorChanged(({ resources, activeEditorChanged }) => {\n\t\t\tif (resources) {\n\t\t\t\tthis.onDidChangeModel(resources);\n\t\t\t}\n\t\t\tif (activeEditorChanged) {\n\t\t\t\tthis.onActiveEditorChanged();\n\t\t\t}\n\t\t}, this));\n\t\tthis._register(this.tree.onDidChangeSelection(() => this.onSelected()));\n\t\tthis._register(this.filterAction.onDidChange((event: IMarkersFilterActionChangeEvent) => {\n\t\t\tif (event.filterText || event.useFilesExclude) {\n\t\t\t\tthis.updateFilter();\n\t\t\t}\n\t\t}));\n\t\tthis.actions.forEach(a => this._register(a));\n\t}\n\n\tprivate onDidChangeModel(resources: URI[]) {\n\t\tfor (const resource of resources) {\n\t\t\tthis.markersViewModel.remove(resource);\n\t\t\tconst resourceMarkers = this.markersWorkbenchService.markersModel.getResourceMarkers(resource);\n\t\t\tif (resourceMarkers) {\n\t\t\t\tfor (const marker of resourceMarkers.markers) {\n\t\t\t\t\tthis.markersViewModel.add(marker);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.currentResourceGotAddedToMarkersData = this.currentResourceGotAddedToMarkersData || this.isCurrentResourceGotAddedToMarkersData(resources);\n\t\tthis.refreshPanel();\n\t\tthis.updateRangeHighlights();\n\t\tif (this.currentResourceGotAddedToMarkersData) {\n\t\t\tthis.autoReveal();\n\t\t\tthis.currentResourceGotAddedToMarkersData = false;\n\t\t}\n\t}\n\n\tprivate isCurrentResourceGotAddedToMarkersData(changedResources: URI[]) {\n\t\tconst currentlyActiveResource = this.currentActiveResource;\n\t\tif (!currentlyActiveResource) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resourceForCurrentActiveResource = this.getResourceForCurrentActiveResource();\n\t\tif (resourceForCurrentActiveResource) {\n\t\t\treturn false;\n\t\t}\n\t\treturn changedResources.some(r => r.toString() === currentlyActiveResource.toString());\n\t}\n\n\tprivate onActiveEditorChanged(): void {\n\t\tthis.setCurrentActiveEditor();\n\t\tthis.autoReveal();\n\t}\n\n\tprivate setCurrentActiveEditor(): void {\n\t\tconst activeEditor = this.editorService.activeEditor;\n\t\tthis.currentActiveResource = activeEditor ? activeEditor.getResource() : null;\n\t}\n\n\tprivate onSelected(): void {\n\t\tlet selection = this.tree.getSelection();\n\t\tif (selection && selection.length > 0) {\n\t\t\tthis.lastSelectedRelativeTop = this.tree.getRelativeTop(selection[0]) || 0;\n\t\t}\n\t}\n\n\tprivate render(): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.tree.setChildren(null, createModelIterator(this.markersWorkbenchService.markersModel));\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\tdom.toggleClass(this.treeContainer, 'hidden', total === 0 || filtered === 0);\n\t\tthis.renderMessage();\n\t}\n\n\tprivate renderMessage(): void {\n\t\tdom.clearNode(this.messageBoxContainer);\n\t\tconst { total, filtered } = this.getFilterStats();\n\n\t\tif (filtered === 0) {\n\t\t\tthis.messageBoxContainer.style.display = 'block';\n\t\t\tthis.messageBoxContainer.setAttribute('tabIndex', '0');\n\t\t\tif (total > 0) {\n\t\t\t\tif (this.filter.options.filter) {\n\t\t\t\t\tthis.renderFilteredByFilterMessage(this.messageBoxContainer);\n\t\t\t\t} else {\n\t\t\t\t\tthis.renderFilteredByFilesExcludeMessage(this.messageBoxContainer);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.renderNoProblemsMessage(this.messageBoxContainer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.messageBoxContainer.style.display = 'none';\n\t\t\tif (filtered === total) {\n\t\t\t\tthis.ariaLabelElement.setAttribute('aria-label', localize('No problems filtered', \"Showing {0} problems\", total));\n\t\t\t} else {\n\t\t\t\tthis.ariaLabelElement.setAttribute('aria-label', localize('problems filtered', \"Showing {0} of {1} problems\", filtered, total));\n\t\t\t}\n\t\t\tthis.messageBoxContainer.removeAttribute('tabIndex');\n\t\t}\n\t}\n\n\tprivate renderFilteredByFilesExcludeMessage(container: HTMLElement) {\n\t\tconst span1 = dom.append(container, dom.$('span'));\n\t\tspan1.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_FILE_EXCLUSIONS_FILTER;\n\t\tconst link = dom.append(container, dom.$('a.messageAction'));\n\t\tlink.textContent = localize('disableFilesExclude', \"Disable Files Exclude Filter.\");\n\t\tlink.setAttribute('tabIndex', '0');\n\t\tdom.addStandardDisposableListener(link, dom.EventType.CLICK, () => this.filterAction.useFilesExclude = false);\n\t\tdom.addStandardDisposableListener(link, dom.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\tif (e.equals(KeyCode.Enter) || e.equals(KeyCode.Space)) {\n\t\t\t\tthis.filterAction.useFilesExclude = false;\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t\tthis.ariaLabelElement.setAttribute('aria-label', Messages.MARKERS_PANEL_NO_PROBLEMS_FILE_EXCLUSIONS_FILTER);\n\t}\n\n\tprivate renderFilteredByFilterMessage(container: HTMLElement) {\n\t\tconst span1 = dom.append(container, dom.$('span'));\n\t\tspan1.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_FILTERS;\n\t\tconst link = dom.append(container, dom.$('a.messageAction'));\n\t\tlink.textContent = localize('clearFilter', \"Clear Filter.\");\n\t\tlink.setAttribute('tabIndex', '0');\n\t\tdom.addStandardDisposableListener(link, dom.EventType.CLICK, () => this.filterAction.filterText = '');\n\t\tdom.addStandardDisposableListener(link, dom.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\tif (e.equals(KeyCode.Enter) || e.equals(KeyCode.Space)) {\n\t\t\t\tthis.filterAction.filterText = '';\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t\tthis.ariaLabelElement.setAttribute('aria-label', Messages.MARKERS_PANEL_NO_PROBLEMS_FILTERS);\n\t}\n\n\tprivate renderNoProblemsMessage(container: HTMLElement) {\n\t\tconst span = dom.append(container, dom.$('span'));\n\t\tspan.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_BUILT;\n\t\tthis.ariaLabelElement.setAttribute('aria-label', Messages.MARKERS_PANEL_NO_PROBLEMS_BUILT);\n\t}\n\n\tprivate autoReveal(focus: boolean = false): void {\n\t\tlet autoReveal = this.configurationService.getValue<boolean>('problems.autoReveal');\n\t\tif (typeof autoReveal === 'boolean' && autoReveal) {\n\t\t\tthis.revealMarkersForCurrentActiveEditor(focus);\n\t\t}\n\t}\n\n\tprivate revealMarkersForCurrentActiveEditor(focus: boolean = false): void {\n\t\tlet currentActiveResource = this.getResourceForCurrentActiveResource();\n\t\tif (currentActiveResource) {\n\t\t\tif (!this.tree.isCollapsed(currentActiveResource) && this.hasSelectedMarkerFor(currentActiveResource)) {\n\t\t\t\tthis.tree.reveal(this.tree.getSelection()[0], this.lastSelectedRelativeTop);\n\t\t\t\tif (focus) {\n\t\t\t\t\tthis.tree.setFocus(this.tree.getSelection());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.tree.expand(currentActiveResource);\n\t\t\t\tthis.tree.reveal(currentActiveResource, 0);\n\n\t\t\t\tif (focus) {\n\t\t\t\t\tthis.tree.setFocus([currentActiveResource]);\n\t\t\t\t\tthis.tree.setSelection([currentActiveResource]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (focus) {\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.focusFirst();\n\t\t}\n\t}\n\n\tprivate getResourceForCurrentActiveResource(): ResourceMarkers | null {\n\t\treturn this.currentActiveResource ? this.markersWorkbenchService.markersModel.getResourceMarkers(this.currentActiveResource) : null;\n\t}\n\n\tprivate hasSelectedMarkerFor(resource: ResourceMarkers): boolean {\n\t\tlet selectedElement = this.tree.getSelection();\n\t\tif (selectedElement && selectedElement.length > 0) {\n\t\t\tif (selectedElement[0] instanceof Marker) {\n\t\t\t\tif (resource.resource.toString() === (<Marker>selectedElement[0]).marker.resource.toString()) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate updateRangeHighlights() {\n\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\tif (this.tree.getHTMLElement() === document.activeElement) {\n\t\t\tthis.highlightCurrentSelectedMarkerRange();\n\t\t}\n\t}\n\n\tprivate highlightCurrentSelectedMarkerRange() {\n\t\tconst selections = this.tree.getSelection();\n\n\t\tif (selections.length !== 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selection = selections[0];\n\n\t\tif (!(selection instanceof Marker)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.rangeHighlightDecorations.highlightRange(selection);\n\t}\n\n\tprivate onContextMenu(e: ITreeContextMenuEvent<TreeElement>): void {\n\t\tconst element = e.element;\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\te.browserEvent.preventDefault();\n\t\te.browserEvent.stopPropagation();\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor!,\n\t\t\tgetActions: () => this.getMenuActions(element),\n\t\t\tgetActionItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getMenuActions(element: TreeElement): IAction[] {\n\t\tconst result: IAction[] = [];\n\n\t\tif (element instanceof Marker) {\n\t\t\tconst viewModel = this.markersViewModel.getViewModel(element);\n\t\t\tif (viewModel) {\n\t\t\t\tconst quickFixActions = viewModel.quickFixAction.quickFixes;\n\t\t\t\tif (quickFixActions.length) {\n\t\t\t\t\tresult.push(...quickFixActions);\n\t\t\t\t\tresult.push(new Separator());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst menu = this.menuService.createMenu(MenuId.ProblemsPanelContext, this.tree.contextKeyService);\n\t\tconst groups = menu.getActions();\n\t\tmenu.dispose();\n\n\t\tfor (let group of groups) {\n\t\t\tconst [, actions] = group;\n\t\t\tresult.push(...actions);\n\t\t\tresult.push(new Separator());\n\t\t}\n\n\t\tresult.pop(); // remove last separator\n\t\treturn result;\n\t}\n\n\tpublic getFocusElement() {\n\t\treturn this.tree.getFocus()[0];\n\t}\n\n\tpublic getActionItem(action: IAction): IActionItem | undefined {\n\t\tif (action.id === MarkersFilterAction.ID) {\n\t\t\tthis.filterInputActionItem = this.instantiationService.createInstance(MarkersFilterActionItem, this.filterAction, this);\n\t\t\treturn this.filterInputActionItem;\n\t\t}\n\t\treturn super.getActionItem(action);\n\t}\n\n\tgetFilterOptions(): FilterOptions {\n\t\treturn this.filter.options;\n\t}\n\n\tgetFilterStats(): { total: number; filtered: number; } {\n\t\tif (!this.cachedFilterStats) {\n\t\t\tthis.cachedFilterStats = this.computeFilterStats();\n\t\t}\n\n\t\treturn this.cachedFilterStats;\n\t}\n\n\tprivate computeFilterStats(): { total: number; filtered: number; } {\n\t\tconst root = this.tree.getNode();\n\t\tlet total = 0;\n\t\tlet filtered = 0;\n\n\t\tfor (const resourceMarkerNode of root.children) {\n\t\t\tfor (const markerNode of resourceMarkerNode.children) {\n\t\t\t\ttotal++;\n\n\t\t\t\tif (resourceMarkerNode.visible && markerNode.visible) {\n\t\t\t\t\tfiltered++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { total, filtered };\n\t}\n\n\tprivate getTelemetryData({ source, code }: IMarker): any {\n\t\treturn { source, code };\n\t}\n\n\tprotected saveState(): void {\n\t\tthis.panelState['filter'] = this.filterAction.filterText;\n\t\tthis.panelState['filterHistory'] = this.filterAction.filterHistory;\n\t\tthis.panelState['useFilesExclude'] = this.filterAction.useFilesExclude;\n\t\tthis.panelState['multiline'] = this.markersViewModel.multiline;\n\n\t\tsuper.saveState();\n\t}\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.tree.dispose();\n\t\tthis.markersViewModel.dispose();\n\t\tthis.disposables = dispose(this.disposables);\n\t}\n}\n"]}]}