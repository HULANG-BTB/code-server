{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/splitview/panelview.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/splitview/panelview.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./panelview\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar event_1 = require(\"vs/base/common/event\");\nvar event_2 = require(\"vs/base/browser/event\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar dom_1 = require(\"vs/base/browser/dom\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar color_1 = require(\"vs/base/common/color\");\nvar splitview_1 = require(\"./splitview\");\n/**\n * A Panel is a structured SplitView view.\n *\n * WARNING: You must call `render()` after you contruct it.\n * It can't be done automatically at the end of the ctor\n * because of the order of property initialization in TypeScript.\n * Subclasses wouldn't be able to set own properties\n * before the `render()` call, thus forbiding their use.\n */\nvar Panel = /** @class */ (function () {\n    function Panel(options) {\n        if (options === void 0) { options = {}; }\n        this.expandedSize = undefined;\n        this._headerVisible = true;\n        this.styles = {};\n        this.animationTimer = undefined;\n        this._onDidChange = new event_1.Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this.disposables = [];\n        this._expanded = typeof options.expanded === 'undefined' ? true : !!options.expanded;\n        this.ariaHeaderLabel = options.ariaHeaderLabel || '';\n        this._minimumBodySize = typeof options.minimumBodySize === 'number' ? options.minimumBodySize : 120;\n        this._maximumBodySize = typeof options.maximumBodySize === 'number' ? options.maximumBodySize : Number.POSITIVE_INFINITY;\n        this.element = dom_1.$('.panel');\n    }\n    Object.defineProperty(Panel.prototype, \"draggableElement\", {\n        get: function () {\n            return this.header;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"dropTargetElement\", {\n        get: function () {\n            return this.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"dropBackground\", {\n        get: function () {\n            return this._dropBackground;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"minimumBodySize\", {\n        get: function () {\n            return this._minimumBodySize;\n        },\n        set: function (size) {\n            this._minimumBodySize = size;\n            this._onDidChange.fire(undefined);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"maximumBodySize\", {\n        get: function () {\n            return this._maximumBodySize;\n        },\n        set: function (size) {\n            this._maximumBodySize = size;\n            this._onDidChange.fire(undefined);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"headerSize\", {\n        get: function () {\n            return this.headerVisible ? Panel.HEADER_SIZE : 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"minimumSize\", {\n        get: function () {\n            var headerSize = this.headerSize;\n            var expanded = !this.headerVisible || this.isExpanded();\n            var minimumBodySize = expanded ? this._minimumBodySize : 0;\n            return headerSize + minimumBodySize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Panel.prototype, \"maximumSize\", {\n        get: function () {\n            var headerSize = this.headerSize;\n            var expanded = !this.headerVisible || this.isExpanded();\n            var maximumBodySize = expanded ? this._maximumBodySize : 0;\n            return headerSize + maximumBodySize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Panel.prototype.isExpanded = function () {\n        return this._expanded;\n    };\n    Panel.prototype.setExpanded = function (expanded) {\n        var _this = this;\n        if (this._expanded === !!expanded) {\n            return false;\n        }\n        this._expanded = !!expanded;\n        this.updateHeader();\n        if (expanded) {\n            if (typeof this.animationTimer === 'number') {\n                clearTimeout(this.animationTimer);\n            }\n            dom_1.append(this.element, this.body);\n        }\n        else {\n            this.animationTimer = window.setTimeout(function () {\n                _this.body.remove();\n            }, 200);\n        }\n        this._onDidChange.fire(expanded ? this.expandedSize : undefined);\n        return true;\n    };\n    Object.defineProperty(Panel.prototype, \"headerVisible\", {\n        get: function () {\n            return this._headerVisible;\n        },\n        set: function (visible) {\n            if (this._headerVisible === !!visible) {\n                return;\n            }\n            this._headerVisible = !!visible;\n            this.updateHeader();\n            this._onDidChange.fire(undefined);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Panel.prototype.render = function () {\n        var _this = this;\n        this.header = dom_1.$('.panel-header');\n        dom_1.append(this.element, this.header);\n        this.header.setAttribute('tabindex', '0');\n        this.header.setAttribute('role', 'toolbar');\n        this.header.setAttribute('aria-label', this.ariaHeaderLabel);\n        this.renderHeader(this.header);\n        var focusTracker = dom_1.trackFocus(this.header);\n        this.disposables.push(focusTracker);\n        focusTracker.onDidFocus(function () { return dom_1.addClass(_this.header, 'focused'); }, null, this.disposables);\n        focusTracker.onDidBlur(function () { return dom_1.removeClass(_this.header, 'focused'); }, null, this.disposables);\n        this.updateHeader();\n        var onHeaderKeyDown = event_1.Event.chain(event_2.domEvent(this.header, 'keydown'))\n            .map(function (e) { return new keyboardEvent_1.StandardKeyboardEvent(e); });\n        onHeaderKeyDown.filter(function (e) { return e.keyCode === keyCodes_1.KeyCode.Enter || e.keyCode === keyCodes_1.KeyCode.Space; })\n            .event(function () { return _this.setExpanded(!_this.isExpanded()); }, null, this.disposables);\n        onHeaderKeyDown.filter(function (e) { return e.keyCode === keyCodes_1.KeyCode.LeftArrow; })\n            .event(function () { return _this.setExpanded(false); }, null, this.disposables);\n        onHeaderKeyDown.filter(function (e) { return e.keyCode === keyCodes_1.KeyCode.RightArrow; })\n            .event(function () { return _this.setExpanded(true); }, null, this.disposables);\n        event_2.domEvent(this.header, 'click')(function () { return _this.setExpanded(!_this.isExpanded()); }, null, this.disposables);\n        this.body = dom_1.append(this.element, dom_1.$('.panel-body'));\n        this.renderBody(this.body);\n    };\n    Panel.prototype.layout = function (height) {\n        var headerSize = this.headerVisible ? Panel.HEADER_SIZE : 0;\n        if (this.isExpanded()) {\n            this.layoutBody(height - headerSize, this.width);\n            this.expandedSize = height;\n        }\n    };\n    Panel.prototype.style = function (styles) {\n        this.styles = styles;\n        if (!this.header) {\n            return;\n        }\n        this.updateHeader();\n    };\n    Panel.prototype.updateHeader = function () {\n        var expanded = !this.headerVisible || this.isExpanded();\n        this.header.style.height = this.headerSize + \"px\";\n        this.header.style.lineHeight = this.headerSize + \"px\";\n        dom_1.toggleClass(this.header, 'hidden', !this.headerVisible);\n        dom_1.toggleClass(this.header, 'expanded', expanded);\n        this.header.setAttribute('aria-expanded', String(expanded));\n        this.header.style.color = this.styles.headerForeground ? this.styles.headerForeground.toString() : null;\n        this.header.style.backgroundColor = this.styles.headerBackground ? this.styles.headerBackground.toString() : null;\n        this.header.style.borderTop = this.styles.headerBorder ? \"1px solid \" + this.styles.headerBorder : null;\n        this._dropBackground = this.styles.dropBackground;\n    };\n    Panel.prototype.dispose = function () {\n        this.disposables = lifecycle_1.dispose(this.disposables);\n        this._onDidChange.dispose();\n    };\n    Panel.HEADER_SIZE = 22;\n    return Panel;\n}());\nexports.Panel = Panel;\nvar PanelDraggable = /** @class */ (function (_super) {\n    tslib_1.__extends(PanelDraggable, _super);\n    function PanelDraggable(panel, dnd, context) {\n        var _this = _super.call(this) || this;\n        _this.panel = panel;\n        _this.dnd = dnd;\n        _this.context = context;\n        _this.dragOverCounter = 0; // see https://github.com/Microsoft/vscode/issues/14470\n        _this._onDidDrop = _this._register(new event_1.Emitter());\n        _this.onDidDrop = _this._onDidDrop.event;\n        panel.draggableElement.draggable = true;\n        _this._register(event_2.domEvent(panel.draggableElement, 'dragstart')(_this.onDragStart, _this));\n        _this._register(event_2.domEvent(panel.dropTargetElement, 'dragenter')(_this.onDragEnter, _this));\n        _this._register(event_2.domEvent(panel.dropTargetElement, 'dragleave')(_this.onDragLeave, _this));\n        _this._register(event_2.domEvent(panel.dropTargetElement, 'dragend')(_this.onDragEnd, _this));\n        _this._register(event_2.domEvent(panel.dropTargetElement, 'drop')(_this.onDrop, _this));\n        return _this;\n    }\n    PanelDraggable.prototype.onDragStart = function (e) {\n        if (!this.dnd.canDrag(this.panel) || !e.dataTransfer) {\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n        e.dataTransfer.effectAllowed = 'move';\n        var dragImage = dom_1.append(document.body, dom_1.$('.monaco-drag-image', {}, this.panel.draggableElement.textContent || ''));\n        e.dataTransfer.setDragImage(dragImage, -10, -10);\n        setTimeout(function () { return document.body.removeChild(dragImage); }, 0);\n        this.context.draggable = this;\n    };\n    PanelDraggable.prototype.onDragEnter = function (e) {\n        if (!this.context.draggable || this.context.draggable === this) {\n            return;\n        }\n        if (!this.dnd.canDrop(this.context.draggable.panel, this.panel)) {\n            return;\n        }\n        this.dragOverCounter++;\n        this.render();\n    };\n    PanelDraggable.prototype.onDragLeave = function (e) {\n        if (!this.context.draggable || this.context.draggable === this) {\n            return;\n        }\n        if (!this.dnd.canDrop(this.context.draggable.panel, this.panel)) {\n            return;\n        }\n        this.dragOverCounter--;\n        if (this.dragOverCounter === 0) {\n            this.render();\n        }\n    };\n    PanelDraggable.prototype.onDragEnd = function (e) {\n        if (!this.context.draggable) {\n            return;\n        }\n        this.dragOverCounter = 0;\n        this.render();\n        this.context.draggable = null;\n    };\n    PanelDraggable.prototype.onDrop = function (e) {\n        if (!this.context.draggable) {\n            return;\n        }\n        this.dragOverCounter = 0;\n        this.render();\n        if (this.dnd.canDrop(this.context.draggable.panel, this.panel) && this.context.draggable !== this) {\n            this._onDidDrop.fire({ from: this.context.draggable.panel, to: this.panel });\n        }\n        this.context.draggable = null;\n    };\n    PanelDraggable.prototype.render = function () {\n        var backgroundColor = null;\n        if (this.dragOverCounter > 0) {\n            backgroundColor = (this.panel.dropBackground || PanelDraggable.DefaultDragOverBackgroundColor).toString();\n        }\n        this.panel.dropTargetElement.style.backgroundColor = backgroundColor;\n    };\n    PanelDraggable.DefaultDragOverBackgroundColor = new color_1.Color(new color_1.RGBA(128, 128, 128, 0.5));\n    return PanelDraggable;\n}(lifecycle_1.Disposable));\nvar DefaultPanelDndController = /** @class */ (function () {\n    function DefaultPanelDndController() {\n    }\n    DefaultPanelDndController.prototype.canDrag = function (panel) {\n        return true;\n    };\n    DefaultPanelDndController.prototype.canDrop = function (panel, overPanel) {\n        return true;\n    };\n    return DefaultPanelDndController;\n}());\nexports.DefaultPanelDndController = DefaultPanelDndController;\nvar PanelView = /** @class */ (function (_super) {\n    tslib_1.__extends(PanelView, _super);\n    function PanelView(container, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.dndContext = { draggable: null };\n        _this.panelItems = [];\n        _this.animationTimer = undefined;\n        _this._onDidDrop = _this._register(new event_1.Emitter());\n        _this.onDidDrop = _this._onDidDrop.event;\n        _this.dnd = options.dnd;\n        _this.el = dom_1.append(container, dom_1.$('.monaco-panel-view'));\n        _this.splitview = _this._register(new splitview_1.SplitView(_this.el));\n        _this.onDidSashChange = _this.splitview.onDidSashChange;\n        return _this;\n    }\n    PanelView.prototype.addPanel = function (panel, size, index) {\n        if (index === void 0) { index = this.splitview.length; }\n        var disposables = [];\n        // https://github.com/Microsoft/vscode/issues/59950\n        var shouldAnimate = false;\n        disposables.push(dom_1.scheduleAtNextAnimationFrame(function () { return shouldAnimate = true; }));\n        event_1.Event.filter(panel.onDidChange, function () { return shouldAnimate; })(this.setupAnimation, this, disposables);\n        var panelItem = { panel: panel, disposable: lifecycle_1.combinedDisposable(disposables) };\n        this.panelItems.splice(index, 0, panelItem);\n        panel.width = this.width;\n        this.splitview.addView(panel, size, index);\n        if (this.dnd) {\n            var draggable = new PanelDraggable(panel, this.dnd, this.dndContext);\n            disposables.push(draggable);\n            draggable.onDidDrop(this._onDidDrop.fire, this._onDidDrop, disposables);\n        }\n    };\n    PanelView.prototype.removePanel = function (panel) {\n        var index = arrays_1.firstIndex(this.panelItems, function (item) { return item.panel === panel; });\n        if (index === -1) {\n            return;\n        }\n        this.splitview.removeView(index);\n        var panelItem = this.panelItems.splice(index, 1)[0];\n        panelItem.disposable.dispose();\n    };\n    PanelView.prototype.movePanel = function (from, to) {\n        var fromIndex = arrays_1.firstIndex(this.panelItems, function (item) { return item.panel === from; });\n        var toIndex = arrays_1.firstIndex(this.panelItems, function (item) { return item.panel === to; });\n        if (fromIndex === -1 || toIndex === -1) {\n            return;\n        }\n        var panelItem = this.panelItems.splice(fromIndex, 1)[0];\n        this.panelItems.splice(toIndex, 0, panelItem);\n        this.splitview.moveView(fromIndex, toIndex);\n    };\n    PanelView.prototype.resizePanel = function (panel, size) {\n        var index = arrays_1.firstIndex(this.panelItems, function (item) { return item.panel === panel; });\n        if (index === -1) {\n            return;\n        }\n        this.splitview.resizeView(index, size);\n    };\n    PanelView.prototype.getPanelSize = function (panel) {\n        var index = arrays_1.firstIndex(this.panelItems, function (item) { return item.panel === panel; });\n        if (index === -1) {\n            return -1;\n        }\n        return this.splitview.getViewSize(index);\n    };\n    PanelView.prototype.layout = function (height, width) {\n        this.width = width;\n        for (var _i = 0, _a = this.panelItems; _i < _a.length; _i++) {\n            var panelItem = _a[_i];\n            panelItem.panel.width = width;\n        }\n        this.splitview.layout(height);\n    };\n    PanelView.prototype.setupAnimation = function () {\n        var _this = this;\n        if (typeof this.animationTimer === 'number') {\n            window.clearTimeout(this.animationTimer);\n        }\n        dom_1.addClass(this.el, 'animated');\n        this.animationTimer = window.setTimeout(function () {\n            _this.animationTimer = undefined;\n            dom_1.removeClass(_this.el, 'animated');\n        }, 200);\n    };\n    PanelView.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.panelItems.forEach(function (i) { return i.disposable.dispose(); });\n    };\n    return PanelView;\n}(lifecycle_1.Disposable));\nexports.PanelView = PanelView;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/splitview/panelview.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/splitview/panelview.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./panelview';\nimport { IDisposable, dispose, combinedDisposable, Disposable } from 'vs/base/common/lifecycle';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { domEvent } from 'vs/base/browser/event';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { $, append, addClass, removeClass, toggleClass, trackFocus, scheduleAtNextAnimationFrame } from 'vs/base/browser/dom';\nimport { firstIndex } from 'vs/base/common/arrays';\nimport { Color, RGBA } from 'vs/base/common/color';\nimport { SplitView, IView } from './splitview';\n\nexport interface IPanelOptions {\n\tariaHeaderLabel?: string;\n\tminimumBodySize?: number;\n\tmaximumBodySize?: number;\n\texpanded?: boolean;\n}\n\nexport interface IPanelStyles {\n\tdropBackground?: Color;\n\theaderForeground?: Color;\n\theaderBackground?: Color;\n\theaderBorder?: Color;\n}\n\n/**\n * A Panel is a structured SplitView view.\n *\n * WARNING: You must call `render()` after you contruct it.\n * It can't be done automatically at the end of the ctor\n * because of the order of property initialization in TypeScript.\n * Subclasses wouldn't be able to set own properties\n * before the `render()` call, thus forbiding their use.\n */\nexport abstract class Panel implements IView {\n\n\tprivate static readonly HEADER_SIZE = 22;\n\n\treadonly element: HTMLElement;\n\tprivate header: HTMLElement;\n\tprivate body: HTMLElement;\n\n\tprotected _expanded: boolean;\n\n\tprivate expandedSize: number | undefined = undefined;\n\tprivate _headerVisible = true;\n\tprivate _minimumBodySize: number;\n\tprivate _maximumBodySize: number;\n\tprivate ariaHeaderLabel: string;\n\tprivate styles: IPanelStyles = {};\n\tprivate animationTimer: number | undefined = undefined;\n\n\tprivate _onDidChange = new Emitter<number | undefined>();\n\treadonly onDidChange: Event<number | undefined> = this._onDidChange.event;\n\n\tprotected disposables: IDisposable[] = [];\n\n\tget draggableElement(): HTMLElement {\n\t\treturn this.header;\n\t}\n\n\tget dropTargetElement(): HTMLElement {\n\t\treturn this.element;\n\t}\n\n\tprivate _dropBackground: Color | undefined;\n\tget dropBackground(): Color | undefined {\n\t\treturn this._dropBackground;\n\t}\n\n\tget minimumBodySize(): number {\n\t\treturn this._minimumBodySize;\n\t}\n\n\tset minimumBodySize(size: number) {\n\t\tthis._minimumBodySize = size;\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\tget maximumBodySize(): number {\n\t\treturn this._maximumBodySize;\n\t}\n\n\tset maximumBodySize(size: number) {\n\t\tthis._maximumBodySize = size;\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\tprivate get headerSize(): number {\n\t\treturn this.headerVisible ? Panel.HEADER_SIZE : 0;\n\t}\n\n\tget minimumSize(): number {\n\t\tconst headerSize = this.headerSize;\n\t\tconst expanded = !this.headerVisible || this.isExpanded();\n\t\tconst minimumBodySize = expanded ? this._minimumBodySize : 0;\n\n\t\treturn headerSize + minimumBodySize;\n\t}\n\n\tget maximumSize(): number {\n\t\tconst headerSize = this.headerSize;\n\t\tconst expanded = !this.headerVisible || this.isExpanded();\n\t\tconst maximumBodySize = expanded ? this._maximumBodySize : 0;\n\n\t\treturn headerSize + maximumBodySize;\n\t}\n\n\twidth: number;\n\n\tconstructor(options: IPanelOptions = {}) {\n\t\tthis._expanded = typeof options.expanded === 'undefined' ? true : !!options.expanded;\n\t\tthis.ariaHeaderLabel = options.ariaHeaderLabel || '';\n\t\tthis._minimumBodySize = typeof options.minimumBodySize === 'number' ? options.minimumBodySize : 120;\n\t\tthis._maximumBodySize = typeof options.maximumBodySize === 'number' ? options.maximumBodySize : Number.POSITIVE_INFINITY;\n\n\t\tthis.element = $('.panel');\n\t}\n\n\tisExpanded(): boolean {\n\t\treturn this._expanded;\n\t}\n\n\tsetExpanded(expanded: boolean): boolean {\n\t\tif (this._expanded === !!expanded) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._expanded = !!expanded;\n\t\tthis.updateHeader();\n\n\t\tif (expanded) {\n\t\t\tif (typeof this.animationTimer === 'number') {\n\t\t\t\tclearTimeout(this.animationTimer);\n\t\t\t}\n\t\t\tappend(this.element, this.body);\n\t\t} else {\n\t\t\tthis.animationTimer = window.setTimeout(() => {\n\t\t\t\tthis.body.remove();\n\t\t\t}, 200);\n\t\t}\n\n\t\tthis._onDidChange.fire(expanded ? this.expandedSize : undefined);\n\t\treturn true;\n\t}\n\n\tget headerVisible(): boolean {\n\t\treturn this._headerVisible;\n\t}\n\n\tset headerVisible(visible: boolean) {\n\t\tif (this._headerVisible === !!visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._headerVisible = !!visible;\n\t\tthis.updateHeader();\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\trender(): void {\n\t\tthis.header = $('.panel-header');\n\t\tappend(this.element, this.header);\n\t\tthis.header.setAttribute('tabindex', '0');\n\t\tthis.header.setAttribute('role', 'toolbar');\n\t\tthis.header.setAttribute('aria-label', this.ariaHeaderLabel);\n\t\tthis.renderHeader(this.header);\n\n\t\tconst focusTracker = trackFocus(this.header);\n\t\tthis.disposables.push(focusTracker);\n\t\tfocusTracker.onDidFocus(() => addClass(this.header, 'focused'), null, this.disposables);\n\t\tfocusTracker.onDidBlur(() => removeClass(this.header, 'focused'), null, this.disposables);\n\n\t\tthis.updateHeader();\n\n\t\tconst onHeaderKeyDown = Event.chain(domEvent(this.header, 'keydown'))\n\t\t\t.map(e => new StandardKeyboardEvent(e));\n\n\t\tonHeaderKeyDown.filter(e => e.keyCode === KeyCode.Enter || e.keyCode === KeyCode.Space)\n\t\t\t.event(() => this.setExpanded(!this.isExpanded()), null, this.disposables);\n\n\t\tonHeaderKeyDown.filter(e => e.keyCode === KeyCode.LeftArrow)\n\t\t\t.event(() => this.setExpanded(false), null, this.disposables);\n\n\t\tonHeaderKeyDown.filter(e => e.keyCode === KeyCode.RightArrow)\n\t\t\t.event(() => this.setExpanded(true), null, this.disposables);\n\n\t\tdomEvent(this.header, 'click')\n\t\t\t(() => this.setExpanded(!this.isExpanded()), null, this.disposables);\n\n\t\tthis.body = append(this.element, $('.panel-body'));\n\t\tthis.renderBody(this.body);\n\t}\n\n\tlayout(height: number): void {\n\t\tconst headerSize = this.headerVisible ? Panel.HEADER_SIZE : 0;\n\n\t\tif (this.isExpanded()) {\n\t\t\tthis.layoutBody(height - headerSize, this.width);\n\t\t\tthis.expandedSize = height;\n\t\t}\n\t}\n\n\tstyle(styles: IPanelStyles): void {\n\t\tthis.styles = styles;\n\n\t\tif (!this.header) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateHeader();\n\t}\n\n\tprotected updateHeader(): void {\n\t\tconst expanded = !this.headerVisible || this.isExpanded();\n\n\t\tthis.header.style.height = `${this.headerSize}px`;\n\t\tthis.header.style.lineHeight = `${this.headerSize}px`;\n\t\ttoggleClass(this.header, 'hidden', !this.headerVisible);\n\t\ttoggleClass(this.header, 'expanded', expanded);\n\t\tthis.header.setAttribute('aria-expanded', String(expanded));\n\n\t\tthis.header.style.color = this.styles.headerForeground ? this.styles.headerForeground.toString() : null;\n\t\tthis.header.style.backgroundColor = this.styles.headerBackground ? this.styles.headerBackground.toString() : null;\n\t\tthis.header.style.borderTop = this.styles.headerBorder ? `1px solid ${this.styles.headerBorder}` : null;\n\t\tthis._dropBackground = this.styles.dropBackground;\n\t}\n\n\tprotected abstract renderHeader(container: HTMLElement): void;\n\tprotected abstract renderBody(container: HTMLElement): void;\n\tprotected abstract layoutBody(height: number, width: number): void;\n\n\tdispose(): void {\n\t\tthis.disposables = dispose(this.disposables);\n\n\t\tthis._onDidChange.dispose();\n\t}\n}\n\ninterface IDndContext {\n\tdraggable: PanelDraggable | null;\n}\n\nclass PanelDraggable extends Disposable {\n\n\tprivate static readonly DefaultDragOverBackgroundColor = new Color(new RGBA(128, 128, 128, 0.5));\n\n\tprivate dragOverCounter = 0; // see https://github.com/Microsoft/vscode/issues/14470\n\n\tprivate _onDidDrop = this._register(new Emitter<{ from: Panel, to: Panel }>());\n\treadonly onDidDrop = this._onDidDrop.event;\n\n\tconstructor(private panel: Panel, private dnd: IPanelDndController, private context: IDndContext) {\n\t\tsuper();\n\n\t\tpanel.draggableElement.draggable = true;\n\t\tthis._register(domEvent(panel.draggableElement, 'dragstart')(this.onDragStart, this));\n\t\tthis._register(domEvent(panel.dropTargetElement, 'dragenter')(this.onDragEnter, this));\n\t\tthis._register(domEvent(panel.dropTargetElement, 'dragleave')(this.onDragLeave, this));\n\t\tthis._register(domEvent(panel.dropTargetElement, 'dragend')(this.onDragEnd, this));\n\t\tthis._register(domEvent(panel.dropTargetElement, 'drop')(this.onDrop, this));\n\t}\n\n\tprivate onDragStart(e: DragEvent): void {\n\t\tif (!this.dnd.canDrag(this.panel) || !e.dataTransfer) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\te.dataTransfer.effectAllowed = 'move';\n\n\t\tconst dragImage = append(document.body, $('.monaco-drag-image', {}, this.panel.draggableElement.textContent || ''));\n\t\te.dataTransfer.setDragImage(dragImage, -10, -10);\n\t\tsetTimeout(() => document.body.removeChild(dragImage), 0);\n\n\t\tthis.context.draggable = this;\n\t}\n\n\tprivate onDragEnter(e: DragEvent): void {\n\t\tif (!this.context.draggable || this.context.draggable === this) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.dnd.canDrop(this.context.draggable.panel, this.panel)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dragOverCounter++;\n\t\tthis.render();\n\t}\n\n\tprivate onDragLeave(e: DragEvent): void {\n\t\tif (!this.context.draggable || this.context.draggable === this) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.dnd.canDrop(this.context.draggable.panel, this.panel)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dragOverCounter--;\n\n\t\tif (this.dragOverCounter === 0) {\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\tprivate onDragEnd(e: DragEvent): void {\n\t\tif (!this.context.draggable) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dragOverCounter = 0;\n\t\tthis.render();\n\t\tthis.context.draggable = null;\n\t}\n\n\tprivate onDrop(e: DragEvent): void {\n\t\tif (!this.context.draggable) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dragOverCounter = 0;\n\t\tthis.render();\n\n\t\tif (this.dnd.canDrop(this.context.draggable.panel, this.panel) && this.context.draggable !== this) {\n\t\t\tthis._onDidDrop.fire({ from: this.context.draggable.panel, to: this.panel });\n\t\t}\n\n\t\tthis.context.draggable = null;\n\t}\n\n\tprivate render(): void {\n\t\tlet backgroundColor: string | null = null;\n\n\t\tif (this.dragOverCounter > 0) {\n\t\t\tbackgroundColor = (this.panel.dropBackground || PanelDraggable.DefaultDragOverBackgroundColor).toString();\n\t\t}\n\n\t\tthis.panel.dropTargetElement.style.backgroundColor = backgroundColor;\n\t}\n}\n\nexport interface IPanelDndController {\n\tcanDrag(panel: Panel): boolean;\n\tcanDrop(panel: Panel, overPanel: Panel): boolean;\n}\n\nexport class DefaultPanelDndController implements IPanelDndController {\n\n\tcanDrag(panel: Panel): boolean {\n\t\treturn true;\n\t}\n\n\tcanDrop(panel: Panel, overPanel: Panel): boolean {\n\t\treturn true;\n\t}\n}\n\nexport interface IPanelViewOptions {\n\tdnd?: IPanelDndController;\n}\n\ninterface IPanelItem {\n\tpanel: Panel;\n\tdisposable: IDisposable;\n}\n\nexport class PanelView extends Disposable {\n\n\tprivate dnd: IPanelDndController | undefined;\n\tprivate dndContext: IDndContext = { draggable: null };\n\tprivate el: HTMLElement;\n\tprivate panelItems: IPanelItem[] = [];\n\tprivate width: number;\n\tprivate splitview: SplitView;\n\tprivate animationTimer: number | undefined = undefined;\n\n\tprivate _onDidDrop = this._register(new Emitter<{ from: Panel, to: Panel }>());\n\treadonly onDidDrop: Event<{ from: Panel, to: Panel }> = this._onDidDrop.event;\n\n\treadonly onDidSashChange: Event<number>;\n\n\tconstructor(container: HTMLElement, options: IPanelViewOptions = {}) {\n\t\tsuper();\n\n\t\tthis.dnd = options.dnd;\n\t\tthis.el = append(container, $('.monaco-panel-view'));\n\t\tthis.splitview = this._register(new SplitView(this.el));\n\t\tthis.onDidSashChange = this.splitview.onDidSashChange;\n\t}\n\n\taddPanel(panel: Panel, size: number, index = this.splitview.length): void {\n\t\tconst disposables: IDisposable[] = [];\n\n\t\t// https://github.com/Microsoft/vscode/issues/59950\n\t\tlet shouldAnimate = false;\n\t\tdisposables.push(scheduleAtNextAnimationFrame(() => shouldAnimate = true));\n\n\t\tEvent.filter(panel.onDidChange, () => shouldAnimate)\n\t\t\t(this.setupAnimation, this, disposables);\n\n\t\tconst panelItem = { panel, disposable: combinedDisposable(disposables) };\n\t\tthis.panelItems.splice(index, 0, panelItem);\n\t\tpanel.width = this.width;\n\t\tthis.splitview.addView(panel, size, index);\n\n\t\tif (this.dnd) {\n\t\t\tconst draggable = new PanelDraggable(panel, this.dnd, this.dndContext);\n\t\t\tdisposables.push(draggable);\n\t\t\tdraggable.onDidDrop(this._onDidDrop.fire, this._onDidDrop, disposables);\n\t\t}\n\t}\n\n\tremovePanel(panel: Panel): void {\n\t\tconst index = firstIndex(this.panelItems, item => item.panel === panel);\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.splitview.removeView(index);\n\t\tconst panelItem = this.panelItems.splice(index, 1)[0];\n\t\tpanelItem.disposable.dispose();\n\t}\n\n\tmovePanel(from: Panel, to: Panel): void {\n\t\tconst fromIndex = firstIndex(this.panelItems, item => item.panel === from);\n\t\tconst toIndex = firstIndex(this.panelItems, item => item.panel === to);\n\n\t\tif (fromIndex === -1 || toIndex === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [panelItem] = this.panelItems.splice(fromIndex, 1);\n\t\tthis.panelItems.splice(toIndex, 0, panelItem);\n\n\t\tthis.splitview.moveView(fromIndex, toIndex);\n\t}\n\n\tresizePanel(panel: Panel, size: number): void {\n\t\tconst index = firstIndex(this.panelItems, item => item.panel === panel);\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.splitview.resizeView(index, size);\n\t}\n\n\tgetPanelSize(panel: Panel): number {\n\t\tconst index = firstIndex(this.panelItems, item => item.panel === panel);\n\n\t\tif (index === -1) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn this.splitview.getViewSize(index);\n\t}\n\n\tlayout(height: number, width: number): void {\n\t\tthis.width = width;\n\n\t\tfor (const panelItem of this.panelItems) {\n\t\t\tpanelItem.panel.width = width;\n\t\t}\n\n\t\tthis.splitview.layout(height);\n\t}\n\n\tprivate setupAnimation(): void {\n\t\tif (typeof this.animationTimer === 'number') {\n\t\t\twindow.clearTimeout(this.animationTimer);\n\t\t}\n\n\t\taddClass(this.el, 'animated');\n\n\t\tthis.animationTimer = window.setTimeout(() => {\n\t\t\tthis.animationTimer = undefined;\n\t\t\tremoveClass(this.el, 'animated');\n\t\t}, 200);\n\t}\n\n\tdispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.panelItems.forEach(i => i.disposable.dispose());\n\t}\n}\n"]}]}