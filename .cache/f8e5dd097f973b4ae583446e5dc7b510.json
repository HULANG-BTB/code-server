{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/packages/protocol/src/browser/modules/fs.ts","dependencies":[{"path":"/home/coding/workspace/packages/protocol/src/browser/modules/fs.ts","mtime":1555841535686},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"util\");\nvar proxy_1 = require(\"../../common/proxy\");\nvar stream_1 = require(\"./stream\");\n// tslint:disable no-any\n// tslint:disable completed-docs\nvar StatBatch = /** @class */ (function (_super) {\n    tslib_1.__extends(StatBatch, _super);\n    function StatBatch(proxy) {\n        var _this = _super.call(this) || this;\n        _this.proxy = proxy;\n        return _this;\n    }\n    StatBatch.prototype.remoteCall = function (batch) {\n        return this.proxy.statBatch(batch);\n    };\n    return StatBatch;\n}(proxy_1.Batch));\nvar LstatBatch = /** @class */ (function (_super) {\n    tslib_1.__extends(LstatBatch, _super);\n    function LstatBatch(proxy) {\n        var _this = _super.call(this) || this;\n        _this.proxy = proxy;\n        return _this;\n    }\n    LstatBatch.prototype.remoteCall = function (batch) {\n        return this.proxy.lstatBatch(batch);\n    };\n    return LstatBatch;\n}(proxy_1.Batch));\nvar ReaddirBatch = /** @class */ (function (_super) {\n    tslib_1.__extends(ReaddirBatch, _super);\n    function ReaddirBatch(proxy) {\n        var _this = _super.call(this) || this;\n        _this.proxy = proxy;\n        return _this;\n    }\n    ReaddirBatch.prototype.remoteCall = function (queue) {\n        return this.proxy.readdirBatch(queue);\n    };\n    return ReaddirBatch;\n}(proxy_1.Batch));\nvar Watcher = /** @class */ (function (_super) {\n    tslib_1.__extends(Watcher, _super);\n    function Watcher() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Watcher.prototype.close = function () {\n        this.catch(this.proxy.close());\n    };\n    Watcher.prototype.handleDisconnect = function () {\n        this.emit(\"close\");\n    };\n    return Watcher;\n}(proxy_1.ClientProxy));\nvar WriteStream = /** @class */ (function (_super) {\n    tslib_1.__extends(WriteStream, _super);\n    function WriteStream() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(WriteStream.prototype, \"bytesWritten\", {\n        get: function () {\n            throw new Error(\"not implemented\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WriteStream.prototype, \"path\", {\n        get: function () {\n            throw new Error(\"not implemented\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WriteStream.prototype.close = function () {\n        this.catch(this.proxy.close());\n    };\n    return WriteStream;\n}(stream_1.Writable));\nvar FsModule = /** @class */ (function () {\n    function FsModule(proxy) {\n        var _this = this;\n        this.proxy = proxy;\n        this.access = function (path, mode, callback) {\n            if (typeof mode === \"function\") {\n                callback = mode;\n                mode = undefined;\n            }\n            util_1.callbackify(_this.proxy.access)(path, mode, callback);\n        };\n        this.appendFile = function (path, data, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.proxy.appendFile)(path, data, options, callback);\n        };\n        this.chmod = function (path, mode, callback) {\n            util_1.callbackify(_this.proxy.chmod)(path, mode, callback);\n        };\n        this.chown = function (path, uid, gid, callback) {\n            util_1.callbackify(_this.proxy.chown)(path, uid, gid, callback);\n        };\n        this.close = function (fd, callback) {\n            util_1.callbackify(_this.proxy.close)(fd, callback);\n        };\n        this.copyFile = function (src, dest, flags, callback) {\n            if (typeof flags === \"function\") {\n                callback = flags;\n            }\n            util_1.callbackify(_this.proxy.copyFile)(src, dest, typeof flags !== \"function\" ? flags : undefined, callback);\n        };\n        this.createWriteStream = function (path, options) {\n            return new WriteStream(_this.proxy.createWriteStream(path, options));\n        };\n        this.exists = function (path, callback) {\n            _this.proxy.exists(path).then(function (exists) { return callback(exists); }).catch(function () { return callback(false); });\n        };\n        this.fchmod = function (fd, mode, callback) {\n            util_1.callbackify(_this.proxy.fchmod)(fd, mode, callback);\n        };\n        this.fchown = function (fd, uid, gid, callback) {\n            util_1.callbackify(_this.proxy.fchown)(fd, uid, gid, callback);\n        };\n        this.fdatasync = function (fd, callback) {\n            util_1.callbackify(_this.proxy.fdatasync)(fd, callback);\n        };\n        this.fstat = function (fd, callback) {\n            util_1.callbackify(_this.proxy.fstat)(fd, function (error, stats) {\n                callback(error, stats && new Stats(stats));\n            });\n        };\n        this.fsync = function (fd, callback) {\n            util_1.callbackify(_this.proxy.fsync)(fd, callback);\n        };\n        this.ftruncate = function (fd, len, callback) {\n            if (typeof len === \"function\") {\n                callback = len;\n                len = undefined;\n            }\n            util_1.callbackify(_this.proxy.ftruncate)(fd, len, callback);\n        };\n        this.futimes = function (fd, atime, mtime, callback) {\n            util_1.callbackify(_this.proxy.futimes)(fd, atime, mtime, callback);\n        };\n        this.lchmod = function (path, mode, callback) {\n            util_1.callbackify(_this.proxy.lchmod)(path, mode, callback);\n        };\n        this.lchown = function (path, uid, gid, callback) {\n            util_1.callbackify(_this.proxy.lchown)(path, uid, gid, callback);\n        };\n        this.link = function (existingPath, newPath, callback) {\n            util_1.callbackify(_this.proxy.link)(existingPath, newPath, callback);\n        };\n        this.lstat = function (path, callback) {\n            util_1.callbackify(_this.lstatBatch.add)({ path: path }, function (error, stats) {\n                callback(error, stats && new Stats(stats));\n            });\n        };\n        this.mkdir = function (path, mode, callback) {\n            if (typeof mode === \"function\") {\n                callback = mode;\n                mode = undefined;\n            }\n            util_1.callbackify(_this.proxy.mkdir)(path, mode, callback);\n        };\n        this.mkdtemp = function (prefix, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.proxy.mkdtemp)(prefix, options, callback);\n        };\n        this.open = function (path, flags, mode, callback) {\n            if (typeof mode === \"function\") {\n                callback = mode;\n                mode = undefined;\n            }\n            util_1.callbackify(_this.proxy.open)(path, flags, mode, callback);\n        };\n        this.read = function (fd, buffer, offset, length, position, callback) {\n            _this.proxy.read(fd, length, position).then(function (response) {\n                buffer.set(response.buffer, offset);\n                callback(undefined, response.bytesRead, response.buffer);\n            }).catch(function (error) {\n                callback(error, undefined, undefined);\n            });\n        };\n        this.readFile = function (path, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.proxy.readFile)(path, options, callback);\n        };\n        this.readdir = function (path, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.readdirBatch.add)({ path: path, options: options }, callback);\n        };\n        this.readlink = function (path, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.proxy.readlink)(path, options, callback);\n        };\n        this.realpath = function (path, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.proxy.realpath)(path, options, callback);\n        };\n        this.rename = function (oldPath, newPath, callback) {\n            util_1.callbackify(_this.proxy.rename)(oldPath, newPath, callback);\n        };\n        this.rmdir = function (path, callback) {\n            util_1.callbackify(_this.proxy.rmdir)(path, callback);\n        };\n        this.stat = function (path, callback) {\n            util_1.callbackify(_this.statBatch.add)({ path: path }, function (error, stats) {\n                callback(error, stats && new Stats(stats));\n            });\n        };\n        this.symlink = function (target, path, type, callback) {\n            if (typeof type === \"function\") {\n                callback = type;\n                type = undefined;\n            }\n            util_1.callbackify(_this.proxy.symlink)(target, path, type, callback);\n        };\n        this.truncate = function (path, len, callback) {\n            if (typeof len === \"function\") {\n                callback = len;\n                len = undefined;\n            }\n            util_1.callbackify(_this.proxy.truncate)(path, len, callback);\n        };\n        this.unlink = function (path, callback) {\n            util_1.callbackify(_this.proxy.unlink)(path, callback);\n        };\n        this.utimes = function (path, atime, mtime, callback) {\n            util_1.callbackify(_this.proxy.utimes)(path, atime, mtime, callback);\n        };\n        this.write = function (fd, buffer, offset, length, position, callback) {\n            if (typeof offset === \"function\") {\n                callback = offset;\n                offset = undefined;\n            }\n            if (typeof length === \"function\") {\n                callback = length;\n                length = undefined;\n            }\n            if (typeof position === \"function\") {\n                callback = position;\n                position = undefined;\n            }\n            _this.proxy.write(fd, buffer, offset, length, position).then(function (r) {\n                callback(undefined, r.bytesWritten, r.buffer);\n            }).catch(function (error) {\n                callback(error, undefined, undefined);\n            });\n        };\n        this.writeFile = function (path, data, options, callback) {\n            if (typeof options === \"function\") {\n                callback = options;\n                options = undefined;\n            }\n            util_1.callbackify(_this.proxy.writeFile)(path, data, options, callback);\n        };\n        this.watch = function (filename, options, listener) {\n            if (typeof options === \"function\") {\n                listener = options;\n                options = undefined;\n            }\n            var watcher = new Watcher(_this.proxy.watch(filename, options));\n            if (listener) {\n                watcher.on(\"change\", listener);\n            }\n            return watcher;\n        };\n        this.statBatch = new StatBatch(this.proxy);\n        this.lstatBatch = new LstatBatch(this.proxy);\n        this.readdirBatch = new ReaddirBatch(this.proxy);\n    }\n    return FsModule;\n}());\nexports.FsModule = FsModule;\nvar Stats = /** @class */ (function () {\n    function Stats(stats) {\n        this.stats = stats;\n    }\n    Object.defineProperty(Stats.prototype, \"dev\", {\n        get: function () { return this.stats.dev; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"ino\", {\n        get: function () { return this.stats.ino; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"mode\", {\n        get: function () { return this.stats.mode; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"nlink\", {\n        get: function () { return this.stats.nlink; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"uid\", {\n        get: function () { return this.stats.uid; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"gid\", {\n        get: function () { return this.stats.gid; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"rdev\", {\n        get: function () { return this.stats.rdev; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"size\", {\n        get: function () { return this.stats.size; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"blksize\", {\n        get: function () { return this.stats.blksize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"blocks\", {\n        get: function () { return this.stats.blocks; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"atime\", {\n        get: function () { return this.stats.atime; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"mtime\", {\n        get: function () { return this.stats.mtime; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"ctime\", {\n        get: function () { return this.stats.ctime; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"birthtime\", {\n        get: function () { return this.stats.birthtime; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"atimeMs\", {\n        get: function () { return this.stats.atimeMs; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"mtimeMs\", {\n        get: function () { return this.stats.mtimeMs; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"ctimeMs\", {\n        get: function () { return this.stats.ctimeMs; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Stats.prototype, \"birthtimeMs\", {\n        get: function () { return this.stats.birthtimeMs; },\n        enumerable: true,\n        configurable: true\n    });\n    Stats.prototype.isFile = function () { return this.stats._isFile; };\n    Stats.prototype.isDirectory = function () { return this.stats._isDirectory; };\n    Stats.prototype.isBlockDevice = function () { return this.stats._isBlockDevice; };\n    Stats.prototype.isCharacterDevice = function () { return this.stats._isCharacterDevice; };\n    Stats.prototype.isSymbolicLink = function () { return this.stats._isSymbolicLink; };\n    Stats.prototype.isFIFO = function () { return this.stats._isFIFO; };\n    Stats.prototype.isSocket = function () { return this.stats._isSocket; };\n    Stats.prototype.toObject = function () {\n        return JSON.parse(JSON.stringify(this));\n    };\n    return Stats;\n}());\n",{"version":3,"file":"/home/coding/workspace/packages/protocol/src/browser/modules/fs.ts","sourceRoot":"","sources":["/home/coding/workspace/packages/protocol/src/browser/modules/fs.ts"],"names":[],"mappings":";;;AACA,6BAAmC;AACnC,4CAAwD;AAGxD,mCAAqC;AAErC,wBAAwB;AACxB,gCAAgC;AAEhC;IAAwB,qCAAoC;IAC3D,mBAAoC,KAAoB;QAAxD,YACC,iBAAO,SACP;QAFmC,WAAK,GAAL,KAAK,CAAe;;IAExD,CAAC;IAES,8BAAU,GAApB,UAAqB,KAA8B;QAClD,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACpC,CAAC;IACF,gBAAC;AAAD,CAAC,AARD,CAAwB,aAAK,GAQ5B;AAED;IAAyB,sCAAoC;IAC5D,oBAAoC,KAAoB;QAAxD,YACC,iBAAO,SACP;QAFmC,WAAK,GAAL,KAAK,CAAe;;IAExD,CAAC;IAES,+BAAU,GAApB,UAAqB,KAA8B;QAClD,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC;IACF,iBAAC;AAAD,CAAC,AARD,CAAyB,aAAK,GAQ7B;AAED;IAA2B,wCAA0F;IACpH,sBAAoC,KAAoB;QAAxD,YACC,iBAAO,SACP;QAFmC,WAAK,GAAL,KAAK,CAAe;;IAExD,CAAC;IAES,iCAAU,GAApB,UAAqB,KAAyD;QAC7E,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC;IACF,mBAAC;AAAD,CAAC,AARD,CAA2B,aAAK,GAQ/B;AAED;IAAsB,mCAAyB;IAA/C;;IAQA,CAAC;IAPO,uBAAK,GAAZ;QACC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;IAChC,CAAC;IAES,kCAAgB,GAA1B;QACC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpB,CAAC;IACF,cAAC;AAAD,CAAC,AARD,CAAsB,mBAAW,GAQhC;AAED;IAA0B,uCAA0B;IAApD;;IAYA,CAAC;IAXA,sBAAW,qCAAY;aAAvB;YACC,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACpC,CAAC;;;OAAA;IAED,sBAAW,6BAAI;aAAf;YACC,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACpC,CAAC;;;OAAA;IAEM,2BAAK,GAAZ;QACC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;IAChC,CAAC;IACF,kBAAC;AAAD,CAAC,AAZD,CAA0B,iBAAQ,GAYjC;AAED;IAKC,kBAAoC,KAAoB;QAAxD,iBAIC;QAJmC,UAAK,GAAL,KAAK,CAAe;QAMjD,WAAM,GAAG,UAAC,IAAiB,EAAE,IAAiE,EAAE,QAA+C;YACrJ,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBAC/B,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,GAAG,SAAS,CAAC;aACjB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QACvD,CAAC,CAAA;QAEM,eAAU,GAAG,UAAC,IAA0B,EAAE,IAAS,EAAE,OAAsE,EAAE,QAA+C;YAClL,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QACpE,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,IAAiB,EAAE,IAAqB,EAAE,QAA8C;YACvG,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QACtD,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,IAAiB,EAAE,GAAW,EAAE,GAAW,EAAE,QAA8C;YAC1G,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,QAAS,CAAC,CAAC;QAC1D,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,EAAU,EAAE,QAA8C;YACzE,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,QAAS,CAAC,CAAC;QAC9C,CAAC,CAAA;QAEM,aAAQ,GAAG,UAAC,GAAgB,EAAE,IAAiB,EAAE,KAAsD,EAAE,QAA+C;YAC9J,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;gBAChC,QAAQ,GAAG,KAAK,CAAC;aACjB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAC/B,GAAG,EAAE,IAAI,EAAE,OAAO,KAAK,KAAK,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,EAAE,QAAS,CACrE,CAAC;QACH,CAAC,CAAA;QAEM,sBAAiB,GAAG,UAAC,IAAiB,EAAE,OAAa;YAC3D,OAAO,IAAI,WAAW,CAAC,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QACrE,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,IAAiB,EAAE,QAAmC;YACtE,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM,IAAK,OAAA,QAAQ,CAAC,MAAM,CAAC,EAAhB,CAAgB,CAAC,CAAC,KAAK,CAAC,cAAM,OAAA,QAAQ,CAAC,KAAK,CAAC,EAAf,CAAe,CAAC,CAAC;QACzF,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,EAAU,EAAE,IAAqB,EAAE,QAA8C;YACjG,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QACrD,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,EAAU,EAAE,GAAW,EAAE,GAAW,EAAE,QAA8C;YACpG,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,QAAS,CAAC,CAAC;QACzD,CAAC,CAAA;QAEM,cAAS,GAAG,UAAC,EAAU,EAAE,QAA8C;YAC7E,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,QAAS,CAAC,CAAC;QAClD,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,EAAU,EAAE,QAA+D;YAC1F,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,UAAC,KAAK,EAAE,KAAK;gBAC9C,QAAQ,CAAC,KAAK,EAAE,KAAK,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;QACJ,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,EAAU,EAAE,QAA8C;YACzE,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,QAAS,CAAC,CAAC;QAC9C,CAAC,CAAA;QAEM,cAAS,GAAG,UAAC,EAAU,EAAE,GAAuE,EAAE,QAA+C;YACvJ,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE;gBAC9B,QAAQ,GAAG,GAAG,CAAC;gBACf,GAAG,GAAG,SAAS,CAAC;aAChB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE,QAAS,CAAC,CAAC;QACvD,CAAC,CAAA;QAEM,YAAO,GAAG,UAAC,EAAU,EAAE,KAA6B,EAAE,KAA6B,EAAE,QAA8C;YACzI,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,QAAS,CAAC,CAAC;QAC9D,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,IAAiB,EAAE,IAAqB,EAAE,QAA8C;YACxG,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QACvD,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,IAAiB,EAAE,GAAW,EAAE,GAAW,EAAE,QAA8C;YAC3G,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,QAAS,CAAC,CAAC;QAC3D,CAAC,CAAA;QAEM,SAAI,GAAG,UAAC,YAAyB,EAAE,OAAoB,EAAE,QAA8C;YAC7G,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,YAAY,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QAChE,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,IAAiB,EAAE,QAA+D;YACjG,kBAAW,CAAC,KAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,MAAA,EAAE,EAAE,UAAC,KAAK,EAAE,KAAK;gBACvD,QAAQ,CAAC,KAAK,EAAE,KAAK,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;QACJ,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,IAAiB,EAAE,IAA2G,EAAE,QAA+C;YAC9L,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBAC/B,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,GAAG,SAAS,CAAC;aACjB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QACtD,CAAC,CAAA;QAEM,YAAO,GAAG,UAAC,MAAc,EAAE,OAAiC,EAAE,QAAwE;YAC5I,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QAC7D,CAAC,CAAA;QAEM,SAAI,GAAG,UAAC,IAAiB,EAAE,KAAsB,EAAE,IAA6F,EAAE,QAA2D;YACnN,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBAC/B,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,GAAG,SAAS,CAAC;aACjB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QAC5D,CAAC,CAAA;QAEM,SAAI,GAAG,UAAC,EAAU,EAAE,MAAc,EAAE,MAAc,EAAE,MAAc,EAAE,QAAuB,EAAE,QAAiF;YACpL,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBACnD,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;gBACpC,QAAQ,CAAC,SAAU,EAAE,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;YAC3D,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gBACd,QAAQ,CAAC,KAAK,EAAE,SAAU,EAAE,SAAU,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;QACJ,CAAC,CAAA;QAEM,aAAQ,GAAG,UAAC,IAA0B,EAAE,OAAiC,EAAE,QAAsE;YACvJ,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QAC5D,CAAC,CAAA;QAEM,YAAO,GAAG,UAAC,IAAiB,EAAE,OAAiC,EAAE,QAAyF;YAChK,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,MAAA,EAAE,OAAO,SAAA,EAAE,EAAE,QAAS,CAAC,CAAC;QAClE,CAAC,CAAA;QAEM,aAAQ,GAAG,UAAC,IAAiB,EAAE,OAAiC,EAAE,QAA4E;YACpJ,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QAC5D,CAAC,CAAA;QAEM,aAAQ,GAAG,UAAC,IAAiB,EAAE,OAAiC,EAAE,QAA8E;YACtJ,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QAC5D,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,OAAoB,EAAE,OAAoB,EAAE,QAA8C;YAC1G,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QAC7D,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,IAAiB,EAAE,QAA8C;YAChF,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,QAAS,CAAC,CAAC;QAChD,CAAC,CAAA;QAEM,SAAI,GAAG,UAAC,IAAiB,EAAE,QAA+D;YAChG,kBAAW,CAAC,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,MAAA,EAAE,EAAE,UAAC,KAAK,EAAE,KAAK;gBACtD,QAAQ,CAAC,KAAK,EAAE,KAAK,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;QACJ,CAAC,CAAA;QAEM,YAAO,GAAG,UAAC,MAAmB,EAAE,IAAiB,EAAE,IAAiF,EAAE,QAA+C;YAC3L,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBAC/B,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,GAAG,SAAS,CAAC;aACjB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,QAAS,CAAC,CAAC;QAChE,CAAC,CAAA;QAEM,aAAQ,GAAG,UAAC,IAAiB,EAAE,GAAuE,EAAE,QAA+C;YAC7J,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE;gBAC9B,QAAQ,GAAG,GAAG,CAAC;gBACf,GAAG,GAAG,SAAS,CAAC;aAChB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,QAAS,CAAC,CAAC;QACxD,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,IAAiB,EAAE,QAA8C;YACjF,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,QAAS,CAAC,CAAC;QACjD,CAAC,CAAA;QAEM,WAAM,GAAG,UAAC,IAAiB,EAAE,KAA6B,EAAE,KAA6B,EAAE,QAA8C;YAC/I,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,QAAS,CAAC,CAAC;QAC/D,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,EAAU,EAAE,MAAc,EAAE,MAAoG,EAAE,MAAoG,EAAE,QAAsG,EAAE,QAAgF;YAC/a,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;gBACjC,QAAQ,GAAG,MAAM,CAAC;gBAClB,MAAM,GAAG,SAAS,CAAC;aACnB;YACD,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;gBACjC,QAAQ,GAAG,MAAM,CAAC;gBAClB,MAAM,GAAG,SAAS,CAAC;aACnB;YACD,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;gBACnC,QAAQ,GAAG,QAAQ,CAAC;gBACpB,QAAQ,GAAG,SAAS,CAAC;aACrB;YACD,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;gBAC7D,QAAS,CAAC,SAAU,EAAE,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;YACjD,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gBACd,QAAS,CAAC,KAAK,EAAE,SAAU,EAAE,SAAU,CAAC,CAAC;YAC1C,CAAC,CAAC,CAAC;QACJ,CAAC,CAAA;QAEM,cAAS,GAAG,UAAC,IAA0B,EAAE,IAAS,EAAE,OAAiC,EAAE,QAA+C;YAC5I,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YACD,kBAAW,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,QAAS,CAAC,CAAC;QACnE,CAAC,CAAA;QAEM,UAAK,GAAG,UAAC,QAAqB,EAAE,OAAiF,EAAE,QAA+D;YACxL,IAAI,OAAO,OAAO,KAAK,UAAU,EAAE;gBAClC,QAAQ,GAAG,OAAO,CAAC;gBACnB,OAAO,GAAG,SAAS,CAAC;aACpB;YAED,IAAM,OAAO,GAAG,IAAI,OAAO,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;YACjE,IAAI,QAAQ,EAAE;gBACb,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;aAC/B;YAED,OAAO,OAAO,CAAC;QAChB,CAAC,CAAA;QArPA,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClD,CAAC;IAmPF,eAAC;AAAD,CAAC,AA5PD,IA4PC;AA5PY,4BAAQ;AA8PrB;IACC,eAAoC,KAAa;QAAb,UAAK,GAAL,KAAK,CAAQ;IAAG,CAAC;IAErD,sBAAW,sBAAG;aAAd,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;;OAAA;IACnD,sBAAW,sBAAG;aAAd,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;;OAAA;IACnD,sBAAW,uBAAI;aAAf,cAA4B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;;;OAAA;IACrD,sBAAW,wBAAK;aAAhB,cAA6B,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;;;OAAA;IACvD,sBAAW,sBAAG;aAAd,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;;OAAA;IACnD,sBAAW,sBAAG;aAAd,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;;OAAA;IACnD,sBAAW,uBAAI;aAAf,cAA4B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;;;OAAA;IACrD,sBAAW,uBAAI;aAAf,cAA4B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;;;OAAA;IACrD,sBAAW,0BAAO;aAAlB,cAA+B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;;;OAAA;IAC3D,sBAAW,yBAAM;aAAjB,cAA8B,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;;;OAAA;IACzD,sBAAW,wBAAK;aAAhB,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;;;OAAA;IACrD,sBAAW,wBAAK;aAAhB,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;;;OAAA;IACrD,sBAAW,wBAAK;aAAhB,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;;;OAAA;IACrD,sBAAW,4BAAS;aAApB,cAA+B,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;;;OAAA;IAC7D,sBAAW,0BAAO;aAAlB,cAA+B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;;;OAAA;IAC3D,sBAAW,0BAAO;aAAlB,cAA+B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;;;OAAA;IAC3D,sBAAW,0BAAO;aAAlB,cAA+B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;;;OAAA;IAC3D,sBAAW,8BAAW;aAAtB,cAAmC,OAAO,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;;;OAAA;IAC5D,sBAAM,GAAb,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAChD,2BAAW,GAAlB,cAAgC,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;IAC1D,6BAAa,GAApB,cAAkC,OAAO,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;IAC9D,iCAAiB,GAAxB,cAAsC,OAAO,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC;IACtE,8BAAc,GAArB,cAAmC,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;IAChE,sBAAM,GAAb,cAA2B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAChD,wBAAQ,GAAf,cAA6B,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;IAEpD,wBAAQ,GAAf;QACC,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IACzC,CAAC;IACF,YAAC;AAAD,CAAC,AAhCD,IAgCC","sourcesContent":["import * as fs from \"fs\";\nimport { callbackify } from \"util\";\nimport { ClientProxy, Batch } from \"../../common/proxy\";\nimport { IEncodingOptions, IEncodingOptionsCallback } from \"../../common/util\";\nimport { FsModuleProxy, Stats as IStats, WatcherProxy, WriteStreamProxy } from \"../../node/modules/fs\";\nimport { Writable  } from \"./stream\";\n\n// tslint:disable no-any\n// tslint:disable completed-docs\n\nclass StatBatch extends Batch<IStats, { path: fs.PathLike }> {\n\tpublic constructor(private readonly proxy: FsModuleProxy) {\n\t\tsuper();\n\t}\n\n\tprotected remoteCall(batch: { path: fs.PathLike }[]): Promise<(IStats | Error)[]> {\n\t\treturn this.proxy.statBatch(batch);\n\t}\n}\n\nclass LstatBatch extends Batch<IStats, { path: fs.PathLike }> {\n\tpublic constructor(private readonly proxy: FsModuleProxy) {\n\t\tsuper();\n\t}\n\n\tprotected remoteCall(batch: { path: fs.PathLike }[]): Promise<(IStats | Error)[]> {\n\t\treturn this.proxy.lstatBatch(batch);\n\t}\n}\n\nclass ReaddirBatch extends Batch<Buffer[] | fs.Dirent[] | string[], { path: fs.PathLike, options: IEncodingOptions }> {\n\tpublic constructor(private readonly proxy: FsModuleProxy) {\n\t\tsuper();\n\t}\n\n\tprotected remoteCall(queue: { path: fs.PathLike, options: IEncodingOptions }[]): Promise<(Buffer[] | fs.Dirent[] | string[] | Error)[]> {\n\t\treturn this.proxy.readdirBatch(queue);\n\t}\n}\n\nclass Watcher extends ClientProxy<WatcherProxy> implements fs.FSWatcher {\n\tpublic close(): void {\n\t\tthis.catch(this.proxy.close());\n\t}\n\n\tprotected handleDisconnect(): void {\n\t\tthis.emit(\"close\");\n\t}\n}\n\nclass WriteStream extends Writable<WriteStreamProxy> implements fs.WriteStream {\n\tpublic get bytesWritten(): number {\n\t\tthrow new Error(\"not implemented\");\n\t}\n\n\tpublic get path(): string | Buffer {\n\t\tthrow new Error(\"not implemented\");\n\t}\n\n\tpublic close(): void {\n\t\tthis.catch(this.proxy.close());\n\t}\n}\n\nexport class FsModule {\n\tprivate readonly statBatch: StatBatch;\n\tprivate readonly lstatBatch: LstatBatch;\n\tprivate readonly readdirBatch: ReaddirBatch;\n\n\tpublic constructor(private readonly proxy: FsModuleProxy) {\n\t\tthis.statBatch = new StatBatch(this.proxy);\n\t\tthis.lstatBatch = new LstatBatch(this.proxy);\n\t\tthis.readdirBatch = new ReaddirBatch(this.proxy);\n\t}\n\n\tpublic access = (path: fs.PathLike, mode: number | undefined | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof mode === \"function\") {\n\t\t\tcallback = mode;\n\t\t\tmode = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.access)(path, mode, callback!);\n\t}\n\n\tpublic appendFile = (path: fs.PathLike | number, data: any, options?: fs.WriteFileOptions | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.appendFile)(path, data, options, callback!);\n\t}\n\n\tpublic chmod = (path: fs.PathLike, mode: string | number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.chmod)(path, mode, callback!);\n\t}\n\n\tpublic chown = (path: fs.PathLike, uid: number, gid: number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.chown)(path, uid, gid, callback!);\n\t}\n\n\tpublic close = (fd: number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.close)(fd, callback!);\n\t}\n\n\tpublic copyFile = (src: fs.PathLike, dest: fs.PathLike, flags: number | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof flags === \"function\") {\n\t\t\tcallback = flags;\n\t\t}\n\t\tcallbackify(this.proxy.copyFile)(\n\t\t\tsrc, dest, typeof flags !== \"function\" ? flags : undefined, callback!,\n\t\t);\n\t}\n\n\tpublic createWriteStream = (path: fs.PathLike, options?: any): fs.WriteStream => {\n\t\treturn new WriteStream(this.proxy.createWriteStream(path, options));\n\t}\n\n\tpublic exists = (path: fs.PathLike, callback: (exists: boolean) => void): void => {\n\t\tthis.proxy.exists(path).then((exists) => callback(exists)).catch(() => callback(false));\n\t}\n\n\tpublic fchmod = (fd: number, mode: string | number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.fchmod)(fd, mode, callback!);\n\t}\n\n\tpublic fchown = (fd: number, uid: number, gid: number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.fchown)(fd, uid, gid, callback!);\n\t}\n\n\tpublic fdatasync = (fd: number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.fdatasync)(fd, callback!);\n\t}\n\n\tpublic fstat = (fd: number, callback: (err: NodeJS.ErrnoException, stats: fs.Stats) => void): void => {\n\t\tcallbackify(this.proxy.fstat)(fd, (error, stats) => {\n\t\t\tcallback(error, stats && new Stats(stats));\n\t\t});\n\t}\n\n\tpublic fsync = (fd: number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.fsync)(fd, callback!);\n\t}\n\n\tpublic ftruncate = (fd: number, len: number | undefined | null | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof len === \"function\") {\n\t\t\tcallback = len;\n\t\t\tlen = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.ftruncate)(fd, len, callback!);\n\t}\n\n\tpublic futimes = (fd: number, atime: string | number | Date, mtime: string | number | Date, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.futimes)(fd, atime, mtime, callback!);\n\t}\n\n\tpublic lchmod = (path: fs.PathLike, mode: string | number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.lchmod)(path, mode, callback!);\n\t}\n\n\tpublic lchown = (path: fs.PathLike, uid: number, gid: number, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.lchown)(path, uid, gid, callback!);\n\t}\n\n\tpublic link = (existingPath: fs.PathLike, newPath: fs.PathLike, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.link)(existingPath, newPath, callback!);\n\t}\n\n\tpublic lstat = (path: fs.PathLike, callback: (err: NodeJS.ErrnoException, stats: fs.Stats) => void): void => {\n\t\tcallbackify(this.lstatBatch.add)({ path }, (error, stats) => {\n\t\t\tcallback(error, stats && new Stats(stats));\n\t\t});\n\t}\n\n\tpublic mkdir = (path: fs.PathLike, mode: number | string | fs.MakeDirectoryOptions | undefined | null | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof mode === \"function\") {\n\t\t\tcallback = mode;\n\t\t\tmode = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.mkdir)(path, mode, callback!);\n\t}\n\n\tpublic mkdtemp = (prefix: string, options: IEncodingOptionsCallback, callback?: (err: NodeJS.ErrnoException, folder: string | Buffer) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.mkdtemp)(prefix, options, callback!);\n\t}\n\n\tpublic open = (path: fs.PathLike, flags: string | number, mode: string | number | undefined | null | ((err: NodeJS.ErrnoException, fd: number) => void), callback?: (err: NodeJS.ErrnoException, fd: number) => void): void => {\n\t\tif (typeof mode === \"function\") {\n\t\t\tcallback = mode;\n\t\t\tmode = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.open)(path, flags, mode, callback!);\n\t}\n\n\tpublic read = (fd: number, buffer: Buffer, offset: number, length: number, position: number | null, callback: (err: NodeJS.ErrnoException, bytesRead: number, buffer: Buffer) => void): void => {\n\t\tthis.proxy.read(fd, length, position).then((response) => {\n\t\t\tbuffer.set(response.buffer, offset);\n\t\t\tcallback(undefined!, response.bytesRead, response.buffer);\n\t\t}).catch((error) => {\n\t\t\tcallback(error, undefined!, undefined!);\n\t\t});\n\t}\n\n\tpublic readFile = (path: fs.PathLike | number, options: IEncodingOptionsCallback, callback?: (err: NodeJS.ErrnoException, data: string | Buffer) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.readFile)(path, options, callback!);\n\t}\n\n\tpublic readdir = (path: fs.PathLike, options: IEncodingOptionsCallback, callback?: (err: NodeJS.ErrnoException, files: Buffer[] | fs.Dirent[] | string[]) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.readdirBatch.add)({ path, options }, callback!);\n\t}\n\n\tpublic readlink = (path: fs.PathLike, options: IEncodingOptionsCallback, callback?: (err: NodeJS.ErrnoException, linkString: string | Buffer) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.readlink)(path, options, callback!);\n\t}\n\n\tpublic realpath = (path: fs.PathLike, options: IEncodingOptionsCallback, callback?: (err: NodeJS.ErrnoException, resolvedPath: string | Buffer) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.realpath)(path, options, callback!);\n\t}\n\n\tpublic rename = (oldPath: fs.PathLike, newPath: fs.PathLike, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.rename)(oldPath, newPath, callback!);\n\t}\n\n\tpublic rmdir = (path: fs.PathLike, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.rmdir)(path, callback!);\n\t}\n\n\tpublic stat = (path: fs.PathLike, callback: (err: NodeJS.ErrnoException, stats: fs.Stats) => void): void => {\n\t\tcallbackify(this.statBatch.add)({ path }, (error, stats) => {\n\t\t\tcallback(error, stats && new Stats(stats));\n\t\t});\n\t}\n\n\tpublic symlink = (target: fs.PathLike, path: fs.PathLike, type: fs.symlink.Type | undefined | null | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof type === \"function\") {\n\t\t\tcallback = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.symlink)(target, path, type, callback!);\n\t}\n\n\tpublic truncate = (path: fs.PathLike, len: number | undefined | null | ((err: NodeJS.ErrnoException) => void), callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof len === \"function\") {\n\t\t\tcallback = len;\n\t\t\tlen = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.truncate)(path, len, callback!);\n\t}\n\n\tpublic unlink = (path: fs.PathLike, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.unlink)(path, callback!);\n\t}\n\n\tpublic utimes = (path: fs.PathLike, atime: string | number | Date, mtime: string | number | Date, callback: (err: NodeJS.ErrnoException) => void): void => {\n\t\tcallbackify(this.proxy.utimes)(path, atime, mtime, callback!);\n\t}\n\n\tpublic write = (fd: number, buffer: Buffer, offset: number | undefined | ((err: NodeJS.ErrnoException, written: number, buffer: Buffer) => void), length: number | undefined | ((err: NodeJS.ErrnoException, written: number, buffer: Buffer) => void), position: number | undefined | ((err: NodeJS.ErrnoException, written: number, buffer: Buffer) => void), callback?: (err: NodeJS.ErrnoException, written: number, buffer: Buffer) => void): void => {\n\t\tif (typeof offset === \"function\") {\n\t\t\tcallback = offset;\n\t\t\toffset = undefined;\n\t\t}\n\t\tif (typeof length === \"function\") {\n\t\t\tcallback = length;\n\t\t\tlength = undefined;\n\t\t}\n\t\tif (typeof position === \"function\") {\n\t\t\tcallback = position;\n\t\t\tposition = undefined;\n\t\t}\n\t\tthis.proxy.write(fd, buffer, offset, length, position).then((r) => {\n\t\t\tcallback!(undefined!, r.bytesWritten, r.buffer);\n\t\t}).catch((error) => {\n\t\t\tcallback!(error, undefined!, undefined!);\n\t\t});\n\t}\n\n\tpublic writeFile = (path: fs.PathLike | number, data: any, options: IEncodingOptionsCallback, callback?: (err: NodeJS.ErrnoException) => void): void => {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tcallbackify(this.proxy.writeFile)(path, data, options, callback!);\n\t}\n\n\tpublic watch = (filename: fs.PathLike, options?: IEncodingOptions | ((event: string, filename: string | Buffer) => void), listener?: ((event: string, filename: string | Buffer) => void)): fs.FSWatcher => {\n\t\tif (typeof options === \"function\") {\n\t\t\tlistener = options;\n\t\t\toptions = undefined;\n\t\t}\n\n\t\tconst watcher = new Watcher(this.proxy.watch(filename, options));\n\t\tif (listener) {\n\t\t\twatcher.on(\"change\", listener);\n\t\t}\n\n\t\treturn watcher;\n\t}\n}\n\nclass Stats implements fs.Stats {\n\tpublic constructor(private readonly stats: IStats) {}\n\n\tpublic get dev(): number { return this.stats.dev; }\n\tpublic get ino(): number { return this.stats.ino; }\n\tpublic get mode(): number { return this.stats.mode; }\n\tpublic get nlink(): number { return this.stats.nlink; }\n\tpublic get uid(): number { return this.stats.uid; }\n\tpublic get gid(): number { return this.stats.gid; }\n\tpublic get rdev(): number { return this.stats.rdev; }\n\tpublic get size(): number { return this.stats.size; }\n\tpublic get blksize(): number { return this.stats.blksize; }\n\tpublic get blocks(): number { return this.stats.blocks; }\n\tpublic get atime(): Date { return this.stats.atime; }\n\tpublic get mtime(): Date { return this.stats.mtime; }\n\tpublic get ctime(): Date { return this.stats.ctime; }\n\tpublic get birthtime(): Date { return this.stats.birthtime; }\n\tpublic get atimeMs(): number { return this.stats.atimeMs; }\n\tpublic get mtimeMs(): number { return this.stats.mtimeMs; }\n\tpublic get ctimeMs(): number { return this.stats.ctimeMs; }\n\tpublic get birthtimeMs(): number { return this.stats.birthtimeMs; }\n\tpublic isFile(): boolean { return this.stats._isFile; }\n\tpublic isDirectory(): boolean { return this.stats._isDirectory; }\n\tpublic isBlockDevice(): boolean { return this.stats._isBlockDevice; }\n\tpublic isCharacterDevice(): boolean { return this.stats._isCharacterDevice; }\n\tpublic isSymbolicLink(): boolean { return this.stats._isSymbolicLink; }\n\tpublic isFIFO(): boolean { return this.stats._isFIFO; }\n\tpublic isSocket(): boolean { return this.stats._isSocket; }\n\n\tpublic toObject(): object {\n\t\treturn JSON.parse(JSON.stringify(this));\n\t}\n}\n"]}]}