{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/searchResultsView.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/searchResultsView.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar DOM = require(\"vs/base/browser/dom\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar countBadge_1 = require(\"vs/base/browser/ui/countBadge/countBadge\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar paths = require(\"vs/base/common/path\");\nvar resources = require(\"vs/base/common/resources\");\nvar nls = require(\"vs/nls\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar files_1 = require(\"vs/platform/files/common/files\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar label_1 = require(\"vs/platform/label/common/label\");\nvar styler_1 = require(\"vs/platform/theme/common/styler\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar searchActions_1 = require(\"vs/workbench/contrib/search/browser/searchActions\");\nvar searchModel_1 = require(\"vs/workbench/contrib/search/common/searchModel\");\nvar dnd_1 = require(\"vs/workbench/browser/dnd\");\nvar SearchDelegate = /** @class */ (function () {\n    function SearchDelegate() {\n    }\n    SearchDelegate.prototype.getHeight = function (element) {\n        return 22;\n    };\n    SearchDelegate.prototype.getTemplateId = function (element) {\n        if (element instanceof searchModel_1.BaseFolderMatch) {\n            return FolderMatchRenderer.TEMPLATE_ID;\n        }\n        else if (element instanceof searchModel_1.FileMatch) {\n            return FileMatchRenderer.TEMPLATE_ID;\n        }\n        else if (element instanceof searchModel_1.Match) {\n            return MatchRenderer.TEMPLATE_ID;\n        }\n        console.error('Invalid search tree element', element);\n        throw new Error('Invalid search tree element');\n    };\n    return SearchDelegate;\n}());\nexports.SearchDelegate = SearchDelegate;\nvar FolderMatchRenderer = /** @class */ (function (_super) {\n    tslib_1.__extends(FolderMatchRenderer, _super);\n    function FolderMatchRenderer(searchModel, searchView, labels, instantiationService, themeService, contextService) {\n        var _this = _super.call(this) || this;\n        _this.searchModel = searchModel;\n        _this.searchView = searchView;\n        _this.labels = labels;\n        _this.instantiationService = instantiationService;\n        _this.themeService = themeService;\n        _this.contextService = contextService;\n        _this.templateId = FolderMatchRenderer.TEMPLATE_ID;\n        return _this;\n    }\n    FolderMatchRenderer.prototype.renderTemplate = function (container) {\n        var disposables = [];\n        var folderMatchElement = DOM.append(container, DOM.$('.foldermatch'));\n        var label = this.labels.create(folderMatchElement);\n        disposables.push(label);\n        var badge = new countBadge_1.CountBadge(DOM.append(folderMatchElement, DOM.$('.badge')));\n        disposables.push(styler_1.attachBadgeStyler(badge, this.themeService));\n        var actionBarContainer = DOM.append(folderMatchElement, DOM.$('.actionBarContainer'));\n        var actions = new actionbar_1.ActionBar(actionBarContainer, { animated: false });\n        disposables.push(actions);\n        return {\n            label: label,\n            badge: badge,\n            actions: actions,\n            disposables: disposables\n        };\n    };\n    FolderMatchRenderer.prototype.renderElement = function (node, index, templateData) {\n        var folderMatch = node.element;\n        if (folderMatch.hasResource()) {\n            var workspaceFolder = this.contextService.getWorkspaceFolder(folderMatch.resource());\n            if (workspaceFolder && resources.isEqual(workspaceFolder.uri, folderMatch.resource())) {\n                templateData.label.setFile(folderMatch.resource(), { fileKind: files_1.FileKind.ROOT_FOLDER, hidePath: true });\n            }\n            else {\n                templateData.label.setFile(folderMatch.resource(), { fileKind: files_1.FileKind.FOLDER });\n            }\n        }\n        else {\n            templateData.label.setLabel(nls.localize('searchFolderMatch.other.label', \"Other files\"));\n        }\n        var count = folderMatch.fileCount();\n        templateData.badge.setCount(count);\n        templateData.badge.setTitleFormat(count > 1 ? nls.localize('searchFileMatches', \"{0} files found\", count) : nls.localize('searchFileMatch', \"{0} file found\", count));\n        templateData.actions.clear();\n        var actions = [];\n        if (this.searchModel.isReplaceActive() && count > 0) {\n            actions.push(this.instantiationService.createInstance(searchActions_1.ReplaceAllInFolderAction, this.searchView.getControl(), folderMatch));\n        }\n        actions.push(new searchActions_1.RemoveAction(this.searchView.getControl(), folderMatch));\n        templateData.actions.push(actions, { icon: true, label: false });\n    };\n    FolderMatchRenderer.prototype.disposeElement = function (element, index, templateData) {\n    };\n    FolderMatchRenderer.prototype.disposeTemplate = function (templateData) {\n        lifecycle_1.dispose(templateData.disposables);\n    };\n    FolderMatchRenderer.TEMPLATE_ID = 'folderMatch';\n    FolderMatchRenderer = tslib_1.__decorate([\n        tslib_1.__param(3, instantiation_1.IInstantiationService),\n        tslib_1.__param(4, themeService_1.IThemeService),\n        tslib_1.__param(5, workspace_1.IWorkspaceContextService)\n    ], FolderMatchRenderer);\n    return FolderMatchRenderer;\n}(lifecycle_1.Disposable));\nexports.FolderMatchRenderer = FolderMatchRenderer;\nvar FileMatchRenderer = /** @class */ (function (_super) {\n    tslib_1.__extends(FileMatchRenderer, _super);\n    function FileMatchRenderer(searchModel, searchView, labels, instantiationService, themeService, contextService) {\n        var _this = _super.call(this) || this;\n        _this.searchModel = searchModel;\n        _this.searchView = searchView;\n        _this.labels = labels;\n        _this.instantiationService = instantiationService;\n        _this.themeService = themeService;\n        _this.contextService = contextService;\n        _this.templateId = FileMatchRenderer.TEMPLATE_ID;\n        return _this;\n    }\n    FileMatchRenderer.prototype.renderTemplate = function (container) {\n        var disposables = [];\n        var fileMatchElement = DOM.append(container, DOM.$('.filematch'));\n        var label = this.labels.create(fileMatchElement);\n        disposables.push(label);\n        var badge = new countBadge_1.CountBadge(DOM.append(fileMatchElement, DOM.$('.badge')));\n        disposables.push(styler_1.attachBadgeStyler(badge, this.themeService));\n        var actionBarContainer = DOM.append(fileMatchElement, DOM.$('.actionBarContainer'));\n        var actions = new actionbar_1.ActionBar(actionBarContainer, { animated: false });\n        disposables.push(actions);\n        return {\n            el: fileMatchElement,\n            label: label,\n            badge: badge,\n            actions: actions,\n            disposables: disposables\n        };\n    };\n    FileMatchRenderer.prototype.renderElement = function (node, index, templateData) {\n        var fileMatch = node.element;\n        templateData.el.setAttribute('data-resource', fileMatch.resource().toString());\n        templateData.label.setFile(fileMatch.resource(), { hideIcon: false });\n        var count = fileMatch.count();\n        templateData.badge.setCount(count);\n        templateData.badge.setTitleFormat(count > 1 ? nls.localize('searchMatches', \"{0} matches found\", count) : nls.localize('searchMatch', \"{0} match found\", count));\n        templateData.actions.clear();\n        var actions = [];\n        if (this.searchModel.isReplaceActive() && count > 0) {\n            actions.push(this.instantiationService.createInstance(searchActions_1.ReplaceAllAction, this.searchView, fileMatch));\n        }\n        actions.push(new searchActions_1.RemoveAction(this.searchView.getControl(), fileMatch));\n        templateData.actions.push(actions, { icon: true, label: false });\n    };\n    FileMatchRenderer.prototype.disposeElement = function (element, index, templateData) {\n    };\n    FileMatchRenderer.prototype.disposeTemplate = function (templateData) {\n        lifecycle_1.dispose(templateData.disposables);\n    };\n    FileMatchRenderer.TEMPLATE_ID = 'fileMatch';\n    FileMatchRenderer = tslib_1.__decorate([\n        tslib_1.__param(3, instantiation_1.IInstantiationService),\n        tslib_1.__param(4, themeService_1.IThemeService),\n        tslib_1.__param(5, workspace_1.IWorkspaceContextService)\n    ], FileMatchRenderer);\n    return FileMatchRenderer;\n}(lifecycle_1.Disposable));\nexports.FileMatchRenderer = FileMatchRenderer;\nvar MatchRenderer = /** @class */ (function (_super) {\n    tslib_1.__extends(MatchRenderer, _super);\n    function MatchRenderer(searchModel, searchView, instantiationService, contextService, configurationService) {\n        var _this = _super.call(this) || this;\n        _this.searchModel = searchModel;\n        _this.searchView = searchView;\n        _this.instantiationService = instantiationService;\n        _this.contextService = contextService;\n        _this.configurationService = configurationService;\n        _this.templateId = MatchRenderer.TEMPLATE_ID;\n        return _this;\n    }\n    MatchRenderer.prototype.renderTemplate = function (container) {\n        DOM.addClass(container, 'linematch');\n        var parent = DOM.append(container, DOM.$('a.plain.match'));\n        var before = DOM.append(parent, DOM.$('span'));\n        var match = DOM.append(parent, DOM.$('span.findInFileMatch'));\n        var replace = DOM.append(parent, DOM.$('span.replaceMatch'));\n        var after = DOM.append(parent, DOM.$('span'));\n        var lineNumber = DOM.append(container, DOM.$('span.matchLineNum'));\n        var actionBarContainer = DOM.append(container, DOM.$('span.actionBarContainer'));\n        var actions = new actionbar_1.ActionBar(actionBarContainer, { animated: false });\n        return {\n            parent: parent,\n            before: before,\n            match: match,\n            replace: replace,\n            after: after,\n            lineNumber: lineNumber,\n            actions: actions\n        };\n    };\n    MatchRenderer.prototype.renderElement = function (node, index, templateData) {\n        var match = node.element;\n        var preview = match.preview();\n        var replace = this.searchModel.isReplaceActive() && !!this.searchModel.replaceString;\n        templateData.before.textContent = preview.before;\n        templateData.match.textContent = preview.inside;\n        DOM.toggleClass(templateData.match, 'replace', replace);\n        templateData.replace.textContent = replace ? match.replaceString : '';\n        templateData.after.textContent = preview.after;\n        templateData.parent.title = (preview.before + (replace ? match.replaceString : preview.inside) + preview.after).trim().substr(0, 999);\n        var numLines = match.range().endLineNumber - match.range().startLineNumber;\n        var extraLinesStr = numLines > 0 ? \"+\" + numLines : '';\n        var showLineNumbers = this.configurationService.getValue('search').showLineNumbers;\n        var lineNumberStr = showLineNumbers ? \":\" + match.range().startLineNumber : '';\n        DOM.toggleClass(templateData.lineNumber, 'show', (numLines > 0) || showLineNumbers);\n        templateData.lineNumber.textContent = lineNumberStr + extraLinesStr;\n        templateData.lineNumber.setAttribute('title', this.getMatchTitle(match, showLineNumbers));\n        templateData.actions.clear();\n        if (this.searchModel.isReplaceActive()) {\n            templateData.actions.push([this.instantiationService.createInstance(searchActions_1.ReplaceAction, this.searchView.getControl(), match, this.searchView), new searchActions_1.RemoveAction(this.searchView.getControl(), match)], { icon: true, label: false });\n        }\n        else {\n            templateData.actions.push([new searchActions_1.RemoveAction(this.searchView.getControl(), match)], { icon: true, label: false });\n        }\n    };\n    MatchRenderer.prototype.disposeElement = function (element, index, templateData) {\n    };\n    MatchRenderer.prototype.disposeTemplate = function (templateData) {\n        templateData.actions.dispose();\n    };\n    MatchRenderer.prototype.getMatchTitle = function (match, showLineNumbers) {\n        var startLine = match.range().startLineNumber;\n        var numLines = match.range().endLineNumber - match.range().startLineNumber;\n        var lineNumStr = showLineNumbers ?\n            nls.localize('lineNumStr', \"From line {0}\", startLine, numLines) + ' ' :\n            '';\n        var numLinesStr = numLines > 0 ?\n            '+ ' + nls.localize('numLinesStr', \"{0} more lines\", numLines) :\n            '';\n        return lineNumStr + numLinesStr;\n    };\n    MatchRenderer.TEMPLATE_ID = 'match';\n    MatchRenderer = tslib_1.__decorate([\n        tslib_1.__param(2, instantiation_1.IInstantiationService),\n        tslib_1.__param(3, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(4, configuration_1.IConfigurationService)\n    ], MatchRenderer);\n    return MatchRenderer;\n}(lifecycle_1.Disposable));\nexports.MatchRenderer = MatchRenderer;\nvar SearchAccessibilityProvider = /** @class */ (function () {\n    function SearchAccessibilityProvider(searchModel, labelService) {\n        this.searchModel = searchModel;\n        this.labelService = labelService;\n    }\n    SearchAccessibilityProvider.prototype.getAriaLabel = function (element) {\n        if (element instanceof searchModel_1.BaseFolderMatch) {\n            return element.hasResource() ?\n                nls.localize('folderMatchAriaLabel', \"{0} matches in folder root {1}, Search result\", element.count(), element.name()) :\n                nls.localize('otherFilesAriaLabel', \"{0} matches outside of the workspace, Search result\", element.count());\n        }\n        if (element instanceof searchModel_1.FileMatch) {\n            var path = this.labelService.getUriLabel(element.resource(), { relative: true }) || element.resource().fsPath;\n            return nls.localize('fileMatchAriaLabel', \"{0} matches in file {1} of folder {2}, Search result\", element.count(), element.name(), paths.dirname(path));\n        }\n        if (element instanceof searchModel_1.Match) {\n            var match = element;\n            var searchModel = this.searchModel;\n            var replace = searchModel.isReplaceActive() && !!searchModel.replaceString;\n            var matchString = match.getMatchString();\n            var range = match.range();\n            var matchText = match.text().substr(0, range.endColumn + 150);\n            if (replace) {\n                return nls.localize('replacePreviewResultAria', \"Replace term {0} with {1} at column position {2} in line with text {3}\", matchString, match.replaceString, range.startColumn + 1, matchText);\n            }\n            return nls.localize('searchResultAria', \"Found term {0} at column position {1} in line with text {2}\", matchString, range.startColumn + 1, matchText);\n        }\n        return null;\n    };\n    SearchAccessibilityProvider = tslib_1.__decorate([\n        tslib_1.__param(1, label_1.ILabelService)\n    ], SearchAccessibilityProvider);\n    return SearchAccessibilityProvider;\n}());\nexports.SearchAccessibilityProvider = SearchAccessibilityProvider;\nvar SearchDND = /** @class */ (function () {\n    function SearchDND(instantiationService) {\n        this.instantiationService = instantiationService;\n    }\n    SearchDND.prototype.onDragOver = function (data, targetElement, targetIndex, originalEvent) {\n        return false;\n    };\n    SearchDND.prototype.getDragURI = function (element) {\n        if (element instanceof searchModel_1.FileMatch) {\n            return element.remove.toString();\n        }\n        return null;\n    };\n    SearchDND.prototype.getDragLabel = function (elements) {\n        if (elements.length > 1) {\n            return String(elements.length);\n        }\n        var element = elements[0];\n        return element instanceof searchModel_1.FileMatch ?\n            resources.basename(element.resource()) :\n            undefined;\n    };\n    SearchDND.prototype.onDragStart = function (data, originalEvent) {\n        var elements = data.elements;\n        var resources = elements\n            .filter(function (e) { return e instanceof searchModel_1.FileMatch; })\n            .map(function (fm) { return fm.resource(); });\n        if (resources.length) {\n            // Apply some datatransfer types to allow for dragging the element outside of the application\n            this.instantiationService.invokeFunction(dnd_1.fillResourceDataTransfers, resources, originalEvent);\n        }\n    };\n    SearchDND.prototype.drop = function (data, targetElement, targetIndex, originalEvent) {\n    };\n    SearchDND = tslib_1.__decorate([\n        tslib_1.__param(0, instantiation_1.IInstantiationService)\n    ], SearchDND);\n    return SearchDND;\n}());\nexports.SearchDND = SearchDND;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/searchResultsView.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/searchResultsView.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { CountBadge } from 'vs/base/browser/ui/countBadge/countBadge';\nimport { IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { IAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { ITreeNode, ITreeRenderer, ITreeDragAndDrop, ITreeDragOverReaction } from 'vs/base/browser/ui/tree/tree';\nimport { IAction } from 'vs/base/common/actions';\nimport { Disposable, IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport * as paths from 'vs/base/common/path';\nimport * as resources from 'vs/base/common/resources';\nimport * as nls from 'vs/nls';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { FileKind } from 'vs/platform/files/common/files';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ISearchConfigurationProperties } from 'vs/workbench/services/search/common/search';\nimport { attachBadgeStyler } from 'vs/platform/theme/common/styler';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { IResourceLabel, ResourceLabels } from 'vs/workbench/browser/labels';\nimport { RemoveAction, ReplaceAction, ReplaceAllAction, ReplaceAllInFolderAction } from 'vs/workbench/contrib/search/browser/searchActions';\nimport { SearchView } from 'vs/workbench/contrib/search/browser/searchView';\nimport { FileMatch, FolderMatch, Match, RenderableMatch, SearchModel, BaseFolderMatch } from 'vs/workbench/contrib/search/common/searchModel';\nimport { IDragAndDropData } from 'vs/base/browser/dnd';\nimport { fillResourceDataTransfers } from 'vs/workbench/browser/dnd';\nimport { ElementsDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { URI } from 'vs/base/common/uri';\n\ninterface IFolderMatchTemplate {\n\tlabel: IResourceLabel;\n\tbadge: CountBadge;\n\tactions: ActionBar;\n\tdisposables: IDisposable[];\n}\n\ninterface IFileMatchTemplate {\n\tel: HTMLElement;\n\tlabel: IResourceLabel;\n\tbadge: CountBadge;\n\tactions: ActionBar;\n\tdisposables: IDisposable[];\n}\n\ninterface IMatchTemplate {\n\tparent: HTMLElement;\n\tbefore: HTMLElement;\n\tmatch: HTMLElement;\n\treplace: HTMLElement;\n\tafter: HTMLElement;\n\tlineNumber: HTMLElement;\n\tactions: ActionBar;\n}\n\nexport class SearchDelegate implements IListVirtualDelegate<RenderableMatch> {\n\n\tgetHeight(element: RenderableMatch): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: RenderableMatch): string {\n\t\tif (element instanceof BaseFolderMatch) {\n\t\t\treturn FolderMatchRenderer.TEMPLATE_ID;\n\t\t} else if (element instanceof FileMatch) {\n\t\t\treturn FileMatchRenderer.TEMPLATE_ID;\n\t\t} else if (element instanceof Match) {\n\t\t\treturn MatchRenderer.TEMPLATE_ID;\n\t\t}\n\n\t\tconsole.error('Invalid search tree element', element);\n\t\tthrow new Error('Invalid search tree element');\n\t}\n}\n\nexport class FolderMatchRenderer extends Disposable implements ITreeRenderer<FolderMatch, any, IFolderMatchTemplate> {\n\tstatic readonly TEMPLATE_ID = 'folderMatch';\n\n\treadonly templateId = FolderMatchRenderer.TEMPLATE_ID;\n\n\tconstructor(\n\t\tprivate searchModel: SearchModel,\n\t\tprivate searchView: SearchView,\n\t\tprivate labels: ResourceLabels,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService\n\t) {\n\t\tsuper();\n\t}\n\n\trenderTemplate(container: HTMLElement): IFolderMatchTemplate {\n\t\tconst disposables: IDisposable[] = [];\n\n\t\tconst folderMatchElement = DOM.append(container, DOM.$('.foldermatch'));\n\t\tconst label = this.labels.create(folderMatchElement);\n\t\tdisposables.push(label);\n\t\tconst badge = new CountBadge(DOM.append(folderMatchElement, DOM.$('.badge')));\n\t\tdisposables.push(attachBadgeStyler(badge, this.themeService));\n\t\tconst actionBarContainer = DOM.append(folderMatchElement, DOM.$('.actionBarContainer'));\n\t\tconst actions = new ActionBar(actionBarContainer, { animated: false });\n\t\tdisposables.push(actions);\n\n\t\treturn {\n\t\t\tlabel,\n\t\t\tbadge,\n\t\t\tactions,\n\t\t\tdisposables\n\t\t};\n\t}\n\n\trenderElement(node: ITreeNode<FolderMatch, any>, index: number, templateData: IFolderMatchTemplate): void {\n\t\tconst folderMatch = node.element;\n\t\tif (folderMatch.hasResource()) {\n\t\t\tconst workspaceFolder = this.contextService.getWorkspaceFolder(folderMatch.resource());\n\t\t\tif (workspaceFolder && resources.isEqual(workspaceFolder.uri, folderMatch.resource())) {\n\t\t\t\ttemplateData.label.setFile(folderMatch.resource(), { fileKind: FileKind.ROOT_FOLDER, hidePath: true });\n\t\t\t} else {\n\t\t\t\ttemplateData.label.setFile(folderMatch.resource(), { fileKind: FileKind.FOLDER });\n\t\t\t}\n\t\t} else {\n\t\t\ttemplateData.label.setLabel(nls.localize('searchFolderMatch.other.label', \"Other files\"));\n\t\t}\n\t\tconst count = folderMatch.fileCount();\n\t\ttemplateData.badge.setCount(count);\n\t\ttemplateData.badge.setTitleFormat(count > 1 ? nls.localize('searchFileMatches', \"{0} files found\", count) : nls.localize('searchFileMatch', \"{0} file found\", count));\n\n\t\ttemplateData.actions.clear();\n\n\t\tconst actions: IAction[] = [];\n\t\tif (this.searchModel.isReplaceActive() && count > 0) {\n\t\t\tactions.push(this.instantiationService.createInstance(ReplaceAllInFolderAction, this.searchView.getControl(), folderMatch));\n\t\t}\n\n\t\tactions.push(new RemoveAction(this.searchView.getControl(), folderMatch));\n\t\ttemplateData.actions.push(actions, { icon: true, label: false });\n\t}\n\n\tdisposeElement(element: ITreeNode<RenderableMatch, any>, index: number, templateData: IFolderMatchTemplate): void {\n\t}\n\n\tdisposeTemplate(templateData: IFolderMatchTemplate): void {\n\t\tdispose(templateData.disposables);\n\t}\n}\n\nexport class FileMatchRenderer extends Disposable implements ITreeRenderer<FileMatch, any, IFileMatchTemplate> {\n\tstatic readonly TEMPLATE_ID = 'fileMatch';\n\n\treadonly templateId = FileMatchRenderer.TEMPLATE_ID;\n\n\tconstructor(\n\t\tprivate searchModel: SearchModel,\n\t\tprivate searchView: SearchView,\n\t\tprivate labels: ResourceLabels,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService\n\t) {\n\t\tsuper();\n\t}\n\n\trenderTemplate(container: HTMLElement): IFileMatchTemplate {\n\t\tconst disposables: IDisposable[] = [];\n\t\tconst fileMatchElement = DOM.append(container, DOM.$('.filematch'));\n\t\tconst label = this.labels.create(fileMatchElement);\n\t\tdisposables.push(label);\n\t\tconst badge = new CountBadge(DOM.append(fileMatchElement, DOM.$('.badge')));\n\t\tdisposables.push(attachBadgeStyler(badge, this.themeService));\n\t\tconst actionBarContainer = DOM.append(fileMatchElement, DOM.$('.actionBarContainer'));\n\t\tconst actions = new ActionBar(actionBarContainer, { animated: false });\n\t\tdisposables.push(actions);\n\n\t\treturn {\n\t\t\tel: fileMatchElement,\n\t\t\tlabel,\n\t\t\tbadge,\n\t\t\tactions,\n\t\t\tdisposables\n\t\t};\n\t}\n\n\trenderElement(node: ITreeNode<FileMatch, any>, index: number, templateData: IFileMatchTemplate): void {\n\t\tconst fileMatch = node.element;\n\t\ttemplateData.el.setAttribute('data-resource', fileMatch.resource().toString());\n\t\ttemplateData.label.setFile(fileMatch.resource(), { hideIcon: false });\n\t\tconst count = fileMatch.count();\n\t\ttemplateData.badge.setCount(count);\n\t\ttemplateData.badge.setTitleFormat(count > 1 ? nls.localize('searchMatches', \"{0} matches found\", count) : nls.localize('searchMatch', \"{0} match found\", count));\n\n\t\ttemplateData.actions.clear();\n\n\t\tconst actions: IAction[] = [];\n\t\tif (this.searchModel.isReplaceActive() && count > 0) {\n\t\t\tactions.push(this.instantiationService.createInstance(ReplaceAllAction, this.searchView, fileMatch));\n\t\t}\n\t\tactions.push(new RemoveAction(this.searchView.getControl(), fileMatch));\n\t\ttemplateData.actions.push(actions, { icon: true, label: false });\n\t}\n\n\tdisposeElement(element: ITreeNode<RenderableMatch, any>, index: number, templateData: IFileMatchTemplate): void {\n\t}\n\n\tdisposeTemplate(templateData: IFileMatchTemplate): void {\n\t\tdispose(templateData.disposables);\n\t}\n}\n\nexport class MatchRenderer extends Disposable implements ITreeRenderer<Match, void, IMatchTemplate> {\n\tstatic readonly TEMPLATE_ID = 'match';\n\n\treadonly templateId = MatchRenderer.TEMPLATE_ID;\n\n\tconstructor(\n\t\tprivate searchModel: SearchModel,\n\t\tprivate searchView: SearchView,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t}\n\n\trenderTemplate(container: HTMLElement): IMatchTemplate {\n\t\tDOM.addClass(container, 'linematch');\n\n\t\tconst parent = DOM.append(container, DOM.$('a.plain.match'));\n\t\tconst before = DOM.append(parent, DOM.$('span'));\n\t\tconst match = DOM.append(parent, DOM.$('span.findInFileMatch'));\n\t\tconst replace = DOM.append(parent, DOM.$('span.replaceMatch'));\n\t\tconst after = DOM.append(parent, DOM.$('span'));\n\t\tconst lineNumber = DOM.append(container, DOM.$('span.matchLineNum'));\n\t\tconst actionBarContainer = DOM.append(container, DOM.$('span.actionBarContainer'));\n\t\tconst actions = new ActionBar(actionBarContainer, { animated: false });\n\n\t\treturn {\n\t\t\tparent,\n\t\t\tbefore,\n\t\t\tmatch,\n\t\t\treplace,\n\t\t\tafter,\n\t\t\tlineNumber,\n\t\t\tactions\n\t\t};\n\t}\n\n\trenderElement(node: ITreeNode<Match, any>, index: number, templateData: IMatchTemplate): void {\n\t\tconst match = node.element;\n\t\tconst preview = match.preview();\n\t\tconst replace = this.searchModel.isReplaceActive() && !!this.searchModel.replaceString;\n\n\t\ttemplateData.before.textContent = preview.before;\n\t\ttemplateData.match.textContent = preview.inside;\n\t\tDOM.toggleClass(templateData.match, 'replace', replace);\n\t\ttemplateData.replace.textContent = replace ? match.replaceString : '';\n\t\ttemplateData.after.textContent = preview.after;\n\t\ttemplateData.parent.title = (preview.before + (replace ? match.replaceString : preview.inside) + preview.after).trim().substr(0, 999);\n\n\t\tconst numLines = match.range().endLineNumber - match.range().startLineNumber;\n\t\tconst extraLinesStr = numLines > 0 ? `+${numLines}` : '';\n\n\t\tconst showLineNumbers = this.configurationService.getValue<ISearchConfigurationProperties>('search').showLineNumbers;\n\t\tconst lineNumberStr = showLineNumbers ? `:${match.range().startLineNumber}` : '';\n\t\tDOM.toggleClass(templateData.lineNumber, 'show', (numLines > 0) || showLineNumbers);\n\n\t\ttemplateData.lineNumber.textContent = lineNumberStr + extraLinesStr;\n\t\ttemplateData.lineNumber.setAttribute('title', this.getMatchTitle(match, showLineNumbers));\n\n\t\ttemplateData.actions.clear();\n\t\tif (this.searchModel.isReplaceActive()) {\n\t\t\ttemplateData.actions.push([this.instantiationService.createInstance(ReplaceAction, this.searchView.getControl(), match, this.searchView), new RemoveAction(this.searchView.getControl(), match)], { icon: true, label: false });\n\t\t} else {\n\t\t\ttemplateData.actions.push([new RemoveAction(this.searchView.getControl(), match)], { icon: true, label: false });\n\t\t}\n\t}\n\n\tdisposeElement(element: ITreeNode<Match, any>, index: number, templateData: IMatchTemplate): void {\n\t}\n\n\tdisposeTemplate(templateData: IMatchTemplate): void {\n\t\ttemplateData.actions.dispose();\n\t}\n\n\tprivate getMatchTitle(match: Match, showLineNumbers: boolean): string {\n\t\tconst startLine = match.range().startLineNumber;\n\t\tconst numLines = match.range().endLineNumber - match.range().startLineNumber;\n\n\t\tconst lineNumStr = showLineNumbers ?\n\t\t\tnls.localize('lineNumStr', \"From line {0}\", startLine, numLines) + ' ' :\n\t\t\t'';\n\n\t\tconst numLinesStr = numLines > 0 ?\n\t\t\t'+ ' + nls.localize('numLinesStr', \"{0} more lines\", numLines) :\n\t\t\t'';\n\n\t\treturn lineNumStr + numLinesStr;\n\t}\n}\n\nexport class SearchAccessibilityProvider implements IAccessibilityProvider<RenderableMatch> {\n\n\tconstructor(\n\t\tprivate searchModel: SearchModel,\n\t\t@ILabelService private readonly labelService: ILabelService\n\t) {\n\t}\n\n\tgetAriaLabel(element: RenderableMatch): string | null {\n\t\tif (element instanceof BaseFolderMatch) {\n\t\t\treturn element.hasResource() ?\n\t\t\t\tnls.localize('folderMatchAriaLabel', \"{0} matches in folder root {1}, Search result\", element.count(), element.name()) :\n\t\t\t\tnls.localize('otherFilesAriaLabel', \"{0} matches outside of the workspace, Search result\", element.count());\n\t\t}\n\n\t\tif (element instanceof FileMatch) {\n\t\t\tconst path = this.labelService.getUriLabel(element.resource(), { relative: true }) || element.resource().fsPath;\n\n\t\t\treturn nls.localize('fileMatchAriaLabel', \"{0} matches in file {1} of folder {2}, Search result\", element.count(), element.name(), paths.dirname(path));\n\t\t}\n\n\t\tif (element instanceof Match) {\n\t\t\tconst match = <Match>element;\n\t\t\tconst searchModel: SearchModel = this.searchModel;\n\t\t\tconst replace = searchModel.isReplaceActive() && !!searchModel.replaceString;\n\t\t\tconst matchString = match.getMatchString();\n\t\t\tconst range = match.range();\n\t\t\tconst matchText = match.text().substr(0, range.endColumn + 150);\n\t\t\tif (replace) {\n\t\t\t\treturn nls.localize('replacePreviewResultAria', \"Replace term {0} with {1} at column position {2} in line with text {3}\", matchString, match.replaceString, range.startColumn + 1, matchText);\n\t\t\t}\n\n\t\t\treturn nls.localize('searchResultAria', \"Found term {0} at column position {1} in line with text {2}\", matchString, range.startColumn + 1, matchText);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport class SearchDND implements ITreeDragAndDrop<RenderableMatch> {\n\tconstructor(\n\t\t@IInstantiationService private instantiationService: IInstantiationService\n\t) { }\n\n\tonDragOver(data: IDragAndDropData, targetElement: RenderableMatch, targetIndex: number, originalEvent: DragEvent): boolean | ITreeDragOverReaction {\n\t\treturn false;\n\t}\n\n\tgetDragURI(element: RenderableMatch): string | null {\n\t\tif (element instanceof FileMatch) {\n\t\t\treturn element.remove.toString();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetDragLabel?(elements: RenderableMatch[]): string | undefined {\n\t\tif (elements.length > 1) {\n\t\t\treturn String(elements.length);\n\t\t}\n\n\t\tconst element = elements[0];\n\t\treturn element instanceof FileMatch ?\n\t\t\tresources.basename(element.resource()) :\n\t\t\tundefined;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tconst elements = (data as ElementsDragAndDropData<RenderableMatch>).elements;\n\t\tconst resources: URI[] = elements\n\t\t\t.filter(e => e instanceof FileMatch)\n\t\t\t.map((fm: FileMatch) => fm.resource());\n\n\t\tif (resources.length) {\n\t\t\t// Apply some datatransfer types to allow for dragging the element outside of the application\n\t\t\tthis.instantiationService.invokeFunction(fillResourceDataTransfers, resources, originalEvent);\n\t\t}\n\t}\n\n\tdrop(data: IDragAndDropData, targetElement: RenderableMatch, targetIndex: number, originalEvent: DragEvent): void {\n\t}\n}\n"]}]}