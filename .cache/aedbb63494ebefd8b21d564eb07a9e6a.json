{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/editor/browser/viewParts/viewCursors/viewCursors.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/editor/browser/viewParts/viewCursors/viewCursors.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./viewCursors\");\nvar fastDomNode_1 = require(\"vs/base/browser/fastDomNode\");\nvar async_1 = require(\"vs/base/common/async\");\nvar viewPart_1 = require(\"vs/editor/browser/view/viewPart\");\nvar viewCursor_1 = require(\"vs/editor/browser/viewParts/viewCursors/viewCursor\");\nvar editorOptions_1 = require(\"vs/editor/common/config/editorOptions\");\nvar editorColorRegistry_1 = require(\"vs/editor/common/view/editorColorRegistry\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar ViewCursors = /** @class */ (function (_super) {\n    tslib_1.__extends(ViewCursors, _super);\n    function ViewCursors(context) {\n        var _this = _super.call(this, context) || this;\n        _this._readOnly = _this._context.configuration.editor.readOnly;\n        _this._cursorBlinking = _this._context.configuration.editor.viewInfo.cursorBlinking;\n        _this._cursorStyle = _this._context.configuration.editor.viewInfo.cursorStyle;\n        _this._cursorSmoothCaretAnimation = _this._context.configuration.editor.viewInfo.cursorSmoothCaretAnimation;\n        _this._selectionIsEmpty = true;\n        _this._primaryCursor = new viewCursor_1.ViewCursor(_this._context);\n        _this._secondaryCursors = [];\n        _this._renderData = [];\n        _this._domNode = fastDomNode_1.createFastDomNode(document.createElement('div'));\n        _this._domNode.setAttribute('role', 'presentation');\n        _this._domNode.setAttribute('aria-hidden', 'true');\n        _this._updateDomClassName();\n        _this._domNode.appendChild(_this._primaryCursor.getDomNode());\n        _this._startCursorBlinkAnimation = new async_1.TimeoutTimer();\n        _this._cursorFlatBlinkInterval = new async_1.IntervalTimer();\n        _this._blinkingEnabled = false;\n        _this._editorHasFocus = false;\n        _this._updateBlinking();\n        return _this;\n    }\n    ViewCursors.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._startCursorBlinkAnimation.dispose();\n        this._cursorFlatBlinkInterval.dispose();\n    };\n    ViewCursors.prototype.getDomNode = function () {\n        return this._domNode;\n    };\n    // --- begin event handlers\n    ViewCursors.prototype.onConfigurationChanged = function (e) {\n        if (e.readOnly) {\n            this._readOnly = this._context.configuration.editor.readOnly;\n        }\n        if (e.viewInfo) {\n            this._cursorBlinking = this._context.configuration.editor.viewInfo.cursorBlinking;\n            this._cursorStyle = this._context.configuration.editor.viewInfo.cursorStyle;\n            this._cursorSmoothCaretAnimation = this._context.configuration.editor.viewInfo.cursorSmoothCaretAnimation;\n        }\n        this._primaryCursor.onConfigurationChanged(e);\n        this._updateBlinking();\n        if (e.viewInfo) {\n            this._updateDomClassName();\n        }\n        for (var i = 0, len = this._secondaryCursors.length; i < len; i++) {\n            this._secondaryCursors[i].onConfigurationChanged(e);\n        }\n        return true;\n    };\n    ViewCursors.prototype._onCursorPositionChanged = function (position, secondaryPositions) {\n        this._primaryCursor.onCursorPositionChanged(position);\n        this._updateBlinking();\n        if (this._secondaryCursors.length < secondaryPositions.length) {\n            // Create new cursors\n            var addCnt = secondaryPositions.length - this._secondaryCursors.length;\n            for (var i = 0; i < addCnt; i++) {\n                var newCursor = new viewCursor_1.ViewCursor(this._context);\n                this._domNode.domNode.insertBefore(newCursor.getDomNode().domNode, this._primaryCursor.getDomNode().domNode.nextSibling);\n                this._secondaryCursors.push(newCursor);\n            }\n        }\n        else if (this._secondaryCursors.length > secondaryPositions.length) {\n            // Remove some cursors\n            var removeCnt = this._secondaryCursors.length - secondaryPositions.length;\n            for (var i = 0; i < removeCnt; i++) {\n                this._domNode.removeChild(this._secondaryCursors[0].getDomNode());\n                this._secondaryCursors.splice(0, 1);\n            }\n        }\n        for (var i = 0; i < secondaryPositions.length; i++) {\n            this._secondaryCursors[i].onCursorPositionChanged(secondaryPositions[i]);\n        }\n    };\n    ViewCursors.prototype.onCursorStateChanged = function (e) {\n        var positions = [];\n        for (var i = 0, len = e.selections.length; i < len; i++) {\n            positions[i] = e.selections[i].getPosition();\n        }\n        this._onCursorPositionChanged(positions[0], positions.slice(1));\n        var selectionIsEmpty = e.selections[0].isEmpty();\n        if (this._selectionIsEmpty !== selectionIsEmpty) {\n            this._selectionIsEmpty = selectionIsEmpty;\n            this._updateDomClassName();\n        }\n        return true;\n    };\n    ViewCursors.prototype.onDecorationsChanged = function (e) {\n        // true for inline decorations that can end up relayouting text\n        return true;\n    };\n    ViewCursors.prototype.onFlushed = function (e) {\n        return true;\n    };\n    ViewCursors.prototype.onFocusChanged = function (e) {\n        this._editorHasFocus = e.isFocused;\n        this._updateBlinking();\n        return false;\n    };\n    ViewCursors.prototype.onLinesChanged = function (e) {\n        return true;\n    };\n    ViewCursors.prototype.onLinesDeleted = function (e) {\n        return true;\n    };\n    ViewCursors.prototype.onLinesInserted = function (e) {\n        return true;\n    };\n    ViewCursors.prototype.onScrollChanged = function (e) {\n        return true;\n    };\n    ViewCursors.prototype.onTokensChanged = function (e) {\n        var shouldRender = function (position) {\n            for (var i = 0, len = e.ranges.length; i < len; i++) {\n                if (e.ranges[i].fromLineNumber <= position.lineNumber && position.lineNumber <= e.ranges[i].toLineNumber) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        if (shouldRender(this._primaryCursor.getPosition())) {\n            return true;\n        }\n        for (var _i = 0, _a = this._secondaryCursors; _i < _a.length; _i++) {\n            var secondaryCursor = _a[_i];\n            if (shouldRender(secondaryCursor.getPosition())) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ViewCursors.prototype.onZonesChanged = function (e) {\n        return true;\n    };\n    // --- end event handlers\n    // ---- blinking logic\n    ViewCursors.prototype._getCursorBlinking = function () {\n        if (!this._editorHasFocus) {\n            return editorOptions_1.TextEditorCursorBlinkingStyle.Hidden;\n        }\n        if (this._readOnly) {\n            return editorOptions_1.TextEditorCursorBlinkingStyle.Solid;\n        }\n        return this._cursorBlinking;\n    };\n    ViewCursors.prototype._updateBlinking = function () {\n        var _this = this;\n        this._startCursorBlinkAnimation.cancel();\n        this._cursorFlatBlinkInterval.cancel();\n        var blinkingStyle = this._getCursorBlinking();\n        // hidden and solid are special as they involve no animations\n        var isHidden = (blinkingStyle === editorOptions_1.TextEditorCursorBlinkingStyle.Hidden);\n        var isSolid = (blinkingStyle === editorOptions_1.TextEditorCursorBlinkingStyle.Solid);\n        if (isHidden) {\n            this._hide();\n        }\n        else {\n            this._show();\n        }\n        this._blinkingEnabled = false;\n        this._updateDomClassName();\n        if (!isHidden && !isSolid) {\n            if (blinkingStyle === editorOptions_1.TextEditorCursorBlinkingStyle.Blink) {\n                // flat blinking is handled by JavaScript to save battery life due to Chromium step timing issue https://bugs.chromium.org/p/chromium/issues/detail?id=361587\n                this._cursorFlatBlinkInterval.cancelAndSet(function () {\n                    if (_this._isVisible) {\n                        _this._hide();\n                    }\n                    else {\n                        _this._show();\n                    }\n                }, ViewCursors.BLINK_INTERVAL);\n            }\n            else {\n                this._startCursorBlinkAnimation.setIfNotSet(function () {\n                    _this._blinkingEnabled = true;\n                    _this._updateDomClassName();\n                }, ViewCursors.BLINK_INTERVAL);\n            }\n        }\n    };\n    // --- end blinking logic\n    ViewCursors.prototype._updateDomClassName = function () {\n        this._domNode.setClassName(this._getClassName());\n    };\n    ViewCursors.prototype._getClassName = function () {\n        var result = 'cursors-layer';\n        if (!this._selectionIsEmpty) {\n            result += ' has-selection';\n        }\n        switch (this._cursorStyle) {\n            case editorOptions_1.TextEditorCursorStyle.Line:\n                result += ' cursor-line-style';\n                break;\n            case editorOptions_1.TextEditorCursorStyle.Block:\n                result += ' cursor-block-style';\n                break;\n            case editorOptions_1.TextEditorCursorStyle.Underline:\n                result += ' cursor-underline-style';\n                break;\n            case editorOptions_1.TextEditorCursorStyle.LineThin:\n                result += ' cursor-line-thin-style';\n                break;\n            case editorOptions_1.TextEditorCursorStyle.BlockOutline:\n                result += ' cursor-block-outline-style';\n                break;\n            case editorOptions_1.TextEditorCursorStyle.UnderlineThin:\n                result += ' cursor-underline-thin-style';\n                break;\n            default:\n                result += ' cursor-line-style';\n        }\n        if (this._blinkingEnabled) {\n            switch (this._getCursorBlinking()) {\n                case editorOptions_1.TextEditorCursorBlinkingStyle.Blink:\n                    result += ' cursor-blink';\n                    break;\n                case editorOptions_1.TextEditorCursorBlinkingStyle.Smooth:\n                    result += ' cursor-smooth';\n                    break;\n                case editorOptions_1.TextEditorCursorBlinkingStyle.Phase:\n                    result += ' cursor-phase';\n                    break;\n                case editorOptions_1.TextEditorCursorBlinkingStyle.Expand:\n                    result += ' cursor-expand';\n                    break;\n                case editorOptions_1.TextEditorCursorBlinkingStyle.Solid:\n                    result += ' cursor-solid';\n                    break;\n                default:\n                    result += ' cursor-solid';\n            }\n        }\n        else {\n            result += ' cursor-solid';\n        }\n        if (this._cursorSmoothCaretAnimation) {\n            result += ' cursor-smooth-caret-animation';\n        }\n        return result;\n    };\n    ViewCursors.prototype._show = function () {\n        this._primaryCursor.show();\n        for (var i = 0, len = this._secondaryCursors.length; i < len; i++) {\n            this._secondaryCursors[i].show();\n        }\n        this._isVisible = true;\n    };\n    ViewCursors.prototype._hide = function () {\n        this._primaryCursor.hide();\n        for (var i = 0, len = this._secondaryCursors.length; i < len; i++) {\n            this._secondaryCursors[i].hide();\n        }\n        this._isVisible = false;\n    };\n    // ---- IViewPart implementation\n    ViewCursors.prototype.prepareRender = function (ctx) {\n        this._primaryCursor.prepareRender(ctx);\n        for (var i = 0, len = this._secondaryCursors.length; i < len; i++) {\n            this._secondaryCursors[i].prepareRender(ctx);\n        }\n    };\n    ViewCursors.prototype.render = function (ctx) {\n        var renderData = [], renderDataLen = 0;\n        var primaryRenderData = this._primaryCursor.render(ctx);\n        if (primaryRenderData) {\n            renderData[renderDataLen++] = primaryRenderData;\n        }\n        for (var i = 0, len = this._secondaryCursors.length; i < len; i++) {\n            var secondaryRenderData = this._secondaryCursors[i].render(ctx);\n            if (secondaryRenderData) {\n                renderData[renderDataLen++] = secondaryRenderData;\n            }\n        }\n        this._renderData = renderData;\n    };\n    ViewCursors.prototype.getLastRenderData = function () {\n        return this._renderData;\n    };\n    ViewCursors.BLINK_INTERVAL = 500;\n    return ViewCursors;\n}(viewPart_1.ViewPart));\nexports.ViewCursors = ViewCursors;\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    var caret = theme.getColor(editorColorRegistry_1.editorCursorForeground);\n    if (caret) {\n        var caretBackground = theme.getColor(editorColorRegistry_1.editorCursorBackground);\n        if (!caretBackground) {\n            caretBackground = caret.opposite();\n        }\n        collector.addRule(\".monaco-editor .cursor { background-color: \" + caret + \"; border-color: \" + caret + \"; color: \" + caretBackground + \"; }\");\n        if (theme.type === 'hc') {\n            collector.addRule(\".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid \" + caretBackground + \"; border-right: 1px solid \" + caretBackground + \"; }\");\n        }\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/editor/browser/viewParts/viewCursors/viewCursors.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/editor/browser/viewParts/viewCursors/viewCursors.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./viewCursors';\nimport { FastDomNode, createFastDomNode } from 'vs/base/browser/fastDomNode';\nimport { IntervalTimer, TimeoutTimer } from 'vs/base/common/async';\nimport { ViewPart } from 'vs/editor/browser/view/viewPart';\nimport { IViewCursorRenderData, ViewCursor } from 'vs/editor/browser/viewParts/viewCursors/viewCursor';\nimport { TextEditorCursorBlinkingStyle, TextEditorCursorStyle } from 'vs/editor/common/config/editorOptions';\nimport { Position } from 'vs/editor/common/core/position';\nimport { editorCursorBackground, editorCursorForeground } from 'vs/editor/common/view/editorColorRegistry';\nimport { RenderingContext, RestrictedRenderingContext } from 'vs/editor/common/view/renderingContext';\nimport { ViewContext } from 'vs/editor/common/view/viewContext';\nimport * as viewEvents from 'vs/editor/common/view/viewEvents';\nimport { registerThemingParticipant } from 'vs/platform/theme/common/themeService';\n\nexport class ViewCursors extends ViewPart {\n\n\tstatic BLINK_INTERVAL = 500;\n\n\tprivate _readOnly: boolean;\n\tprivate _cursorBlinking: TextEditorCursorBlinkingStyle;\n\tprivate _cursorStyle: TextEditorCursorStyle;\n\tprivate _cursorSmoothCaretAnimation: boolean;\n\tprivate _selectionIsEmpty: boolean;\n\n\tprivate _isVisible: boolean;\n\n\tprivate readonly _domNode: FastDomNode<HTMLElement>;\n\n\tprivate readonly _startCursorBlinkAnimation: TimeoutTimer;\n\tprivate readonly _cursorFlatBlinkInterval: IntervalTimer;\n\tprivate _blinkingEnabled: boolean;\n\n\tprivate _editorHasFocus: boolean;\n\n\tprivate readonly _primaryCursor: ViewCursor;\n\tprivate readonly _secondaryCursors: ViewCursor[];\n\tprivate _renderData: IViewCursorRenderData[];\n\n\tconstructor(context: ViewContext) {\n\t\tsuper(context);\n\n\t\tthis._readOnly = this._context.configuration.editor.readOnly;\n\t\tthis._cursorBlinking = this._context.configuration.editor.viewInfo.cursorBlinking;\n\t\tthis._cursorStyle = this._context.configuration.editor.viewInfo.cursorStyle;\n\t\tthis._cursorSmoothCaretAnimation = this._context.configuration.editor.viewInfo.cursorSmoothCaretAnimation;\n\t\tthis._selectionIsEmpty = true;\n\n\t\tthis._primaryCursor = new ViewCursor(this._context);\n\t\tthis._secondaryCursors = [];\n\t\tthis._renderData = [];\n\n\t\tthis._domNode = createFastDomNode(document.createElement('div'));\n\t\tthis._domNode.setAttribute('role', 'presentation');\n\t\tthis._domNode.setAttribute('aria-hidden', 'true');\n\t\tthis._updateDomClassName();\n\n\t\tthis._domNode.appendChild(this._primaryCursor.getDomNode());\n\n\t\tthis._startCursorBlinkAnimation = new TimeoutTimer();\n\t\tthis._cursorFlatBlinkInterval = new IntervalTimer();\n\n\t\tthis._blinkingEnabled = false;\n\n\t\tthis._editorHasFocus = false;\n\t\tthis._updateBlinking();\n\t}\n\n\tpublic dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._startCursorBlinkAnimation.dispose();\n\t\tthis._cursorFlatBlinkInterval.dispose();\n\t}\n\n\tpublic getDomNode(): FastDomNode<HTMLElement> {\n\t\treturn this._domNode;\n\t}\n\n\t// --- begin event handlers\n\n\tpublic onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\n\t\tif (e.readOnly) {\n\t\t\tthis._readOnly = this._context.configuration.editor.readOnly;\n\t\t}\n\t\tif (e.viewInfo) {\n\t\t\tthis._cursorBlinking = this._context.configuration.editor.viewInfo.cursorBlinking;\n\t\t\tthis._cursorStyle = this._context.configuration.editor.viewInfo.cursorStyle;\n\t\t\tthis._cursorSmoothCaretAnimation = this._context.configuration.editor.viewInfo.cursorSmoothCaretAnimation;\n\t\t}\n\n\t\tthis._primaryCursor.onConfigurationChanged(e);\n\t\tthis._updateBlinking();\n\t\tif (e.viewInfo) {\n\t\t\tthis._updateDomClassName();\n\t\t}\n\t\tfor (let i = 0, len = this._secondaryCursors.length; i < len; i++) {\n\t\t\tthis._secondaryCursors[i].onConfigurationChanged(e);\n\t\t}\n\t\treturn true;\n\t}\n\tprivate _onCursorPositionChanged(position: Position, secondaryPositions: Position[]): void {\n\t\tthis._primaryCursor.onCursorPositionChanged(position);\n\t\tthis._updateBlinking();\n\n\t\tif (this._secondaryCursors.length < secondaryPositions.length) {\n\t\t\t// Create new cursors\n\t\t\tconst addCnt = secondaryPositions.length - this._secondaryCursors.length;\n\t\t\tfor (let i = 0; i < addCnt; i++) {\n\t\t\t\tconst newCursor = new ViewCursor(this._context);\n\t\t\t\tthis._domNode.domNode.insertBefore(newCursor.getDomNode().domNode, this._primaryCursor.getDomNode().domNode.nextSibling);\n\t\t\t\tthis._secondaryCursors.push(newCursor);\n\t\t\t}\n\t\t} else if (this._secondaryCursors.length > secondaryPositions.length) {\n\t\t\t// Remove some cursors\n\t\t\tconst removeCnt = this._secondaryCursors.length - secondaryPositions.length;\n\t\t\tfor (let i = 0; i < removeCnt; i++) {\n\t\t\t\tthis._domNode.removeChild(this._secondaryCursors[0].getDomNode());\n\t\t\t\tthis._secondaryCursors.splice(0, 1);\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < secondaryPositions.length; i++) {\n\t\t\tthis._secondaryCursors[i].onCursorPositionChanged(secondaryPositions[i]);\n\t\t}\n\n\t}\n\tpublic onCursorStateChanged(e: viewEvents.ViewCursorStateChangedEvent): boolean {\n\t\tconst positions: Position[] = [];\n\t\tfor (let i = 0, len = e.selections.length; i < len; i++) {\n\t\t\tpositions[i] = e.selections[i].getPosition();\n\t\t}\n\t\tthis._onCursorPositionChanged(positions[0], positions.slice(1));\n\n\t\tconst selectionIsEmpty = e.selections[0].isEmpty();\n\t\tif (this._selectionIsEmpty !== selectionIsEmpty) {\n\t\t\tthis._selectionIsEmpty = selectionIsEmpty;\n\t\t\tthis._updateDomClassName();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic onDecorationsChanged(e: viewEvents.ViewDecorationsChangedEvent): boolean {\n\t\t// true for inline decorations that can end up relayouting text\n\t\treturn true;\n\t}\n\tpublic onFlushed(e: viewEvents.ViewFlushedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onFocusChanged(e: viewEvents.ViewFocusChangedEvent): boolean {\n\t\tthis._editorHasFocus = e.isFocused;\n\t\tthis._updateBlinking();\n\t\treturn false;\n\t}\n\tpublic onLinesChanged(e: viewEvents.ViewLinesChangedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onLinesDeleted(e: viewEvents.ViewLinesDeletedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onLinesInserted(e: viewEvents.ViewLinesInsertedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onScrollChanged(e: viewEvents.ViewScrollChangedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic onTokensChanged(e: viewEvents.ViewTokensChangedEvent): boolean {\n\t\tconst shouldRender = (position: Position) => {\n\t\t\tfor (let i = 0, len = e.ranges.length; i < len; i++) {\n\t\t\t\tif (e.ranges[i].fromLineNumber <= position.lineNumber && position.lineNumber <= e.ranges[i].toLineNumber) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tif (shouldRender(this._primaryCursor.getPosition())) {\n\t\t\treturn true;\n\t\t}\n\t\tfor (const secondaryCursor of this._secondaryCursors) {\n\t\t\tif (shouldRender(secondaryCursor.getPosition())) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\tpublic onZonesChanged(e: viewEvents.ViewZonesChangedEvent): boolean {\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\n\t// ---- blinking logic\n\n\tprivate _getCursorBlinking(): TextEditorCursorBlinkingStyle {\n\t\tif (!this._editorHasFocus) {\n\t\t\treturn TextEditorCursorBlinkingStyle.Hidden;\n\t\t}\n\t\tif (this._readOnly) {\n\t\t\treturn TextEditorCursorBlinkingStyle.Solid;\n\t\t}\n\t\treturn this._cursorBlinking;\n\t}\n\n\tprivate _updateBlinking(): void {\n\t\tthis._startCursorBlinkAnimation.cancel();\n\t\tthis._cursorFlatBlinkInterval.cancel();\n\n\t\tconst blinkingStyle = this._getCursorBlinking();\n\n\t\t// hidden and solid are special as they involve no animations\n\t\tconst isHidden = (blinkingStyle === TextEditorCursorBlinkingStyle.Hidden);\n\t\tconst isSolid = (blinkingStyle === TextEditorCursorBlinkingStyle.Solid);\n\n\t\tif (isHidden) {\n\t\t\tthis._hide();\n\t\t} else {\n\t\t\tthis._show();\n\t\t}\n\n\t\tthis._blinkingEnabled = false;\n\t\tthis._updateDomClassName();\n\n\t\tif (!isHidden && !isSolid) {\n\t\t\tif (blinkingStyle === TextEditorCursorBlinkingStyle.Blink) {\n\t\t\t\t// flat blinking is handled by JavaScript to save battery life due to Chromium step timing issue https://bugs.chromium.org/p/chromium/issues/detail?id=361587\n\t\t\t\tthis._cursorFlatBlinkInterval.cancelAndSet(() => {\n\t\t\t\t\tif (this._isVisible) {\n\t\t\t\t\t\tthis._hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._show();\n\t\t\t\t\t}\n\t\t\t\t}, ViewCursors.BLINK_INTERVAL);\n\t\t\t} else {\n\t\t\t\tthis._startCursorBlinkAnimation.setIfNotSet(() => {\n\t\t\t\t\tthis._blinkingEnabled = true;\n\t\t\t\t\tthis._updateDomClassName();\n\t\t\t\t}, ViewCursors.BLINK_INTERVAL);\n\t\t\t}\n\t\t}\n\t}\n\t// --- end blinking logic\n\n\tprivate _updateDomClassName(): void {\n\t\tthis._domNode.setClassName(this._getClassName());\n\t}\n\n\tprivate _getClassName(): string {\n\t\tlet result = 'cursors-layer';\n\t\tif (!this._selectionIsEmpty) {\n\t\t\tresult += ' has-selection';\n\t\t}\n\t\tswitch (this._cursorStyle) {\n\t\t\tcase TextEditorCursorStyle.Line:\n\t\t\t\tresult += ' cursor-line-style';\n\t\t\t\tbreak;\n\t\t\tcase TextEditorCursorStyle.Block:\n\t\t\t\tresult += ' cursor-block-style';\n\t\t\t\tbreak;\n\t\t\tcase TextEditorCursorStyle.Underline:\n\t\t\t\tresult += ' cursor-underline-style';\n\t\t\t\tbreak;\n\t\t\tcase TextEditorCursorStyle.LineThin:\n\t\t\t\tresult += ' cursor-line-thin-style';\n\t\t\t\tbreak;\n\t\t\tcase TextEditorCursorStyle.BlockOutline:\n\t\t\t\tresult += ' cursor-block-outline-style';\n\t\t\t\tbreak;\n\t\t\tcase TextEditorCursorStyle.UnderlineThin:\n\t\t\t\tresult += ' cursor-underline-thin-style';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult += ' cursor-line-style';\n\t\t}\n\t\tif (this._blinkingEnabled) {\n\t\t\tswitch (this._getCursorBlinking()) {\n\t\t\t\tcase TextEditorCursorBlinkingStyle.Blink:\n\t\t\t\t\tresult += ' cursor-blink';\n\t\t\t\t\tbreak;\n\t\t\t\tcase TextEditorCursorBlinkingStyle.Smooth:\n\t\t\t\t\tresult += ' cursor-smooth';\n\t\t\t\t\tbreak;\n\t\t\t\tcase TextEditorCursorBlinkingStyle.Phase:\n\t\t\t\t\tresult += ' cursor-phase';\n\t\t\t\t\tbreak;\n\t\t\t\tcase TextEditorCursorBlinkingStyle.Expand:\n\t\t\t\t\tresult += ' cursor-expand';\n\t\t\t\t\tbreak;\n\t\t\t\tcase TextEditorCursorBlinkingStyle.Solid:\n\t\t\t\t\tresult += ' cursor-solid';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tresult += ' cursor-solid';\n\t\t\t}\n\t\t} else {\n\t\t\tresult += ' cursor-solid';\n\t\t}\n\t\tif (this._cursorSmoothCaretAnimation) {\n\t\t\tresult += ' cursor-smooth-caret-animation';\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _show(): void {\n\t\tthis._primaryCursor.show();\n\t\tfor (let i = 0, len = this._secondaryCursors.length; i < len; i++) {\n\t\t\tthis._secondaryCursors[i].show();\n\t\t}\n\t\tthis._isVisible = true;\n\t}\n\n\tprivate _hide(): void {\n\t\tthis._primaryCursor.hide();\n\t\tfor (let i = 0, len = this._secondaryCursors.length; i < len; i++) {\n\t\t\tthis._secondaryCursors[i].hide();\n\t\t}\n\t\tthis._isVisible = false;\n\t}\n\n\t// ---- IViewPart implementation\n\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\tthis._primaryCursor.prepareRender(ctx);\n\t\tfor (let i = 0, len = this._secondaryCursors.length; i < len; i++) {\n\t\t\tthis._secondaryCursors[i].prepareRender(ctx);\n\t\t}\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\tlet renderData: IViewCursorRenderData[] = [], renderDataLen = 0;\n\n\t\tconst primaryRenderData = this._primaryCursor.render(ctx);\n\t\tif (primaryRenderData) {\n\t\t\trenderData[renderDataLen++] = primaryRenderData;\n\t\t}\n\n\t\tfor (let i = 0, len = this._secondaryCursors.length; i < len; i++) {\n\t\t\tconst secondaryRenderData = this._secondaryCursors[i].render(ctx);\n\t\t\tif (secondaryRenderData) {\n\t\t\t\trenderData[renderDataLen++] = secondaryRenderData;\n\t\t\t}\n\t\t}\n\n\t\tthis._renderData = renderData;\n\t}\n\n\tpublic getLastRenderData(): IViewCursorRenderData[] {\n\t\treturn this._renderData;\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tconst caret = theme.getColor(editorCursorForeground);\n\tif (caret) {\n\t\tlet caretBackground = theme.getColor(editorCursorBackground);\n\t\tif (!caretBackground) {\n\t\t\tcaretBackground = caret.opposite();\n\t\t}\n\t\tcollector.addRule(`.monaco-editor .cursor { background-color: ${caret}; border-color: ${caret}; color: ${caretBackground}; }`);\n\t\tif (theme.type === 'hc') {\n\t\t\tcollector.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${caretBackground}; border-right: 1px solid ${caretBackground}; }`);\n\t\t}\n\t}\n\n});\n"]}]}