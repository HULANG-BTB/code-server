{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/webview/electron-browser/webviewEditorInput.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/webview/electron-browser/webviewEditorInput.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar dom = require(\"vs/base/browser/dom\");\nvar event_1 = require(\"vs/base/common/event\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar uri_1 = require(\"vs/base/common/uri\");\nvar editor_1 = require(\"vs/workbench/common/editor\");\nvar layoutService_1 = require(\"vs/workbench/services/layout/browser/layoutService\");\nvar WebviewEditorInput = /** @class */ (function (_super) {\n    tslib_1.__extends(WebviewEditorInput, _super);\n    function WebviewEditorInput(viewType, id, name, options, state, events, extension, _layoutService) {\n        var _this = _super.call(this) || this;\n        _this.viewType = viewType;\n        _this._layoutService = _layoutService;\n        _this._html = '';\n        _this._currentWebviewHtml = '';\n        _this._webviewDisposables = [];\n        _this._scrollYPercentage = 0;\n        _this._onDidChangeIcon = _this._register(new event_1.Emitter());\n        _this.onDidChangeIcon = _this._onDidChangeIcon.event;\n        if (typeof id === 'number') {\n            _this._id = id;\n            WebviewEditorInput.handlePool = Math.max(id, WebviewEditorInput.handlePool) + 1;\n        }\n        else {\n            _this._id = WebviewEditorInput.handlePool++;\n        }\n        _this._name = name;\n        _this._options = options;\n        _this._events = events;\n        _this._state = state;\n        _this.extension = extension;\n        return _this;\n    }\n    WebviewEditorInput.updateStyleElement = function (id, iconPath) {\n        if (!this._styleElement) {\n            this._styleElement = dom.createStyleSheet();\n            this._styleElement.className = 'webview-icons';\n        }\n        if (!iconPath) {\n            this._icons.delete(id);\n        }\n        else {\n            this._icons.set(id, iconPath);\n        }\n        var cssRules = [];\n        this._icons.forEach(function (value, key) {\n            var webviewSelector = \".show-file-icons .webview-\" + key + \"-name-file-icon::before\";\n            if (uri_1.URI.isUri(value)) {\n                cssRules.push(webviewSelector + \" { content: \\\"\\\"; background-image: url(\" + value.toString() + \"); }\");\n            }\n            else {\n                cssRules.push(\".vs \" + webviewSelector + \" { content: \\\"\\\"; background-image: url(\" + value.light.toString() + \"); }\");\n                cssRules.push(\".vs-dark \" + webviewSelector + \" { content: \\\"\\\"; background-image: url(\" + value.dark.toString() + \"); }\");\n            }\n        });\n        this._styleElement.innerHTML = cssRules.join('\\n');\n    };\n    WebviewEditorInput.prototype.getTypeId = function () {\n        return WebviewEditorInput.typeId;\n    };\n    WebviewEditorInput.prototype.getId = function () {\n        return this._id;\n    };\n    WebviewEditorInput.prototype.dispose = function () {\n        this.disposeWebview();\n        if (this._container) {\n            this._container.remove();\n            this._container = undefined;\n        }\n        if (this._events && this._events.onDispose) {\n            this._events.onDispose();\n        }\n        this._events = undefined;\n        this._webview = undefined;\n        _super.prototype.dispose.call(this);\n    };\n    WebviewEditorInput.prototype.getResource = function () {\n        return uri_1.URI.from({\n            scheme: 'webview-panel',\n            path: \"webview-panel/webview-\" + this._id\n        });\n    };\n    WebviewEditorInput.prototype.getName = function () {\n        return this._name;\n    };\n    WebviewEditorInput.prototype.getTitle = function () {\n        return this.getName();\n    };\n    WebviewEditorInput.prototype.getDescription = function () {\n        return null;\n    };\n    WebviewEditorInput.prototype.setName = function (value) {\n        this._name = value;\n        this._onDidChangeLabel.fire();\n    };\n    Object.defineProperty(WebviewEditorInput.prototype, \"iconPath\", {\n        get: function () {\n            return this._iconPath;\n        },\n        set: function (value) {\n            this._iconPath = value;\n            WebviewEditorInput.updateStyleElement(this._id, value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WebviewEditorInput.prototype.matches = function (other) {\n        return other === this || (other instanceof WebviewEditorInput && other._id === this._id);\n    };\n    Object.defineProperty(WebviewEditorInput.prototype, \"group\", {\n        get: function () {\n            return this._group;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WebviewEditorInput.prototype, \"html\", {\n        get: function () {\n            return this._html;\n        },\n        set: function (value) {\n            if (value === this._currentWebviewHtml) {\n                return;\n            }\n            this._html = value;\n            if (this._webview) {\n                this._webview.contents = value;\n                this._currentWebviewHtml = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WebviewEditorInput.prototype, \"state\", {\n        get: function () {\n            return this._state;\n        },\n        set: function (value) {\n            this._state = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WebviewEditorInput.prototype, \"webviewState\", {\n        get: function () {\n            return this._state.state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WebviewEditorInput.prototype, \"options\", {\n        get: function () {\n            return this._options;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WebviewEditorInput.prototype.setOptions = function (value) {\n        this._options = tslib_1.__assign({}, this._options, value);\n        if (this._webview) {\n            this._webview.options = {\n                allowScripts: this._options.enableScripts,\n                localResourceRoots: this._options.localResourceRoots,\n                portMappings: this._options.portMapping,\n            };\n        }\n    };\n    WebviewEditorInput.prototype.resolve = function () {\n        return Promise.resolve(new editor_1.EditorModel());\n    };\n    WebviewEditorInput.prototype.supportsSplitEditor = function () {\n        return false;\n    };\n    Object.defineProperty(WebviewEditorInput.prototype, \"container\", {\n        get: function () {\n            if (!this._container) {\n                this._container = document.createElement('div');\n                this._container.id = \"webview-\" + this._id;\n                var part = this._layoutService.getContainer(layoutService_1.Parts.EDITOR_PART);\n                part.appendChild(this._container);\n            }\n            return this._container;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WebviewEditorInput.prototype, \"webview\", {\n        get: function () {\n            return this._webview;\n        },\n        set: function (value) {\n            var _this = this;\n            this._webviewDisposables = lifecycle_1.dispose(this._webviewDisposables);\n            this._webview = value;\n            if (!this._webview) {\n                return;\n            }\n            this._webview.onDidClickLink(function (link) {\n                if (_this._events && _this._events.onDidClickLink) {\n                    _this._events.onDidClickLink(link, _this._options);\n                }\n            }, null, this._webviewDisposables);\n            this._webview.onMessage(function (message) {\n                if (_this._events && _this._events.onMessage) {\n                    _this._events.onMessage(message);\n                }\n            }, null, this._webviewDisposables);\n            this._webview.onDidScroll(function (message) {\n                _this._scrollYPercentage = message.scrollYPercentage;\n            }, null, this._webviewDisposables);\n            this._webview.onDidUpdateState(function (newState) {\n                _this._state.state = newState;\n            }, null, this._webviewDisposables);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WebviewEditorInput.prototype, \"scrollYPercentage\", {\n        get: function () {\n            return this._scrollYPercentage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WebviewEditorInput.prototype.claimWebview = function (owner) {\n        this._webviewOwner = owner;\n    };\n    WebviewEditorInput.prototype.releaseWebview = function (owner) {\n        if (this._webviewOwner === owner) {\n            this._webviewOwner = undefined;\n            if (this._options.retainContextWhenHidden && this._container) {\n                this._container.style.visibility = 'hidden';\n            }\n            else {\n                this.disposeWebview();\n            }\n        }\n    };\n    WebviewEditorInput.prototype.disposeWebview = function () {\n        // The input owns the webview and its parent\n        if (this._webview) {\n            this._webview.dispose();\n            this._webview = undefined;\n        }\n        this._webviewDisposables = lifecycle_1.dispose(this._webviewDisposables);\n        this._webviewOwner = undefined;\n        if (this._container) {\n            this._container.style.visibility = 'hidden';\n        }\n        this._currentWebviewHtml = '';\n    };\n    WebviewEditorInput.prototype.updateGroup = function (group) {\n        this._group = group;\n    };\n    WebviewEditorInput.handlePool = 0;\n    WebviewEditorInput._icons = new Map();\n    WebviewEditorInput.typeId = 'workbench.editors.webviewInput';\n    WebviewEditorInput = tslib_1.__decorate([\n        tslib_1.__param(7, layoutService_1.IWorkbenchLayoutService)\n    ], WebviewEditorInput);\n    return WebviewEditorInput;\n}(editor_1.EditorInput));\nexports.WebviewEditorInput = WebviewEditorInput;\nvar RevivedWebviewEditorInput = /** @class */ (function (_super) {\n    tslib_1.__extends(RevivedWebviewEditorInput, _super);\n    function RevivedWebviewEditorInput(viewType, id, name, options, state, events, extension, reviver, partService) {\n        var _this = _super.call(this, viewType, id, name, options, state, events, extension, partService) || this;\n        _this.reviver = reviver;\n        _this._revived = false;\n        return _this;\n    }\n    RevivedWebviewEditorInput.prototype.resolve = function () {\n        return tslib_1.__awaiter(this, void 0, Promise, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._revived) return [3 /*break*/, 2];\n                        this._revived = true;\n                        return [4 /*yield*/, this.reviver(this)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, _super.prototype.resolve.call(this)];\n                }\n            });\n        });\n    };\n    RevivedWebviewEditorInput = tslib_1.__decorate([\n        tslib_1.__param(8, layoutService_1.IWorkbenchLayoutService)\n    ], RevivedWebviewEditorInput);\n    return RevivedWebviewEditorInput;\n}(WebviewEditorInput));\nexports.RevivedWebviewEditorInput = RevivedWebviewEditorInput;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/webview/electron-browser/webviewEditorInput.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/webview/electron-browser/webviewEditorInput.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from 'vs/base/browser/dom';\nimport { Emitter } from 'vs/base/common/event';\nimport { dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { IEditorModel } from 'vs/platform/editor/common/editor';\nimport { ExtensionIdentifier } from 'vs/platform/extensions/common/extensions';\nimport { EditorInput, EditorModel, GroupIdentifier, IEditorInput } from 'vs/workbench/common/editor';\nimport { IWorkbenchLayoutService, Parts } from 'vs/workbench/services/layout/browser/layoutService';\nimport { WebviewEvents, WebviewInputOptions } from './webviewEditorService';\nimport { WebviewElement, WebviewOptions } from './webviewElement';\n\nexport class WebviewEditorInput extends EditorInput {\n\tprivate static handlePool = 0;\n\n\tprivate static _styleElement?: HTMLStyleElement;\n\n\tprivate static _icons = new Map<number, { light: URI, dark: URI }>();\n\n\tprivate static updateStyleElement(\n\t\tid: number,\n\t\ticonPath: { light: URI, dark: URI } | undefined\n\t) {\n\t\tif (!this._styleElement) {\n\t\t\tthis._styleElement = dom.createStyleSheet();\n\t\t\tthis._styleElement.className = 'webview-icons';\n\t\t}\n\n\t\tif (!iconPath) {\n\t\t\tthis._icons.delete(id);\n\t\t} else {\n\t\t\tthis._icons.set(id, iconPath);\n\t\t}\n\n\t\tconst cssRules: string[] = [];\n\t\tthis._icons.forEach((value, key) => {\n\t\t\tconst webviewSelector = `.show-file-icons .webview-${key}-name-file-icon::before`;\n\t\t\tif (URI.isUri(value)) {\n\t\t\t\tcssRules.push(`${webviewSelector} { content: \"\"; background-image: url(${value.toString()}); }`);\n\t\t\t} else {\n\t\t\t\tcssRules.push(`.vs ${webviewSelector} { content: \"\"; background-image: url(${value.light.toString()}); }`);\n\t\t\t\tcssRules.push(`.vs-dark ${webviewSelector} { content: \"\"; background-image: url(${value.dark.toString()}); }`);\n\t\t\t}\n\t\t});\n\t\tthis._styleElement.innerHTML = cssRules.join('\\n');\n\t}\n\n\tpublic static readonly typeId = 'workbench.editors.webviewInput';\n\n\tprivate _name: string;\n\tprivate _iconPath?: { light: URI, dark: URI };\n\tprivate _options: WebviewInputOptions;\n\tprivate _html: string = '';\n\tprivate _currentWebviewHtml: string = '';\n\tpublic _events: WebviewEvents | undefined;\n\tprivate _container?: HTMLElement;\n\tprivate _webview: WebviewElement | undefined;\n\tprivate _webviewOwner: any;\n\tprivate _webviewDisposables: IDisposable[] = [];\n\tprivate _group?: GroupIdentifier;\n\tprivate _scrollYPercentage: number = 0;\n\tprivate _state: any;\n\n\tpublic readonly extension?: {\n\t\treadonly location: URI;\n\t\treadonly id: ExtensionIdentifier;\n\t};\n\tprivate readonly _id: number;\n\n\tconstructor(\n\t\tpublic readonly viewType: string,\n\t\tid: number | undefined,\n\t\tname: string,\n\t\toptions: WebviewInputOptions,\n\t\tstate: any,\n\t\tevents: WebviewEvents,\n\t\textension: undefined | {\n\t\t\treadonly location: URI;\n\t\t\treadonly id: ExtensionIdentifier;\n\t\t},\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t) {\n\t\tsuper();\n\n\t\tif (typeof id === 'number') {\n\t\t\tthis._id = id;\n\t\t\tWebviewEditorInput.handlePool = Math.max(id, WebviewEditorInput.handlePool) + 1;\n\t\t} else {\n\t\t\tthis._id = WebviewEditorInput.handlePool++;\n\t\t}\n\n\t\tthis._name = name;\n\t\tthis._options = options;\n\t\tthis._events = events;\n\t\tthis._state = state;\n\t\tthis.extension = extension;\n\t}\n\n\tpublic getTypeId(): string {\n\t\treturn WebviewEditorInput.typeId;\n\t}\n\n\tpublic getId(): number {\n\t\treturn this._id;\n\t}\n\n\tprivate readonly _onDidChangeIcon = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeIcon = this._onDidChangeIcon.event;\n\n\tpublic dispose() {\n\t\tthis.disposeWebview();\n\n\t\tif (this._container) {\n\t\t\tthis._container.remove();\n\t\t\tthis._container = undefined;\n\t\t}\n\n\t\tif (this._events && this._events.onDispose) {\n\t\t\tthis._events.onDispose();\n\t\t}\n\t\tthis._events = undefined;\n\n\t\tthis._webview = undefined;\n\t\tsuper.dispose();\n\t}\n\n\tpublic getResource(): URI {\n\t\treturn URI.from({\n\t\t\tscheme: 'webview-panel',\n\t\t\tpath: `webview-panel/webview-${this._id}`\n\t\t});\n\t}\n\n\tpublic getName(): string {\n\t\treturn this._name;\n\t}\n\n\tpublic getTitle() {\n\t\treturn this.getName();\n\t}\n\n\tpublic getDescription() {\n\t\treturn null;\n\t}\n\n\tpublic setName(value: string): void {\n\t\tthis._name = value;\n\t\tthis._onDidChangeLabel.fire();\n\t}\n\n\tpublic get iconPath() {\n\t\treturn this._iconPath;\n\t}\n\n\tpublic set iconPath(value: { light: URI, dark: URI } | undefined) {\n\t\tthis._iconPath = value;\n\t\tWebviewEditorInput.updateStyleElement(this._id, value);\n\t}\n\n\tpublic matches(other: IEditorInput): boolean {\n\t\treturn other === this || (other instanceof WebviewEditorInput && other._id === this._id);\n\t}\n\n\tpublic get group(): GroupIdentifier | undefined {\n\t\treturn this._group;\n\t}\n\n\tpublic get html(): string {\n\t\treturn this._html;\n\t}\n\n\tpublic set html(value: string) {\n\t\tif (value === this._currentWebviewHtml) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._html = value;\n\n\t\tif (this._webview) {\n\t\t\tthis._webview.contents = value;\n\t\t\tthis._currentWebviewHtml = value;\n\t\t}\n\t}\n\n\tpublic get state(): any {\n\t\treturn this._state;\n\t}\n\n\tpublic set state(value: any) {\n\t\tthis._state = value;\n\t}\n\n\tpublic get webviewState() {\n\t\treturn this._state.state;\n\t}\n\n\tpublic get options(): WebviewInputOptions {\n\t\treturn this._options;\n\t}\n\n\tpublic setOptions(value: WebviewOptions) {\n\t\tthis._options = {\n\t\t\t...this._options,\n\t\t\t...value\n\t\t};\n\n\t\tif (this._webview) {\n\t\t\tthis._webview.options = {\n\t\t\t\tallowScripts: this._options.enableScripts,\n\t\t\t\tlocalResourceRoots: this._options.localResourceRoots,\n\t\t\t\tportMappings: this._options.portMapping,\n\t\t\t};\n\t\t}\n\t}\n\n\tpublic resolve(): Promise<IEditorModel> {\n\t\treturn Promise.resolve(new EditorModel());\n\t}\n\n\tpublic supportsSplitEditor() {\n\t\treturn false;\n\t}\n\n\tpublic get container(): HTMLElement {\n\t\tif (!this._container) {\n\t\t\tthis._container = document.createElement('div');\n\t\t\tthis._container.id = `webview-${this._id}`;\n\t\t\tconst part = this._layoutService.getContainer(Parts.EDITOR_PART);\n\t\t\tpart.appendChild(this._container);\n\t\t}\n\t\treturn this._container;\n\t}\n\n\tpublic get webview(): WebviewElement | undefined {\n\t\treturn this._webview;\n\t}\n\n\tpublic set webview(value: WebviewElement | undefined) {\n\t\tthis._webviewDisposables = dispose(this._webviewDisposables);\n\n\t\tthis._webview = value;\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webview.onDidClickLink(link => {\n\t\t\tif (this._events && this._events.onDidClickLink) {\n\t\t\t\tthis._events.onDidClickLink(link, this._options);\n\t\t\t}\n\t\t}, null, this._webviewDisposables);\n\n\t\tthis._webview.onMessage(message => {\n\t\t\tif (this._events && this._events.onMessage) {\n\t\t\t\tthis._events.onMessage(message);\n\t\t\t}\n\t\t}, null, this._webviewDisposables);\n\n\t\tthis._webview.onDidScroll(message => {\n\t\t\tthis._scrollYPercentage = message.scrollYPercentage;\n\t\t}, null, this._webviewDisposables);\n\n\t\tthis._webview.onDidUpdateState(newState => {\n\t\t\tthis._state.state = newState;\n\t\t}, null, this._webviewDisposables);\n\t}\n\n\tpublic get scrollYPercentage() {\n\t\treturn this._scrollYPercentage;\n\t}\n\n\tpublic claimWebview(owner: any) {\n\t\tthis._webviewOwner = owner;\n\t}\n\n\tpublic releaseWebview(owner: any) {\n\t\tif (this._webviewOwner === owner) {\n\t\t\tthis._webviewOwner = undefined;\n\t\t\tif (this._options.retainContextWhenHidden && this._container) {\n\t\t\t\tthis._container.style.visibility = 'hidden';\n\t\t\t} else {\n\t\t\t\tthis.disposeWebview();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic disposeWebview() {\n\t\t// The input owns the webview and its parent\n\t\tif (this._webview) {\n\t\t\tthis._webview.dispose();\n\t\t\tthis._webview = undefined;\n\t\t}\n\n\t\tthis._webviewDisposables = dispose(this._webviewDisposables);\n\n\t\tthis._webviewOwner = undefined;\n\n\t\tif (this._container) {\n\t\t\tthis._container.style.visibility = 'hidden';\n\t\t}\n\n\t\tthis._currentWebviewHtml = '';\n\t}\n\n\tpublic updateGroup(group: GroupIdentifier): void {\n\t\tthis._group = group;\n\t}\n}\n\n\nexport class RevivedWebviewEditorInput extends WebviewEditorInput {\n\tprivate _revived: boolean = false;\n\n\tconstructor(\n\t\tviewType: string,\n\t\tid: number | undefined,\n\t\tname: string,\n\t\toptions: WebviewInputOptions,\n\t\tstate: any,\n\t\tevents: WebviewEvents,\n\t\textension: undefined | {\n\t\t\treadonly location: URI;\n\t\t\treadonly id: ExtensionIdentifier\n\t\t},\n\t\tpublic readonly reviver: (input: WebviewEditorInput) => Promise<void>,\n\t\t@IWorkbenchLayoutService partService: IWorkbenchLayoutService,\n\t) {\n\t\tsuper(viewType, id, name, options, state, events, extension, partService);\n\t}\n\n\tpublic async resolve(): Promise<IEditorModel> {\n\t\tif (!this._revived) {\n\t\t\tthis._revived = true;\n\t\t\tawait this.reviver(this);\n\t\t}\n\t\treturn super.resolve();\n\t}\n}"]}]}