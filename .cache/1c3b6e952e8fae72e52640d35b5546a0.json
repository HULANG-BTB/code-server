{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanelActions.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanelActions.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar async_1 = require(\"vs/base/common/async\");\nvar DOM = require(\"vs/base/browser/dom\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar contextView_1 = require(\"vs/platform/contextview/browser/contextView\");\nvar panel_1 = require(\"vs/workbench/browser/panel\");\nvar messages_1 = require(\"vs/workbench/contrib/markers/browser/messages\");\nvar constants_1 = require(\"vs/workbench/contrib/markers/browser/constants\");\nvar layoutService_1 = require(\"vs/workbench/services/layout/browser/layoutService\");\nvar panelService_1 = require(\"vs/workbench/services/panel/common/panelService\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar styler_1 = require(\"vs/platform/theme/common/styler\");\nvar markers_1 = require(\"vs/workbench/contrib/markers/browser/markers\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar nls_1 = require(\"vs/nls\");\nvar checkbox_1 = require(\"vs/base/browser/ui/checkbox/checkbox\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar contextScopedHistoryWidget_1 = require(\"vs/platform/browser/contextScopedHistoryWidget\");\nvar contextkey_1 = require(\"vs/platform/contextkey/common/contextkey\");\nvar event_1 = require(\"vs/base/common/event\");\nvar telemetry_1 = require(\"vs/platform/telemetry/common/telemetry\");\nvar ToggleMarkersPanelAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ToggleMarkersPanelAction, _super);\n    function ToggleMarkersPanelAction(id, label, layoutService, panelService, markersWorkbenchService) {\n        return _super.call(this, id, label, constants_1.default.MARKERS_PANEL_ID, panelService, layoutService) || this;\n    }\n    ToggleMarkersPanelAction.ID = 'workbench.actions.view.problems';\n    ToggleMarkersPanelAction.LABEL = messages_1.default.MARKERS_PANEL_TOGGLE_LABEL;\n    ToggleMarkersPanelAction = tslib_1.__decorate([\n        tslib_1.__param(2, layoutService_1.IWorkbenchLayoutService),\n        tslib_1.__param(3, panelService_1.IPanelService),\n        tslib_1.__param(4, markers_1.IMarkersWorkbenchService)\n    ], ToggleMarkersPanelAction);\n    return ToggleMarkersPanelAction;\n}(panel_1.TogglePanelAction));\nexports.ToggleMarkersPanelAction = ToggleMarkersPanelAction;\nvar ShowProblemsPanelAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ShowProblemsPanelAction, _super);\n    function ShowProblemsPanelAction(id, label, panelService) {\n        var _this = _super.call(this, id, label) || this;\n        _this.panelService = panelService;\n        return _this;\n    }\n    ShowProblemsPanelAction.prototype.run = function () {\n        this.panelService.openPanel(constants_1.default.MARKERS_PANEL_ID, true);\n        return Promise.resolve();\n    };\n    ShowProblemsPanelAction.ID = 'workbench.action.problems.focus';\n    ShowProblemsPanelAction.LABEL = messages_1.default.MARKERS_PANEL_SHOW_LABEL;\n    ShowProblemsPanelAction = tslib_1.__decorate([\n        tslib_1.__param(2, panelService_1.IPanelService)\n    ], ShowProblemsPanelAction);\n    return ShowProblemsPanelAction;\n}(actions_1.Action));\nexports.ShowProblemsPanelAction = ShowProblemsPanelAction;\nvar MarkersFilterAction = /** @class */ (function (_super) {\n    tslib_1.__extends(MarkersFilterAction, _super);\n    function MarkersFilterAction(options) {\n        var _this = _super.call(this, MarkersFilterAction.ID, messages_1.default.MARKERS_PANEL_ACTION_TOOLTIP_FILTER, 'markers-panel-action-filter', true) || this;\n        _this._filterText = options.filterText;\n        _this._useFilesExclude = options.useFilesExclude;\n        _this.filterHistory = options.filterHistory;\n        return _this;\n    }\n    Object.defineProperty(MarkersFilterAction.prototype, \"filterText\", {\n        get: function () {\n            return this._filterText;\n        },\n        set: function (filterText) {\n            if (this._filterText !== filterText) {\n                this._filterText = filterText;\n                this._onDidChange.fire({ filterText: true });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkersFilterAction.prototype, \"useFilesExclude\", {\n        get: function () {\n            return this._useFilesExclude;\n        },\n        set: function (filesExclude) {\n            if (this._useFilesExclude !== filesExclude) {\n                this._useFilesExclude = filesExclude;\n                this._onDidChange.fire({ useFilesExclude: true });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MarkersFilterAction.ID = 'workbench.actions.problems.filter';\n    return MarkersFilterAction;\n}(actions_1.Action));\nexports.MarkersFilterAction = MarkersFilterAction;\nvar MarkersFilterActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(MarkersFilterActionItem, _super);\n    function MarkersFilterActionItem(action, filterController, instantiationService, contextViewService, themeService, telemetryService, contextKeyService) {\n        var _this = _super.call(this, null, action) || this;\n        _this.action = action;\n        _this.filterController = filterController;\n        _this.instantiationService = instantiationService;\n        _this.contextViewService = contextViewService;\n        _this.themeService = themeService;\n        _this.telemetryService = telemetryService;\n        _this.focusContextKey = constants_1.default.MarkerPanelFilterFocusContextKey.bindTo(contextKeyService);\n        _this.delayedFilterUpdate = new async_1.Delayer(200);\n        _this._register(lifecycle_1.toDisposable(function () { return _this.delayedFilterUpdate.cancel(); }));\n        return _this;\n    }\n    MarkersFilterActionItem.prototype.render = function (container) {\n        this.container = container;\n        DOM.addClass(this.container, 'markers-panel-action-filter-container');\n        var filterContainer = DOM.append(this.container, DOM.$('.markers-panel-action-filter'));\n        this.createInput(filterContainer);\n        this.createControls(filterContainer);\n        this.adjustInputBox();\n    };\n    MarkersFilterActionItem.prototype.focus = function () {\n        if (this.filterInputBox) {\n            this.filterInputBox.focus();\n        }\n    };\n    MarkersFilterActionItem.prototype.toggleLayout = function (small) {\n        if (this.container) {\n            DOM.toggleClass(this.container, 'small', small);\n        }\n    };\n    MarkersFilterActionItem.prototype.createInput = function (container) {\n        var _this = this;\n        this.filterInputBox = this._register(this.instantiationService.createInstance(contextScopedHistoryWidget_1.ContextScopedHistoryInputBox, container, this.contextViewService, {\n            placeholder: messages_1.default.MARKERS_PANEL_FILTER_PLACEHOLDER,\n            ariaLabel: messages_1.default.MARKERS_PANEL_FILTER_ARIA_LABEL,\n            history: this.action.filterHistory\n        }));\n        this.filterInputBox.inputElement.setAttribute('aria-labelledby', 'markers-panel-arialabel');\n        this._register(styler_1.attachInputBoxStyler(this.filterInputBox, this.themeService));\n        this.filterInputBox.value = this.action.filterText;\n        this._register(this.filterInputBox.onDidChange(function (filter) { return _this.delayedFilterUpdate.trigger(function () { return _this.onDidInputChange(_this.filterInputBox); }); }));\n        this._register(this.action.onDidChange(function (event) {\n            if (event.filterText) {\n                _this.filterInputBox.value = _this.action.filterText;\n            }\n        }));\n        this._register(DOM.addStandardDisposableListener(this.filterInputBox.inputElement, DOM.EventType.KEY_DOWN, function (e) { return _this.onInputKeyDown(e, _this.filterInputBox); }));\n        this._register(DOM.addStandardDisposableListener(container, DOM.EventType.KEY_DOWN, this.handleKeyboardEvent));\n        this._register(DOM.addStandardDisposableListener(container, DOM.EventType.KEY_UP, this.handleKeyboardEvent));\n        var focusTracker = this._register(DOM.trackFocus(this.filterInputBox.inputElement));\n        this._register(focusTracker.onDidFocus(function () { return _this.focusContextKey.set(true); }));\n        this._register(focusTracker.onDidBlur(function () { return _this.focusContextKey.set(false); }));\n        this._register(lifecycle_1.toDisposable(function () { return _this.focusContextKey.reset(); }));\n    };\n    MarkersFilterActionItem.prototype.createControls = function (container) {\n        this.controlsContainer = DOM.append(container, DOM.$('.markers-panel-filter-controls'));\n        this.createBadge(this.controlsContainer);\n        this.createFilesExcludeCheckbox(this.controlsContainer);\n    };\n    MarkersFilterActionItem.prototype.createBadge = function (container) {\n        var _this = this;\n        this.filterBadge = DOM.append(container, DOM.$('.markers-panel-filter-badge'));\n        this._register(styler_1.attachStylerCallback(this.themeService, { badgeBackground: colorRegistry_1.badgeBackground, badgeForeground: colorRegistry_1.badgeForeground, contrastBorder: colorRegistry_1.contrastBorder }, function (colors) {\n            var background = colors.badgeBackground ? colors.badgeBackground.toString() : null;\n            var foreground = colors.badgeForeground ? colors.badgeForeground.toString() : null;\n            var border = colors.contrastBorder ? colors.contrastBorder.toString() : null;\n            _this.filterBadge.style.backgroundColor = background;\n            _this.filterBadge.style.borderWidth = border ? '1px' : null;\n            _this.filterBadge.style.borderStyle = border ? 'solid' : null;\n            _this.filterBadge.style.borderColor = border;\n            _this.filterBadge.style.color = foreground;\n        }));\n        this.updateBadge();\n        this._register(this.filterController.onDidFilter(function () { return _this.updateBadge(); }));\n    };\n    MarkersFilterActionItem.prototype.createFilesExcludeCheckbox = function (container) {\n        var _this = this;\n        var filesExcludeFilter = this._register(new checkbox_1.Checkbox({\n            actionClassName: 'markers-panel-filter-filesExclude',\n            title: this.action.useFilesExclude ? messages_1.default.MARKERS_PANEL_ACTION_TOOLTIP_DO_NOT_USE_FILES_EXCLUDE : messages_1.default.MARKERS_PANEL_ACTION_TOOLTIP_USE_FILES_EXCLUDE,\n            isChecked: this.action.useFilesExclude\n        }));\n        this._register(filesExcludeFilter.onChange(function () {\n            filesExcludeFilter.domNode.title = filesExcludeFilter.checked ? messages_1.default.MARKERS_PANEL_ACTION_TOOLTIP_DO_NOT_USE_FILES_EXCLUDE : messages_1.default.MARKERS_PANEL_ACTION_TOOLTIP_USE_FILES_EXCLUDE;\n            _this.action.useFilesExclude = filesExcludeFilter.checked;\n            _this.focus();\n        }));\n        this._register(this.action.onDidChange(function (event) {\n            if (event.useFilesExclude) {\n                filesExcludeFilter.checked = _this.action.useFilesExclude;\n            }\n        }));\n        this._register(styler_1.attachCheckboxStyler(filesExcludeFilter, this.themeService));\n        container.appendChild(filesExcludeFilter.domNode);\n    };\n    MarkersFilterActionItem.prototype.onDidInputChange = function (inputbox) {\n        inputbox.addToHistory();\n        this.action.filterText = inputbox.value;\n        this.action.filterHistory = inputbox.getHistory();\n        this.reportFilteringUsed();\n    };\n    MarkersFilterActionItem.prototype.updateBadge = function () {\n        var _a = this.filterController.getFilterStats(), total = _a.total, filtered = _a.filtered;\n        DOM.toggleClass(this.filterBadge, 'hidden', total === filtered || filtered === 0);\n        this.filterBadge.textContent = nls_1.localize('showing filtered problems', \"Showing {0} of {1}\", filtered, total);\n        this.adjustInputBox();\n    };\n    MarkersFilterActionItem.prototype.adjustInputBox = function () {\n        this.filterInputBox.inputElement.style.paddingRight = (DOM.getTotalWidth(this.controlsContainer) || 20) + 'px';\n    };\n    // Action toolbar is swallowing some keys for action items which should not be for an input box\n    MarkersFilterActionItem.prototype.handleKeyboardEvent = function (event) {\n        if (event.equals(keyCodes_1.KeyCode.Space)\n            || event.equals(keyCodes_1.KeyCode.LeftArrow)\n            || event.equals(keyCodes_1.KeyCode.RightArrow)\n            || event.equals(keyCodes_1.KeyCode.Escape)) {\n            event.stopPropagation();\n        }\n    };\n    MarkersFilterActionItem.prototype.onInputKeyDown = function (event, filterInputBox) {\n        var handled = false;\n        if (event.equals(keyCodes_1.KeyCode.Escape)) {\n            filterInputBox.value = '';\n            handled = true;\n        }\n        if (handled) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    };\n    MarkersFilterActionItem.prototype.reportFilteringUsed = function () {\n        var filterOptions = this.filterController.getFilterOptions();\n        var data = {};\n        data['errors'] = filterOptions.filterErrors;\n        data['warnings'] = filterOptions.filterWarnings;\n        data['infos'] = filterOptions.filterInfos;\n        /* __GDPR__\n            \"problems.filter\" : {\n                \"errors\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n                \"warnings\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n                \"infos\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n            }\n        */\n        this.telemetryService.publicLog('problems.filter', data);\n    };\n    MarkersFilterActionItem = tslib_1.__decorate([\n        tslib_1.__param(2, instantiation_1.IInstantiationService),\n        tslib_1.__param(3, contextView_1.IContextViewService),\n        tslib_1.__param(4, themeService_1.IThemeService),\n        tslib_1.__param(5, telemetry_1.ITelemetryService),\n        tslib_1.__param(6, contextkey_1.IContextKeyService)\n    ], MarkersFilterActionItem);\n    return MarkersFilterActionItem;\n}(actionbar_1.BaseActionItem));\nexports.MarkersFilterActionItem = MarkersFilterActionItem;\nvar QuickFixAction = /** @class */ (function (_super) {\n    tslib_1.__extends(QuickFixAction, _super);\n    function QuickFixAction(marker) {\n        var _this = _super.call(this, QuickFixAction.ID, messages_1.default.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX, QuickFixAction.CLASS, false) || this;\n        _this.marker = marker;\n        _this.disposables = [];\n        _this._onShowQuickFixes = new event_1.Emitter();\n        _this.onShowQuickFixes = _this._onShowQuickFixes.event;\n        _this._quickFixes = [];\n        return _this;\n    }\n    Object.defineProperty(QuickFixAction.prototype, \"quickFixes\", {\n        get: function () {\n            return this._quickFixes;\n        },\n        set: function (quickFixes) {\n            this._quickFixes = quickFixes;\n            this.enabled = this._quickFixes.length > 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    QuickFixAction.prototype.autoFixable = function (autofixable) {\n        this.class = autofixable ? QuickFixAction.AUTO_FIX_CLASS : QuickFixAction.CLASS;\n    };\n    QuickFixAction.prototype.run = function () {\n        this._onShowQuickFixes.fire();\n        return Promise.resolve();\n    };\n    QuickFixAction.prototype.dispose = function () {\n        lifecycle_1.dispose(this.disposables);\n        _super.prototype.dispose.call(this);\n    };\n    QuickFixAction.ID = 'workbench.actions.problems.quickfix';\n    QuickFixAction.CLASS = 'markers-panel-action-quickfix';\n    QuickFixAction.AUTO_FIX_CLASS = QuickFixAction.CLASS + ' autofixable';\n    return QuickFixAction;\n}(actions_1.Action));\nexports.QuickFixAction = QuickFixAction;\nvar QuickFixActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(QuickFixActionItem, _super);\n    function QuickFixActionItem(action, contextMenuService) {\n        var _this = _super.call(this, null, action, { icon: true, label: false }) || this;\n        _this.contextMenuService = contextMenuService;\n        return _this;\n    }\n    QuickFixActionItem.prototype.onClick = function (event) {\n        DOM.EventHelper.stop(event, true);\n        this.showQuickFixes();\n    };\n    QuickFixActionItem.prototype.showQuickFixes = function () {\n        if (!this.element) {\n            return;\n        }\n        if (!this.isEnabled()) {\n            return;\n        }\n        var elementPosition = DOM.getDomNodePagePosition(this.element);\n        var quickFixes = this.getAction().quickFixes;\n        if (quickFixes.length) {\n            this.contextMenuService.showContextMenu({\n                getAnchor: function () { return ({ x: elementPosition.left + 10, y: elementPosition.top + elementPosition.height + 4 }); },\n                getActions: function () { return quickFixes; }\n            });\n        }\n    };\n    QuickFixActionItem = tslib_1.__decorate([\n        tslib_1.__param(1, contextView_1.IContextMenuService)\n    ], QuickFixActionItem);\n    return QuickFixActionItem;\n}(actionbar_1.ActionItem));\nexports.QuickFixActionItem = QuickFixActionItem;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanelActions.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/markers/browser/markersPanelActions.ts"],"names":[],"mappings":";AAAA;;;gGAGgG;;;AAEhG,8CAA+C;AAC/C,yCAA2C;AAC3C,kDAA6E;AAE7E,oDAAkD;AAElD,2EAAuG;AACvG,oDAA+D;AAC/D,0EAAqE;AACrE,4EAAuE;AACvE,oFAA6F;AAC7F,gFAAgF;AAChF,sEAAsE;AACtE,0DAAmH;AACnH,wEAAwF;AACxF,sDAA8E;AAC9E,oEAAoF;AACpF,wEAA0G;AAC1G,8BAAkC;AAClC,iEAAgE;AAChE,gFAAuF;AACvF,6FAA8F;AAE9F,uEAA2F;AAC3F,8CAAsD;AAEtD,oEAA2E;AAE3E;IAA8C,oDAAiB;IAK9D,kCAAY,EAAU,EAAE,KAAa,EACX,aAAsC,EAChD,YAA2B,EAChB,uBAAiD;eAE3E,kBAAM,EAAE,EAAE,KAAK,EAAE,mBAAS,CAAC,gBAAgB,EAAE,YAAY,EAAE,aAAa,CAAC;IAC1E,CAAC;IATsB,2BAAE,GAAG,iCAAiC,CAAC;IACvC,8BAAK,GAAG,kBAAQ,CAAC,0BAA0B,CAAC;IAHvD,wBAAwB;QAMlC,mBAAA,uCAAuB,CAAA;QACvB,mBAAA,4BAAa,CAAA;QACb,mBAAA,kCAAwB,CAAA;OARd,wBAAwB,CAYpC;IAAD,+BAAC;CAAA,AAZD,CAA8C,yBAAiB,GAY9D;AAZY,4DAAwB;AAcrC;IAA6C,mDAAM;IAKlD,iCAAY,EAAU,EAAE,KAAa,EACJ,YAA2B;QAD5D,YAGC,kBAAM,EAAE,EAAE,KAAK,CAAC,SAChB;QAHgC,kBAAY,GAAZ,YAAY,CAAe;;IAG5D,CAAC;IAEM,qCAAG,GAAV;QACC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,mBAAS,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QAC9D,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAZsB,0BAAE,GAAG,iCAAiC,CAAC;IACvC,6BAAK,GAAG,kBAAQ,CAAC,wBAAwB,CAAC;IAHrD,uBAAuB;QAMjC,mBAAA,4BAAa,CAAA;OANH,uBAAuB,CAenC;IAAD,8BAAC;CAAA,AAfD,CAA6C,gBAAM,GAelD;AAfY,0DAAuB;AA4BpC;IAAyC,+CAAM;IAI9C,6BAAY,OAAoC;QAAhD,YACC,kBAAM,mBAAmB,CAAC,EAAE,EAAE,kBAAQ,CAAC,mCAAmC,EAAE,6BAA6B,EAAE,IAAI,CAAC,SAIhH;QAHA,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC;QACtC,KAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,eAAe,CAAC;QAChD,KAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;;IAC5C,CAAC;IAGD,sBAAI,2CAAU;aAAd;YACC,OAAO,IAAI,CAAC,WAAW,CAAC;QACzB,CAAC;aACD,UAAe,UAAkB;YAChC,IAAI,IAAI,CAAC,WAAW,KAAK,UAAU,EAAE;gBACpC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;gBAC9B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAkC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;aAC9E;QACF,CAAC;;;OANA;IAWD,sBAAI,gDAAe;aAAnB;YACC,OAAO,IAAI,CAAC,gBAAgB,CAAC;QAC9B,CAAC;aACD,UAAoB,YAAqB;YACxC,IAAI,IAAI,CAAC,gBAAgB,KAAK,YAAY,EAAE;gBAC3C,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC;gBACrC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAkC,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;aACnF;QACF,CAAC;;;OANA;IAzBsB,sBAAE,GAAW,mCAAmC,CAAC;IAgCzE,0BAAC;CAAA,AAlCD,CAAyC,gBAAM,GAkC9C;AAlCY,kDAAmB;AA0ChC;IAA6C,mDAAc;IAS1D,iCACU,MAA2B,EAC5B,gBAAyC,EACT,oBAA2C,EAC7C,kBAAuC,EAC7C,YAA2B,EACvB,gBAAmC,EACnD,iBAAqC;QAP1D,YASC,kBAAM,IAAI,EAAE,MAAM,CAAC,SAInB;QAZS,YAAM,GAAN,MAAM,CAAqB;QAC5B,sBAAgB,GAAhB,gBAAgB,CAAyB;QACT,0BAAoB,GAApB,oBAAoB,CAAuB;QAC7C,wBAAkB,GAAlB,kBAAkB,CAAqB;QAC7C,kBAAY,GAAZ,YAAY,CAAe;QACvB,sBAAgB,GAAhB,gBAAgB,CAAmB;QAIvE,KAAI,CAAC,eAAe,GAAG,mBAAS,CAAC,gCAAgC,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC5F,KAAI,CAAC,mBAAmB,GAAG,IAAI,eAAO,CAAO,GAAG,CAAC,CAAC;QAClD,KAAI,CAAC,SAAS,CAAC,wBAAY,CAAC,cAAM,OAAA,KAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,EAAjC,CAAiC,CAAC,CAAC,CAAC;;IACvE,CAAC;IAED,wCAAM,GAAN,UAAO,SAAsB;QAC5B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,uCAAuC,CAAC,CAAC;QAEtE,IAAM,eAAe,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,8BAA8B,CAAC,CAAC,CAAC;QAC1F,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAErC,IAAI,CAAC,cAAc,EAAE,CAAC;IACvB,CAAC;IAED,uCAAK,GAAL;QACC,IAAI,IAAI,CAAC,cAAc,EAAE;YACxB,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;SAC5B;IACF,CAAC;IAED,8CAAY,GAAZ,UAAa,KAAc;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;SAChD;IACF,CAAC;IAEO,6CAAW,GAAnB,UAAoB,SAAsB;QAA1C,iBAuBC;QAtBA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,yDAA4B,EAAE,SAAS,EAAE,IAAI,CAAC,kBAAkB,EAAE;YAC/I,WAAW,EAAE,kBAAQ,CAAC,gCAAgC;YACtD,SAAS,EAAE,kBAAQ,CAAC,+BAA+B;YACnD,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa;SAClC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,YAAY,CAAC,iBAAiB,EAAE,yBAAyB,CAAC,CAAC;QAC5F,IAAI,CAAC,SAAS,CAAC,6BAAoB,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;QAC7E,IAAI,CAAC,cAAc,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QACnD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,UAAA,MAAM,IAAI,OAAA,KAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,cAAM,OAAA,KAAI,CAAC,gBAAgB,CAAC,KAAI,CAAC,cAAc,CAAC,EAA1C,CAA0C,CAAC,EAAlF,CAAkF,CAAC,CAAC,CAAC;QAC9I,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,UAAC,KAAsC;YAC7E,IAAI,KAAK,CAAC,UAAU,EAAE;gBACrB,KAAI,CAAC,cAAc,CAAC,KAAK,GAAG,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC;aACnD;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,UAAC,CAAM,IAAK,OAAA,KAAI,CAAC,cAAc,CAAC,CAAC,EAAE,KAAI,CAAC,cAAc,CAAC,EAA3C,CAA2C,CAAC,CAAC,CAAC;QACrK,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAC/G,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAE7G,IAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;QACtF,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,EAA9B,CAA8B,CAAC,CAAC,CAAC;QAC9E,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,EAA/B,CAA+B,CAAC,CAAC,CAAC;QAC9E,IAAI,CAAC,SAAS,CAAC,wBAAY,CAAC,cAAM,OAAA,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,EAA5B,CAA4B,CAAC,CAAC,CAAC;IAClE,CAAC;IAEO,gDAAc,GAAtB,UAAuB,SAAsB;QAC5C,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,gCAAgC,CAAC,CAAC,CAAC;QACxF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACzC,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACzD,CAAC;IAEO,6CAAW,GAAnB,UAAoB,SAAsB;QAA1C,iBAgBC;QAfA,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAAC;QAC/E,IAAI,CAAC,SAAS,CAAC,6BAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,eAAe,iCAAA,EAAE,eAAe,iCAAA,EAAE,cAAc,gCAAA,EAAE,EAAE,UAAA,MAAM;YAClH,IAAM,UAAU,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YACrF,IAAM,UAAU,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YACrF,IAAM,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YAE/E,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,eAAe,GAAG,UAAU,CAAC;YAEpD,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;YAC3D,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;YAC7D,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,GAAG,MAAM,CAAC;YAC5C,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC;QAC3C,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,cAAM,OAAA,KAAI,CAAC,WAAW,EAAE,EAAlB,CAAkB,CAAC,CAAC,CAAC;IAC7E,CAAC;IAEO,4DAA0B,GAAlC,UAAmC,SAAsB;QAAzD,iBAmBC;QAlBA,IAAM,kBAAkB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,mBAAQ,CAAC;YACtD,eAAe,EAAE,mCAAmC;YACpD,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,kBAAQ,CAAC,qDAAqD,CAAC,CAAC,CAAC,kBAAQ,CAAC,8CAA8C;YAC7J,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe;SACtC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC1C,kBAAkB,CAAC,OAAO,CAAC,KAAK,GAAG,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,kBAAQ,CAAC,qDAAqD,CAAC,CAAC,CAAC,kBAAQ,CAAC,8CAA8C,CAAC;YACzL,KAAI,CAAC,MAAM,CAAC,eAAe,GAAG,kBAAkB,CAAC,OAAO,CAAC;YACzD,KAAI,CAAC,KAAK,EAAE,CAAC;QACd,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,UAAC,KAAsC;YAC7E,IAAI,KAAK,CAAC,eAAe,EAAE;gBAC1B,kBAAkB,CAAC,OAAO,GAAG,KAAI,CAAC,MAAM,CAAC,eAAe,CAAC;aACzD;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,6BAAoB,CAAC,kBAAkB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;QAC5E,SAAS,CAAC,WAAW,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;IACnD,CAAC;IAEO,kDAAgB,GAAxB,UAAyB,QAAyB;QACjD,QAAQ,CAAC,YAAY,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC;QACxC,IAAI,CAAC,MAAM,CAAC,aAAa,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC;QAClD,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC5B,CAAC;IAEO,6CAAW,GAAnB;QACO,IAAA,2CAA4D,EAA1D,gBAAK,EAAE,sBAAmD,CAAC;QACnE,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,QAAQ,EAAE,KAAK,KAAK,QAAQ,IAAI,QAAQ,KAAK,CAAC,CAAC,CAAC;QAClF,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,cAAQ,CAAC,2BAA2B,EAAE,oBAAoB,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC5G,IAAI,CAAC,cAAc,EAAE,CAAC;IACvB,CAAC;IAEO,gDAAc,GAAtB;QACC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,KAAK,CAAC,YAAY,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC;IAChH,CAAC;IAED,+FAA+F;IACvF,qDAAmB,GAA3B,UAA4B,KAA4B;QACvD,IAAI,KAAK,CAAC,MAAM,CAAC,kBAAO,CAAC,KAAK,CAAC;eAC3B,KAAK,CAAC,MAAM,CAAC,kBAAO,CAAC,SAAS,CAAC;eAC/B,KAAK,CAAC,MAAM,CAAC,kBAAO,CAAC,UAAU,CAAC;eAChC,KAAK,CAAC,MAAM,CAAC,kBAAO,CAAC,MAAM,CAAC,EAC9B;YACD,KAAK,CAAC,eAAe,EAAE,CAAC;SACxB;IACF,CAAC;IAEO,gDAAc,GAAtB,UAAuB,KAA4B,EAAE,cAA+B;QACnF,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,KAAK,CAAC,MAAM,CAAC,kBAAO,CAAC,MAAM,CAAC,EAAE;YACjC,cAAc,CAAC,KAAK,GAAG,EAAE,CAAC;YAC1B,OAAO,GAAG,IAAI,CAAC;SACf;QACD,IAAI,OAAO,EAAE;YACZ,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;SACvB;IACF,CAAC;IAEO,qDAAmB,GAA3B;QACC,IAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,CAAC;QAC/D,IAAM,IAAI,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,QAAQ,CAAC,GAAG,aAAa,CAAC,YAAY,CAAC;QAC5C,IAAI,CAAC,UAAU,CAAC,GAAG,aAAa,CAAC,cAAc,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC,WAAW,CAAC;QAC1C;;;;;;UAME;QACF,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;IAC1D,CAAC;IA5KW,uBAAuB;QAYjC,mBAAA,qCAAqB,CAAA;QACrB,mBAAA,iCAAmB,CAAA;QACnB,mBAAA,4BAAa,CAAA;QACb,mBAAA,6BAAiB,CAAA;QACjB,mBAAA,+BAAkB,CAAA;OAhBR,uBAAuB,CA6KnC;IAAD,8BAAC;CAAA,AA7KD,CAA6C,0BAAc,GA6K1D;AA7KY,0DAAuB;AA+KpC;IAAoC,0CAAM;IAwBzC,wBACU,MAAc;QADxB,YAGC,kBAAM,cAAc,CAAC,EAAE,EAAE,kBAAQ,CAAC,qCAAqC,EAAE,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,SACrG;QAHS,YAAM,GAAN,MAAM,CAAQ;QAnBhB,iBAAW,GAAkB,EAAE,CAAC;QAEvB,uBAAiB,GAAkB,IAAI,eAAO,EAAQ,CAAC;QAC/D,sBAAgB,GAAgB,KAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;QAE9D,iBAAW,GAAc,EAAE,CAAC;;IAiBpC,CAAC;IAhBD,sBAAI,sCAAU;aAAd;YACC,OAAO,IAAI,CAAC,WAAW,CAAC;QACzB,CAAC;aACD,UAAe,UAAqB;YACnC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;QAC5C,CAAC;;;OAJA;IAMD,oCAAW,GAAX,UAAY,WAAoB;QAC/B,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC;IACjF,CAAC;IAQD,4BAAG,GAAH;QACC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;QAC9B,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,gCAAO,GAAP;QACC,mBAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC1B,iBAAM,OAAO,WAAE,CAAC;IACjB,CAAC;IApCsB,iBAAE,GAAW,qCAAqC,CAAC;IAClD,oBAAK,GAAW,+BAA+B,CAAC;IAChD,6BAAc,GAAW,cAAc,CAAC,KAAK,GAAG,cAAc,CAAC;IAmCxF,qBAAC;CAAA,AAvCD,CAAoC,gBAAM,GAuCzC;AAvCY,wCAAc;AAyC3B;IAAwC,8CAAU;IAEjD,4BAAY,MAAsB,EACK,kBAAuC;QAD9E,YAGC,kBAAM,IAAI,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,SACjD;QAHsC,wBAAkB,GAAlB,kBAAkB,CAAqB;;IAG9E,CAAC;IAEM,oCAAO,GAAd,UAAe,KAAoB;QAClC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,EAAE,CAAC;IACvB,CAAC;IAEM,2CAAc,GAArB;QACC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAClB,OAAO;SACP;QACD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACtB,OAAO;SACP;QACD,IAAM,eAAe,GAAG,GAAG,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjE,IAAM,UAAU,GAAoB,IAAI,CAAC,SAAS,EAAG,CAAC,UAAU,CAAC;QACjE,IAAI,UAAU,CAAC,MAAM,EAAE;YACtB,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC;gBACvC,SAAS,EAAE,cAAM,OAAA,CAAC,EAAE,CAAC,EAAE,eAAe,CAAC,IAAI,GAAG,EAAE,EAAE,CAAC,EAAE,eAAe,CAAC,GAAG,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAvF,CAAuF;gBACxG,UAAU,EAAE,cAAM,OAAA,UAAU,EAAV,CAAU;aAC5B,CAAC,CAAC;SACH;IACF,CAAC;IA5BW,kBAAkB;QAG5B,mBAAA,iCAAmB,CAAA;OAHT,kBAAkB,CA6B9B;IAAD,yBAAC;CAAA,AA7BD,CAAwC,sBAAU,GA6BjD;AA7BY,gDAAkB","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Delayer } from 'vs/base/common/async';\nimport * as DOM from 'vs/base/browser/dom';\nimport { Action, IActionChangeEvent, IAction } from 'vs/base/common/actions';\nimport { HistoryInputBox } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IContextViewService, IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { TogglePanelAction } from 'vs/workbench/browser/panel';\nimport Messages from 'vs/workbench/contrib/markers/browser/messages';\nimport Constants from 'vs/workbench/contrib/markers/browser/constants';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { IPanelService } from 'vs/workbench/services/panel/common/panelService';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { attachInputBoxStyler, attachStylerCallback, attachCheckboxStyler } from 'vs/platform/theme/common/styler';\nimport { IMarkersWorkbenchService } from 'vs/workbench/contrib/markers/browser/markers';\nimport { IDisposable, dispose, toDisposable } from 'vs/base/common/lifecycle';\nimport { BaseActionItem, ActionItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { badgeBackground, badgeForeground, contrastBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { localize } from 'vs/nls';\nimport { Checkbox } from 'vs/base/browser/ui/checkbox/checkbox';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ContextScopedHistoryInputBox } from 'vs/platform/browser/contextScopedHistoryWidget';\nimport { Marker } from 'vs/workbench/contrib/markers/browser/markersModel';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { FilterOptions } from 'vs/workbench/contrib/markers/browser/markersFilterOptions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\n\nexport class ToggleMarkersPanelAction extends TogglePanelAction {\n\n\tpublic static readonly ID = 'workbench.actions.view.problems';\n\tpublic static readonly LABEL = Messages.MARKERS_PANEL_TOGGLE_LABEL;\n\n\tconstructor(id: string, label: string,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IPanelService panelService: IPanelService,\n\t\t@IMarkersWorkbenchService markersWorkbenchService: IMarkersWorkbenchService\n\t) {\n\t\tsuper(id, label, Constants.MARKERS_PANEL_ID, panelService, layoutService);\n\t}\n}\n\nexport class ShowProblemsPanelAction extends Action {\n\n\tpublic static readonly ID = 'workbench.action.problems.focus';\n\tpublic static readonly LABEL = Messages.MARKERS_PANEL_SHOW_LABEL;\n\n\tconstructor(id: string, label: string,\n\t\t@IPanelService private readonly panelService: IPanelService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): Promise<any> {\n\t\tthis.panelService.openPanel(Constants.MARKERS_PANEL_ID, true);\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport interface IMarkersFilterActionChangeEvent extends IActionChangeEvent {\n\tfilterText?: boolean;\n\tuseFilesExclude?: boolean;\n}\n\nexport interface IMarkersFilterActionOptions {\n\tfilterText: string;\n\tfilterHistory: string[];\n\tuseFilesExclude: boolean;\n}\n\nexport class MarkersFilterAction extends Action {\n\n\tpublic static readonly ID: string = 'workbench.actions.problems.filter';\n\n\tconstructor(options: IMarkersFilterActionOptions) {\n\t\tsuper(MarkersFilterAction.ID, Messages.MARKERS_PANEL_ACTION_TOOLTIP_FILTER, 'markers-panel-action-filter', true);\n\t\tthis._filterText = options.filterText;\n\t\tthis._useFilesExclude = options.useFilesExclude;\n\t\tthis.filterHistory = options.filterHistory;\n\t}\n\n\tprivate _filterText: string;\n\tget filterText(): string {\n\t\treturn this._filterText;\n\t}\n\tset filterText(filterText: string) {\n\t\tif (this._filterText !== filterText) {\n\t\t\tthis._filterText = filterText;\n\t\t\tthis._onDidChange.fire(<IMarkersFilterActionChangeEvent>{ filterText: true });\n\t\t}\n\t}\n\n\tfilterHistory: string[];\n\n\tprivate _useFilesExclude: boolean;\n\tget useFilesExclude(): boolean {\n\t\treturn this._useFilesExclude;\n\t}\n\tset useFilesExclude(filesExclude: boolean) {\n\t\tif (this._useFilesExclude !== filesExclude) {\n\t\t\tthis._useFilesExclude = filesExclude;\n\t\t\tthis._onDidChange.fire(<IMarkersFilterActionChangeEvent>{ useFilesExclude: true });\n\t\t}\n\t}\n}\n\nexport interface IMarkerFilterController {\n\tonDidFilter: Event<void>;\n\tgetFilterOptions(): FilterOptions;\n\tgetFilterStats(): { total: number, filtered: number };\n}\n\nexport class MarkersFilterActionItem extends BaseActionItem {\n\n\tprivate delayedFilterUpdate: Delayer<void>;\n\tprivate container: HTMLElement;\n\tprivate filterInputBox: HistoryInputBox;\n\tprivate controlsContainer: HTMLInputElement;\n\tprivate filterBadge: HTMLInputElement;\n\tprivate focusContextKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\treadonly action: MarkersFilterAction,\n\t\tprivate filterController: IMarkerFilterController,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper(null, action);\n\t\tthis.focusContextKey = Constants.MarkerPanelFilterFocusContextKey.bindTo(contextKeyService);\n\t\tthis.delayedFilterUpdate = new Delayer<void>(200);\n\t\tthis._register(toDisposable(() => this.delayedFilterUpdate.cancel()));\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tthis.container = container;\n\t\tDOM.addClass(this.container, 'markers-panel-action-filter-container');\n\n\t\tconst filterContainer = DOM.append(this.container, DOM.$('.markers-panel-action-filter'));\n\t\tthis.createInput(filterContainer);\n\t\tthis.createControls(filterContainer);\n\n\t\tthis.adjustInputBox();\n\t}\n\n\tfocus(): void {\n\t\tif (this.filterInputBox) {\n\t\t\tthis.filterInputBox.focus();\n\t\t}\n\t}\n\n\ttoggleLayout(small: boolean) {\n\t\tif (this.container) {\n\t\t\tDOM.toggleClass(this.container, 'small', small);\n\t\t}\n\t}\n\n\tprivate createInput(container: HTMLElement): void {\n\t\tthis.filterInputBox = this._register(this.instantiationService.createInstance(ContextScopedHistoryInputBox, container, this.contextViewService, {\n\t\t\tplaceholder: Messages.MARKERS_PANEL_FILTER_PLACEHOLDER,\n\t\t\tariaLabel: Messages.MARKERS_PANEL_FILTER_ARIA_LABEL,\n\t\t\thistory: this.action.filterHistory\n\t\t}));\n\t\tthis.filterInputBox.inputElement.setAttribute('aria-labelledby', 'markers-panel-arialabel');\n\t\tthis._register(attachInputBoxStyler(this.filterInputBox, this.themeService));\n\t\tthis.filterInputBox.value = this.action.filterText;\n\t\tthis._register(this.filterInputBox.onDidChange(filter => this.delayedFilterUpdate.trigger(() => this.onDidInputChange(this.filterInputBox))));\n\t\tthis._register(this.action.onDidChange((event: IMarkersFilterActionChangeEvent) => {\n\t\t\tif (event.filterText) {\n\t\t\t\tthis.filterInputBox.value = this.action.filterText;\n\t\t\t}\n\t\t}));\n\t\tthis._register(DOM.addStandardDisposableListener(this.filterInputBox.inputElement, DOM.EventType.KEY_DOWN, (e: any) => this.onInputKeyDown(e, this.filterInputBox)));\n\t\tthis._register(DOM.addStandardDisposableListener(container, DOM.EventType.KEY_DOWN, this.handleKeyboardEvent));\n\t\tthis._register(DOM.addStandardDisposableListener(container, DOM.EventType.KEY_UP, this.handleKeyboardEvent));\n\n\t\tconst focusTracker = this._register(DOM.trackFocus(this.filterInputBox.inputElement));\n\t\tthis._register(focusTracker.onDidFocus(() => this.focusContextKey.set(true)));\n\t\tthis._register(focusTracker.onDidBlur(() => this.focusContextKey.set(false)));\n\t\tthis._register(toDisposable(() => this.focusContextKey.reset()));\n\t}\n\n\tprivate createControls(container: HTMLElement): void {\n\t\tthis.controlsContainer = DOM.append(container, DOM.$('.markers-panel-filter-controls'));\n\t\tthis.createBadge(this.controlsContainer);\n\t\tthis.createFilesExcludeCheckbox(this.controlsContainer);\n\t}\n\n\tprivate createBadge(container: HTMLElement): void {\n\t\tthis.filterBadge = DOM.append(container, DOM.$('.markers-panel-filter-badge'));\n\t\tthis._register(attachStylerCallback(this.themeService, { badgeBackground, badgeForeground, contrastBorder }, colors => {\n\t\t\tconst background = colors.badgeBackground ? colors.badgeBackground.toString() : null;\n\t\t\tconst foreground = colors.badgeForeground ? colors.badgeForeground.toString() : null;\n\t\t\tconst border = colors.contrastBorder ? colors.contrastBorder.toString() : null;\n\n\t\t\tthis.filterBadge.style.backgroundColor = background;\n\n\t\t\tthis.filterBadge.style.borderWidth = border ? '1px' : null;\n\t\t\tthis.filterBadge.style.borderStyle = border ? 'solid' : null;\n\t\t\tthis.filterBadge.style.borderColor = border;\n\t\t\tthis.filterBadge.style.color = foreground;\n\t\t}));\n\t\tthis.updateBadge();\n\t\tthis._register(this.filterController.onDidFilter(() => this.updateBadge()));\n\t}\n\n\tprivate createFilesExcludeCheckbox(container: HTMLElement): void {\n\t\tconst filesExcludeFilter = this._register(new Checkbox({\n\t\t\tactionClassName: 'markers-panel-filter-filesExclude',\n\t\t\ttitle: this.action.useFilesExclude ? Messages.MARKERS_PANEL_ACTION_TOOLTIP_DO_NOT_USE_FILES_EXCLUDE : Messages.MARKERS_PANEL_ACTION_TOOLTIP_USE_FILES_EXCLUDE,\n\t\t\tisChecked: this.action.useFilesExclude\n\t\t}));\n\t\tthis._register(filesExcludeFilter.onChange(() => {\n\t\t\tfilesExcludeFilter.domNode.title = filesExcludeFilter.checked ? Messages.MARKERS_PANEL_ACTION_TOOLTIP_DO_NOT_USE_FILES_EXCLUDE : Messages.MARKERS_PANEL_ACTION_TOOLTIP_USE_FILES_EXCLUDE;\n\t\t\tthis.action.useFilesExclude = filesExcludeFilter.checked;\n\t\t\tthis.focus();\n\t\t}));\n\t\tthis._register(this.action.onDidChange((event: IMarkersFilterActionChangeEvent) => {\n\t\t\tif (event.useFilesExclude) {\n\t\t\t\tfilesExcludeFilter.checked = this.action.useFilesExclude;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(attachCheckboxStyler(filesExcludeFilter, this.themeService));\n\t\tcontainer.appendChild(filesExcludeFilter.domNode);\n\t}\n\n\tprivate onDidInputChange(inputbox: HistoryInputBox) {\n\t\tinputbox.addToHistory();\n\t\tthis.action.filterText = inputbox.value;\n\t\tthis.action.filterHistory = inputbox.getHistory();\n\t\tthis.reportFilteringUsed();\n\t}\n\n\tprivate updateBadge(): void {\n\t\tconst { total, filtered } = this.filterController.getFilterStats();\n\t\tDOM.toggleClass(this.filterBadge, 'hidden', total === filtered || filtered === 0);\n\t\tthis.filterBadge.textContent = localize('showing filtered problems', \"Showing {0} of {1}\", filtered, total);\n\t\tthis.adjustInputBox();\n\t}\n\n\tprivate adjustInputBox(): void {\n\t\tthis.filterInputBox.inputElement.style.paddingRight = (DOM.getTotalWidth(this.controlsContainer) || 20) + 'px';\n\t}\n\n\t// Action toolbar is swallowing some keys for action items which should not be for an input box\n\tprivate handleKeyboardEvent(event: StandardKeyboardEvent) {\n\t\tif (event.equals(KeyCode.Space)\n\t\t\t|| event.equals(KeyCode.LeftArrow)\n\t\t\t|| event.equals(KeyCode.RightArrow)\n\t\t\t|| event.equals(KeyCode.Escape)\n\t\t) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tprivate onInputKeyDown(event: StandardKeyboardEvent, filterInputBox: HistoryInputBox) {\n\t\tlet handled = false;\n\t\tif (event.equals(KeyCode.Escape)) {\n\t\t\tfilterInputBox.value = '';\n\t\t\thandled = true;\n\t\t}\n\t\tif (handled) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tprivate reportFilteringUsed(): void {\n\t\tconst filterOptions = this.filterController.getFilterOptions();\n\t\tconst data = {};\n\t\tdata['errors'] = filterOptions.filterErrors;\n\t\tdata['warnings'] = filterOptions.filterWarnings;\n\t\tdata['infos'] = filterOptions.filterInfos;\n\t\t/* __GDPR__\n\t\t\t\"problems.filter\" : {\n\t\t\t\t\"errors\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\"warnings\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\t\t\"infos\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryService.publicLog('problems.filter', data);\n\t}\n}\n\nexport class QuickFixAction extends Action {\n\n\tpublic static readonly ID: string = 'workbench.actions.problems.quickfix';\n\tprivate static readonly CLASS: string = 'markers-panel-action-quickfix';\n\tprivate static readonly AUTO_FIX_CLASS: string = QuickFixAction.CLASS + ' autofixable';\n\n\tprivate disposables: IDisposable[] = [];\n\n\tprivate readonly _onShowQuickFixes: Emitter<void> = new Emitter<void>();\n\treadonly onShowQuickFixes: Event<void> = this._onShowQuickFixes.event;\n\n\tprivate _quickFixes: IAction[] = [];\n\tget quickFixes(): IAction[] {\n\t\treturn this._quickFixes;\n\t}\n\tset quickFixes(quickFixes: IAction[]) {\n\t\tthis._quickFixes = quickFixes;\n\t\tthis.enabled = this._quickFixes.length > 0;\n\t}\n\n\tautoFixable(autofixable: boolean) {\n\t\tthis.class = autofixable ? QuickFixAction.AUTO_FIX_CLASS : QuickFixAction.CLASS;\n\t}\n\n\tconstructor(\n\t\treadonly marker: Marker,\n\t) {\n\t\tsuper(QuickFixAction.ID, Messages.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX, QuickFixAction.CLASS, false);\n\t}\n\n\trun(): Promise<void> {\n\t\tthis._onShowQuickFixes.fire();\n\t\treturn Promise.resolve();\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.disposables);\n\t\tsuper.dispose();\n\t}\n}\n\nexport class QuickFixActionItem extends ActionItem {\n\n\tconstructor(action: QuickFixAction,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(null, action, { icon: true, label: false });\n\t}\n\n\tpublic onClick(event: DOM.EventLike): void {\n\t\tDOM.EventHelper.stop(event, true);\n\t\tthis.showQuickFixes();\n\t}\n\n\tpublic showQuickFixes(): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tconst elementPosition = DOM.getDomNodePagePosition(this.element);\n\t\tconst quickFixes = (<QuickFixAction>this.getAction()).quickFixes;\n\t\tif (quickFixes.length) {\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => ({ x: elementPosition.left + 10, y: elementPosition.top + elementPosition.height + 4 }),\n\t\t\t\tgetActions: () => quickFixes\n\t\t\t});\n\t\t}\n\t}\n}\n"]}]}