{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/callHierarchy/browser/callHierarchyPeek.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/callHierarchy/browser/callHierarchyPeek.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./media/callHierarchy\");\nvar peekViewWidget_1 = require(\"vs/editor/contrib/referenceSearch/peekViewWidget\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar callHierarchy_1 = require(\"vs/workbench/contrib/callHierarchy/common/callHierarchy\");\nvar listService_1 = require(\"vs/platform/list/browser/listService\");\nvar callHTree = require(\"vs/workbench/contrib/callHierarchy/browser/callHierarchyTree\");\nvar nls_1 = require(\"vs/nls\");\nvar editorCommon_1 = require(\"vs/editor/common/editorCommon\");\nvar range_1 = require(\"vs/editor/common/core/range\");\nvar splitview_1 = require(\"vs/base/browser/ui/splitview/splitview\");\nvar dom_1 = require(\"vs/base/browser/dom\");\nvar event_1 = require(\"vs/base/common/event\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar embeddedCodeEditorWidget_1 = require(\"vs/editor/browser/widget/embeddedCodeEditorWidget\");\nvar resolverService_1 = require(\"vs/editor/common/services/resolverService\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar model_1 = require(\"vs/editor/common/model\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar referencesWidget = require(\"vs/editor/contrib/referenceSearch/referencesWidget\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar label_1 = require(\"vs/platform/label/common/label\");\nvar storage_1 = require(\"vs/platform/storage/common/storage\");\nvar color_1 = require(\"vs/base/common/color\");\nvar State;\n(function (State) {\n    State[\"Loading\"] = \"loading\";\n    State[\"Message\"] = \"message\";\n    State[\"Data\"] = \"data\";\n})(State || (State = {}));\nvar ChangeHierarchyDirectionAction = /** @class */ (function (_super) {\n    tslib_1.__extends(ChangeHierarchyDirectionAction, _super);\n    function ChangeHierarchyDirectionAction(direction, updateDirection) {\n        var _this = _super.call(this, '', undefined, '', true, function () {\n            if (direction === callHierarchy_1.CallHierarchyDirection.CallsTo) {\n                direction = callHierarchy_1.CallHierarchyDirection.CallsFrom;\n            }\n            else {\n                direction = callHierarchy_1.CallHierarchyDirection.CallsTo;\n            }\n            updateDirection(direction);\n            update();\n            return Promise.resolve();\n        }) || this;\n        var update = function () {\n            if (direction === callHierarchy_1.CallHierarchyDirection.CallsFrom) {\n                _this.label = nls_1.localize('toggle.from', \"Showing Calls\");\n                _this.class = 'calls-from';\n            }\n            else {\n                _this.label = nls_1.localize('toggle.to', \"Showing Callers\");\n                _this.class = 'calls-to';\n            }\n        };\n        update();\n        return _this;\n    }\n    return ChangeHierarchyDirectionAction;\n}(actions_1.Action));\nvar LayoutInfo = /** @class */ (function () {\n    function LayoutInfo(ratio, height) {\n        this.ratio = ratio;\n        this.height = height;\n    }\n    LayoutInfo.store = function (info, storageService) {\n        storageService.store('callHierarchyPeekLayout', JSON.stringify(info), storage_1.StorageScope.GLOBAL);\n    };\n    LayoutInfo.retrieve = function (storageService) {\n        var value = storageService.get('callHierarchyPeekLayout', storage_1.StorageScope.GLOBAL, '{}');\n        var defaultInfo = { ratio: 0.7, height: 17 };\n        try {\n            return tslib_1.__assign({}, defaultInfo, JSON.parse(value));\n        }\n        catch (_a) {\n            return defaultInfo;\n        }\n    };\n    return LayoutInfo;\n}());\nvar CallHierarchyTreePeekWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(CallHierarchyTreePeekWidget, _super);\n    function CallHierarchyTreePeekWidget(editor, _where, _provider, _direction, themeService, _peekViewService, _editorService, _textModelService, _labelService, _storageService, _instantiationService) {\n        var _this = _super.call(this, editor, { showFrame: true, showArrow: true, isResizeable: true, isAccessible: true }) || this;\n        _this._where = _where;\n        _this._provider = _provider;\n        _this._direction = _direction;\n        _this._peekViewService = _peekViewService;\n        _this._editorService = _editorService;\n        _this._textModelService = _textModelService;\n        _this._labelService = _labelService;\n        _this._storageService = _storageService;\n        _this._instantiationService = _instantiationService;\n        _this._treeViewStates = new Map();\n        _this.create();\n        _this._peekViewService.addExclusiveWidget(editor, _this);\n        _this._applyTheme(themeService.getTheme());\n        themeService.onThemeChange(_this._applyTheme, _this, _this._disposables);\n        return _this;\n    }\n    CallHierarchyTreePeekWidget.prototype.dispose = function () {\n        LayoutInfo.store(this._layoutInfo, this._storageService);\n        this._splitView.dispose();\n        this._tree.dispose();\n        this._editor.dispose();\n        _super.prototype.dispose.call(this);\n    };\n    CallHierarchyTreePeekWidget.prototype._applyTheme = function (theme) {\n        var borderColor = theme.getColor(referencesWidget.peekViewBorder) || color_1.Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(referencesWidget.peekViewTitleBackground) || color_1.Color.transparent,\n            primaryHeadingColor: theme.getColor(referencesWidget.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(referencesWidget.peekViewTitleInfoForeground)\n        });\n    };\n    CallHierarchyTreePeekWidget.prototype._getActionBarOptions = function () {\n        return {\n            orientation: actionbar_1.ActionsOrientation.HORIZONTAL_REVERSE\n        };\n    };\n    CallHierarchyTreePeekWidget.prototype._fillBody = function (parent) {\n        var _this = this;\n        this._layoutInfo = LayoutInfo.retrieve(this._storageService);\n        this._dim = { height: 0, width: 0 };\n        this._parent = parent;\n        dom_1.addClass(parent, 'call-hierarchy');\n        var message = document.createElement('div');\n        dom_1.addClass(message, 'message');\n        parent.appendChild(message);\n        this._message = message;\n        this._message.tabIndex = 0;\n        var container = document.createElement('div');\n        dom_1.addClass(container, 'results');\n        parent.appendChild(container);\n        this._splitView = new splitview_1.SplitView(container, { orientation: splitview_1.Orientation.HORIZONTAL });\n        // editor stuff\n        var editorContainer = document.createElement('div');\n        dom_1.addClass(editorContainer, 'editor');\n        container.appendChild(editorContainer);\n        var editorOptions = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._editor = this._instantiationService.createInstance(embeddedCodeEditorWidget_1.EmbeddedCodeEditorWidget, editorContainer, editorOptions, this.editor);\n        // tree stuff\n        var treeContainer = document.createElement('div');\n        dom_1.addClass(treeContainer, 'tree');\n        container.appendChild(treeContainer);\n        var options = {\n            identityProvider: new callHTree.IdentityProvider(),\n            ariaLabel: nls_1.localize('tree.aria', \"Call Hierarchy\"),\n            expandOnlyOnTwistieClick: true,\n        };\n        this._tree = this._instantiationService.createInstance(listService_1.WorkbenchAsyncDataTree, treeContainer, new callHTree.VirtualDelegate(), [this._instantiationService.createInstance(callHTree.CallRenderer)], new callHTree.SingleDirectionDataSource(this._provider, function () { return _this._direction; }), options);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: event_1.Event.None,\n            element: editorContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: function (width) {\n                _this._editor.layout({ height: _this._dim.height, width: width });\n            }\n        }, splitview_1.Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: event_1.Event.None,\n            element: treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: function (width) {\n                _this._tree.layout(_this._dim.height, width);\n            }\n        }, splitview_1.Sizing.Distribute);\n        this._splitView.onDidSashChange(function () {\n            if (_this._dim.width) {\n                _this._layoutInfo.ratio = _this._splitView.getViewSize(0) / _this._dim.width;\n            }\n        }, undefined, this._disposables);\n        // session state\n        var localDispose = [];\n        this._disposables.push({ dispose: function () { lifecycle_1.dispose(localDispose); } });\n        // update editor\n        this._tree.onDidChangeFocus(function (e) {\n            var element = e.elements[0];\n            if (element && arrays_1.isNonEmptyArray(element.locations)) {\n                localDispose = lifecycle_1.dispose(localDispose);\n                var options_1 = {\n                    stickiness: model_1.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n                    className: 'call-decoration',\n                    overviewRuler: {\n                        color: themeService_1.themeColorFromId(referencesWidget.peekViewEditorMatchHighlight),\n                        position: model_1.OverviewRulerLane.Center\n                    },\n                };\n                var decorations_1 = [];\n                var fullRange_1;\n                for (var _i = 0, _a = element.locations; _i < _a.length; _i++) {\n                    var range = _a[_i].range;\n                    decorations_1.push({ range: range, options: options_1 });\n                    fullRange_1 = !fullRange_1 ? range : range_1.Range.plusRange(range, fullRange_1);\n                }\n                _this._textModelService.createModelReference(element.item.uri).then(function (value) {\n                    _this._editor.setModel(value.object.textEditorModel);\n                    _this._editor.revealRangeInCenter(fullRange_1, editorCommon_1.ScrollType.Smooth);\n                    _this._editor.revealLine(element.item.range.startLineNumber, editorCommon_1.ScrollType.Smooth);\n                    var ids = _this._editor.deltaDecorations([], decorations_1);\n                    localDispose.push({ dispose: function () { return _this._editor.deltaDecorations(ids, []); } });\n                    localDispose.push(value);\n                });\n                var node = element;\n                var names = [element.item.name];\n                while (true) {\n                    var parent_1 = _this._tree.getParentElement(node);\n                    if (!(parent_1 instanceof callHTree.Call)) {\n                        break;\n                    }\n                    if (_this._direction === callHierarchy_1.CallHierarchyDirection.CallsTo) {\n                        names.push(parent_1.item.name);\n                    }\n                    else {\n                        names.unshift(parent_1.item.name);\n                    }\n                    node = parent_1;\n                }\n                _this.setMetaTitle(nls_1.localize('meta', \" – {0}\", names.join(' → ')));\n            }\n        }, undefined, this._disposables);\n        this._editor.onMouseDown(function (e) {\n            var event = e.event, target = e.target;\n            if (event.detail !== 2) {\n                return;\n            }\n            var focus = _this._tree.getFocus()[0];\n            if (!focus) {\n                return;\n            }\n            _this.dispose();\n            _this._editorService.openEditor({\n                resource: focus.item.uri,\n                options: { selection: target.range }\n            });\n        }, undefined, this._disposables);\n        this._tree.onMouseDblClick(function (e) {\n            if (e.element && arrays_1.isNonEmptyArray(e.element.locations)) {\n                _this.dispose();\n                _this._editorService.openEditor({\n                    resource: e.element.item.uri,\n                    options: { selection: e.element.locations[0].range }\n                });\n            }\n        }, undefined, this._disposables);\n        this._tree.onDidChangeSelection(function (e) {\n            var element = e.elements[0];\n            // don't close on click\n            if (element && arrays_1.isNonEmptyArray(element.locations) && e.browserEvent instanceof KeyboardEvent) {\n                _this.dispose();\n                _this._editorService.openEditor({\n                    resource: element.item.uri,\n                    options: { selection: element.locations[0].range }\n                });\n            }\n        }, undefined, this._disposables);\n    };\n    CallHierarchyTreePeekWidget.prototype.showLoading = function () {\n        this._parent.dataset['state'] = State.Loading;\n        this.setTitle(nls_1.localize('title.loading', \"Loading...\"));\n        this._show();\n    };\n    CallHierarchyTreePeekWidget.prototype.showMessage = function (message) {\n        this._parent.dataset['state'] = State.Message;\n        this.setTitle('');\n        this.setMetaTitle('');\n        this._message.innerText = message;\n        this._show();\n        this._message.focus();\n    };\n    CallHierarchyTreePeekWidget.prototype.showItem = function (item) {\n        return tslib_1.__awaiter(this, void 0, Promise, function () {\n            var viewState, root, firstChild, changeDirection;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this._show();\n                        viewState = this._treeViewStates.get(this._direction);\n                        return [4 /*yield*/, this._tree.setInput(item, viewState)];\n                    case 1:\n                        _a.sent();\n                        root = this._tree.getNode(item).children[0];\n                        return [4 /*yield*/, this._tree.expand(root.element)];\n                    case 2:\n                        _a.sent();\n                        firstChild = this._tree.getFirstElementChild(root.element);\n                        if (!(firstChild instanceof callHTree.Call)) {\n                            //\n                            this.showMessage(this._direction === callHierarchy_1.CallHierarchyDirection.CallsFrom\n                                ? nls_1.localize('empt.callsFrom', \"No calls from '{0}'\", item.name)\n                                : nls_1.localize('empt.callsTo', \"No calls to '{0}'\", item.name));\n                        }\n                        else {\n                            this._parent.dataset['state'] = State.Data;\n                            this._tree.domFocus();\n                            if (!viewState) {\n                                this._tree.setFocus([firstChild]);\n                            }\n                            this.setTitle(item.name, item.detail || this._labelService.getUriLabel(item.uri, { relative: true }));\n                        }\n                        if (!this._changeDirectionAction) {\n                            changeDirection = function (newDirection) {\n                                if (_this._direction !== newDirection) {\n                                    _this._treeViewStates.set(_this._direction, _this._tree.getViewState());\n                                    _this._direction = newDirection;\n                                    _this.showItem(item);\n                                }\n                            };\n                            this._changeDirectionAction = new ChangeHierarchyDirectionAction(this._direction, changeDirection);\n                            this._disposables.push(this._changeDirectionAction);\n                            this._actionbarWidget.push(this._changeDirectionAction, { icon: true, label: false });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CallHierarchyTreePeekWidget.prototype._show = function () {\n        if (!this._isShowing) {\n            this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber, editorCommon_1.ScrollType.Smooth);\n            _super.prototype.show.call(this, range_1.Range.fromPositions(this._where), this._layoutInfo.height);\n        }\n    };\n    CallHierarchyTreePeekWidget.prototype._onWidth = function (width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    };\n    CallHierarchyTreePeekWidget.prototype._doLayoutBody = function (height, width) {\n        _super.prototype._doLayoutBody.call(this, height, width);\n        this._dim = { height: height, width: width };\n        this._layoutInfo.height = this._viewZone ? this._viewZone.heightInLines : this._layoutInfo.height;\n        this._splitView.layout(width);\n        this._splitView.resizeView(0, width * this._layoutInfo.ratio);\n    };\n    CallHierarchyTreePeekWidget = tslib_1.__decorate([\n        tslib_1.__param(4, themeService_1.IThemeService),\n        tslib_1.__param(5, peekViewWidget_1.IPeekViewService),\n        tslib_1.__param(6, editorService_1.IEditorService),\n        tslib_1.__param(7, resolverService_1.ITextModelService),\n        tslib_1.__param(8, label_1.ILabelService),\n        tslib_1.__param(9, storage_1.IStorageService),\n        tslib_1.__param(10, instantiation_1.IInstantiationService)\n    ], CallHierarchyTreePeekWidget);\n    return CallHierarchyTreePeekWidget;\n}(peekViewWidget_1.PeekViewWidget));\nexports.CallHierarchyTreePeekWidget = CallHierarchyTreePeekWidget;\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    var referenceHighlightColor = theme.getColor(referencesWidget.peekViewEditorMatchHighlight);\n    if (referenceHighlightColor) {\n        collector.addRule(\".monaco-editor .call-hierarchy .call-decoration { background-color: \" + referenceHighlightColor + \"; }\");\n    }\n    var referenceHighlightBorder = theme.getColor(referencesWidget.peekViewEditorMatchHighlightBorder);\n    if (referenceHighlightBorder) {\n        collector.addRule(\".monaco-editor .call-hierarchy .call-decoration { border: 2px solid \" + referenceHighlightBorder + \"; box-sizing: border-box; }\");\n    }\n    var resultsBackground = theme.getColor(referencesWidget.peekViewResultsBackground);\n    if (resultsBackground) {\n        collector.addRule(\".monaco-editor .call-hierarchy .tree { background-color: \" + resultsBackground + \"; }\");\n    }\n    var resultsMatchForeground = theme.getColor(referencesWidget.peekViewResultsFileForeground);\n    if (resultsMatchForeground) {\n        collector.addRule(\".monaco-editor .call-hierarchy .tree { color: \" + resultsMatchForeground + \"; }\");\n    }\n    var resultsSelectedBackground = theme.getColor(referencesWidget.peekViewResultsSelectionBackground);\n    if (resultsSelectedBackground) {\n        collector.addRule(\".monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: \" + resultsSelectedBackground + \"; }\");\n    }\n    var resultsSelectedForeground = theme.getColor(referencesWidget.peekViewResultsSelectionForeground);\n    if (resultsSelectedForeground) {\n        collector.addRule(\".monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: \" + resultsSelectedForeground + \" !important; }\");\n    }\n    var editorBackground = theme.getColor(referencesWidget.peekViewEditorBackground);\n    if (editorBackground) {\n        collector.addRule(\".monaco-editor .call-hierarchy .editor .monaco-editor .monaco-editor-background,\" +\n            \".monaco-editor .call-hierarchy .editor .monaco-editor .inputarea.ime-input {\" +\n            (\"\\tbackground-color: \" + editorBackground + \";\") +\n            \"}\");\n    }\n    var editorGutterBackground = theme.getColor(referencesWidget.peekViewEditorGutterBackground);\n    if (editorGutterBackground) {\n        collector.addRule(\".monaco-editor .call-hierarchy .editor .monaco-editor .margin {\" +\n            (\"\\tbackground-color: \" + editorGutterBackground + \";\") +\n            \"}\");\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/callHierarchy/browser/callHierarchyPeek.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/callHierarchy/browser/callHierarchyPeek.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/callHierarchy';\nimport { PeekViewWidget, IPeekViewService } from 'vs/editor/contrib/referenceSearch/peekViewWidget';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { CallHierarchyProvider, CallHierarchyDirection, CallHierarchyItem } from 'vs/workbench/contrib/callHierarchy/common/callHierarchy';\nimport { WorkbenchAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { FuzzyScore } from 'vs/base/common/filters';\nimport * as callHTree from 'vs/workbench/contrib/callHierarchy/browser/callHierarchyTree';\nimport { IAsyncDataTreeOptions, IAsyncDataTreeViewState } from 'vs/base/browser/ui/tree/asyncDataTree';\nimport { localize } from 'vs/nls';\nimport { ScrollType } from 'vs/editor/common/editorCommon';\nimport { IRange, Range } from 'vs/editor/common/core/range';\nimport { SplitView, Orientation, Sizing } from 'vs/base/browser/ui/splitview/splitview';\nimport { Dimension, addClass } from 'vs/base/browser/dom';\nimport { Event } from 'vs/base/common/event';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { EmbeddedCodeEditorWidget } from 'vs/editor/browser/widget/embeddedCodeEditorWidget';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { TrackedRangeStickiness, IModelDeltaDecoration, IModelDecorationOptions, OverviewRulerLane } from 'vs/editor/common/model';\nimport { registerThemingParticipant, themeColorFromId, IThemeService, ITheme } from 'vs/platform/theme/common/themeService';\nimport * as referencesWidget from 'vs/editor/contrib/referenceSearch/referencesWidget';\nimport { isNonEmptyArray } from 'vs/base/common/arrays';\nimport { IPosition } from 'vs/editor/common/core/position';\nimport { Action } from 'vs/base/common/actions';\nimport { IActionBarOptions, ActionsOrientation } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IStorageService, StorageScope } from 'vs/platform/storage/common/storage';\nimport { Color } from 'vs/base/common/color';\n\nconst enum State {\n\tLoading = 'loading',\n\tMessage = 'message',\n\tData = 'data'\n}\n\nclass ChangeHierarchyDirectionAction extends Action {\n\n\tconstructor(direction: CallHierarchyDirection, updateDirection: (direction: CallHierarchyDirection) => void) {\n\t\tsuper('', undefined, '', true, () => {\n\t\t\tif (direction === CallHierarchyDirection.CallsTo) {\n\t\t\t\tdirection = CallHierarchyDirection.CallsFrom;\n\t\t\t} else {\n\t\t\t\tdirection = CallHierarchyDirection.CallsTo;\n\t\t\t}\n\t\t\tupdateDirection(direction);\n\t\t\tupdate();\n\t\t\treturn Promise.resolve();\n\t\t});\n\t\tconst update = () => {\n\t\t\tif (direction === CallHierarchyDirection.CallsFrom) {\n\t\t\t\tthis.label = localize('toggle.from', \"Showing Calls\");\n\t\t\t\tthis.class = 'calls-from';\n\t\t\t} else {\n\t\t\t\tthis.label = localize('toggle.to', \"Showing Callers\");\n\t\t\t\tthis.class = 'calls-to';\n\t\t\t}\n\t\t};\n\t\tupdate();\n\t}\n}\n\nclass LayoutInfo {\n\n\tstatic store(info: LayoutInfo, storageService: IStorageService): void {\n\t\tstorageService.store('callHierarchyPeekLayout', JSON.stringify(info), StorageScope.GLOBAL);\n\t}\n\n\tstatic retrieve(storageService: IStorageService): LayoutInfo {\n\t\tconst value = storageService.get('callHierarchyPeekLayout', StorageScope.GLOBAL, '{}');\n\t\tconst defaultInfo: LayoutInfo = { ratio: 0.7, height: 17 };\n\t\ttry {\n\t\t\treturn { ...defaultInfo, ...JSON.parse(value) };\n\t\t} catch {\n\t\t\treturn defaultInfo;\n\t\t}\n\t}\n\n\tconstructor(\n\t\tpublic ratio: number,\n\t\tpublic height: number\n\t) { }\n}\n\nexport class CallHierarchyTreePeekWidget extends PeekViewWidget {\n\n\tprivate _changeDirectionAction: ChangeHierarchyDirectionAction;\n\tprivate _parent: HTMLElement;\n\tprivate _message: HTMLElement;\n\tprivate _splitView: SplitView;\n\tprivate _tree: WorkbenchAsyncDataTree<CallHierarchyItem, callHTree.Call, FuzzyScore>;\n\tprivate _treeViewStates = new Map<CallHierarchyDirection, IAsyncDataTreeViewState>();\n\tprivate _editor: EmbeddedCodeEditorWidget;\n\tprivate _dim: Dimension;\n\tprivate _layoutInfo: LayoutInfo;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tprivate readonly _where: IPosition,\n\t\tprivate readonly _provider: CallHierarchyProvider,\n\t\tprivate _direction: CallHierarchyDirection,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IPeekViewService private readonly _peekViewService: IPeekViewService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ITextModelService private readonly _textModelService: ITextModelService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(editor, { showFrame: true, showArrow: true, isResizeable: true, isAccessible: true });\n\t\tthis.create();\n\t\tthis._peekViewService.addExclusiveWidget(editor, this);\n\t\tthis._applyTheme(themeService.getTheme());\n\t\tthemeService.onThemeChange(this._applyTheme, this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tLayoutInfo.store(this._layoutInfo, this._storageService);\n\t\tthis._splitView.dispose();\n\t\tthis._tree.dispose();\n\t\tthis._editor.dispose();\n\t\tsuper.dispose();\n\t}\n\n\tprivate _applyTheme(theme: ITheme) {\n\t\tconst borderColor = theme.getColor(referencesWidget.peekViewBorder) || Color.transparent;\n\t\tthis.style({\n\t\t\tarrowColor: borderColor,\n\t\t\tframeColor: borderColor,\n\t\t\theaderBackgroundColor: theme.getColor(referencesWidget.peekViewTitleBackground) || Color.transparent,\n\t\t\tprimaryHeadingColor: theme.getColor(referencesWidget.peekViewTitleForeground),\n\t\t\tsecondaryHeadingColor: theme.getColor(referencesWidget.peekViewTitleInfoForeground)\n\t\t});\n\t}\n\n\tprotected _getActionBarOptions(): IActionBarOptions {\n\t\treturn {\n\t\t\torientation: ActionsOrientation.HORIZONTAL_REVERSE\n\t\t};\n\t}\n\n\tprotected _fillBody(parent: HTMLElement): void {\n\n\t\tthis._layoutInfo = LayoutInfo.retrieve(this._storageService);\n\t\tthis._dim = { height: 0, width: 0 };\n\n\t\tthis._parent = parent;\n\t\taddClass(parent, 'call-hierarchy');\n\n\t\tconst message = document.createElement('div');\n\t\taddClass(message, 'message');\n\t\tparent.appendChild(message);\n\t\tthis._message = message;\n\t\tthis._message.tabIndex = 0;\n\n\t\tconst container = document.createElement('div');\n\t\taddClass(container, 'results');\n\t\tparent.appendChild(container);\n\n\t\tthis._splitView = new SplitView(container, { orientation: Orientation.HORIZONTAL });\n\n\t\t// editor stuff\n\t\tconst editorContainer = document.createElement('div');\n\t\taddClass(editorContainer, 'editor');\n\t\tcontainer.appendChild(editorContainer);\n\t\tlet editorOptions: IEditorOptions = {\n\t\t\tscrollBeyondLastLine: false,\n\t\t\tscrollbar: {\n\t\t\t\tverticalScrollbarSize: 14,\n\t\t\t\thorizontal: 'auto',\n\t\t\t\tuseShadows: true,\n\t\t\t\tverticalHasArrows: false,\n\t\t\t\thorizontalHasArrows: false\n\t\t\t},\n\t\t\toverviewRulerLanes: 2,\n\t\t\tfixedOverflowWidgets: true,\n\t\t\tminimap: {\n\t\t\t\tenabled: false\n\t\t\t}\n\t\t};\n\t\tthis._editor = this._instantiationService.createInstance(\n\t\t\tEmbeddedCodeEditorWidget,\n\t\t\teditorContainer,\n\t\t\teditorOptions,\n\t\t\tthis.editor\n\t\t);\n\n\t\t// tree stuff\n\t\tconst treeContainer = document.createElement('div');\n\t\taddClass(treeContainer, 'tree');\n\t\tcontainer.appendChild(treeContainer);\n\t\tconst options: IAsyncDataTreeOptions<callHTree.Call, FuzzyScore> = {\n\t\t\tidentityProvider: new callHTree.IdentityProvider(),\n\t\t\tariaLabel: localize('tree.aria', \"Call Hierarchy\"),\n\t\t\texpandOnlyOnTwistieClick: true,\n\t\t};\n\t\tthis._tree = <any>this._instantiationService.createInstance(\n\t\t\tWorkbenchAsyncDataTree,\n\t\t\ttreeContainer,\n\t\t\tnew callHTree.VirtualDelegate(),\n\t\t\t[this._instantiationService.createInstance(callHTree.CallRenderer)],\n\t\t\tnew callHTree.SingleDirectionDataSource(this._provider, () => this._direction),\n\t\t\toptions\n\t\t);\n\n\t\t// split stuff\n\t\tthis._splitView.addView({\n\t\t\tonDidChange: Event.None,\n\t\t\telement: editorContainer,\n\t\t\tminimumSize: 200,\n\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\tlayout: (width) => {\n\t\t\t\tthis._editor.layout({ height: this._dim.height, width });\n\t\t\t}\n\t\t}, Sizing.Distribute);\n\n\t\tthis._splitView.addView({\n\t\t\tonDidChange: Event.None,\n\t\t\telement: treeContainer,\n\t\t\tminimumSize: 100,\n\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\tlayout: (width) => {\n\t\t\t\tthis._tree.layout(this._dim.height, width);\n\t\t\t}\n\t\t}, Sizing.Distribute);\n\n\t\tthis._splitView.onDidSashChange(() => {\n\t\t\tif (this._dim.width) {\n\t\t\t\tthis._layoutInfo.ratio = this._splitView.getViewSize(0) / this._dim.width;\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\n\t\t// session state\n\t\tlet localDispose: IDisposable[] = [];\n\t\tthis._disposables.push({ dispose() { dispose(localDispose); } });\n\n\t\t// update editor\n\t\tthis._tree.onDidChangeFocus(e => {\n\t\t\tconst [element] = e.elements;\n\t\t\tif (element && isNonEmptyArray(element.locations)) {\n\n\t\t\t\tlocalDispose = dispose(localDispose);\n\n\t\t\t\tconst options: IModelDecorationOptions = {\n\t\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t\t\tclassName: 'call-decoration',\n\t\t\t\t\toverviewRuler: {\n\t\t\t\t\t\tcolor: themeColorFromId(referencesWidget.peekViewEditorMatchHighlight),\n\t\t\t\t\t\tposition: OverviewRulerLane.Center\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tlet decorations: IModelDeltaDecoration[] = [];\n\t\t\t\tlet fullRange: IRange | undefined;\n\t\t\t\tfor (const { range } of element.locations) {\n\t\t\t\t\tdecorations.push({ range, options });\n\t\t\t\t\tfullRange = !fullRange ? range : Range.plusRange(range, fullRange);\n\t\t\t\t}\n\n\t\t\t\tthis._textModelService.createModelReference(element.item.uri).then(value => {\n\t\t\t\t\tthis._editor.setModel(value.object.textEditorModel);\n\t\t\t\t\tthis._editor.revealRangeInCenter(fullRange!, ScrollType.Smooth);\n\t\t\t\t\tthis._editor.revealLine(element.item.range.startLineNumber, ScrollType.Smooth);\n\t\t\t\t\tconst ids = this._editor.deltaDecorations([], decorations);\n\t\t\t\t\tlocalDispose.push({ dispose: () => this._editor.deltaDecorations(ids, []) });\n\t\t\t\t\tlocalDispose.push(value);\n\t\t\t\t});\n\n\t\t\t\tlet node: callHTree.Call | CallHierarchyItem = element;\n\t\t\t\tlet names = [element.item.name];\n\t\t\t\twhile (true) {\n\t\t\t\t\tlet parent = this._tree.getParentElement(node);\n\t\t\t\t\tif (!(parent instanceof callHTree.Call)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._direction === CallHierarchyDirection.CallsTo) {\n\t\t\t\t\t\tnames.push(parent.item.name);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnames.unshift(parent.item.name);\n\t\t\t\t\t}\n\t\t\t\t\tnode = parent;\n\t\t\t\t}\n\t\t\t\tthis.setMetaTitle(localize('meta', \" – {0}\", names.join(' → ')));\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\n\t\tthis._editor.onMouseDown(e => {\n\t\t\tconst { event, target } = e;\n\t\t\tif (event.detail !== 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [focus] = this._tree.getFocus();\n\t\t\tif (!focus) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.dispose();\n\t\t\tthis._editorService.openEditor({\n\t\t\t\tresource: focus.item.uri,\n\t\t\t\toptions: { selection: target.range! }\n\t\t\t});\n\n\t\t}, undefined, this._disposables);\n\n\t\tthis._tree.onMouseDblClick(e => {\n\t\t\tif (e.element && isNonEmptyArray(e.element.locations)) {\n\t\t\t\tthis.dispose();\n\t\t\t\tthis._editorService.openEditor({\n\t\t\t\t\tresource: e.element.item.uri,\n\t\t\t\t\toptions: { selection: e.element.locations[0].range }\n\t\t\t\t});\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\n\t\tthis._tree.onDidChangeSelection(e => {\n\t\t\tconst [element] = e.elements;\n\t\t\t// don't close on click\n\t\t\tif (element && isNonEmptyArray(element.locations) && e.browserEvent instanceof KeyboardEvent) {\n\t\t\t\tthis.dispose();\n\t\t\t\tthis._editorService.openEditor({\n\t\t\t\t\tresource: element.item.uri,\n\t\t\t\t\toptions: { selection: element.locations[0].range }\n\t\t\t\t});\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\t}\n\n\tshowLoading(): void {\n\t\tthis._parent.dataset['state'] = State.Loading;\n\t\tthis.setTitle(localize('title.loading', \"Loading...\"));\n\t\tthis._show();\n\t}\n\n\tshowMessage(message: string): void {\n\t\tthis._parent.dataset['state'] = State.Message;\n\t\tthis.setTitle('');\n\t\tthis.setMetaTitle('');\n\t\tthis._message.innerText = message;\n\t\tthis._show();\n\t\tthis._message.focus();\n\t}\n\n\tasync showItem(item: CallHierarchyItem): Promise<void> {\n\n\t\tthis._show();\n\t\tconst viewState = this._treeViewStates.get(this._direction);\n\t\tawait this._tree.setInput(item, viewState);\n\n\t\tconst [root] = this._tree.getNode(item).children;\n\t\tawait this._tree.expand(root.element as callHTree.Call);\n\t\tconst firstChild = this._tree.getFirstElementChild(root.element);\n\t\tif (!(firstChild instanceof callHTree.Call)) {\n\t\t\t//\n\t\t\tthis.showMessage(this._direction === CallHierarchyDirection.CallsFrom\n\t\t\t\t? localize('empt.callsFrom', \"No calls from '{0}'\", item.name)\n\t\t\t\t: localize('empt.callsTo', \"No calls to '{0}'\", item.name));\n\n\t\t} else {\n\t\t\tthis._parent.dataset['state'] = State.Data;\n\t\t\tthis._tree.domFocus();\n\t\t\tif (!viewState) {\n\t\t\t\tthis._tree.setFocus([firstChild]);\n\t\t\t}\n\t\t\tthis.setTitle(\n\t\t\t\titem.name,\n\t\t\t\titem.detail || this._labelService.getUriLabel(item.uri, { relative: true }),\n\t\t\t);\n\t\t}\n\n\t\tif (!this._changeDirectionAction) {\n\t\t\tconst changeDirection = (newDirection: CallHierarchyDirection) => {\n\t\t\t\tif (this._direction !== newDirection) {\n\t\t\t\t\tthis._treeViewStates.set(this._direction, this._tree.getViewState());\n\t\t\t\t\tthis._direction = newDirection;\n\t\t\t\t\tthis.showItem(item);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._changeDirectionAction = new ChangeHierarchyDirectionAction(this._direction, changeDirection);\n\t\t\tthis._disposables.push(this._changeDirectionAction);\n\t\t\tthis._actionbarWidget.push(this._changeDirectionAction, { icon: true, label: false });\n\t\t}\n\t}\n\n\tprivate _show() {\n\t\tif (!this._isShowing) {\n\t\t\tthis.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber, ScrollType.Smooth);\n\t\t\tsuper.show(Range.fromPositions(this._where), this._layoutInfo.height);\n\t\t}\n\t}\n\n\tprotected _onWidth(width: number) {\n\t\tif (this._dim) {\n\t\t\tthis._doLayoutBody(this._dim.height, width);\n\t\t}\n\t}\n\n\tprotected _doLayoutBody(height: number, width: number): void {\n\t\tsuper._doLayoutBody(height, width);\n\t\tthis._dim = { height, width };\n\t\tthis._layoutInfo.height = this._viewZone ? this._viewZone.heightInLines : this._layoutInfo.height;\n\t\tthis._splitView.layout(width);\n\t\tthis._splitView.resizeView(0, width * this._layoutInfo.ratio);\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tconst referenceHighlightColor = theme.getColor(referencesWidget.peekViewEditorMatchHighlight);\n\tif (referenceHighlightColor) {\n\t\tcollector.addRule(`.monaco-editor .call-hierarchy .call-decoration { background-color: ${referenceHighlightColor}; }`);\n\t}\n\tconst referenceHighlightBorder = theme.getColor(referencesWidget.peekViewEditorMatchHighlightBorder);\n\tif (referenceHighlightBorder) {\n\t\tcollector.addRule(`.monaco-editor .call-hierarchy .call-decoration { border: 2px solid ${referenceHighlightBorder}; box-sizing: border-box; }`);\n\t}\n\tconst resultsBackground = theme.getColor(referencesWidget.peekViewResultsBackground);\n\tif (resultsBackground) {\n\t\tcollector.addRule(`.monaco-editor .call-hierarchy .tree { background-color: ${resultsBackground}; }`);\n\t}\n\tconst resultsMatchForeground = theme.getColor(referencesWidget.peekViewResultsFileForeground);\n\tif (resultsMatchForeground) {\n\t\tcollector.addRule(`.monaco-editor .call-hierarchy .tree { color: ${resultsMatchForeground}; }`);\n\t}\n\tconst resultsSelectedBackground = theme.getColor(referencesWidget.peekViewResultsSelectionBackground);\n\tif (resultsSelectedBackground) {\n\t\tcollector.addRule(`.monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${resultsSelectedBackground}; }`);\n\t}\n\tconst resultsSelectedForeground = theme.getColor(referencesWidget.peekViewResultsSelectionForeground);\n\tif (resultsSelectedForeground) {\n\t\tcollector.addRule(`.monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${resultsSelectedForeground} !important; }`);\n\t}\n\tconst editorBackground = theme.getColor(referencesWidget.peekViewEditorBackground);\n\tif (editorBackground) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .call-hierarchy .editor .monaco-editor .monaco-editor-background,` +\n\t\t\t`.monaco-editor .call-hierarchy .editor .monaco-editor .inputarea.ime-input {` +\n\t\t\t`\tbackground-color: ${editorBackground};` +\n\t\t\t`}`\n\t\t);\n\t}\n\tconst editorGutterBackground = theme.getColor(referencesWidget.peekViewEditorGutterBackground);\n\tif (editorGutterBackground) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .call-hierarchy .editor .monaco-editor .margin {` +\n\t\t\t`\tbackground-color: ${editorGutterBackground};` +\n\t\t\t`}`\n\t\t);\n\t}\n});\n"]}]}