{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/editor/contrib/folding/intializingRangeProvider.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/folding/intializingRangeProvider.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"vs/editor/common/model\");\nvar syntaxRangeProvider_1 = require(\"vs/editor/contrib/folding/syntaxRangeProvider\");\nexports.ID_INIT_PROVIDER = 'init';\nvar InitializingRangeProvider = /** @class */ (function () {\n    function InitializingRangeProvider(editorModel, initialRanges, onTimeout, timeoutTime) {\n        this.editorModel = editorModel;\n        this.id = exports.ID_INIT_PROVIDER;\n        if (initialRanges.length) {\n            var toDecorationRange = function (range) {\n                return {\n                    range: {\n                        startLineNumber: range.startLineNumber,\n                        startColumn: 0,\n                        endLineNumber: range.endLineNumber,\n                        endColumn: editorModel.getLineLength(range.endLineNumber)\n                    },\n                    options: {\n                        stickiness: model_1.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n                    }\n                };\n            };\n            this.decorationIds = editorModel.deltaDecorations([], initialRanges.map(toDecorationRange));\n            this.timeout = setTimeout(onTimeout, timeoutTime);\n        }\n    }\n    InitializingRangeProvider.prototype.dispose = function () {\n        if (this.decorationIds) {\n            this.editorModel.deltaDecorations(this.decorationIds, []);\n            this.decorationIds = undefined;\n        }\n        if (typeof this.timeout === 'number') {\n            clearTimeout(this.timeout);\n            this.timeout = undefined;\n        }\n    };\n    InitializingRangeProvider.prototype.compute = function (cancelationToken) {\n        var foldingRangeData = [];\n        if (this.decorationIds) {\n            for (var _i = 0, _a = this.decorationIds; _i < _a.length; _i++) {\n                var id = _a[_i];\n                var range = this.editorModel.getDecorationRange(id);\n                if (range) {\n                    foldingRangeData.push({ start: range.startLineNumber, end: range.endLineNumber, rank: 1 });\n                }\n            }\n        }\n        return Promise.resolve(syntaxRangeProvider_1.sanitizeRanges(foldingRangeData, Number.MAX_VALUE));\n    };\n    return InitializingRangeProvider;\n}());\nexports.InitializingRangeProvider = InitializingRangeProvider;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/folding/intializingRangeProvider.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/editor/contrib/folding/intializingRangeProvider.ts"],"names":[],"mappings":";AAAA;;;gGAGgG;;AAEhG,gDAAmG;AAInG,qFAAkG;AAErF,QAAA,gBAAgB,GAAG,MAAM,CAAC;AAEvC;IAMC,mCAA6B,WAAuB,EAAE,aAA2B,EAAE,SAAqB,EAAE,WAAmB;QAAhG,gBAAW,GAAX,WAAW,CAAY;QAL3C,OAAE,GAAG,wBAAgB,CAAC;QAM9B,IAAI,aAAa,CAAC,MAAM,EAAE;YACzB,IAAI,iBAAiB,GAAG,UAAC,KAAiB;gBACzC,OAAO;oBACN,KAAK,EAAE;wBACN,eAAe,EAAE,KAAK,CAAC,eAAe;wBACtC,WAAW,EAAE,CAAC;wBACd,aAAa,EAAE,KAAK,CAAC,aAAa;wBAClC,SAAS,EAAE,WAAW,CAAC,aAAa,CAAC,KAAK,CAAC,aAAa,CAAC;qBACzD;oBACD,OAAO,EAAE;wBACR,UAAU,EAAE,8BAAsB,CAAC,2BAA2B;qBAC9D;iBACD,CAAC;YACH,CAAC,CAAC;YACF,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC,gBAAgB,CAAC,EAAE,EAAE,aAAa,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC5F,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;SAClD;IACF,CAAC;IAED,2CAAO,GAAP;QACC,IAAI,IAAI,CAAC,aAAa,EAAE;YACvB,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;YAC1D,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;SAC/B;QACD,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,QAAQ,EAAE;YACrC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC3B,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;SACzB;IACF,CAAC;IAED,2CAAO,GAAP,UAAQ,gBAAmC;QAC1C,IAAI,gBAAgB,GAAwB,EAAE,CAAC;QAC/C,IAAI,IAAI,CAAC,aAAa,EAAE;YACvB,KAAe,UAAkB,EAAlB,KAAA,IAAI,CAAC,aAAa,EAAlB,cAAkB,EAAlB,IAAkB,EAAE;gBAA9B,IAAI,EAAE,SAAA;gBACV,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;gBACpD,IAAI,KAAK,EAAE;oBACV,gBAAgB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,eAAe,EAAE,GAAG,EAAE,KAAK,CAAC,aAAa,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;iBAC3F;aACD;SACD;QACD,OAAO,OAAO,CAAC,OAAO,CAAC,oCAAc,CAAC,gBAAgB,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;IAC5E,CAAC;IACF,gCAAC;AAAD,CAAC,AAjDD,IAiDC;AAjDY,8DAAyB","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITextModel, IModelDeltaDecoration, TrackedRangeStickiness } from 'vs/editor/common/model';\nimport { FoldingRegions, ILineRange } from 'vs/editor/contrib/folding/foldingRanges';\nimport { RangeProvider } from './folding';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { IFoldingRangeData, sanitizeRanges } from 'vs/editor/contrib/folding/syntaxRangeProvider';\n\nexport const ID_INIT_PROVIDER = 'init';\n\nexport class InitializingRangeProvider implements RangeProvider {\n\treadonly id = ID_INIT_PROVIDER;\n\n\tprivate decorationIds: string[] | undefined;\n\tprivate timeout: any;\n\n\tconstructor(private readonly editorModel: ITextModel, initialRanges: ILineRange[], onTimeout: () => void, timeoutTime: number) {\n\t\tif (initialRanges.length) {\n\t\t\tlet toDecorationRange = (range: ILineRange): IModelDeltaDecoration => {\n\t\t\t\treturn {\n\t\t\t\t\trange: {\n\t\t\t\t\t\tstartLineNumber: range.startLineNumber,\n\t\t\t\t\t\tstartColumn: 0,\n\t\t\t\t\t\tendLineNumber: range.endLineNumber,\n\t\t\t\t\t\tendColumn: editorModel.getLineLength(range.endLineNumber)\n\t\t\t\t\t},\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tthis.decorationIds = editorModel.deltaDecorations([], initialRanges.map(toDecorationRange));\n\t\t\tthis.timeout = setTimeout(onTimeout, timeoutTime);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tif (this.decorationIds) {\n\t\t\tthis.editorModel.deltaDecorations(this.decorationIds, []);\n\t\t\tthis.decorationIds = undefined;\n\t\t}\n\t\tif (typeof this.timeout === 'number') {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = undefined;\n\t\t}\n\t}\n\n\tcompute(cancelationToken: CancellationToken): Promise<FoldingRegions> {\n\t\tlet foldingRangeData: IFoldingRangeData[] = [];\n\t\tif (this.decorationIds) {\n\t\t\tfor (let id of this.decorationIds) {\n\t\t\t\tlet range = this.editorModel.getDecorationRange(id);\n\t\t\t\tif (range) {\n\t\t\t\t\tfoldingRangeData.push({ start: range.startLineNumber, end: range.endLineNumber, rank: 1 });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(sanitizeRanges(foldingRangeData, Number.MAX_VALUE));\n\t}\n}\n\n"]}]}