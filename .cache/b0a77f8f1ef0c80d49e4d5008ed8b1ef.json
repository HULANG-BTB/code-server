{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/actionbar/actionbar.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/actionbar/actionbar.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./actionbar\");\nvar platform = require(\"vs/base/common/platform\");\nvar nls = require(\"vs/nls\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar selectBox_1 = require(\"vs/base/browser/ui/selectBox/selectBox\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar DOM = require(\"vs/base/browser/dom\");\nvar types = require(\"vs/base/common/types\");\nvar touch_1 = require(\"vs/base/browser/touch\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar event_1 = require(\"vs/base/common/event\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar BaseActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(BaseActionItem, _super);\n    function BaseActionItem(context, action, options) {\n        var _this = _super.call(this) || this;\n        _this.options = options;\n        _this._context = context || _this;\n        _this._action = action;\n        if (action instanceof actions_1.Action) {\n            _this._register(action.onDidChange(function (event) {\n                if (!_this.element) {\n                    // we have not been rendered yet, so there\n                    // is no point in updating the UI\n                    return;\n                }\n                _this.handleActionChangeEvent(event);\n            }));\n        }\n        return _this;\n    }\n    BaseActionItem.prototype.handleActionChangeEvent = function (event) {\n        if (event.enabled !== undefined) {\n            this.updateEnabled();\n        }\n        if (event.checked !== undefined) {\n            this.updateChecked();\n        }\n        if (event.class !== undefined) {\n            this.updateClass();\n        }\n        if (event.label !== undefined) {\n            this.updateLabel();\n            this.updateTooltip();\n        }\n        if (event.tooltip !== undefined) {\n            this.updateTooltip();\n        }\n    };\n    Object.defineProperty(BaseActionItem.prototype, \"actionRunner\", {\n        get: function () {\n            return this._actionRunner;\n        },\n        set: function (actionRunner) {\n            this._actionRunner = actionRunner;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BaseActionItem.prototype.getAction = function () {\n        return this._action;\n    };\n    BaseActionItem.prototype.isEnabled = function () {\n        return this._action.enabled;\n    };\n    BaseActionItem.prototype.setActionContext = function (newContext) {\n        this._context = newContext;\n    };\n    BaseActionItem.prototype.render = function (container) {\n        var _this = this;\n        this.element = container;\n        touch_1.Gesture.addTarget(container);\n        var enableDragging = this.options && this.options.draggable;\n        if (enableDragging) {\n            container.draggable = true;\n        }\n        this._register(DOM.addDisposableListener(this.element, touch_1.EventType.Tap, function (e) { return _this.onClick(e); }));\n        this._register(DOM.addDisposableListener(this.element, DOM.EventType.MOUSE_DOWN, function (e) {\n            if (!enableDragging) {\n                DOM.EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n            }\n            if (_this._action.enabled && e.button === 0 && _this.element) {\n                DOM.addClass(_this.element, 'active');\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.element, DOM.EventType.CLICK, function (e) {\n            DOM.EventHelper.stop(e, true);\n            // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n            // > Writing to the clipboard\n            // > You can use the \"cut\" and \"copy\" commands without any special\n            // permission if you are using them in a short-lived event handler\n            // for a user action (for example, a click handler).\n            // => to get the Copy and Paste context menu actions working on Firefox,\n            // there should be no timeout here\n            if (_this.options && _this.options.isMenu) {\n                _this.onClick(e);\n            }\n            else {\n                platform.setImmediate(function () { return _this.onClick(e); });\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.element, DOM.EventType.DBLCLICK, function (e) {\n            DOM.EventHelper.stop(e, true);\n        }));\n        [DOM.EventType.MOUSE_UP, DOM.EventType.MOUSE_OUT].forEach(function (event) {\n            _this._register(DOM.addDisposableListener(_this.element, event, function (e) {\n                DOM.EventHelper.stop(e);\n                DOM.removeClass(_this.element, 'active');\n            }));\n        });\n    };\n    BaseActionItem.prototype.onClick = function (event) {\n        DOM.EventHelper.stop(event, true);\n        var context;\n        if (types.isUndefinedOrNull(this._context)) {\n            context = event;\n        }\n        else {\n            context = this._context;\n            if (types.isObject(context)) {\n                context.event = event;\n            }\n        }\n        this._actionRunner.run(this._action, context);\n    };\n    BaseActionItem.prototype.focus = function () {\n        if (this.element) {\n            this.element.focus();\n            DOM.addClass(this.element, 'focused');\n        }\n    };\n    BaseActionItem.prototype.blur = function () {\n        if (this.element) {\n            this.element.blur();\n            DOM.removeClass(this.element, 'focused');\n        }\n    };\n    BaseActionItem.prototype.updateEnabled = function () {\n        // implement in subclass\n    };\n    BaseActionItem.prototype.updateLabel = function () {\n        // implement in subclass\n    };\n    BaseActionItem.prototype.updateTooltip = function () {\n        // implement in subclass\n    };\n    BaseActionItem.prototype.updateClass = function () {\n        // implement in subclass\n    };\n    BaseActionItem.prototype.updateChecked = function () {\n        // implement in subclass\n    };\n    BaseActionItem.prototype.dispose = function () {\n        if (this.element) {\n            DOM.removeNode(this.element);\n            this.element = undefined;\n        }\n        _super.prototype.dispose.call(this);\n    };\n    return BaseActionItem;\n}(lifecycle_1.Disposable));\nexports.BaseActionItem = BaseActionItem;\nvar Separator = /** @class */ (function (_super) {\n    tslib_1.__extends(Separator, _super);\n    function Separator(label) {\n        var _this = _super.call(this, Separator.ID, label, label ? 'separator text' : 'separator') || this;\n        _this.checked = false;\n        _this.radio = false;\n        _this.enabled = false;\n        return _this;\n    }\n    Separator.ID = 'vs.actions.separator';\n    return Separator;\n}(actions_1.Action));\nexports.Separator = Separator;\nvar ActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(ActionItem, _super);\n    function ActionItem(context, action, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, context, action, options) || this;\n        _this.options = options;\n        _this.options.icon = options.icon !== undefined ? options.icon : false;\n        _this.options.label = options.label !== undefined ? options.label : true;\n        _this.cssClass = '';\n        return _this;\n    }\n    ActionItem.prototype.render = function (container) {\n        _super.prototype.render.call(this, container);\n        if (this.element) {\n            this.label = DOM.append(this.element, DOM.$('a.action-label'));\n        }\n        if (this._action.id === Separator.ID) {\n            this.label.setAttribute('role', 'presentation'); // A separator is a presentation item\n        }\n        else {\n            if (this.options.isMenu) {\n                this.label.setAttribute('role', 'menuitem');\n            }\n            else {\n                this.label.setAttribute('role', 'button');\n            }\n        }\n        if (this.options.label && this.options.keybinding && this.element) {\n            DOM.append(this.element, DOM.$('span.keybinding')).textContent = this.options.keybinding;\n        }\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    };\n    ActionItem.prototype.focus = function () {\n        _super.prototype.focus.call(this);\n        this.label.focus();\n    };\n    ActionItem.prototype.updateLabel = function () {\n        if (this.options.label) {\n            this.label.textContent = this.getAction().label;\n        }\n    };\n    ActionItem.prototype.updateTooltip = function () {\n        var title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\n            title = this.getAction().label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        if (title) {\n            this.label.title = title;\n        }\n    };\n    ActionItem.prototype.updateClass = function () {\n        if (this.cssClass) {\n            DOM.removeClasses(this.label, this.cssClass);\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getAction().class;\n            DOM.addClass(this.label, 'icon');\n            if (this.cssClass) {\n                DOM.addClasses(this.label, this.cssClass);\n            }\n            this.updateEnabled();\n        }\n        else {\n            DOM.removeClass(this.label, 'icon');\n        }\n    };\n    ActionItem.prototype.updateEnabled = function () {\n        if (this.getAction().enabled) {\n            this.label.removeAttribute('aria-disabled');\n            if (this.element) {\n                DOM.removeClass(this.element, 'disabled');\n            }\n            DOM.removeClass(this.label, 'disabled');\n            this.label.tabIndex = 0;\n        }\n        else {\n            this.label.setAttribute('aria-disabled', 'true');\n            if (this.element) {\n                DOM.addClass(this.element, 'disabled');\n            }\n            DOM.addClass(this.label, 'disabled');\n            DOM.removeTabIndexAndUpdateFocus(this.label);\n        }\n    };\n    ActionItem.prototype.updateChecked = function () {\n        if (this.getAction().checked) {\n            DOM.addClass(this.label, 'checked');\n        }\n        else {\n            DOM.removeClass(this.label, 'checked');\n        }\n    };\n    return ActionItem;\n}(BaseActionItem));\nexports.ActionItem = ActionItem;\nvar ActionsOrientation;\n(function (ActionsOrientation) {\n    ActionsOrientation[ActionsOrientation[\"HORIZONTAL\"] = 0] = \"HORIZONTAL\";\n    ActionsOrientation[ActionsOrientation[\"HORIZONTAL_REVERSE\"] = 1] = \"HORIZONTAL_REVERSE\";\n    ActionsOrientation[ActionsOrientation[\"VERTICAL\"] = 2] = \"VERTICAL\";\n    ActionsOrientation[ActionsOrientation[\"VERTICAL_REVERSE\"] = 3] = \"VERTICAL_REVERSE\";\n})(ActionsOrientation = exports.ActionsOrientation || (exports.ActionsOrientation = {}));\nvar defaultOptions = {\n    orientation: ActionsOrientation.HORIZONTAL,\n    context: null,\n    triggerKeys: {\n        keys: [keyCodes_1.KeyCode.Enter, keyCodes_1.KeyCode.Space],\n        keyDown: false\n    }\n};\nvar ActionBar = /** @class */ (function (_super) {\n    tslib_1.__extends(ActionBar, _super);\n    function ActionBar(container, options) {\n        if (options === void 0) { options = defaultOptions; }\n        var _this = _super.call(this) || this;\n        _this._onDidBlur = _this._register(new event_1.Emitter());\n        _this._onDidCancel = _this._register(new event_1.Emitter());\n        _this._onDidRun = _this._register(new event_1.Emitter());\n        _this._onDidBeforeRun = _this._register(new event_1.Emitter());\n        _this.options = options;\n        _this._context = options.context;\n        if (!_this.options.triggerKeys) {\n            _this.options.triggerKeys = defaultOptions.triggerKeys;\n        }\n        if (_this.options.actionRunner) {\n            _this._actionRunner = _this.options.actionRunner;\n        }\n        else {\n            _this._actionRunner = new actions_1.ActionRunner();\n            _this._register(_this._actionRunner);\n        }\n        _this._register(_this._actionRunner.onDidRun(function (e) { return _this._onDidRun.fire(e); }));\n        _this._register(_this._actionRunner.onDidBeforeRun(function (e) { return _this._onDidBeforeRun.fire(e); }));\n        _this.items = [];\n        _this.focusedItem = undefined;\n        _this.domNode = document.createElement('div');\n        _this.domNode.className = 'monaco-action-bar';\n        if (options.animated !== false) {\n            DOM.addClass(_this.domNode, 'animated');\n        }\n        var previousKey;\n        var nextKey;\n        switch (_this.options.orientation) {\n            case ActionsOrientation.HORIZONTAL:\n                previousKey = keyCodes_1.KeyCode.LeftArrow;\n                nextKey = keyCodes_1.KeyCode.RightArrow;\n                break;\n            case ActionsOrientation.HORIZONTAL_REVERSE:\n                previousKey = keyCodes_1.KeyCode.RightArrow;\n                nextKey = keyCodes_1.KeyCode.LeftArrow;\n                _this.domNode.className += ' reverse';\n                break;\n            case ActionsOrientation.VERTICAL:\n                previousKey = keyCodes_1.KeyCode.UpArrow;\n                nextKey = keyCodes_1.KeyCode.DownArrow;\n                _this.domNode.className += ' vertical';\n                break;\n            case ActionsOrientation.VERTICAL_REVERSE:\n                previousKey = keyCodes_1.KeyCode.DownArrow;\n                nextKey = keyCodes_1.KeyCode.UpArrow;\n                _this.domNode.className += ' vertical reverse';\n                break;\n        }\n        _this._register(DOM.addDisposableListener(_this.domNode, DOM.EventType.KEY_DOWN, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            var eventHandled = true;\n            if (event.equals(previousKey)) {\n                _this.focusPrevious();\n            }\n            else if (event.equals(nextKey)) {\n                _this.focusNext();\n            }\n            else if (event.equals(keyCodes_1.KeyCode.Escape)) {\n                _this.cancel();\n            }\n            else if (_this.isTriggerKeyEvent(event)) {\n                // Staying out of the else branch even if not triggered\n                if (_this.options.triggerKeys && _this.options.triggerKeys.keyDown) {\n                    _this.doTrigger(event);\n                }\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        _this._register(DOM.addDisposableListener(_this.domNode, DOM.EventType.KEY_UP, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            // Run action on Enter/Space\n            if (_this.isTriggerKeyEvent(event)) {\n                if (_this.options.triggerKeys && !_this.options.triggerKeys.keyDown) {\n                    _this.doTrigger(event);\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            // Recompute focused item\n            else if (event.equals(keyCodes_1.KeyCode.Tab) || event.equals(keyCodes_1.KeyMod.Shift | keyCodes_1.KeyCode.Tab)) {\n                _this.updateFocusedItem();\n            }\n        }));\n        _this.focusTracker = _this._register(DOM.trackFocus(_this.domNode));\n        _this._register(_this.focusTracker.onDidBlur(function () {\n            if (document.activeElement === _this.domNode || !DOM.isAncestor(document.activeElement, _this.domNode)) {\n                _this._onDidBlur.fire();\n                _this.focusedItem = undefined;\n            }\n        }));\n        _this._register(_this.focusTracker.onDidFocus(function () { return _this.updateFocusedItem(); }));\n        _this.actionsList = document.createElement('ul');\n        _this.actionsList.className = 'actions-container';\n        _this.actionsList.setAttribute('role', 'toolbar');\n        if (_this.options.ariaLabel) {\n            _this.actionsList.setAttribute('aria-label', _this.options.ariaLabel);\n        }\n        _this.domNode.appendChild(_this.actionsList);\n        container.appendChild(_this.domNode);\n        return _this;\n    }\n    Object.defineProperty(ActionBar.prototype, \"onDidBlur\", {\n        get: function () { return this._onDidBlur.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActionBar.prototype, \"onDidCancel\", {\n        get: function () { return this._onDidCancel.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActionBar.prototype, \"onDidRun\", {\n        get: function () { return this._onDidRun.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActionBar.prototype, \"onDidBeforeRun\", {\n        get: function () { return this._onDidBeforeRun.event; },\n        enumerable: true,\n        configurable: true\n    });\n    ActionBar.prototype.setAriaLabel = function (label) {\n        if (label) {\n            this.actionsList.setAttribute('aria-label', label);\n        }\n        else {\n            this.actionsList.removeAttribute('aria-label');\n        }\n    };\n    ActionBar.prototype.isTriggerKeyEvent = function (event) {\n        var ret = false;\n        if (this.options.triggerKeys) {\n            this.options.triggerKeys.keys.forEach(function (keyCode) {\n                ret = ret || event.equals(keyCode);\n            });\n        }\n        return ret;\n    };\n    ActionBar.prototype.updateFocusedItem = function () {\n        for (var i = 0; i < this.actionsList.children.length; i++) {\n            var elem = this.actionsList.children[i];\n            if (DOM.isAncestor(document.activeElement, elem)) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    };\n    Object.defineProperty(ActionBar.prototype, \"context\", {\n        get: function () {\n            return this._context;\n        },\n        set: function (context) {\n            this._context = context;\n            this.items.forEach(function (i) { return i.setActionContext(context); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActionBar.prototype, \"actionRunner\", {\n        get: function () {\n            return this._actionRunner;\n        },\n        set: function (actionRunner) {\n            if (actionRunner) {\n                this._actionRunner = actionRunner;\n                this.items.forEach(function (item) { return item.actionRunner = actionRunner; });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionBar.prototype.getContainer = function () {\n        return this.domNode;\n    };\n    ActionBar.prototype.push = function (arg, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var actions = arrays_1.asArray(arg);\n        var index = types.isNumber(options.index) ? options.index : null;\n        actions.forEach(function (action) {\n            var actionItemElement = document.createElement('li');\n            actionItemElement.className = 'action-item';\n            actionItemElement.setAttribute('role', 'presentation');\n            // Prevent native context menu on actions\n            _this._register(DOM.addDisposableListener(actionItemElement, DOM.EventType.CONTEXT_MENU, function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }));\n            var item;\n            if (_this.options.actionItemProvider) {\n                item = _this.options.actionItemProvider(action);\n            }\n            if (!item) {\n                item = new ActionItem(_this.context, action, options);\n            }\n            item.actionRunner = _this._actionRunner;\n            item.setActionContext(_this.context);\n            item.render(actionItemElement);\n            if (index === null || index < 0 || index >= _this.actionsList.children.length) {\n                _this.actionsList.appendChild(actionItemElement);\n                _this.items.push(item);\n            }\n            else {\n                _this.actionsList.insertBefore(actionItemElement, _this.actionsList.children[index]);\n                _this.items.splice(index, 0, item);\n                index++;\n            }\n        });\n    };\n    ActionBar.prototype.getWidth = function (index) {\n        if (index >= 0 && index < this.actionsList.children.length) {\n            var item = this.actionsList.children.item(index);\n            if (item) {\n                return item.clientWidth;\n            }\n        }\n        return 0;\n    };\n    ActionBar.prototype.getHeight = function (index) {\n        if (index >= 0 && index < this.actionsList.children.length) {\n            var item = this.actionsList.children.item(index);\n            if (item) {\n                return item.clientHeight;\n            }\n        }\n        return 0;\n    };\n    ActionBar.prototype.pull = function (index) {\n        if (index >= 0 && index < this.items.length) {\n            this.actionsList.removeChild(this.actionsList.childNodes[index]);\n            lifecycle_1.dispose(this.items.splice(index, 1));\n        }\n    };\n    ActionBar.prototype.clear = function () {\n        this.items = lifecycle_1.dispose(this.items);\n        DOM.clearNode(this.actionsList);\n    };\n    ActionBar.prototype.length = function () {\n        return this.items.length;\n    };\n    ActionBar.prototype.isEmpty = function () {\n        return this.items.length === 0;\n    };\n    ActionBar.prototype.focus = function (arg) {\n        var selectFirst = false;\n        var index = undefined;\n        if (arg === undefined) {\n            selectFirst = true;\n        }\n        else if (typeof arg === 'number') {\n            index = arg;\n        }\n        else if (typeof arg === 'boolean') {\n            selectFirst = arg;\n        }\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\n            // Focus the first enabled item\n            this.focusedItem = this.items.length - 1;\n            this.focusNext();\n        }\n        else {\n            if (index !== undefined) {\n                this.focusedItem = index;\n            }\n            this.updateFocus();\n        }\n    };\n    ActionBar.prototype.focusNext = function () {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = this.items.length - 1;\n        }\n        var startIndex = this.focusedItem;\n        var item;\n        do {\n            this.focusedItem = (this.focusedItem + 1) % this.items.length;\n            item = this.items[this.focusedItem];\n        } while (this.focusedItem !== startIndex && !item.isEnabled());\n        if (this.focusedItem === startIndex && !item.isEnabled()) {\n            this.focusedItem = undefined;\n        }\n        this.updateFocus();\n    };\n    ActionBar.prototype.focusPrevious = function () {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = 0;\n        }\n        var startIndex = this.focusedItem;\n        var item;\n        do {\n            this.focusedItem = this.focusedItem - 1;\n            if (this.focusedItem < 0) {\n                this.focusedItem = this.items.length - 1;\n            }\n            item = this.items[this.focusedItem];\n        } while (this.focusedItem !== startIndex && !item.isEnabled());\n        if (this.focusedItem === startIndex && !item.isEnabled()) {\n            this.focusedItem = undefined;\n        }\n        this.updateFocus(true);\n    };\n    ActionBar.prototype.updateFocus = function (fromRight) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.actionsList.focus();\n        }\n        for (var i = 0; i < this.items.length; i++) {\n            var item = this.items[i];\n            var actionItem = item;\n            if (i === this.focusedItem) {\n                if (types.isFunction(actionItem.isEnabled)) {\n                    if (actionItem.isEnabled() && types.isFunction(actionItem.focus)) {\n                        actionItem.focus(fromRight);\n                    }\n                    else {\n                        this.actionsList.focus();\n                    }\n                }\n            }\n            else {\n                if (types.isFunction(actionItem.blur)) {\n                    actionItem.blur();\n                }\n            }\n        }\n    };\n    ActionBar.prototype.doTrigger = function (event) {\n        if (typeof this.focusedItem === 'undefined') {\n            return; //nothing to focus\n        }\n        // trigger action\n        var actionItem = this.items[this.focusedItem];\n        if (actionItem instanceof BaseActionItem) {\n            var context = (actionItem._context === null || actionItem._context === undefined) ? event : actionItem._context;\n            this.run(actionItem._action, context);\n        }\n    };\n    ActionBar.prototype.cancel = function () {\n        if (document.activeElement instanceof HTMLElement) {\n            document.activeElement.blur(); // remove focus from focused action\n        }\n        this._onDidCancel.fire();\n    };\n    ActionBar.prototype.run = function (action, context) {\n        return this._actionRunner.run(action, context);\n    };\n    ActionBar.prototype.dispose = function () {\n        lifecycle_1.dispose(this.items);\n        this.items = [];\n        DOM.removeNode(this.getContainer());\n        _super.prototype.dispose.call(this);\n    };\n    return ActionBar;\n}(lifecycle_1.Disposable));\nexports.ActionBar = ActionBar;\nvar SelectActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(SelectActionItem, _super);\n    function SelectActionItem(ctx, action, options, selected, contextViewProvider, selectBoxOptions) {\n        var _this = _super.call(this, ctx, action) || this;\n        _this.selectBox = new selectBox_1.SelectBox(options, selected, contextViewProvider, undefined, selectBoxOptions);\n        _this._register(_this.selectBox);\n        _this.registerListeners();\n        return _this;\n    }\n    SelectActionItem.prototype.setOptions = function (options, selected) {\n        this.selectBox.setOptions(options, selected);\n    };\n    SelectActionItem.prototype.select = function (index) {\n        this.selectBox.select(index);\n    };\n    SelectActionItem.prototype.registerListeners = function () {\n        var _this = this;\n        this._register(this.selectBox.onDidSelect(function (e) {\n            _this.actionRunner.run(_this._action, _this.getActionContext(e.selected, e.index));\n        }));\n    };\n    SelectActionItem.prototype.getActionContext = function (option, index) {\n        return option;\n    };\n    SelectActionItem.prototype.focus = function () {\n        if (this.selectBox) {\n            this.selectBox.focus();\n        }\n    };\n    SelectActionItem.prototype.blur = function () {\n        if (this.selectBox) {\n            this.selectBox.blur();\n        }\n    };\n    SelectActionItem.prototype.render = function (container) {\n        this.selectBox.render(container);\n    };\n    return SelectActionItem;\n}(BaseActionItem));\nexports.SelectActionItem = SelectActionItem;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/actionbar/actionbar.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/actionbar/actionbar.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./actionbar';\nimport * as platform from 'vs/base/common/platform';\nimport * as nls from 'vs/nls';\nimport { Disposable, dispose } from 'vs/base/common/lifecycle';\nimport { SelectBox, ISelectOptionItem, ISelectBoxOptions } from 'vs/base/browser/ui/selectBox/selectBox';\nimport { IAction, IActionRunner, Action, IActionChangeEvent, ActionRunner, IRunEvent } from 'vs/base/common/actions';\nimport * as DOM from 'vs/base/browser/dom';\nimport * as types from 'vs/base/common/types';\nimport { EventType, Gesture } from 'vs/base/browser/touch';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { IContextViewProvider } from 'vs/base/browser/ui/contextview/contextview';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { asArray } from 'vs/base/common/arrays';\n\nexport interface IActionItem {\n\tactionRunner: IActionRunner;\n\tsetActionContext(context: any): void;\n\trender(element: HTMLElement): void;\n\tisEnabled(): boolean;\n\tfocus(fromRight?: boolean): void;\n\tblur(): void;\n\tdispose(): void;\n}\n\nexport interface IBaseActionItemOptions {\n\tdraggable?: boolean;\n\tisMenu?: boolean;\n}\n\nexport class BaseActionItem extends Disposable implements IActionItem {\n\n\telement?: HTMLElement;\n\t_context: any;\n\t_action: IAction;\n\n\tprivate _actionRunner: IActionRunner;\n\n\tconstructor(context: any, action: IAction, protected options?: IBaseActionItemOptions) {\n\t\tsuper();\n\n\t\tthis._context = context || this;\n\t\tthis._action = action;\n\n\t\tif (action instanceof Action) {\n\t\t\tthis._register(action.onDidChange(event => {\n\t\t\t\tif (!this.element) {\n\t\t\t\t\t// we have not been rendered yet, so there\n\t\t\t\t\t// is no point in updating the UI\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.handleActionChangeEvent(event);\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate handleActionChangeEvent(event: IActionChangeEvent): void {\n\t\tif (event.enabled !== undefined) {\n\t\t\tthis.updateEnabled();\n\t\t}\n\n\t\tif (event.checked !== undefined) {\n\t\t\tthis.updateChecked();\n\t\t}\n\n\t\tif (event.class !== undefined) {\n\t\t\tthis.updateClass();\n\t\t}\n\n\t\tif (event.label !== undefined) {\n\t\t\tthis.updateLabel();\n\t\t\tthis.updateTooltip();\n\t\t}\n\n\t\tif (event.tooltip !== undefined) {\n\t\t\tthis.updateTooltip();\n\t\t}\n\t}\n\n\tset actionRunner(actionRunner: IActionRunner) {\n\t\tthis._actionRunner = actionRunner;\n\t}\n\n\tget actionRunner(): IActionRunner {\n\t\treturn this._actionRunner;\n\t}\n\n\tgetAction(): IAction {\n\t\treturn this._action;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this._action.enabled;\n\t}\n\n\tsetActionContext(newContext: any): void {\n\t\tthis._context = newContext;\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tthis.element = container;\n\t\tGesture.addTarget(container);\n\n\t\tconst enableDragging = this.options && this.options.draggable;\n\t\tif (enableDragging) {\n\t\t\tcontainer.draggable = true;\n\t\t}\n\n\t\tthis._register(DOM.addDisposableListener(this.element, EventType.Tap, e => this.onClick(e)));\n\n\t\tthis._register(DOM.addDisposableListener(this.element, DOM.EventType.MOUSE_DOWN, e => {\n\t\t\tif (!enableDragging) {\n\t\t\t\tDOM.EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n\t\t\t}\n\n\t\t\tif (this._action.enabled && e.button === 0 && this.element) {\n\t\t\t\tDOM.addClass(this.element, 'active');\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addDisposableListener(this.element, DOM.EventType.CLICK, e => {\n\t\t\tDOM.EventHelper.stop(e, true);\n\t\t\t// See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n\t\t\t// > Writing to the clipboard\n\t\t\t// > You can use the \"cut\" and \"copy\" commands without any special\n\t\t\t// permission if you are using them in a short-lived event handler\n\t\t\t// for a user action (for example, a click handler).\n\n\t\t\t// => to get the Copy and Paste context menu actions working on Firefox,\n\t\t\t// there should be no timeout here\n\t\t\tif (this.options && this.options.isMenu) {\n\t\t\t\tthis.onClick(e);\n\t\t\t} else {\n\t\t\t\tplatform.setImmediate(() => this.onClick(e));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addDisposableListener(this.element, DOM.EventType.DBLCLICK, e => {\n\t\t\tDOM.EventHelper.stop(e, true);\n\t\t}));\n\n\t\t[DOM.EventType.MOUSE_UP, DOM.EventType.MOUSE_OUT].forEach(event => {\n\t\t\tthis._register(DOM.addDisposableListener(this.element!, event, e => {\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t\tDOM.removeClass(this.element!, 'active');\n\t\t\t}));\n\t\t});\n\t}\n\n\tonClick(event: DOM.EventLike): void {\n\t\tDOM.EventHelper.stop(event, true);\n\n\t\tlet context: any;\n\t\tif (types.isUndefinedOrNull(this._context)) {\n\t\t\tcontext = event;\n\t\t} else {\n\t\t\tcontext = this._context;\n\n\t\t\tif (types.isObject(context)) {\n\t\t\t\tcontext.event = event;\n\t\t\t}\n\t\t}\n\n\t\tthis._actionRunner.run(this._action, context);\n\t}\n\n\tfocus(): void {\n\t\tif (this.element) {\n\t\t\tthis.element.focus();\n\t\t\tDOM.addClass(this.element, 'focused');\n\t\t}\n\t}\n\n\tblur(): void {\n\t\tif (this.element) {\n\t\t\tthis.element.blur();\n\t\t\tDOM.removeClass(this.element, 'focused');\n\t\t}\n\t}\n\n\tprotected updateEnabled(): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected updateLabel(): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected updateTooltip(): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected updateClass(): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected updateChecked(): void {\n\t\t// implement in subclass\n\t}\n\n\tdispose(): void {\n\t\tif (this.element) {\n\t\t\tDOM.removeNode(this.element);\n\t\t\tthis.element = undefined;\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class Separator extends Action {\n\n\tstatic readonly ID = 'vs.actions.separator';\n\n\tconstructor(label?: string) {\n\t\tsuper(Separator.ID, label, label ? 'separator text' : 'separator');\n\t\tthis.checked = false;\n\t\tthis.radio = false;\n\t\tthis.enabled = false;\n\t}\n}\n\nexport interface IActionItemOptions extends IBaseActionItemOptions {\n\ticon?: boolean;\n\tlabel?: boolean;\n\tkeybinding?: string | null;\n}\n\nexport class ActionItem extends BaseActionItem {\n\n\tprotected label: HTMLElement;\n\tprotected options: IActionItemOptions;\n\n\tprivate cssClass?: string;\n\n\tconstructor(context: any, action: IAction, options: IActionItemOptions = {}) {\n\t\tsuper(context, action, options);\n\n\t\tthis.options = options;\n\t\tthis.options.icon = options.icon !== undefined ? options.icon : false;\n\t\tthis.options.label = options.label !== undefined ? options.label : true;\n\t\tthis.cssClass = '';\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tif (this.element) {\n\t\t\tthis.label = DOM.append(this.element, DOM.$('a.action-label'));\n\t\t}\n\t\tif (this._action.id === Separator.ID) {\n\t\t\tthis.label.setAttribute('role', 'presentation'); // A separator is a presentation item\n\t\t} else {\n\t\t\tif (this.options.isMenu) {\n\t\t\t\tthis.label.setAttribute('role', 'menuitem');\n\t\t\t} else {\n\t\t\t\tthis.label.setAttribute('role', 'button');\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.label && this.options.keybinding && this.element) {\n\t\t\tDOM.append(this.element, DOM.$('span.keybinding')).textContent = this.options.keybinding;\n\t\t}\n\n\t\tthis.updateClass();\n\t\tthis.updateLabel();\n\t\tthis.updateTooltip();\n\t\tthis.updateEnabled();\n\t\tthis.updateChecked();\n\t}\n\n\tfocus(): void {\n\t\tsuper.focus();\n\n\t\tthis.label.focus();\n\t}\n\n\tupdateLabel(): void {\n\t\tif (this.options.label) {\n\t\t\tthis.label.textContent = this.getAction().label;\n\t\t}\n\t}\n\n\tupdateTooltip(): void {\n\t\tlet title: string | null = null;\n\n\t\tif (this.getAction().tooltip) {\n\t\t\ttitle = this.getAction().tooltip;\n\n\t\t} else if (!this.options.label && this.getAction().label && this.options.icon) {\n\t\t\ttitle = this.getAction().label;\n\n\t\t\tif (this.options.keybinding) {\n\t\t\t\ttitle = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n\t\t\t}\n\t\t}\n\n\t\tif (title) {\n\t\t\tthis.label.title = title;\n\t\t}\n\t}\n\n\tupdateClass(): void {\n\t\tif (this.cssClass) {\n\t\t\tDOM.removeClasses(this.label, this.cssClass);\n\t\t}\n\n\t\tif (this.options.icon) {\n\t\t\tthis.cssClass = this.getAction().class;\n\t\t\tDOM.addClass(this.label, 'icon');\n\t\t\tif (this.cssClass) {\n\t\t\t\tDOM.addClasses(this.label, this.cssClass);\n\t\t\t}\n\n\t\t\tthis.updateEnabled();\n\t\t} else {\n\t\t\tDOM.removeClass(this.label, 'icon');\n\t\t}\n\t}\n\n\tupdateEnabled(): void {\n\t\tif (this.getAction().enabled) {\n\t\t\tthis.label.removeAttribute('aria-disabled');\n\t\t\tif (this.element) {\n\t\t\t\tDOM.removeClass(this.element, 'disabled');\n\t\t\t}\n\t\t\tDOM.removeClass(this.label, 'disabled');\n\t\t\tthis.label.tabIndex = 0;\n\t\t} else {\n\t\t\tthis.label.setAttribute('aria-disabled', 'true');\n\t\t\tif (this.element) {\n\t\t\t\tDOM.addClass(this.element, 'disabled');\n\t\t\t}\n\t\t\tDOM.addClass(this.label, 'disabled');\n\t\t\tDOM.removeTabIndexAndUpdateFocus(this.label);\n\t\t}\n\t}\n\n\tupdateChecked(): void {\n\t\tif (this.getAction().checked) {\n\t\t\tDOM.addClass(this.label, 'checked');\n\t\t} else {\n\t\t\tDOM.removeClass(this.label, 'checked');\n\t\t}\n\t}\n}\n\nexport const enum ActionsOrientation {\n\tHORIZONTAL,\n\tHORIZONTAL_REVERSE,\n\tVERTICAL,\n\tVERTICAL_REVERSE,\n}\n\nexport interface ActionTrigger {\n\tkeys: KeyCode[];\n\tkeyDown: boolean;\n}\n\nexport interface IActionItemProvider {\n\t(action: IAction): IActionItem | undefined;\n}\n\nexport interface IActionBarOptions {\n\torientation?: ActionsOrientation;\n\tcontext?: any;\n\tactionItemProvider?: IActionItemProvider;\n\tactionRunner?: IActionRunner;\n\tariaLabel?: string;\n\tanimated?: boolean;\n\ttriggerKeys?: ActionTrigger;\n}\n\nconst defaultOptions: IActionBarOptions = {\n\torientation: ActionsOrientation.HORIZONTAL,\n\tcontext: null,\n\ttriggerKeys: {\n\t\tkeys: [KeyCode.Enter, KeyCode.Space],\n\t\tkeyDown: false\n\t}\n};\n\nexport interface IActionOptions extends IActionItemOptions {\n\tindex?: number;\n}\n\nexport class ActionBar extends Disposable implements IActionRunner {\n\n\toptions: IActionBarOptions;\n\n\tprivate _actionRunner: IActionRunner;\n\tprivate _context: any;\n\n\t// Items\n\titems: IActionItem[];\n\tprotected focusedItem?: number;\n\tprivate focusTracker: DOM.IFocusTracker;\n\n\t// Elements\n\tdomNode: HTMLElement;\n\tprotected actionsList: HTMLElement;\n\n\tprivate _onDidBlur = this._register(new Emitter<void>());\n\tget onDidBlur(): Event<void> { return this._onDidBlur.event; }\n\n\tprivate _onDidCancel = this._register(new Emitter<void>());\n\tget onDidCancel(): Event<void> { return this._onDidCancel.event; }\n\n\tprivate _onDidRun = this._register(new Emitter<IRunEvent>());\n\tget onDidRun(): Event<IRunEvent> { return this._onDidRun.event; }\n\n\tprivate _onDidBeforeRun = this._register(new Emitter<IRunEvent>());\n\tget onDidBeforeRun(): Event<IRunEvent> { return this._onDidBeforeRun.event; }\n\n\tconstructor(container: HTMLElement, options: IActionBarOptions = defaultOptions) {\n\t\tsuper();\n\n\t\tthis.options = options;\n\t\tthis._context = options.context;\n\n\t\tif (!this.options.triggerKeys) {\n\t\t\tthis.options.triggerKeys = defaultOptions.triggerKeys;\n\t\t}\n\n\t\tif (this.options.actionRunner) {\n\t\t\tthis._actionRunner = this.options.actionRunner;\n\t\t} else {\n\t\t\tthis._actionRunner = new ActionRunner();\n\t\t\tthis._register(this._actionRunner);\n\t\t}\n\n\t\tthis._register(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n\t\tthis._register(this._actionRunner.onDidBeforeRun(e => this._onDidBeforeRun.fire(e)));\n\n\t\tthis.items = [];\n\t\tthis.focusedItem = undefined;\n\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = 'monaco-action-bar';\n\n\t\tif (options.animated !== false) {\n\t\t\tDOM.addClass(this.domNode, 'animated');\n\t\t}\n\n\t\tlet previousKey: KeyCode;\n\t\tlet nextKey: KeyCode;\n\n\t\tswitch (this.options.orientation) {\n\t\t\tcase ActionsOrientation.HORIZONTAL:\n\t\t\t\tpreviousKey = KeyCode.LeftArrow;\n\t\t\t\tnextKey = KeyCode.RightArrow;\n\t\t\t\tbreak;\n\t\t\tcase ActionsOrientation.HORIZONTAL_REVERSE:\n\t\t\t\tpreviousKey = KeyCode.RightArrow;\n\t\t\t\tnextKey = KeyCode.LeftArrow;\n\t\t\t\tthis.domNode.className += ' reverse';\n\t\t\t\tbreak;\n\t\t\tcase ActionsOrientation.VERTICAL:\n\t\t\t\tpreviousKey = KeyCode.UpArrow;\n\t\t\t\tnextKey = KeyCode.DownArrow;\n\t\t\t\tthis.domNode.className += ' vertical';\n\t\t\t\tbreak;\n\t\t\tcase ActionsOrientation.VERTICAL_REVERSE:\n\t\t\t\tpreviousKey = KeyCode.DownArrow;\n\t\t\t\tnextKey = KeyCode.UpArrow;\n\t\t\t\tthis.domNode.className += ' vertical reverse';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_DOWN, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tlet eventHandled = true;\n\n\t\t\tif (event.equals(previousKey)) {\n\t\t\t\tthis.focusPrevious();\n\t\t\t} else if (event.equals(nextKey)) {\n\t\t\t\tthis.focusNext();\n\t\t\t} else if (event.equals(KeyCode.Escape)) {\n\t\t\t\tthis.cancel();\n\t\t\t} else if (this.isTriggerKeyEvent(event)) {\n\t\t\t\t// Staying out of the else branch even if not triggered\n\t\t\t\tif (this.options.triggerKeys && this.options.triggerKeys.keyDown) {\n\t\t\t\t\tthis.doTrigger(event);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventHandled = false;\n\t\t\t}\n\n\t\t\tif (eventHandled) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_UP, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\t// Run action on Enter/Space\n\t\t\tif (this.isTriggerKeyEvent(event)) {\n\t\t\t\tif (this.options.triggerKeys && !this.options.triggerKeys.keyDown) {\n\t\t\t\t\tthis.doTrigger(event);\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t\t// Recompute focused item\n\t\t\telse if (event.equals(KeyCode.Tab) || event.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tthis.updateFocusedItem();\n\t\t\t}\n\t\t}));\n\n\t\tthis.focusTracker = this._register(DOM.trackFocus(this.domNode));\n\t\tthis._register(this.focusTracker.onDidBlur(() => {\n\t\t\tif (document.activeElement === this.domNode || !DOM.isAncestor(document.activeElement, this.domNode)) {\n\t\t\t\tthis._onDidBlur.fire();\n\t\t\t\tthis.focusedItem = undefined;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.focusTracker.onDidFocus(() => this.updateFocusedItem()));\n\n\t\tthis.actionsList = document.createElement('ul');\n\t\tthis.actionsList.className = 'actions-container';\n\t\tthis.actionsList.setAttribute('role', 'toolbar');\n\n\t\tif (this.options.ariaLabel) {\n\t\t\tthis.actionsList.setAttribute('aria-label', this.options.ariaLabel);\n\t\t}\n\n\t\tthis.domNode.appendChild(this.actionsList);\n\n\t\tcontainer.appendChild(this.domNode);\n\t}\n\n\tsetAriaLabel(label: string): void {\n\t\tif (label) {\n\t\t\tthis.actionsList.setAttribute('aria-label', label);\n\t\t} else {\n\t\t\tthis.actionsList.removeAttribute('aria-label');\n\t\t}\n\t}\n\n\tprivate isTriggerKeyEvent(event: StandardKeyboardEvent): boolean {\n\t\tlet ret = false;\n\t\tif (this.options.triggerKeys) {\n\t\t\tthis.options.triggerKeys.keys.forEach(keyCode => {\n\t\t\t\tret = ret || event.equals(keyCode);\n\t\t\t});\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\tprivate updateFocusedItem(): void {\n\t\tfor (let i = 0; i < this.actionsList.children.length; i++) {\n\t\t\tconst elem = this.actionsList.children[i];\n\t\t\tif (DOM.isAncestor(document.activeElement, elem)) {\n\t\t\t\tthis.focusedItem = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tget context(): any {\n\t\treturn this._context;\n\t}\n\n\tset context(context: any) {\n\t\tthis._context = context;\n\t\tthis.items.forEach(i => i.setActionContext(context));\n\t}\n\n\tget actionRunner(): IActionRunner {\n\t\treturn this._actionRunner;\n\t}\n\n\tset actionRunner(actionRunner: IActionRunner) {\n\t\tif (actionRunner) {\n\t\t\tthis._actionRunner = actionRunner;\n\t\t\tthis.items.forEach(item => item.actionRunner = actionRunner);\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement {\n\t\treturn this.domNode;\n\t}\n\n\tpush(arg: IAction | IAction[], options: IActionOptions = {}): void {\n\t\tconst actions: IAction[] = asArray(arg);\n\n\t\tlet index = types.isNumber(options.index) ? options.index : null;\n\n\t\tactions.forEach((action: IAction) => {\n\t\t\tconst actionItemElement = document.createElement('li');\n\t\t\tactionItemElement.className = 'action-item';\n\t\t\tactionItemElement.setAttribute('role', 'presentation');\n\n\t\t\t// Prevent native context menu on actions\n\t\t\tthis._register(DOM.addDisposableListener(actionItemElement, DOM.EventType.CONTEXT_MENU, (e: DOM.EventLike) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}));\n\n\t\t\tlet item: IActionItem | undefined;\n\n\t\t\tif (this.options.actionItemProvider) {\n\t\t\t\titem = this.options.actionItemProvider(action);\n\t\t\t}\n\n\t\t\tif (!item) {\n\t\t\t\titem = new ActionItem(this.context, action, options);\n\t\t\t}\n\n\t\t\titem.actionRunner = this._actionRunner;\n\t\t\titem.setActionContext(this.context);\n\t\t\titem.render(actionItemElement);\n\n\t\t\tif (index === null || index < 0 || index >= this.actionsList.children.length) {\n\t\t\t\tthis.actionsList.appendChild(actionItemElement);\n\t\t\t\tthis.items.push(item);\n\t\t\t} else {\n\t\t\t\tthis.actionsList.insertBefore(actionItemElement, this.actionsList.children[index]);\n\t\t\t\tthis.items.splice(index, 0, item);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\n\tgetWidth(index: number): number {\n\t\tif (index >= 0 && index < this.actionsList.children.length) {\n\t\t\tconst item = this.actionsList.children.item(index);\n\t\t\tif (item) {\n\t\t\t\treturn item.clientWidth;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tgetHeight(index: number): number {\n\t\tif (index >= 0 && index < this.actionsList.children.length) {\n\t\t\tconst item = this.actionsList.children.item(index);\n\t\t\tif (item) {\n\t\t\t\treturn item.clientHeight;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tpull(index: number): void {\n\t\tif (index >= 0 && index < this.items.length) {\n\t\t\tthis.actionsList.removeChild(this.actionsList.childNodes[index]);\n\t\t\tdispose(this.items.splice(index, 1));\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tthis.items = dispose(this.items);\n\t\tDOM.clearNode(this.actionsList);\n\t}\n\n\tlength(): number {\n\t\treturn this.items.length;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.items.length === 0;\n\t}\n\n\tfocus(index?: number): void;\n\tfocus(selectFirst?: boolean): void;\n\tfocus(arg?: any): void {\n\t\tlet selectFirst: boolean = false;\n\t\tlet index: number | undefined = undefined;\n\t\tif (arg === undefined) {\n\t\t\tselectFirst = true;\n\t\t} else if (typeof arg === 'number') {\n\t\t\tindex = arg;\n\t\t} else if (typeof arg === 'boolean') {\n\t\t\tselectFirst = arg;\n\t\t}\n\n\t\tif (selectFirst && typeof this.focusedItem === 'undefined') {\n\t\t\t// Focus the first enabled item\n\t\t\tthis.focusedItem = this.items.length - 1;\n\t\t\tthis.focusNext();\n\t\t} else {\n\t\t\tif (index !== undefined) {\n\t\t\t\tthis.focusedItem = index;\n\t\t\t}\n\n\t\t\tthis.updateFocus();\n\t\t}\n\t}\n\n\tprotected focusNext(): void {\n\t\tif (typeof this.focusedItem === 'undefined') {\n\t\t\tthis.focusedItem = this.items.length - 1;\n\t\t}\n\n\t\tconst startIndex = this.focusedItem;\n\t\tlet item: IActionItem;\n\n\t\tdo {\n\t\t\tthis.focusedItem = (this.focusedItem + 1) % this.items.length;\n\t\t\titem = this.items[this.focusedItem];\n\t\t} while (this.focusedItem !== startIndex && !item.isEnabled());\n\n\t\tif (this.focusedItem === startIndex && !item.isEnabled()) {\n\t\t\tthis.focusedItem = undefined;\n\t\t}\n\n\t\tthis.updateFocus();\n\t}\n\n\tprotected focusPrevious(): void {\n\t\tif (typeof this.focusedItem === 'undefined') {\n\t\t\tthis.focusedItem = 0;\n\t\t}\n\n\t\tconst startIndex = this.focusedItem;\n\t\tlet item: IActionItem;\n\n\t\tdo {\n\t\t\tthis.focusedItem = this.focusedItem - 1;\n\n\t\t\tif (this.focusedItem < 0) {\n\t\t\t\tthis.focusedItem = this.items.length - 1;\n\t\t\t}\n\n\t\t\titem = this.items[this.focusedItem];\n\t\t} while (this.focusedItem !== startIndex && !item.isEnabled());\n\n\t\tif (this.focusedItem === startIndex && !item.isEnabled()) {\n\t\t\tthis.focusedItem = undefined;\n\t\t}\n\n\t\tthis.updateFocus(true);\n\t}\n\n\tprotected updateFocus(fromRight?: boolean): void {\n\t\tif (typeof this.focusedItem === 'undefined') {\n\t\t\tthis.actionsList.focus();\n\t\t}\n\n\t\tfor (let i = 0; i < this.items.length; i++) {\n\t\t\tconst item = this.items[i];\n\t\t\tconst actionItem = item;\n\n\t\t\tif (i === this.focusedItem) {\n\t\t\t\tif (types.isFunction(actionItem.isEnabled)) {\n\t\t\t\t\tif (actionItem.isEnabled() && types.isFunction(actionItem.focus)) {\n\t\t\t\t\t\tactionItem.focus(fromRight);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.actionsList.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (types.isFunction(actionItem.blur)) {\n\t\t\t\t\tactionItem.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate doTrigger(event: StandardKeyboardEvent): void {\n\t\tif (typeof this.focusedItem === 'undefined') {\n\t\t\treturn; //nothing to focus\n\t\t}\n\n\t\t// trigger action\n\t\tconst actionItem = this.items[this.focusedItem];\n\t\tif (actionItem instanceof BaseActionItem) {\n\t\t\tconst context = (actionItem._context === null || actionItem._context === undefined) ? event : actionItem._context;\n\t\t\tthis.run(actionItem._action, context);\n\t\t}\n\t}\n\n\tprivate cancel(): void {\n\t\tif (document.activeElement instanceof HTMLElement) {\n\t\t\t(<HTMLElement>document.activeElement).blur(); // remove focus from focused action\n\t\t}\n\n\t\tthis._onDidCancel.fire();\n\t}\n\n\trun(action: IAction, context?: any): Promise<void> {\n\t\treturn this._actionRunner.run(action, context);\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.items);\n\t\tthis.items = [];\n\n\t\tDOM.removeNode(this.getContainer());\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class SelectActionItem extends BaseActionItem {\n\tprotected selectBox: SelectBox;\n\n\tconstructor(ctx: any, action: IAction, options: ISelectOptionItem[], selected: number, contextViewProvider: IContextViewProvider, selectBoxOptions?: ISelectBoxOptions) {\n\t\tsuper(ctx, action);\n\n\t\tthis.selectBox = new SelectBox(options, selected, contextViewProvider, undefined, selectBoxOptions);\n\n\t\tthis._register(this.selectBox);\n\t\tthis.registerListeners();\n\t}\n\n\tsetOptions(options: ISelectOptionItem[], selected?: number): void {\n\t\tthis.selectBox.setOptions(options, selected);\n\t}\n\n\tselect(index: number): void {\n\t\tthis.selectBox.select(index);\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.selectBox.onDidSelect(e => {\n\t\t\tthis.actionRunner.run(this._action, this.getActionContext(e.selected, e.index));\n\t\t}));\n\t}\n\n\tprotected getActionContext(option: string, index: number) {\n\t\treturn option;\n\t}\n\n\tfocus(): void {\n\t\tif (this.selectBox) {\n\t\t\tthis.selectBox.focus();\n\t\t}\n\t}\n\n\tblur(): void {\n\t\tif (this.selectBox) {\n\t\t\tthis.selectBox.blur();\n\t\t}\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tthis.selectBox.render(container);\n\t}\n}\n"]}]}