{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/editor/contrib/parameterHints/parameterHintsWidget.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/parameterHints/parameterHintsWidget.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar dom = require(\"vs/base/browser/dom\");\nvar event_1 = require(\"vs/base/browser/event\");\nvar aria = require(\"vs/base/browser/ui/aria/aria\");\nvar scrollableElement_1 = require(\"vs/base/browser/ui/scrollbar/scrollableElement\");\nvar event_2 = require(\"vs/base/common/event\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nrequire(\"vs/css!./parameterHints\");\nvar editorBrowser_1 = require(\"vs/editor/browser/editorBrowser\");\nvar modeService_1 = require(\"vs/editor/common/services/modeService\");\nvar markdownRenderer_1 = require(\"vs/editor/contrib/markdown/markdownRenderer\");\nvar provideSignatureHelp_1 = require(\"vs/editor/contrib/parameterHints/provideSignatureHelp\");\nvar nls = require(\"vs/nls\");\nvar contextkey_1 = require(\"vs/platform/contextkey/common/contextkey\");\nvar opener_1 = require(\"vs/platform/opener/common/opener\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar parameterHintsModel_1 = require(\"vs/editor/contrib/parameterHints/parameterHintsModel\");\nvar $ = dom.$;\nvar ParameterHintsWidget = /** @class */ (function () {\n    function ParameterHintsWidget(editor, contextKeyService, openerService, modeService) {\n        var _this = this;\n        this.editor = editor;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = new markdownRenderer_1.MarkdownRenderer(editor, modeService, openerService);\n        this.model = new parameterHintsModel_1.ParameterHintsModel(editor);\n        this.keyVisible = provideSignatureHelp_1.Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = provideSignatureHelp_1.Context.MultipleSignatures.bindTo(contextKeyService);\n        this.visible = false;\n        this.disposables = [];\n        this.disposables.push(this.model.onChangedHints(function (newParameterHints) {\n            if (newParameterHints) {\n                _this.show();\n                _this.render(newParameterHints);\n            }\n            else {\n                _this.hide();\n            }\n        }));\n    }\n    ParameterHintsWidget.prototype.createParamaterHintDOMNodes = function () {\n        var _this = this;\n        this.element = $('.editor-widget.parameter-hints-widget');\n        var wrapper = dom.append(this.element, $('.wrapper'));\n        wrapper.tabIndex = -1;\n        var buttons = dom.append(wrapper, $('.buttons'));\n        var previous = dom.append(buttons, $('.button.previous'));\n        var next = dom.append(buttons, $('.button.next'));\n        var onPreviousClick = event_1.stop(event_1.domEvent(previous, 'click'));\n        onPreviousClick(this.previous, this, this.disposables);\n        var onNextClick = event_1.stop(event_1.domEvent(next, 'click'));\n        onNextClick(this.next, this, this.disposables);\n        this.overloads = dom.append(wrapper, $('.overloads'));\n        var body = $('.body');\n        this.scrollbar = new scrollableElement_1.DomScrollableElement(body, {});\n        this.disposables.push(this.scrollbar);\n        wrapper.appendChild(this.scrollbar.getDomNode());\n        this.signature = dom.append(body, $('.signature'));\n        this.docs = dom.append(body, $('.docs'));\n        this.editor.addContentWidget(this);\n        this.hide();\n        this.element.style.userSelect = 'text';\n        this.disposables.push(this.editor.onDidChangeCursorSelection(function (e) {\n            if (_this.visible) {\n                _this.editor.layoutContentWidget(_this);\n            }\n        }));\n        var updateFont = function () {\n            var fontInfo = _this.editor.getConfiguration().fontInfo;\n            _this.element.style.fontSize = fontInfo.fontSize + \"px\";\n        };\n        updateFont();\n        event_2.Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(function (e) { return e.fontInfo; })\n            .on(updateFont, null, this.disposables);\n        this.disposables.push(this.editor.onDidLayoutChange(function (e) { return _this.updateMaxHeight(); }));\n        this.updateMaxHeight();\n    };\n    ParameterHintsWidget.prototype.show = function () {\n        var _this = this;\n        if (!this.model || this.visible) {\n            return;\n        }\n        if (!this.element) {\n            this.createParamaterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(function () { return dom.addClass(_this.element, 'visible'); }, 100);\n        this.editor.layoutContentWidget(this);\n    };\n    ParameterHintsWidget.prototype.hide = function () {\n        if (!this.model || !this.visible) {\n            return;\n        }\n        if (!this.element) {\n            this.createParamaterHintDOMNodes();\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        dom.removeClass(this.element, 'visible');\n        this.editor.layoutContentWidget(this);\n    };\n    ParameterHintsWidget.prototype.getPosition = function () {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [editorBrowser_1.ContentWidgetPositionPreference.ABOVE, editorBrowser_1.ContentWidgetPositionPreference.BELOW]\n            };\n        }\n        return null;\n    };\n    ParameterHintsWidget.prototype.render = function (hints) {\n        var multiple = hints.signatures.length > 1;\n        dom.toggleClass(this.element, 'multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.signature.innerHTML = '';\n        this.docs.innerHTML = '';\n        var signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        var code = dom.append(this.signature, $('.code'));\n        var hasParameters = signature.parameters.length > 0;\n        var fontInfo = this.editor.getConfiguration().fontInfo;\n        code.style.fontSize = fontInfo.fontSize + \"px\";\n        code.style.fontFamily = fontInfo.fontFamily;\n        if (!hasParameters) {\n            var label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, hints.activeParameter);\n        }\n        lifecycle_1.dispose(this.renderDisposeables);\n        this.renderDisposeables = [];\n        var activeParameter = signature.parameters[hints.activeParameter];\n        if (activeParameter && activeParameter.documentation) {\n            var documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                var renderedContents = this.markdownRenderer.render(activeParameter.documentation);\n                dom.addClass(renderedContents.element, 'markdown-docs');\n                this.renderDisposeables.push(renderedContents);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.docs, $('p', {}, documentation));\n        }\n        dom.toggleClass(this.signature, 'has-docs', !!signature.documentation);\n        if (signature.documentation === undefined) { /** no op */ }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            var renderedContents = this.markdownRenderer.render(signature.documentation);\n            dom.addClass(renderedContents.element, 'markdown-docs');\n            this.renderDisposeables.push(renderedContents);\n            dom.append(this.docs, renderedContents.element);\n        }\n        var currentOverload = String(hints.activeSignature + 1);\n        if (hints.signatures.length < 10) {\n            currentOverload += \"/\" + hints.signatures.length;\n        }\n        this.overloads.textContent = currentOverload;\n        if (activeParameter) {\n            var labelToAnnounce = this.getParameterLabel(signature, hints.activeParameter);\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.scrollbar.scanDomNode();\n    };\n    ParameterHintsWidget.prototype.renderParameters = function (parent, signature, currentParameter) {\n        var _a = this.getParameterLabelOffsets(signature, currentParameter), start = _a[0], end = _a[1];\n        var beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        var paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        var afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    };\n    ParameterHintsWidget.prototype.getParameterLabel = function (signature, paramIdx) {\n        var param = signature.parameters[paramIdx];\n        if (typeof param.label === 'string') {\n            return param.label;\n        }\n        else {\n            return signature.label.substring(param.label[0], param.label[1]);\n        }\n    };\n    ParameterHintsWidget.prototype.getParameterLabelOffsets = function (signature, paramIdx) {\n        var param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else {\n            var idx = signature.label.lastIndexOf(param.label);\n            return idx >= 0\n                ? [idx, idx + param.label.length]\n                : [0, 0];\n        }\n    };\n    ParameterHintsWidget.prototype.next = function () {\n        if (this.model) {\n            this.editor.focus();\n            this.model.next();\n        }\n    };\n    ParameterHintsWidget.prototype.previous = function () {\n        if (this.model) {\n            this.editor.focus();\n            this.model.previous();\n        }\n    };\n    ParameterHintsWidget.prototype.cancel = function () {\n        if (this.model) {\n            this.model.cancel();\n        }\n    };\n    ParameterHintsWidget.prototype.getDomNode = function () {\n        return this.element;\n    };\n    ParameterHintsWidget.prototype.getId = function () {\n        return ParameterHintsWidget.ID;\n    };\n    ParameterHintsWidget.prototype.trigger = function (context) {\n        if (this.model) {\n            this.model.trigger(context, 0);\n        }\n    };\n    ParameterHintsWidget.prototype.updateMaxHeight = function () {\n        var height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        this.element.style.maxHeight = height + \"px\";\n    };\n    ParameterHintsWidget.prototype.dispose = function () {\n        this.disposables = lifecycle_1.dispose(this.disposables);\n        this.renderDisposeables = lifecycle_1.dispose(this.renderDisposeables);\n        if (this.model) {\n            this.model.dispose();\n            this.model = null;\n        }\n    };\n    ParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\n    ParameterHintsWidget = tslib_1.__decorate([\n        tslib_1.__param(1, contextkey_1.IContextKeyService),\n        tslib_1.__param(2, opener_1.IOpenerService),\n        tslib_1.__param(3, modeService_1.IModeService)\n    ], ParameterHintsWidget);\n    return ParameterHintsWidget;\n}());\nexports.ParameterHintsWidget = ParameterHintsWidget;\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    var border = theme.getColor(colorRegistry_1.editorHoverBorder);\n    if (border) {\n        var borderWidth = theme.type === themeService_1.HIGH_CONTRAST ? 2 : 1;\n        collector.addRule(\".monaco-editor .parameter-hints-widget { border: \" + borderWidth + \"px solid \" + border + \"; }\");\n        collector.addRule(\".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid \" + border.transparent(0.5) + \"; }\");\n        collector.addRule(\".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid \" + border.transparent(0.5) + \"; }\");\n    }\n    var background = theme.getColor(colorRegistry_1.editorHoverBackground);\n    if (background) {\n        collector.addRule(\".monaco-editor .parameter-hints-widget { background-color: \" + background + \"; }\");\n    }\n    var link = theme.getColor(colorRegistry_1.textLinkForeground);\n    if (link) {\n        collector.addRule(\".monaco-editor .parameter-hints-widget a { color: \" + link + \"; }\");\n    }\n    var codeBackground = theme.getColor(colorRegistry_1.textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(\".monaco-editor .parameter-hints-widget code { background-color: \" + codeBackground + \"; }\");\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/parameterHints/parameterHintsWidget.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/editor/contrib/parameterHints/parameterHintsWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { domEvent, stop } from 'vs/base/browser/event';\nimport * as aria from 'vs/base/browser/ui/aria/aria';\nimport { DomScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { Event } from 'vs/base/common/event';\nimport { dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport 'vs/css!./parameterHints';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from 'vs/editor/browser/editorBrowser';\nimport { IConfigurationChangedEvent } from 'vs/editor/common/config/editorOptions';\nimport * as modes from 'vs/editor/common/modes';\nimport { IModeService } from 'vs/editor/common/services/modeService';\nimport { MarkdownRenderer } from 'vs/editor/contrib/markdown/markdownRenderer';\nimport { Context } from 'vs/editor/contrib/parameterHints/provideSignatureHelp';\nimport * as nls from 'vs/nls';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { editorHoverBackground, editorHoverBorder, textCodeBlockBackground, textLinkForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { HIGH_CONTRAST, registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { ParameterHintsModel, TriggerContext } from 'vs/editor/contrib/parameterHints/parameterHintsModel';\n\nconst $ = dom.$;\n\nexport class ParameterHintsWidget implements IContentWidget, IDisposable {\n\n\tprivate static readonly ID = 'editor.widget.parameterHintsWidget';\n\n\tprivate readonly markdownRenderer: MarkdownRenderer;\n\tprivate renderDisposeables: IDisposable[];\n\tprivate model: ParameterHintsModel | null;\n\tprivate readonly keyVisible: IContextKey<boolean>;\n\tprivate readonly keyMultipleSignatures: IContextKey<boolean>;\n\tprivate element: HTMLElement;\n\tprivate signature: HTMLElement;\n\tprivate docs: HTMLElement;\n\tprivate overloads: HTMLElement;\n\tprivate visible: boolean;\n\tprivate announcedLabel: string | null;\n\tprivate scrollbar: DomScrollableElement;\n\tprivate disposables: IDisposable[];\n\n\t// Editor.IContentWidget.allowEditorOverflow\n\tallowEditorOverflow = true;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IModeService modeService: IModeService,\n\t) {\n\t\tthis.markdownRenderer = new MarkdownRenderer(editor, modeService, openerService);\n\t\tthis.model = new ParameterHintsModel(editor);\n\t\tthis.keyVisible = Context.Visible.bindTo(contextKeyService);\n\t\tthis.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n\t\tthis.visible = false;\n\t\tthis.disposables = [];\n\n\t\tthis.disposables.push(this.model.onChangedHints(newParameterHints => {\n\t\t\tif (newParameterHints) {\n\t\t\t\tthis.show();\n\t\t\t\tthis.render(newParameterHints);\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate createParamaterHintDOMNodes() {\n\t\tthis.element = $('.editor-widget.parameter-hints-widget');\n\t\tconst wrapper = dom.append(this.element, $('.wrapper'));\n\t\twrapper.tabIndex = -1;\n\n\t\tconst buttons = dom.append(wrapper, $('.buttons'));\n\t\tconst previous = dom.append(buttons, $('.button.previous'));\n\t\tconst next = dom.append(buttons, $('.button.next'));\n\n\t\tconst onPreviousClick = stop(domEvent(previous, 'click'));\n\t\tonPreviousClick(this.previous, this, this.disposables);\n\n\t\tconst onNextClick = stop(domEvent(next, 'click'));\n\t\tonNextClick(this.next, this, this.disposables);\n\n\t\tthis.overloads = dom.append(wrapper, $('.overloads'));\n\n\t\tconst body = $('.body');\n\t\tthis.scrollbar = new DomScrollableElement(body, {});\n\t\tthis.disposables.push(this.scrollbar);\n\t\twrapper.appendChild(this.scrollbar.getDomNode());\n\n\t\tthis.signature = dom.append(body, $('.signature'));\n\n\t\tthis.docs = dom.append(body, $('.docs'));\n\n\t\tthis.editor.addContentWidget(this);\n\t\tthis.hide();\n\n\t\tthis.element.style.userSelect = 'text';\n\t\tthis.disposables.push(this.editor.onDidChangeCursorSelection(e => {\n\t\t\tif (this.visible) {\n\t\t\t\tthis.editor.layoutContentWidget(this);\n\t\t\t}\n\t\t}));\n\n\t\tconst updateFont = () => {\n\t\t\tconst fontInfo = this.editor.getConfiguration().fontInfo;\n\t\t\tthis.element.style.fontSize = `${fontInfo.fontSize}px`;\n\t\t};\n\n\t\tupdateFont();\n\n\t\tEvent.chain<IConfigurationChangedEvent>(this.editor.onDidChangeConfiguration.bind(this.editor))\n\t\t\t.filter(e => e.fontInfo)\n\t\t\t.on(updateFont, null, this.disposables);\n\n\t\tthis.disposables.push(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n\t\tthis.updateMaxHeight();\n\t}\n\n\tprivate show(): void {\n\t\tif (!this.model || this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.element) {\n\t\t\tthis.createParamaterHintDOMNodes();\n\t\t}\n\n\t\tthis.keyVisible.set(true);\n\t\tthis.visible = true;\n\t\tsetTimeout(() => dom.addClass(this.element, 'visible'), 100);\n\t\tthis.editor.layoutContentWidget(this);\n\t}\n\n\tprivate hide(): void {\n\t\tif (!this.model || !this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.element) {\n\t\t\tthis.createParamaterHintDOMNodes();\n\t\t}\n\n\t\tthis.keyVisible.reset();\n\t\tthis.visible = false;\n\t\tthis.announcedLabel = null;\n\t\tdom.removeClass(this.element, 'visible');\n\t\tthis.editor.layoutContentWidget(this);\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\tif (this.visible) {\n\t\t\treturn {\n\t\t\t\tposition: this.editor.getPosition(),\n\t\t\t\tpreference: [ContentWidgetPositionPreference.ABOVE, ContentWidgetPositionPreference.BELOW]\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate render(hints: modes.SignatureHelp): void {\n\t\tconst multiple = hints.signatures.length > 1;\n\t\tdom.toggleClass(this.element, 'multiple', multiple);\n\t\tthis.keyMultipleSignatures.set(multiple);\n\n\t\tthis.signature.innerHTML = '';\n\t\tthis.docs.innerHTML = '';\n\n\t\tconst signature = hints.signatures[hints.activeSignature];\n\n\t\tif (!signature) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst code = dom.append(this.signature, $('.code'));\n\t\tconst hasParameters = signature.parameters.length > 0;\n\n\t\tconst fontInfo = this.editor.getConfiguration().fontInfo;\n\t\tcode.style.fontSize = `${fontInfo.fontSize}px`;\n\t\tcode.style.fontFamily = fontInfo.fontFamily;\n\n\t\tif (!hasParameters) {\n\t\t\tconst label = dom.append(code, $('span'));\n\t\t\tlabel.textContent = signature.label;\n\n\t\t} else {\n\t\t\tthis.renderParameters(code, signature, hints.activeParameter);\n\t\t}\n\n\t\tdispose(this.renderDisposeables);\n\t\tthis.renderDisposeables = [];\n\n\t\tconst activeParameter = signature.parameters[hints.activeParameter];\n\n\t\tif (activeParameter && activeParameter.documentation) {\n\t\t\tconst documentation = $('span.documentation');\n\t\t\tif (typeof activeParameter.documentation === 'string') {\n\t\t\t\tdocumentation.textContent = activeParameter.documentation;\n\t\t\t} else {\n\t\t\t\tconst renderedContents = this.markdownRenderer.render(activeParameter.documentation);\n\t\t\t\tdom.addClass(renderedContents.element, 'markdown-docs');\n\t\t\t\tthis.renderDisposeables.push(renderedContents);\n\t\t\t\tdocumentation.appendChild(renderedContents.element);\n\t\t\t}\n\t\t\tdom.append(this.docs, $('p', {}, documentation));\n\t\t}\n\n\t\tdom.toggleClass(this.signature, 'has-docs', !!signature.documentation);\n\n\t\tif (signature.documentation === undefined) { /** no op */ }\n\t\telse if (typeof signature.documentation === 'string') {\n\t\t\tdom.append(this.docs, $('p', {}, signature.documentation));\n\t\t} else {\n\t\t\tconst renderedContents = this.markdownRenderer.render(signature.documentation);\n\t\t\tdom.addClass(renderedContents.element, 'markdown-docs');\n\t\t\tthis.renderDisposeables.push(renderedContents);\n\t\t\tdom.append(this.docs, renderedContents.element);\n\t\t}\n\n\t\tlet currentOverload = String(hints.activeSignature + 1);\n\n\t\tif (hints.signatures.length < 10) {\n\t\t\tcurrentOverload += `/${hints.signatures.length}`;\n\t\t}\n\n\t\tthis.overloads.textContent = currentOverload;\n\n\t\tif (activeParameter) {\n\t\t\tconst labelToAnnounce = this.getParameterLabel(signature, hints.activeParameter);\n\t\t\t// Select method gets called on every user type while parameter hints are visible.\n\t\t\t// We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n\n\t\t\tif (this.announcedLabel !== labelToAnnounce) {\n\t\t\t\taria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n\t\t\t\tthis.announcedLabel = labelToAnnounce;\n\t\t\t}\n\t\t}\n\n\t\tthis.editor.layoutContentWidget(this);\n\t\tthis.scrollbar.scanDomNode();\n\t}\n\n\tprivate renderParameters(parent: HTMLElement, signature: modes.SignatureInformation, currentParameter: number): void {\n\n\t\tconst [start, end] = this.getParameterLabelOffsets(signature, currentParameter);\n\n\t\tconst beforeSpan = document.createElement('span');\n\t\tbeforeSpan.textContent = signature.label.substring(0, start);\n\n\t\tconst paramSpan = document.createElement('span');\n\t\tparamSpan.textContent = signature.label.substring(start, end);\n\t\tparamSpan.className = 'parameter active';\n\n\t\tconst afterSpan = document.createElement('span');\n\t\tafterSpan.textContent = signature.label.substring(end);\n\n\t\tdom.append(parent, beforeSpan, paramSpan, afterSpan);\n\t}\n\n\tprivate getParameterLabel(signature: modes.SignatureInformation, paramIdx: number): string {\n\t\tconst param = signature.parameters[paramIdx];\n\t\tif (typeof param.label === 'string') {\n\t\t\treturn param.label;\n\t\t} else {\n\t\t\treturn signature.label.substring(param.label[0], param.label[1]);\n\t\t}\n\t}\n\n\tprivate getParameterLabelOffsets(signature: modes.SignatureInformation, paramIdx: number): [number, number] {\n\t\tconst param = signature.parameters[paramIdx];\n\t\tif (!param) {\n\t\t\treturn [0, 0];\n\t\t} else if (Array.isArray(param.label)) {\n\t\t\treturn param.label;\n\t\t} else {\n\t\t\tconst idx = signature.label.lastIndexOf(param.label);\n\t\t\treturn idx >= 0\n\t\t\t\t? [idx, idx + param.label.length]\n\t\t\t\t: [0, 0];\n\t\t}\n\t}\n\n\tnext(): void {\n\t\tif (this.model) {\n\t\t\tthis.editor.focus();\n\t\t\tthis.model.next();\n\t\t}\n\t}\n\n\tprevious(): void {\n\t\tif (this.model) {\n\t\t\tthis.editor.focus();\n\t\t\tthis.model.previous();\n\t\t}\n\t}\n\n\tcancel(): void {\n\t\tif (this.model) {\n\t\t\tthis.model.cancel();\n\t\t}\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this.element;\n\t}\n\n\tgetId(): string {\n\t\treturn ParameterHintsWidget.ID;\n\t}\n\n\ttrigger(context: TriggerContext): void {\n\t\tif (this.model) {\n\t\t\tthis.model.trigger(context, 0);\n\t\t}\n\t}\n\n\tprivate updateMaxHeight(): void {\n\t\tconst height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n\t\tthis.element.style.maxHeight = `${height}px`;\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables = dispose(this.disposables);\n\t\tthis.renderDisposeables = dispose(this.renderDisposeables);\n\n\t\tif (this.model) {\n\t\t\tthis.model.dispose();\n\t\t\tthis.model = null;\n\t\t}\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\tconst border = theme.getColor(editorHoverBorder);\n\tif (border) {\n\t\tconst borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\n\t\tcollector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\n\t\tcollector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\n\t\tcollector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\n\t}\n\tconst background = theme.getColor(editorHoverBackground);\n\tif (background) {\n\t\tcollector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\n\t}\n\n\tconst link = theme.getColor(textLinkForeground);\n\tif (link) {\n\t\tcollector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\n\t}\n\n\tconst codeBackground = theme.getColor(textCodeBlockBackground);\n\tif (codeBackground) {\n\t\tcollector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\n\t}\n});\n"]}]}