{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/breadcrumbsControl.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/breadcrumbsControl.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar dom = require(\"vs/base/browser/dom\");\nvar mouseEvent_1 = require(\"vs/base/browser/mouseEvent\");\nvar breadcrumbsWidget_1 = require(\"vs/base/browser/ui/breadcrumbs/breadcrumbsWidget\");\nvar iconLabel_1 = require(\"vs/base/browser/ui/iconLabel/iconLabel\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar async_1 = require(\"vs/base/common/async\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar network_1 = require(\"vs/base/common/network\");\nvar resources_1 = require(\"vs/base/common/resources\");\nvar uri_1 = require(\"vs/base/common/uri\");\nrequire(\"vs/css!./media/breadcrumbscontrol\");\nvar editorBrowser_1 = require(\"vs/editor/browser/editorBrowser\");\nvar range_1 = require(\"vs/editor/common/core/range\");\nvar editorCommon_1 = require(\"vs/editor/common/editorCommon\");\nvar modes_1 = require(\"vs/editor/common/modes\");\nvar outlineModel_1 = require(\"vs/editor/contrib/documentSymbols/outlineModel\");\nvar nls_1 = require(\"vs/nls\");\nvar actions_1 = require(\"vs/platform/actions/common/actions\");\nvar commands_1 = require(\"vs/platform/commands/common/commands\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar contextkey_1 = require(\"vs/platform/contextkey/common/contextkey\");\nvar contextView_1 = require(\"vs/platform/contextview/browser/contextView\");\nvar files_1 = require(\"vs/platform/files/common/files\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar keybindingsRegistry_1 = require(\"vs/platform/keybinding/common/keybindingsRegistry\");\nvar listService_1 = require(\"vs/platform/list/browser/listService\");\nvar quickOpen_1 = require(\"vs/platform/quickOpen/common/quickOpen\");\nvar styler_1 = require(\"vs/platform/theme/common/styler\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar labels_1 = require(\"vs/workbench/browser/labels\");\nvar breadcrumbs_1 = require(\"vs/workbench/browser/parts/editor/breadcrumbs\");\nvar breadcrumbsModel_1 = require(\"vs/workbench/browser/parts/editor/breadcrumbsModel\");\nvar breadcrumbsPicker_1 = require(\"vs/workbench/browser/parts/editor/breadcrumbsPicker\");\nvar editor_1 = require(\"vs/workbench/common/editor\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar editorGroupsService_1 = require(\"vs/workbench/services/editor/common/editorGroupsService\");\nvar telemetry_1 = require(\"vs/platform/telemetry/common/telemetry\");\nvar codeEditorService_1 = require(\"vs/editor/browser/services/codeEditorService\");\nvar browser_1 = require(\"vs/base/browser/browser\");\nvar types_1 = require(\"vs/base/common/types\");\nvar Item = /** @class */ (function (_super) {\n    tslib_1.__extends(Item, _super);\n    function Item(element, options, _instantiationService) {\n        var _this = _super.call(this) || this;\n        _this.element = element;\n        _this.options = options;\n        _this._instantiationService = _instantiationService;\n        _this._disposables = [];\n        return _this;\n    }\n    Item.prototype.dispose = function () {\n        lifecycle_1.dispose(this._disposables);\n    };\n    Item.prototype.equals = function (other) {\n        if (!(other instanceof Item)) {\n            return false;\n        }\n        if (this.element instanceof breadcrumbsModel_1.FileElement && other.element instanceof breadcrumbsModel_1.FileElement) {\n            return resources_1.isEqual(this.element.uri, other.element.uri);\n        }\n        if (this.element instanceof outlineModel_1.TreeElement && other.element instanceof outlineModel_1.TreeElement) {\n            return this.element.id === other.element.id;\n        }\n        return false;\n    };\n    Item.prototype.render = function (container) {\n        if (this.element instanceof breadcrumbsModel_1.FileElement) {\n            // file/folder\n            var label = this._instantiationService.createInstance(labels_1.ResourceLabel, container, {});\n            label.element.setFile(this.element.uri, {\n                hidePath: true,\n                hideIcon: this.element.kind === files_1.FileKind.FOLDER || !this.options.showFileIcons,\n                fileKind: this.element.kind,\n                fileDecorations: { colors: this.options.showDecorationColors, badges: false },\n            });\n            dom.addClass(container, files_1.FileKind[this.element.kind].toLowerCase());\n            this._disposables.push(label);\n        }\n        else if (this.element instanceof outlineModel_1.OutlineModel) {\n            // has outline element but not in one\n            var label = document.createElement('div');\n            label.innerHTML = '&hellip;';\n            label.className = 'hint-more';\n            container.appendChild(label);\n        }\n        else if (this.element instanceof outlineModel_1.OutlineGroup) {\n            // provider\n            var label = new iconLabel_1.IconLabel(container);\n            label.setLabel(this.element.provider.displayName);\n            this._disposables.push(label);\n        }\n        else if (this.element instanceof outlineModel_1.OutlineElement) {\n            // symbol\n            if (this.options.showSymbolIcons) {\n                var icon = document.createElement('div');\n                icon.className = modes_1.symbolKindToCssClass(this.element.symbol.kind);\n                container.appendChild(icon);\n                dom.addClass(container, 'shows-symbol-icon');\n            }\n            var label = new iconLabel_1.IconLabel(container);\n            var title = this.element.symbol.name.replace(/\\r|\\n|\\r\\n/g, '\\u23CE');\n            label.setLabel(title);\n            this._disposables.push(label);\n        }\n    };\n    Item = tslib_1.__decorate([\n        tslib_1.__param(2, instantiation_1.IInstantiationService)\n    ], Item);\n    return Item;\n}(breadcrumbsWidget_1.BreadcrumbsItem));\nvar BreadcrumbsControl = /** @class */ (function () {\n    function BreadcrumbsControl(container, _options, _editorGroup, _contextKeyService, _contextViewService, _editorService, _codeEditorService, _workspaceService, _instantiationService, _themeService, _quickOpenService, _configurationService, _fileService, _telemetryService, breadcrumbsService) {\n        this._options = _options;\n        this._editorGroup = _editorGroup;\n        this._contextKeyService = _contextKeyService;\n        this._contextViewService = _contextViewService;\n        this._editorService = _editorService;\n        this._codeEditorService = _codeEditorService;\n        this._workspaceService = _workspaceService;\n        this._instantiationService = _instantiationService;\n        this._themeService = _themeService;\n        this._quickOpenService = _quickOpenService;\n        this._configurationService = _configurationService;\n        this._fileService = _fileService;\n        this._telemetryService = _telemetryService;\n        this._disposables = new Array();\n        this._breadcrumbsDisposables = new Array();\n        this._breadcrumbsPickerShowing = false;\n        this.domNode = document.createElement('div');\n        dom.addClass(this.domNode, 'breadcrumbs-control');\n        dom.append(container, this.domNode);\n        this._widget = new breadcrumbsWidget_1.BreadcrumbsWidget(this.domNode);\n        this._widget.onDidSelectItem(this._onSelectEvent, this, this._disposables);\n        this._widget.onDidFocusItem(this._onFocusEvent, this, this._disposables);\n        this._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive, this, this._disposables);\n        this._disposables.push(styler_1.attachBreadcrumbsStyler(this._widget, this._themeService, { breadcrumbsBackground: _options.breadcrumbsBackground }));\n        this._ckBreadcrumbsPossible = BreadcrumbsControl.CK_BreadcrumbsPossible.bindTo(this._contextKeyService);\n        this._ckBreadcrumbsVisible = BreadcrumbsControl.CK_BreadcrumbsVisible.bindTo(this._contextKeyService);\n        this._ckBreadcrumbsActive = BreadcrumbsControl.CK_BreadcrumbsActive.bindTo(this._contextKeyService);\n        this._cfUseQuickPick = breadcrumbs_1.BreadcrumbsConfig.UseQuickPick.bindTo(_configurationService);\n        this._disposables.push(breadcrumbsService.register(this._editorGroup.id, this._widget));\n    }\n    BreadcrumbsControl.prototype.dispose = function () {\n        this._disposables = lifecycle_1.dispose(this._disposables);\n        this._breadcrumbsDisposables = lifecycle_1.dispose(this._breadcrumbsDisposables);\n        this._ckBreadcrumbsPossible.reset();\n        this._ckBreadcrumbsVisible.reset();\n        this._ckBreadcrumbsActive.reset();\n        this._cfUseQuickPick.dispose();\n        this._widget.dispose();\n        this.domNode.remove();\n    };\n    BreadcrumbsControl.prototype.layout = function (dim) {\n        this._widget.layout(dim);\n    };\n    BreadcrumbsControl.prototype.isHidden = function () {\n        return dom.hasClass(this.domNode, 'hidden');\n    };\n    BreadcrumbsControl.prototype.hide = function () {\n        this._breadcrumbsDisposables = lifecycle_1.dispose(this._breadcrumbsDisposables);\n        this._ckBreadcrumbsVisible.set(false);\n        dom.toggleClass(this.domNode, 'hidden', true);\n    };\n    BreadcrumbsControl.prototype.update = function () {\n        var _this = this;\n        this._breadcrumbsDisposables = lifecycle_1.dispose(this._breadcrumbsDisposables);\n        // honor diff editors and such\n        var input = this._editorGroup.activeEditor;\n        if (input instanceof editor_1.SideBySideEditorInput) {\n            input = input.master;\n        }\n        if (!input || !input.getResource() || (input.getResource().scheme !== network_1.Schemas.untitled && !this._fileService.canHandleResource(input.getResource()))) {\n            // cleanup and return when there is no input or when\n            // we cannot handle this input\n            this._ckBreadcrumbsPossible.set(false);\n            if (!this.isHidden()) {\n                this.hide();\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        dom.toggleClass(this.domNode, 'hidden', false);\n        this._ckBreadcrumbsVisible.set(true);\n        this._ckBreadcrumbsPossible.set(true);\n        var editor = this._getActiveCodeEditor();\n        var model = new breadcrumbsModel_1.EditorBreadcrumbsModel(input.getResource(), editor, this._workspaceService, this._configurationService);\n        dom.toggleClass(this.domNode, 'relative-path', model.isRelative());\n        var updateBreadcrumbs = function () {\n            var items = model.getElements().map(function (element) { return new Item(element, _this._options, _this._instantiationService); });\n            _this._widget.setItems(items);\n            _this._widget.reveal(items[items.length - 1]);\n        };\n        var listener = model.onDidUpdate(updateBreadcrumbs);\n        updateBreadcrumbs();\n        this._breadcrumbsDisposables = [model, listener];\n        // close picker on hide/update\n        this._breadcrumbsDisposables.push({\n            dispose: function () {\n                if (_this._breadcrumbsPickerShowing) {\n                    _this._contextViewService.hideContextView(_this);\n                }\n            }\n        });\n        return true;\n    };\n    BreadcrumbsControl.prototype._getActiveCodeEditor = function () {\n        if (!this._editorGroup.activeControl) {\n            return undefined;\n        }\n        var control = this._editorGroup.activeControl.getControl();\n        var editor;\n        if (editorBrowser_1.isCodeEditor(control)) {\n            editor = control;\n        }\n        else if (editorBrowser_1.isDiffEditor(control)) {\n            editor = control.getModifiedEditor();\n        }\n        return editor;\n    };\n    BreadcrumbsControl.prototype._onFocusEvent = function (event) {\n        if (event.item && this._breadcrumbsPickerShowing) {\n            return this._widget.setSelection(event.item);\n        }\n    };\n    BreadcrumbsControl.prototype._onSelectEvent = function (event) {\n        var _this = this;\n        if (!event.item) {\n            return;\n        }\n        if (event.item === this._breadcrumbsPickerIgnoreOnceItem) {\n            this._breadcrumbsPickerIgnoreOnceItem = undefined;\n            this._widget.setFocused(undefined);\n            this._widget.setSelection(undefined);\n            return;\n        }\n        var element = event.item.element;\n        this._editorGroup.focus();\n        /* __GDPR__\n            \"breadcrumbs/select\" : {\n                \"type\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n            }\n        */\n        this._telemetryService.publicLog('breadcrumbs/select', { type: element instanceof outlineModel_1.TreeElement ? 'symbol' : 'file' });\n        var group = this._getEditorGroup(event.payload);\n        if (group !== undefined) {\n            // reveal the item\n            this._widget.setFocused(undefined);\n            this._widget.setSelection(undefined);\n            this._revealInEditor(event, element, group);\n            return;\n        }\n        if (this._cfUseQuickPick.getValue()) {\n            // using quick pick\n            this._widget.setFocused(undefined);\n            this._widget.setSelection(undefined);\n            this._quickOpenService.show(element instanceof outlineModel_1.TreeElement ? '@' : '');\n            return;\n        }\n        // show picker\n        var picker;\n        var editor = this._getActiveCodeEditor();\n        var editorDecorations = [];\n        var editorViewState;\n        this._contextViewService.showContextView({\n            render: function (parent) {\n                picker = breadcrumbsPicker_1.createBreadcrumbsPicker(_this._instantiationService, parent, element);\n                var selectListener = picker.onDidPickElement(function (data) {\n                    if (data.target) {\n                        editorViewState = undefined;\n                    }\n                    _this._contextViewService.hideContextView(_this);\n                    var group = (picker.useAltAsMultipleSelectionModifier && data.browserEvent.metaKey) || (!picker.useAltAsMultipleSelectionModifier && data.browserEvent.altKey)\n                        ? editorService_1.SIDE_GROUP\n                        : editorService_1.ACTIVE_GROUP;\n                    _this._revealInEditor(event, data.target, group, data.browserEvent.button === 1);\n                    /* __GDPR__\n                        \"breadcrumbs/open\" : {\n                            \"type\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                        }\n                    */\n                    _this._telemetryService.publicLog('breadcrumbs/open', { type: !data ? 'nothing' : data.target instanceof outlineModel_1.TreeElement ? 'symbol' : 'file' });\n                });\n                var focusListener = picker.onDidFocusElement(function (data) {\n                    if (!editor || !(data.target instanceof outlineModel_1.OutlineElement)) {\n                        return;\n                    }\n                    if (!editorViewState) {\n                        editorViewState = types_1.withNullAsUndefined(editor.saveViewState());\n                    }\n                    var symbol = data.target.symbol;\n                    editor.revealRangeInCenter(symbol.range, editorCommon_1.ScrollType.Smooth);\n                    editorDecorations = editor.deltaDecorations(editorDecorations, [{\n                            range: symbol.range,\n                            options: {\n                                className: 'rangeHighlight',\n                                isWholeLine: true\n                            }\n                        }]);\n                });\n                var zoomListener = browser_1.onDidChangeZoomLevel(function () {\n                    _this._contextViewService.hideContextView(_this);\n                });\n                var focusTracker = dom.trackFocus(parent);\n                var blurListener = focusTracker.onDidBlur(function () {\n                    _this._breadcrumbsPickerIgnoreOnceItem = _this._widget.isDOMFocused() ? event.item : undefined;\n                    _this._contextViewService.hideContextView(_this);\n                });\n                _this._breadcrumbsPickerShowing = true;\n                _this._updateCkBreadcrumbsActive();\n                return lifecycle_1.combinedDisposable([\n                    picker,\n                    selectListener,\n                    focusListener,\n                    zoomListener,\n                    focusTracker,\n                    blurListener\n                ]);\n            },\n            getAnchor: function () {\n                var maxInnerWidth = window.innerWidth - 8 /*a little less the full widget*/;\n                var maxHeight = Math.min(window.innerHeight * 0.7, 300);\n                var pickerWidth = Math.min(maxInnerWidth, Math.max(240, maxInnerWidth / 4.17));\n                var pickerArrowSize = 8;\n                var pickerArrowOffset;\n                var data = dom.getDomNodePagePosition(event.node.firstChild);\n                var y = data.top + data.height + pickerArrowSize;\n                if (y + maxHeight >= window.innerHeight) {\n                    maxHeight = window.innerHeight - y - 30 /* room for shadow and status bar*/;\n                }\n                var x = data.left;\n                if (x + pickerWidth >= maxInnerWidth) {\n                    x = maxInnerWidth - pickerWidth;\n                }\n                if (event.payload instanceof mouseEvent_1.StandardMouseEvent) {\n                    var maxPickerArrowOffset = pickerWidth - 2 * pickerArrowSize;\n                    pickerArrowOffset = event.payload.posx - x;\n                    if (pickerArrowOffset > maxPickerArrowOffset) {\n                        x = Math.min(maxInnerWidth - pickerWidth, x + pickerArrowOffset - maxPickerArrowOffset);\n                        pickerArrowOffset = maxPickerArrowOffset;\n                    }\n                }\n                else {\n                    pickerArrowOffset = (data.left + (data.width * 0.3)) - x;\n                }\n                picker.show(element, maxHeight, pickerWidth, pickerArrowSize, Math.max(0, pickerArrowOffset));\n                return { x: x, y: y };\n            },\n            onHide: function (data) {\n                if (editor) {\n                    editor.deltaDecorations(editorDecorations, []);\n                    if (editorViewState) {\n                        editor.restoreViewState(editorViewState);\n                    }\n                }\n                _this._breadcrumbsPickerShowing = false;\n                _this._updateCkBreadcrumbsActive();\n                if (data === _this) {\n                    _this._widget.setFocused(undefined);\n                    _this._widget.setSelection(undefined);\n                }\n            }\n        });\n    };\n    BreadcrumbsControl.prototype._updateCkBreadcrumbsActive = function () {\n        var value = this._widget.isDOMFocused() || this._breadcrumbsPickerShowing;\n        this._ckBreadcrumbsActive.set(value);\n    };\n    BreadcrumbsControl.prototype._revealInEditor = function (event, element, group, pinned) {\n        if (pinned === void 0) { pinned = false; }\n        if (element instanceof breadcrumbsModel_1.FileElement) {\n            if (element.kind === files_1.FileKind.FILE) {\n                // open file in any editor\n                this._editorService.openEditor({ resource: element.uri, options: { pinned: pinned } }, group);\n            }\n            else {\n                // show next picker\n                var items = this._widget.getItems();\n                var idx = items.indexOf(event.item);\n                this._widget.setFocused(items[idx + 1]);\n                this._widget.setSelection(items[idx + 1], BreadcrumbsControl.Payload_Pick);\n            }\n        }\n        else if (element instanceof outlineModel_1.OutlineElement) {\n            // open symbol in code editor\n            var model = outlineModel_1.OutlineModel.get(element);\n            if (model) {\n                this._codeEditorService.openCodeEditor({\n                    resource: model.textModel.uri,\n                    options: {\n                        selection: range_1.Range.collapseToStart(element.symbol.selectionRange),\n                        revealInCenterIfOutsideViewport: true\n                    }\n                }, types_1.withUndefinedAsNull(this._getActiveCodeEditor()), group === editorService_1.SIDE_GROUP);\n            }\n        }\n    };\n    BreadcrumbsControl.prototype._getEditorGroup = function (data) {\n        if (data === BreadcrumbsControl.Payload_RevealAside) {\n            return editorService_1.SIDE_GROUP;\n        }\n        else if (data === BreadcrumbsControl.Payload_Reveal) {\n            return editorService_1.ACTIVE_GROUP;\n        }\n        else {\n            return undefined;\n        }\n    };\n    BreadcrumbsControl.HEIGHT = 22;\n    BreadcrumbsControl.Payload_Reveal = {};\n    BreadcrumbsControl.Payload_RevealAside = {};\n    BreadcrumbsControl.Payload_Pick = {};\n    BreadcrumbsControl.CK_BreadcrumbsPossible = new contextkey_1.RawContextKey('breadcrumbsPossible', false);\n    BreadcrumbsControl.CK_BreadcrumbsVisible = new contextkey_1.RawContextKey('breadcrumbsVisible', false);\n    BreadcrumbsControl.CK_BreadcrumbsActive = new contextkey_1.RawContextKey('breadcrumbsActive', false);\n    BreadcrumbsControl = tslib_1.__decorate([\n        tslib_1.__param(3, contextkey_1.IContextKeyService),\n        tslib_1.__param(4, contextView_1.IContextViewService),\n        tslib_1.__param(5, editorService_1.IEditorService),\n        tslib_1.__param(6, codeEditorService_1.ICodeEditorService),\n        tslib_1.__param(7, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(8, instantiation_1.IInstantiationService),\n        tslib_1.__param(9, themeService_1.IThemeService),\n        tslib_1.__param(10, quickOpen_1.IQuickOpenService),\n        tslib_1.__param(11, configuration_1.IConfigurationService),\n        tslib_1.__param(12, files_1.IFileService),\n        tslib_1.__param(13, telemetry_1.ITelemetryService),\n        tslib_1.__param(14, breadcrumbs_1.IBreadcrumbsService)\n    ], BreadcrumbsControl);\n    return BreadcrumbsControl;\n}());\nexports.BreadcrumbsControl = BreadcrumbsControl;\n//#region commands\n// toggle command\nactions_1.MenuRegistry.appendMenuItem(actions_1.MenuId.CommandPalette, {\n    command: {\n        id: 'breadcrumbs.toggle',\n        title: { value: nls_1.localize('cmd.toggle', \"Toggle Breadcrumbs\"), original: 'View: Toggle Breadcrumbs' },\n        category: nls_1.localize('cmd.category', \"View\")\n    }\n});\nactions_1.MenuRegistry.appendMenuItem(actions_1.MenuId.MenubarViewMenu, {\n    group: '5_editor',\n    order: 99,\n    command: {\n        id: 'breadcrumbs.toggle',\n        title: nls_1.localize('miToggleBreadcrumbs', \"Toggle &&Breadcrumbs\"),\n        toggled: contextkey_1.ContextKeyExpr.equals('config.breadcrumbs.enabled', true)\n    }\n});\ncommands_1.CommandsRegistry.registerCommand('breadcrumbs.toggle', function (accessor) {\n    var config = accessor.get(configuration_1.IConfigurationService);\n    var value = breadcrumbs_1.BreadcrumbsConfig.IsEnabled.bindTo(config).getValue();\n    breadcrumbs_1.BreadcrumbsConfig.IsEnabled.bindTo(config).updateValue(!value);\n});\n// focus/focus-and-select\nfunction focusAndSelectHandler(accessor, select) {\n    // find widget and focus/select\n    var groups = accessor.get(editorGroupsService_1.IEditorGroupsService);\n    var breadcrumbs = accessor.get(breadcrumbs_1.IBreadcrumbsService);\n    var widget = breadcrumbs.getWidget(groups.activeGroup.id);\n    if (widget) {\n        var item = arrays_1.tail(widget.getItems());\n        widget.setFocused(item);\n        if (select) {\n            widget.setSelection(item, BreadcrumbsControl.Payload_Pick);\n        }\n    }\n}\nactions_1.MenuRegistry.appendMenuItem(actions_1.MenuId.CommandPalette, {\n    command: {\n        id: 'breadcrumbs.focusAndSelect',\n        title: { value: nls_1.localize('cmd.focus', \"Focus Breadcrumbs\"), original: 'Focus Breadcrumbs' },\n        precondition: BreadcrumbsControl.CK_BreadcrumbsVisible\n    }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusAndSelect',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyMod.Shift | keyCodes_1.KeyCode.US_DOT,\n    when: BreadcrumbsControl.CK_BreadcrumbsPossible,\n    handler: function (accessor) { return focusAndSelectHandler(accessor, true); }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focus',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyMod.Shift | keyCodes_1.KeyCode.US_SEMICOLON,\n    when: BreadcrumbsControl.CK_BreadcrumbsPossible,\n    handler: function (accessor) { return focusAndSelectHandler(accessor, false); }\n});\n// this commands is only enabled when breadcrumbs are\n// disabled which it then enables and focuses\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.toggleToOn',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyMod.Shift | keyCodes_1.KeyCode.US_DOT,\n    when: contextkey_1.ContextKeyExpr.not('config.breadcrumbs.enabled'),\n    handler: function (accessor) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var instant, config, isEnabled;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    instant = accessor.get(instantiation_1.IInstantiationService);\n                    config = accessor.get(configuration_1.IConfigurationService);\n                    isEnabled = breadcrumbs_1.BreadcrumbsConfig.IsEnabled.bindTo(config);\n                    if (!!isEnabled.getValue()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, isEnabled.updateValue(true)];\n                case 1:\n                    _a.sent();\n                    return [4 /*yield*/, async_1.timeout(50)];\n                case 2:\n                    _a.sent(); // hacky - the widget might not be ready yet...\n                    _a.label = 3;\n                case 3: return [2 /*return*/, instant.invokeFunction(focusAndSelectHandler, true)];\n            }\n        });\n    }); }\n});\n// navigation\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusNext',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyCode.RightArrow,\n    secondary: [keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyCode.RightArrow],\n    mac: {\n        primary: keyCodes_1.KeyCode.RightArrow,\n        secondary: [keyCodes_1.KeyMod.Alt | keyCodes_1.KeyCode.RightArrow],\n    },\n    when: contextkey_1.ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n    handler: function (accessor) {\n        var groups = accessor.get(editorGroupsService_1.IEditorGroupsService);\n        var breadcrumbs = accessor.get(breadcrumbs_1.IBreadcrumbsService);\n        var widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.focusNext();\n    }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusPrevious',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyCode.LeftArrow,\n    secondary: [keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyCode.LeftArrow],\n    mac: {\n        primary: keyCodes_1.KeyCode.LeftArrow,\n        secondary: [keyCodes_1.KeyMod.Alt | keyCodes_1.KeyCode.LeftArrow],\n    },\n    when: contextkey_1.ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n    handler: function (accessor) {\n        var groups = accessor.get(editorGroupsService_1.IEditorGroupsService);\n        var breadcrumbs = accessor.get(breadcrumbs_1.IBreadcrumbsService);\n        var widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.focusPrev();\n    }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.selectFocused',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyCode.Enter,\n    secondary: [keyCodes_1.KeyCode.DownArrow],\n    when: contextkey_1.ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n    handler: function (accessor) {\n        var groups = accessor.get(editorGroupsService_1.IEditorGroupsService);\n        var breadcrumbs = accessor.get(breadcrumbs_1.IBreadcrumbsService);\n        var widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.setSelection(widget.getFocused(), BreadcrumbsControl.Payload_Pick);\n    }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.revealFocused',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyCode.Space,\n    secondary: [keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyCode.Enter],\n    when: contextkey_1.ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n    handler: function (accessor) {\n        var groups = accessor.get(editorGroupsService_1.IEditorGroupsService);\n        var breadcrumbs = accessor.get(breadcrumbs_1.IBreadcrumbsService);\n        var widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.setSelection(widget.getFocused(), BreadcrumbsControl.Payload_Reveal);\n    }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.selectEditor',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib + 1,\n    primary: keyCodes_1.KeyCode.Escape,\n    when: contextkey_1.ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n    handler: function (accessor) {\n        var groups = accessor.get(editorGroupsService_1.IEditorGroupsService);\n        var breadcrumbs = accessor.get(breadcrumbs_1.IBreadcrumbsService);\n        var widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.setFocused(undefined);\n        widget.setSelection(undefined);\n        if (groups.activeGroup.activeControl) {\n            groups.activeGroup.activeControl.focus();\n        }\n    }\n});\nkeybindingsRegistry_1.KeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.revealFocusedFromTreeAside',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    primary: keyCodes_1.KeyMod.CtrlCmd | keyCodes_1.KeyCode.Enter,\n    when: contextkey_1.ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive, listService_1.WorkbenchListFocusContextKey),\n    handler: function (accessor) {\n        var editors = accessor.get(editorService_1.IEditorService);\n        var lists = accessor.get(listService_1.IListService);\n        var element = lists.lastFocusedList ? lists.lastFocusedList.getFocus() : undefined;\n        if (element instanceof outlineModel_1.OutlineElement) {\n            var outlineElement = outlineModel_1.OutlineModel.get(element);\n            if (!outlineElement) {\n                return undefined;\n            }\n            // open symbol in editor\n            return editors.openEditor({\n                resource: outlineElement.textModel.uri,\n                options: { selection: range_1.Range.collapseToStart(element.symbol.selectionRange) }\n            }, editorService_1.SIDE_GROUP);\n        }\n        else if (element && uri_1.URI.isUri(element.resource)) {\n            // open file in editor\n            return editors.openEditor({\n                resource: element.resource,\n            }, editorService_1.SIDE_GROUP);\n        }\n        else {\n            // ignore\n            return undefined;\n        }\n    }\n});\n//#endregion\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/breadcrumbsControl.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/breadcrumbsControl.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { BreadcrumbsItem, BreadcrumbsWidget, IBreadcrumbsItemEvent } from 'vs/base/browser/ui/breadcrumbs/breadcrumbsWidget';\nimport { IconLabel } from 'vs/base/browser/ui/iconLabel/iconLabel';\nimport { tail } from 'vs/base/common/arrays';\nimport { timeout } from 'vs/base/common/async';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { combinedDisposable, dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { Schemas } from 'vs/base/common/network';\nimport { isEqual } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport 'vs/css!./media/breadcrumbscontrol';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from 'vs/editor/browser/editorBrowser';\nimport { Range } from 'vs/editor/common/core/range';\nimport { ICodeEditorViewState, ScrollType } from 'vs/editor/common/editorCommon';\nimport { symbolKindToCssClass } from 'vs/editor/common/modes';\nimport { OutlineElement, OutlineGroup, OutlineModel, TreeElement } from 'vs/editor/contrib/documentSymbols/outlineModel';\nimport { localize } from 'vs/nls';\nimport { MenuId, MenuRegistry } from 'vs/platform/actions/common/actions';\nimport { CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { FileKind, IFileService, IFileStat } from 'vs/platform/files/common/files';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { KeybindingsRegistry, KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { IListService, WorkbenchListFocusContextKey } from 'vs/platform/list/browser/listService';\nimport { IQuickOpenService } from 'vs/platform/quickOpen/common/quickOpen';\nimport { ColorIdentifier, ColorFunction } from 'vs/platform/theme/common/colorRegistry';\nimport { attachBreadcrumbsStyler } from 'vs/platform/theme/common/styler';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { ResourceLabel } from 'vs/workbench/browser/labels';\nimport { BreadcrumbsConfig, IBreadcrumbsService } from 'vs/workbench/browser/parts/editor/breadcrumbs';\nimport { BreadcrumbElement, EditorBreadcrumbsModel, FileElement } from 'vs/workbench/browser/parts/editor/breadcrumbsModel';\nimport { BreadcrumbsPicker, createBreadcrumbsPicker } from 'vs/workbench/browser/parts/editor/breadcrumbsPicker';\nimport { SideBySideEditorInput } from 'vs/workbench/common/editor';\nimport { ACTIVE_GROUP, ACTIVE_GROUP_TYPE, IEditorService, SIDE_GROUP, SIDE_GROUP_TYPE } from 'vs/workbench/services/editor/common/editorService';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { IEditorGroupView } from 'vs/workbench/browser/parts/editor/editor';\nimport { onDidChangeZoomLevel } from 'vs/base/browser/browser';\nimport { withNullAsUndefined, withUndefinedAsNull } from 'vs/base/common/types';\n\nclass Item extends BreadcrumbsItem {\n\n\tprivate readonly _disposables: IDisposable[] = [];\n\n\tconstructor(\n\t\treadonly element: BreadcrumbElement,\n\t\treadonly options: IBreadcrumbsControlOptions,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t}\n\n\tdispose(): void {\n\t\tdispose(this._disposables);\n\t}\n\n\tequals(other: BreadcrumbsItem): boolean {\n\t\tif (!(other instanceof Item)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.element instanceof FileElement && other.element instanceof FileElement) {\n\t\t\treturn isEqual(this.element.uri, other.element.uri);\n\t\t}\n\t\tif (this.element instanceof TreeElement && other.element instanceof TreeElement) {\n\t\t\treturn this.element.id === other.element.id;\n\t\t}\n\t\treturn false;\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tif (this.element instanceof FileElement) {\n\t\t\t// file/folder\n\t\t\tlet label = this._instantiationService.createInstance(ResourceLabel, container, {});\n\t\t\tlabel.element.setFile(this.element.uri, {\n\t\t\t\thidePath: true,\n\t\t\t\thideIcon: this.element.kind === FileKind.FOLDER || !this.options.showFileIcons,\n\t\t\t\tfileKind: this.element.kind,\n\t\t\t\tfileDecorations: { colors: this.options.showDecorationColors, badges: false },\n\t\t\t});\n\t\t\tdom.addClass(container, FileKind[this.element.kind].toLowerCase());\n\t\t\tthis._disposables.push(label);\n\n\t\t} else if (this.element instanceof OutlineModel) {\n\t\t\t// has outline element but not in one\n\t\t\tlet label = document.createElement('div');\n\t\t\tlabel.innerHTML = '&hellip;';\n\t\t\tlabel.className = 'hint-more';\n\t\t\tcontainer.appendChild(label);\n\n\t\t} else if (this.element instanceof OutlineGroup) {\n\t\t\t// provider\n\t\t\tlet label = new IconLabel(container);\n\t\t\tlabel.setLabel(this.element.provider.displayName);\n\t\t\tthis._disposables.push(label);\n\n\t\t} else if (this.element instanceof OutlineElement) {\n\t\t\t// symbol\n\t\t\tif (this.options.showSymbolIcons) {\n\t\t\t\tlet icon = document.createElement('div');\n\t\t\t\ticon.className = symbolKindToCssClass(this.element.symbol.kind);\n\t\t\t\tcontainer.appendChild(icon);\n\t\t\t\tdom.addClass(container, 'shows-symbol-icon');\n\t\t\t}\n\t\t\tlet label = new IconLabel(container);\n\t\t\tlet title = this.element.symbol.name.replace(/\\r|\\n|\\r\\n/g, '\\u23CE');\n\t\t\tlabel.setLabel(title);\n\t\t\tthis._disposables.push(label);\n\t\t}\n\t}\n}\n\nexport interface IBreadcrumbsControlOptions {\n\tshowFileIcons: boolean;\n\tshowSymbolIcons: boolean;\n\tshowDecorationColors: boolean;\n\tbreadcrumbsBackground: ColorIdentifier | ColorFunction;\n}\n\nexport class BreadcrumbsControl {\n\n\tstatic HEIGHT = 22;\n\n\tstatic readonly Payload_Reveal = {};\n\tstatic readonly Payload_RevealAside = {};\n\tstatic readonly Payload_Pick = {};\n\n\tstatic CK_BreadcrumbsPossible = new RawContextKey('breadcrumbsPossible', false);\n\tstatic CK_BreadcrumbsVisible = new RawContextKey('breadcrumbsVisible', false);\n\tstatic CK_BreadcrumbsActive = new RawContextKey('breadcrumbsActive', false);\n\n\tprivate readonly _ckBreadcrumbsPossible: IContextKey<boolean>;\n\tprivate readonly _ckBreadcrumbsVisible: IContextKey<boolean>;\n\tprivate readonly _ckBreadcrumbsActive: IContextKey<boolean>;\n\n\tprivate readonly _cfUseQuickPick: BreadcrumbsConfig<boolean>;\n\n\treadonly domNode: HTMLDivElement;\n\tprivate readonly _widget: BreadcrumbsWidget;\n\n\tprivate _disposables = new Array<IDisposable>();\n\tprivate _breadcrumbsDisposables = new Array<IDisposable>();\n\tprivate _breadcrumbsPickerShowing = false;\n\tprivate _breadcrumbsPickerIgnoreOnceItem: BreadcrumbsItem | undefined;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly _options: IBreadcrumbsControlOptions,\n\t\tprivate readonly _editorGroup: IEditorGroupView,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ICodeEditorService private readonly _codeEditorService: ICodeEditorService,\n\t\t@IWorkspaceContextService private readonly _workspaceService: IWorkspaceContextService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IQuickOpenService private readonly _quickOpenService: IQuickOpenService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@IBreadcrumbsService breadcrumbsService: IBreadcrumbsService,\n\t) {\n\t\tthis.domNode = document.createElement('div');\n\t\tdom.addClass(this.domNode, 'breadcrumbs-control');\n\t\tdom.append(container, this.domNode);\n\n\t\tthis._widget = new BreadcrumbsWidget(this.domNode);\n\t\tthis._widget.onDidSelectItem(this._onSelectEvent, this, this._disposables);\n\t\tthis._widget.onDidFocusItem(this._onFocusEvent, this, this._disposables);\n\t\tthis._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive, this, this._disposables);\n\t\tthis._disposables.push(attachBreadcrumbsStyler(this._widget, this._themeService, { breadcrumbsBackground: _options.breadcrumbsBackground }));\n\n\t\tthis._ckBreadcrumbsPossible = BreadcrumbsControl.CK_BreadcrumbsPossible.bindTo(this._contextKeyService);\n\t\tthis._ckBreadcrumbsVisible = BreadcrumbsControl.CK_BreadcrumbsVisible.bindTo(this._contextKeyService);\n\t\tthis._ckBreadcrumbsActive = BreadcrumbsControl.CK_BreadcrumbsActive.bindTo(this._contextKeyService);\n\n\t\tthis._cfUseQuickPick = BreadcrumbsConfig.UseQuickPick.bindTo(_configurationService);\n\n\t\tthis._disposables.push(breadcrumbsService.register(this._editorGroup.id, this._widget));\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables = dispose(this._disposables);\n\t\tthis._breadcrumbsDisposables = dispose(this._breadcrumbsDisposables);\n\t\tthis._ckBreadcrumbsPossible.reset();\n\t\tthis._ckBreadcrumbsVisible.reset();\n\t\tthis._ckBreadcrumbsActive.reset();\n\t\tthis._cfUseQuickPick.dispose();\n\t\tthis._widget.dispose();\n\t\tthis.domNode.remove();\n\t}\n\n\tlayout(dim: dom.Dimension | undefined): void {\n\t\tthis._widget.layout(dim);\n\t}\n\n\tisHidden(): boolean {\n\t\treturn dom.hasClass(this.domNode, 'hidden');\n\t}\n\n\thide(): void {\n\t\tthis._breadcrumbsDisposables = dispose(this._breadcrumbsDisposables);\n\t\tthis._ckBreadcrumbsVisible.set(false);\n\t\tdom.toggleClass(this.domNode, 'hidden', true);\n\t}\n\n\tupdate(): boolean {\n\t\tthis._breadcrumbsDisposables = dispose(this._breadcrumbsDisposables);\n\n\t\t// honor diff editors and such\n\t\tlet input = this._editorGroup.activeEditor;\n\t\tif (input instanceof SideBySideEditorInput) {\n\t\t\tinput = input.master;\n\t\t}\n\n\t\tif (!input || !input.getResource() || (input.getResource()!.scheme !== Schemas.untitled && !this._fileService.canHandleResource(input.getResource()!))) {\n\t\t\t// cleanup and return when there is no input or when\n\t\t\t// we cannot handle this input\n\t\t\tthis._ckBreadcrumbsPossible.set(false);\n\t\t\tif (!this.isHidden()) {\n\t\t\t\tthis.hide();\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tdom.toggleClass(this.domNode, 'hidden', false);\n\t\tthis._ckBreadcrumbsVisible.set(true);\n\t\tthis._ckBreadcrumbsPossible.set(true);\n\n\t\tlet editor = this._getActiveCodeEditor();\n\t\tlet model = new EditorBreadcrumbsModel(input.getResource()!, editor, this._workspaceService, this._configurationService);\n\t\tdom.toggleClass(this.domNode, 'relative-path', model.isRelative());\n\n\t\tlet updateBreadcrumbs = () => {\n\t\t\tlet items = model.getElements().map(element => new Item(element, this._options, this._instantiationService));\n\t\t\tthis._widget.setItems(items);\n\t\t\tthis._widget.reveal(items[items.length - 1]);\n\t\t};\n\t\tlet listener = model.onDidUpdate(updateBreadcrumbs);\n\t\tupdateBreadcrumbs();\n\t\tthis._breadcrumbsDisposables = [model, listener];\n\n\t\t// close picker on hide/update\n\t\tthis._breadcrumbsDisposables.push({\n\t\t\tdispose: () => {\n\t\t\t\tif (this._breadcrumbsPickerShowing) {\n\t\t\t\t\tthis._contextViewService.hideContextView(this);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tprivate _getActiveCodeEditor(): ICodeEditor | undefined {\n\t\tif (!this._editorGroup.activeControl) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet control = this._editorGroup.activeControl.getControl();\n\t\tlet editor: ICodeEditor | undefined;\n\t\tif (isCodeEditor(control)) {\n\t\t\teditor = control as ICodeEditor;\n\t\t} else if (isDiffEditor(control)) {\n\t\t\teditor = control.getModifiedEditor();\n\t\t}\n\t\treturn editor;\n\t}\n\n\tprivate _onFocusEvent(event: IBreadcrumbsItemEvent): void {\n\t\tif (event.item && this._breadcrumbsPickerShowing) {\n\t\t\treturn this._widget.setSelection(event.item);\n\t\t}\n\t}\n\n\tprivate _onSelectEvent(event: IBreadcrumbsItemEvent): void {\n\t\tif (!event.item) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.item === this._breadcrumbsPickerIgnoreOnceItem) {\n\t\t\tthis._breadcrumbsPickerIgnoreOnceItem = undefined;\n\t\t\tthis._widget.setFocused(undefined);\n\t\t\tthis._widget.setSelection(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tconst { element } = event.item as Item;\n\t\tthis._editorGroup.focus();\n\n\t\t/* __GDPR__\n\t\t\t\"breadcrumbs/select\" : {\n\t\t\t\t\"type\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tthis._telemetryService.publicLog('breadcrumbs/select', { type: element instanceof TreeElement ? 'symbol' : 'file' });\n\n\t\tconst group = this._getEditorGroup(event.payload);\n\t\tif (group !== undefined) {\n\t\t\t// reveal the item\n\t\t\tthis._widget.setFocused(undefined);\n\t\t\tthis._widget.setSelection(undefined);\n\t\t\tthis._revealInEditor(event, element, group);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._cfUseQuickPick.getValue()) {\n\t\t\t// using quick pick\n\t\t\tthis._widget.setFocused(undefined);\n\t\t\tthis._widget.setSelection(undefined);\n\t\t\tthis._quickOpenService.show(element instanceof TreeElement ? '@' : '');\n\t\t\treturn;\n\t\t}\n\n\t\t// show picker\n\t\tlet picker: BreadcrumbsPicker;\n\t\tlet editor = this._getActiveCodeEditor();\n\t\tlet editorDecorations: string[] = [];\n\t\tlet editorViewState: ICodeEditorViewState | undefined;\n\n\t\tthis._contextViewService.showContextView({\n\t\t\trender: (parent: HTMLElement) => {\n\t\t\t\tpicker = createBreadcrumbsPicker(this._instantiationService, parent, element);\n\t\t\t\tlet selectListener = picker.onDidPickElement(data => {\n\t\t\t\t\tif (data.target) {\n\t\t\t\t\t\teditorViewState = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tthis._contextViewService.hideContextView(this);\n\n\t\t\t\t\tconst group = (picker.useAltAsMultipleSelectionModifier && (data.browserEvent as MouseEvent).metaKey) || (!picker.useAltAsMultipleSelectionModifier && (data.browserEvent as MouseEvent).altKey)\n\t\t\t\t\t\t? SIDE_GROUP\n\t\t\t\t\t\t: ACTIVE_GROUP;\n\n\t\t\t\t\tthis._revealInEditor(event, data.target, group, (data.browserEvent as MouseEvent).button === 1);\n\t\t\t\t\t/* __GDPR__\n\t\t\t\t\t\t\"breadcrumbs/open\" : {\n\t\t\t\t\t\t\t\"type\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t\tthis._telemetryService.publicLog('breadcrumbs/open', { type: !data ? 'nothing' : data.target instanceof TreeElement ? 'symbol' : 'file' });\n\t\t\t\t});\n\t\t\t\tlet focusListener = picker.onDidFocusElement(data => {\n\t\t\t\t\tif (!editor || !(data.target instanceof OutlineElement)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!editorViewState) {\n\t\t\t\t\t\teditorViewState = withNullAsUndefined(editor.saveViewState());\n\t\t\t\t\t}\n\t\t\t\t\tconst { symbol } = data.target;\n\t\t\t\t\teditor.revealRangeInCenter(symbol.range, ScrollType.Smooth);\n\t\t\t\t\teditorDecorations = editor.deltaDecorations(editorDecorations, [{\n\t\t\t\t\t\trange: symbol.range,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tclassName: 'rangeHighlight',\n\t\t\t\t\t\t\tisWholeLine: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}]);\n\t\t\t\t});\n\n\t\t\t\tlet zoomListener = onDidChangeZoomLevel(() => {\n\t\t\t\t\tthis._contextViewService.hideContextView(this);\n\t\t\t\t});\n\n\t\t\t\tlet focusTracker = dom.trackFocus(parent);\n\t\t\t\tlet blurListener = focusTracker.onDidBlur(() => {\n\t\t\t\t\tthis._breadcrumbsPickerIgnoreOnceItem = this._widget.isDOMFocused() ? event.item : undefined;\n\t\t\t\t\tthis._contextViewService.hideContextView(this);\n\t\t\t\t});\n\n\t\t\t\tthis._breadcrumbsPickerShowing = true;\n\t\t\t\tthis._updateCkBreadcrumbsActive();\n\n\t\t\t\treturn combinedDisposable([\n\t\t\t\t\tpicker,\n\t\t\t\t\tselectListener,\n\t\t\t\t\tfocusListener,\n\t\t\t\t\tzoomListener,\n\t\t\t\t\tfocusTracker,\n\t\t\t\t\tblurListener\n\t\t\t\t]);\n\t\t\t},\n\t\t\tgetAnchor: () => {\n\t\t\t\tlet maxInnerWidth = window.innerWidth - 8 /*a little less the full widget*/;\n\t\t\t\tlet maxHeight = Math.min(window.innerHeight * 0.7, 300);\n\n\t\t\t\tlet pickerWidth = Math.min(maxInnerWidth, Math.max(240, maxInnerWidth / 4.17));\n\t\t\t\tlet pickerArrowSize = 8;\n\t\t\t\tlet pickerArrowOffset: number;\n\n\t\t\t\tlet data = dom.getDomNodePagePosition(event.node.firstChild as HTMLElement);\n\t\t\t\tlet y = data.top + data.height + pickerArrowSize;\n\t\t\t\tif (y + maxHeight >= window.innerHeight) {\n\t\t\t\t\tmaxHeight = window.innerHeight - y - 30 /* room for shadow and status bar*/;\n\t\t\t\t}\n\t\t\t\tlet x = data.left;\n\t\t\t\tif (x + pickerWidth >= maxInnerWidth) {\n\t\t\t\t\tx = maxInnerWidth - pickerWidth;\n\t\t\t\t}\n\t\t\t\tif (event.payload instanceof StandardMouseEvent) {\n\t\t\t\t\tlet maxPickerArrowOffset = pickerWidth - 2 * pickerArrowSize;\n\t\t\t\t\tpickerArrowOffset = event.payload.posx - x;\n\t\t\t\t\tif (pickerArrowOffset > maxPickerArrowOffset) {\n\t\t\t\t\t\tx = Math.min(maxInnerWidth - pickerWidth, x + pickerArrowOffset - maxPickerArrowOffset);\n\t\t\t\t\t\tpickerArrowOffset = maxPickerArrowOffset;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpickerArrowOffset = (data.left + (data.width * 0.3)) - x;\n\t\t\t\t}\n\t\t\t\tpicker.show(element, maxHeight, pickerWidth, pickerArrowSize, Math.max(0, pickerArrowOffset));\n\t\t\t\treturn { x, y };\n\t\t\t},\n\t\t\tonHide: (data) => {\n\t\t\t\tif (editor) {\n\t\t\t\t\teditor.deltaDecorations(editorDecorations, []);\n\t\t\t\t\tif (editorViewState) {\n\t\t\t\t\t\teditor.restoreViewState(editorViewState);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._breadcrumbsPickerShowing = false;\n\t\t\t\tthis._updateCkBreadcrumbsActive();\n\t\t\t\tif (data === this) {\n\t\t\t\t\tthis._widget.setFocused(undefined);\n\t\t\t\t\tthis._widget.setSelection(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _updateCkBreadcrumbsActive(): void {\n\t\tconst value = this._widget.isDOMFocused() || this._breadcrumbsPickerShowing;\n\t\tthis._ckBreadcrumbsActive.set(value);\n\t}\n\n\tprivate _revealInEditor(event: IBreadcrumbsItemEvent, element: any, group: SIDE_GROUP_TYPE | ACTIVE_GROUP_TYPE | undefined, pinned: boolean = false): void {\n\t\tif (element instanceof FileElement) {\n\t\t\tif (element.kind === FileKind.FILE) {\n\t\t\t\t// open file in any editor\n\t\t\t\tthis._editorService.openEditor({ resource: element.uri, options: { pinned: pinned } }, group);\n\t\t\t} else {\n\t\t\t\t// show next picker\n\t\t\t\tlet items = this._widget.getItems();\n\t\t\t\tlet idx = items.indexOf(event.item);\n\t\t\t\tthis._widget.setFocused(items[idx + 1]);\n\t\t\t\tthis._widget.setSelection(items[idx + 1], BreadcrumbsControl.Payload_Pick);\n\t\t\t}\n\n\t\t} else if (element instanceof OutlineElement) {\n\t\t\t// open symbol in code editor\n\t\t\tconst model = OutlineModel.get(element);\n\t\t\tif (model) {\n\t\t\t\tthis._codeEditorService.openCodeEditor({\n\t\t\t\t\tresource: model.textModel.uri,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselection: Range.collapseToStart(element.symbol.selectionRange),\n\t\t\t\t\t\trevealInCenterIfOutsideViewport: true\n\t\t\t\t\t}\n\t\t\t\t}, withUndefinedAsNull(this._getActiveCodeEditor()), group === SIDE_GROUP);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _getEditorGroup(data: object): SIDE_GROUP_TYPE | ACTIVE_GROUP_TYPE | undefined {\n\t\tif (data === BreadcrumbsControl.Payload_RevealAside) {\n\t\t\treturn SIDE_GROUP;\n\t\t} else if (data === BreadcrumbsControl.Payload_Reveal) {\n\t\t\treturn ACTIVE_GROUP;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\n//#region commands\n\n// toggle command\nMenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\tcommand: {\n\t\tid: 'breadcrumbs.toggle',\n\t\ttitle: { value: localize('cmd.toggle', \"Toggle Breadcrumbs\"), original: 'View: Toggle Breadcrumbs' },\n\t\tcategory: localize('cmd.category', \"View\")\n\t}\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarViewMenu, {\n\tgroup: '5_editor',\n\torder: 99,\n\tcommand: {\n\t\tid: 'breadcrumbs.toggle',\n\t\ttitle: localize('miToggleBreadcrumbs', \"Toggle &&Breadcrumbs\"),\n\t\ttoggled: ContextKeyExpr.equals('config.breadcrumbs.enabled', true)\n\t}\n});\nCommandsRegistry.registerCommand('breadcrumbs.toggle', accessor => {\n\tlet config = accessor.get(IConfigurationService);\n\tlet value = BreadcrumbsConfig.IsEnabled.bindTo(config).getValue();\n\tBreadcrumbsConfig.IsEnabled.bindTo(config).updateValue(!value);\n});\n\n// focus/focus-and-select\nfunction focusAndSelectHandler(accessor: ServicesAccessor, select: boolean): void {\n\t// find widget and focus/select\n\tconst groups = accessor.get(IEditorGroupsService);\n\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\tif (widget) {\n\t\tconst item = tail(widget.getItems());\n\t\twidget.setFocused(item);\n\t\tif (select) {\n\t\t\twidget.setSelection(item, BreadcrumbsControl.Payload_Pick);\n\t\t}\n\t}\n}\nMenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\tcommand: {\n\t\tid: 'breadcrumbs.focusAndSelect',\n\t\ttitle: { value: localize('cmd.focus', \"Focus Breadcrumbs\"), original: 'Focus Breadcrumbs' },\n\t\tprecondition: BreadcrumbsControl.CK_BreadcrumbsVisible\n\t}\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.focusAndSelect',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.US_DOT,\n\twhen: BreadcrumbsControl.CK_BreadcrumbsPossible,\n\thandler: accessor => focusAndSelectHandler(accessor, true)\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.focus',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.US_SEMICOLON,\n\twhen: BreadcrumbsControl.CK_BreadcrumbsPossible,\n\thandler: accessor => focusAndSelectHandler(accessor, false)\n});\n\n// this commands is only enabled when breadcrumbs are\n// disabled which it then enables and focuses\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.toggleToOn',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.US_DOT,\n\twhen: ContextKeyExpr.not('config.breadcrumbs.enabled'),\n\thandler: async accessor => {\n\t\tconst instant = accessor.get(IInstantiationService);\n\t\tconst config = accessor.get(IConfigurationService);\n\t\t// check if enabled and iff not enable\n\t\tconst isEnabled = BreadcrumbsConfig.IsEnabled.bindTo(config);\n\t\tif (!isEnabled.getValue()) {\n\t\t\tawait isEnabled.updateValue(true);\n\t\t\tawait timeout(50); // hacky - the widget might not be ready yet...\n\t\t}\n\t\treturn instant.invokeFunction(focusAndSelectHandler, true);\n\t}\n});\n\n// navigation\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.focusNext',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.RightArrow,\n\tsecondary: [KeyMod.CtrlCmd | KeyCode.RightArrow],\n\tmac: {\n\t\tprimary: KeyCode.RightArrow,\n\t\tsecondary: [KeyMod.Alt | KeyCode.RightArrow],\n\t},\n\twhen: ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.focusNext();\n\t}\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.focusPrevious',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.LeftArrow,\n\tsecondary: [KeyMod.CtrlCmd | KeyCode.LeftArrow],\n\tmac: {\n\t\tprimary: KeyCode.LeftArrow,\n\t\tsecondary: [KeyMod.Alt | KeyCode.LeftArrow],\n\t},\n\twhen: ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.focusPrev();\n\t}\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.selectFocused',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.Enter,\n\tsecondary: [KeyCode.DownArrow],\n\twhen: ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.setSelection(widget.getFocused(), BreadcrumbsControl.Payload_Pick);\n\t}\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.revealFocused',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.Space,\n\tsecondary: [KeyMod.CtrlCmd | KeyCode.Enter],\n\twhen: ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.setSelection(widget.getFocused(), BreadcrumbsControl.Payload_Reveal);\n\t}\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.selectEditor',\n\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\tprimary: KeyCode.Escape,\n\twhen: ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.setFocused(undefined);\n\t\twidget.setSelection(undefined);\n\t\tif (groups.activeGroup.activeControl) {\n\t\t\tgroups.activeGroup.activeControl.focus();\n\t\t}\n\t}\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: 'breadcrumbs.revealFocusedFromTreeAside',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\twhen: ContextKeyExpr.and(BreadcrumbsControl.CK_BreadcrumbsVisible, BreadcrumbsControl.CK_BreadcrumbsActive, WorkbenchListFocusContextKey),\n\thandler(accessor) {\n\t\tconst editors = accessor.get(IEditorService);\n\t\tconst lists = accessor.get(IListService);\n\t\tconst element = lists.lastFocusedList ? <OutlineElement | IFileStat>lists.lastFocusedList.getFocus() : undefined;\n\t\tif (element instanceof OutlineElement) {\n\t\t\tconst outlineElement = OutlineModel.get(element);\n\t\t\tif (!outlineElement) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// open symbol in editor\n\t\t\treturn editors.openEditor({\n\t\t\t\tresource: outlineElement.textModel.uri,\n\t\t\t\toptions: { selection: Range.collapseToStart(element.symbol.selectionRange) }\n\t\t\t}, SIDE_GROUP);\n\n\t\t} else if (element && URI.isUri(element.resource)) {\n\t\t\t// open file in editor\n\t\t\treturn editors.openEditor({\n\t\t\t\tresource: element.resource,\n\t\t\t}, SIDE_GROUP);\n\n\t\t} else {\n\t\t\t// ignore\n\t\t\treturn undefined;\n\t\t}\n\t}\n});\n//#endregion\n"]}]}