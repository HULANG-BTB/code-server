{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/editor/contrib/gotoError/gotoErrorWidget.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/gotoError/gotoErrorWidget.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./media/gotoErrorWidget\");\nvar nls = require(\"vs/nls\");\nvar dom = require(\"vs/base/browser/dom\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar markers_1 = require(\"vs/platform/markers/common/markers\");\nvar range_1 = require(\"vs/editor/common/core/range\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar color_1 = require(\"vs/base/common/color\");\nvar editorColorRegistry_1 = require(\"vs/editor/common/view/editorColorRegistry\");\nvar scrollableElement_1 = require(\"vs/base/browser/ui/scrollbar/scrollableElement\");\nvar scrollable_1 = require(\"vs/base/common/scrollable\");\nvar editorCommon_1 = require(\"vs/editor/common/editorCommon\");\nvar labels_1 = require(\"vs/base/common/labels\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar event_1 = require(\"vs/base/common/event\");\nvar peekViewWidget_1 = require(\"vs/editor/contrib/referenceSearch/peekViewWidget\");\nvar resources_1 = require(\"vs/base/common/resources\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar referencesWidget_1 = require(\"vs/editor/contrib/referenceSearch/referencesWidget\");\nvar accessibility_1 = require(\"vs/platform/accessibility/common/accessibility\");\nvar MessageWidget = /** @class */ (function () {\n    function MessageWidget(parent, editor, onRelatedInformation) {\n        var _this = this;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = [];\n        this._editor = editor;\n        var domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        domNode.setAttribute('aria-live', 'assertive');\n        domNode.setAttribute('role', 'alert');\n        this._messageBlock = document.createElement('div');\n        dom.addClass(this._messageBlock, 'message');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.push(dom.addStandardDisposableListener(this._relatedBlock, 'click', function (event) {\n            event.preventDefault();\n            var related = _this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new scrollableElement_1.ScrollableElement(domNode, {\n            horizontal: scrollable_1.ScrollbarVisibility.Auto,\n            vertical: scrollable_1.ScrollbarVisibility.Auto,\n            useShadows: false,\n            horizontalScrollbarSize: 3,\n            verticalScrollbarSize: 3\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.push(this._scrollable.onScroll(function (e) {\n            domNode.style.left = \"-\" + e.scrollLeft + \"px\";\n            domNode.style.top = \"-\" + e.scrollTop + \"px\";\n        }));\n        this._disposables.push(this._scrollable);\n    }\n    MessageWidget.prototype.dispose = function () {\n        lifecycle_1.dispose(this._disposables);\n    };\n    MessageWidget.prototype.update = function (_a) {\n        var source = _a.source, message = _a.message, relatedInformation = _a.relatedInformation, code = _a.code;\n        var lines = message.split(/\\r\\n|\\r|\\n/g);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {\n            var line = lines_1[_i];\n            this._longestLineLength = Math.max(line.length, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._editor.applyFontInfo(this._messageBlock);\n        var lastLineElement = this._messageBlock;\n        for (var _b = 0, lines_2 = lines; _b < lines_2.length; _b++) {\n            var line = lines_2[_b];\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            var detailsElement = document.createElement('span');\n            dom.addClass(detailsElement, 'details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                var sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                dom.addClass(sourceElement, 'source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                var codeElement = document.createElement('span');\n                codeElement.innerText = \"(\" + code + \")\";\n                dom.addClass(codeElement, 'code');\n                detailsElement.appendChild(codeElement);\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (arrays_1.isNonEmptyArray(relatedInformation)) {\n            var relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = Math.floor(this._editor.getConfiguration().lineHeight * 0.66) + \"px\";\n            this._lines += 1;\n            for (var _c = 0, relatedInformation_1 = relatedInformation; _c < relatedInformation_1.length; _c++) {\n                var related = relatedInformation_1[_c];\n                var container = document.createElement('div');\n                var relatedResource = document.createElement('a');\n                dom.addClass(relatedResource, 'filename');\n                relatedResource.innerHTML = labels_1.getBaseLabel(related.resource) + \"(\" + related.startLineNumber + \", \" + related.startColumn + \"): \";\n                relatedResource.title = labels_1.getPathLabel(related.resource, undefined);\n                this._relatedDiagnostics.set(relatedResource, related);\n                var relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        var fontInfo = this._editor.getConfiguration().fontInfo;\n        var scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        var scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth: scrollWidth, scrollHeight: scrollHeight });\n    };\n    MessageWidget.prototype.layout = function (height, width) {\n        this._scrollable.getDomNode().style.height = height + \"px\";\n        this._scrollable.getDomNode().style.width = width + \"px\";\n        this._scrollable.setScrollDimensions({ width: width, height: height });\n    };\n    MessageWidget.prototype.getHeightInLines = function () {\n        return Math.min(17, this._lines);\n    };\n    return MessageWidget;\n}());\nvar MarkerNavigationWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(MarkerNavigationWidget, _super);\n    function MarkerNavigationWidget(editor, actions, _themeService) {\n        var _this = _super.call(this, editor, { showArrow: true, showFrame: true, isAccessible: true }) || this;\n        _this.actions = actions;\n        _this._themeService = _themeService;\n        _this._callOnDispose = [];\n        _this._onDidSelectRelatedInformation = new event_1.Emitter();\n        _this.onDidSelectRelatedInformation = _this._onDidSelectRelatedInformation.event;\n        _this._severity = markers_1.MarkerSeverity.Warning;\n        _this._backgroundColor = color_1.Color.white;\n        _this._applyTheme(_themeService.getTheme());\n        _this._callOnDispose.push(_themeService.onThemeChange(_this._applyTheme.bind(_this)));\n        _this.create();\n        return _this;\n    }\n    MarkerNavigationWidget.prototype._applyTheme = function (theme) {\n        this._backgroundColor = theme.getColor(exports.editorMarkerNavigationBackground);\n        var colorId = exports.editorMarkerNavigationError;\n        if (this._severity === markers_1.MarkerSeverity.Warning) {\n            colorId = exports.editorMarkerNavigationWarning;\n        }\n        else if (this._severity === markers_1.MarkerSeverity.Info) {\n            colorId = exports.editorMarkerNavigationInfo;\n        }\n        var frameColor = theme.getColor(colorId);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: this._backgroundColor,\n            primaryHeadingColor: theme.getColor(referencesWidget_1.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(referencesWidget_1.peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    };\n    MarkerNavigationWidget.prototype._applyStyles = function () {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        _super.prototype._applyStyles.call(this);\n    };\n    MarkerNavigationWidget.prototype.dispose = function () {\n        this._callOnDispose = lifecycle_1.dispose(this._callOnDispose);\n        _super.prototype.dispose.call(this);\n    };\n    MarkerNavigationWidget.prototype.focus = function () {\n        this._parentContainer.focus();\n    };\n    MarkerNavigationWidget.prototype._fillHead = function (container) {\n        _super.prototype._fillHead.call(this, container);\n        this._actionbarWidget.push(this.actions, { label: false, icon: true });\n    };\n    MarkerNavigationWidget.prototype._getActionBarOptions = function () {\n        return {\n            orientation: actionbar_1.ActionsOrientation.HORIZONTAL_REVERSE\n        };\n    };\n    MarkerNavigationWidget.prototype._fillBody = function (container) {\n        var _this = this;\n        this._parentContainer = container;\n        dom.addClass(container, 'marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, function (related) { return _this._onDidSelectRelatedInformation.fire(related); });\n        this._disposables.push(this._message);\n    };\n    MarkerNavigationWidget.prototype.show = function (where, heightInLines) {\n        throw new Error('call showAtMarker');\n    };\n    MarkerNavigationWidget.prototype.showAtMarker = function (marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getTheme());\n        // show\n        var range = range_1.Range.lift(marker);\n        var editorPosition = this.editor.getPosition();\n        var position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        _super.prototype.show.call(this, position, this.computeRequiredHeight());\n        var model = this.editor.getModel();\n        if (model) {\n            var detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(resources_1.basename(model.uri), detail);\n        }\n        var headingIconClassName = 'error';\n        if (this._severity === markers_1.MarkerSeverity.Warning) {\n            headingIconClassName = 'warning';\n        }\n        else if (this._severity === markers_1.MarkerSeverity.Info) {\n            headingIconClassName = 'info';\n        }\n        this.setTitleIcon(headingIconClassName);\n        this.editor.revealPositionInCenter(position, editorCommon_1.ScrollType.Smooth);\n        if (this.editor.getConfiguration().accessibilitySupport !== accessibility_1.AccessibilitySupport.Disabled) {\n            this.focus();\n        }\n    };\n    MarkerNavigationWidget.prototype.updateMarker = function (marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    };\n    MarkerNavigationWidget.prototype.showStale = function () {\n        this._container.classList.add('stale');\n        this._relayout();\n    };\n    MarkerNavigationWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\n        _super.prototype._doLayoutBody.call(this, heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = heightInPixel + \"px\";\n    };\n    MarkerNavigationWidget.prototype._onWidth = function (widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    };\n    MarkerNavigationWidget.prototype._relayout = function () {\n        _super.prototype._relayout.call(this, this.computeRequiredHeight());\n    };\n    MarkerNavigationWidget.prototype.computeRequiredHeight = function () {\n        return 3 + this._message.getHeightInLines();\n    };\n    return MarkerNavigationWidget;\n}(peekViewWidget_1.PeekViewWidget));\nexports.MarkerNavigationWidget = MarkerNavigationWidget;\n// theming\nvar errorDefault = colorRegistry_1.oneOf(editorColorRegistry_1.editorErrorForeground, editorColorRegistry_1.editorErrorBorder);\nvar warningDefault = colorRegistry_1.oneOf(editorColorRegistry_1.editorWarningForeground, editorColorRegistry_1.editorWarningBorder);\nvar infoDefault = colorRegistry_1.oneOf(editorColorRegistry_1.editorInfoForeground, editorColorRegistry_1.editorInfoBorder);\nexports.editorMarkerNavigationError = colorRegistry_1.registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hc: errorDefault }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexports.editorMarkerNavigationWarning = colorRegistry_1.registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hc: warningDefault }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexports.editorMarkerNavigationInfo = colorRegistry_1.registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hc: infoDefault }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexports.editorMarkerNavigationBackground = colorRegistry_1.registerColor('editorMarkerNavigation.background', { dark: '#2D2D30', light: color_1.Color.white, hc: '#0C141F' }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    var link = theme.getColor(colorRegistry_1.textLinkForeground);\n    if (link) {\n        collector.addRule(\".monaco-editor .marker-widget a { color: \" + link + \"; }\");\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/gotoError/gotoErrorWidget.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/editor/contrib/gotoError/gotoErrorWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/gotoErrorWidget';\nimport * as nls from 'vs/nls';\nimport * as dom from 'vs/base/browser/dom';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { IMarker, MarkerSeverity, IRelatedInformation } from 'vs/platform/markers/common/markers';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { registerColor, oneOf, textLinkForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService, ITheme, registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { Color } from 'vs/base/common/color';\nimport { editorErrorForeground, editorErrorBorder, editorWarningForeground, editorWarningBorder, editorInfoForeground, editorInfoBorder } from 'vs/editor/common/view/editorColorRegistry';\nimport { ScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport { ScrollType } from 'vs/editor/common/editorCommon';\nimport { getBaseLabel, getPathLabel } from 'vs/base/common/labels';\nimport { isNonEmptyArray } from 'vs/base/common/arrays';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { PeekViewWidget } from 'vs/editor/contrib/referenceSearch/peekViewWidget';\nimport { basename } from 'vs/base/common/resources';\nimport { IAction } from 'vs/base/common/actions';\nimport { IActionBarOptions, ActionsOrientation } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground } from 'vs/editor/contrib/referenceSearch/referencesWidget';\nimport { AccessibilitySupport } from 'vs/platform/accessibility/common/accessibility';\n\nclass MessageWidget {\n\n\tprivate _lines: number = 0;\n\tprivate _longestLineLength: number = 0;\n\n\tprivate readonly _editor: ICodeEditor;\n\tprivate readonly _messageBlock: HTMLDivElement;\n\tprivate readonly _relatedBlock: HTMLDivElement;\n\tprivate readonly _scrollable: ScrollableElement;\n\tprivate readonly _relatedDiagnostics = new WeakMap<HTMLElement, IRelatedInformation>();\n\tprivate readonly _disposables: IDisposable[] = [];\n\n\tconstructor(parent: HTMLElement, editor: ICodeEditor, onRelatedInformation: (related: IRelatedInformation) => void) {\n\t\tthis._editor = editor;\n\n\t\tconst domNode = document.createElement('div');\n\t\tdomNode.className = 'descriptioncontainer';\n\t\tdomNode.setAttribute('aria-live', 'assertive');\n\t\tdomNode.setAttribute('role', 'alert');\n\n\t\tthis._messageBlock = document.createElement('div');\n\t\tdom.addClass(this._messageBlock, 'message');\n\t\tdomNode.appendChild(this._messageBlock);\n\n\t\tthis._relatedBlock = document.createElement('div');\n\t\tdomNode.appendChild(this._relatedBlock);\n\t\tthis._disposables.push(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst related = this._relatedDiagnostics.get(event.target);\n\t\t\tif (related) {\n\t\t\t\tonRelatedInformation(related);\n\t\t\t}\n\t\t}));\n\n\t\tthis._scrollable = new ScrollableElement(domNode, {\n\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\tvertical: ScrollbarVisibility.Auto,\n\t\t\tuseShadows: false,\n\t\t\thorizontalScrollbarSize: 3,\n\t\t\tverticalScrollbarSize: 3\n\t\t});\n\t\tparent.appendChild(this._scrollable.getDomNode());\n\t\tthis._disposables.push(this._scrollable.onScroll(e => {\n\t\t\tdomNode.style.left = `-${e.scrollLeft}px`;\n\t\t\tdomNode.style.top = `-${e.scrollTop}px`;\n\t\t}));\n\t\tthis._disposables.push(this._scrollable);\n\t}\n\n\tdispose(): void {\n\t\tdispose(this._disposables);\n\t}\n\n\tupdate({ source, message, relatedInformation, code }: IMarker): void {\n\n\t\tconst lines = message.split(/\\r\\n|\\r|\\n/g);\n\t\tthis._lines = lines.length;\n\t\tthis._longestLineLength = 0;\n\t\tfor (const line of lines) {\n\t\t\tthis._longestLineLength = Math.max(line.length, this._longestLineLength);\n\t\t}\n\n\t\tdom.clearNode(this._messageBlock);\n\t\tthis._editor.applyFontInfo(this._messageBlock);\n\t\tlet lastLineElement = this._messageBlock;\n\t\tfor (const line of lines) {\n\t\t\tlastLineElement = document.createElement('div');\n\t\t\tlastLineElement.innerText = line;\n\t\t\tif (line === '') {\n\t\t\t\tlastLineElement.style.height = this._messageBlock.style.lineHeight;\n\t\t\t}\n\t\t\tthis._messageBlock.appendChild(lastLineElement);\n\t\t}\n\t\tif (source || code) {\n\t\t\tconst detailsElement = document.createElement('span');\n\t\t\tdom.addClass(detailsElement, 'details');\n\t\t\tlastLineElement.appendChild(detailsElement);\n\t\t\tif (source) {\n\t\t\t\tconst sourceElement = document.createElement('span');\n\t\t\t\tsourceElement.innerText = source;\n\t\t\t\tdom.addClass(sourceElement, 'source');\n\t\t\t\tdetailsElement.appendChild(sourceElement);\n\t\t\t}\n\t\t\tif (code) {\n\t\t\t\tconst codeElement = document.createElement('span');\n\t\t\t\tcodeElement.innerText = `(${code})`;\n\t\t\t\tdom.addClass(codeElement, 'code');\n\t\t\t\tdetailsElement.appendChild(codeElement);\n\t\t\t}\n\t\t}\n\n\t\tdom.clearNode(this._relatedBlock);\n\t\tthis._editor.applyFontInfo(this._relatedBlock);\n\t\tif (isNonEmptyArray(relatedInformation)) {\n\t\t\tconst relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n\t\t\trelatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getConfiguration().lineHeight * 0.66)}px`;\n\t\t\tthis._lines += 1;\n\n\t\t\tfor (const related of relatedInformation) {\n\n\t\t\t\tlet container = document.createElement('div');\n\n\t\t\t\tlet relatedResource = document.createElement('a');\n\t\t\t\tdom.addClass(relatedResource, 'filename');\n\t\t\t\trelatedResource.innerHTML = `${getBaseLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n\t\t\t\trelatedResource.title = getPathLabel(related.resource, undefined);\n\t\t\t\tthis._relatedDiagnostics.set(relatedResource, related);\n\n\t\t\t\tlet relatedMessage = document.createElement('span');\n\t\t\t\trelatedMessage.innerText = related.message;\n\n\t\t\t\tcontainer.appendChild(relatedResource);\n\t\t\t\tcontainer.appendChild(relatedMessage);\n\n\t\t\t\tthis._lines += 1;\n\t\t\t\trelatedInformationNode.appendChild(container);\n\t\t\t}\n\t\t}\n\n\t\tconst fontInfo = this._editor.getConfiguration().fontInfo;\n\t\tconst scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n\t\tconst scrollHeight = fontInfo.lineHeight * this._lines;\n\t\tthis._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n\t}\n\n\tlayout(height: number, width: number): void {\n\t\tthis._scrollable.getDomNode().style.height = `${height}px`;\n\t\tthis._scrollable.getDomNode().style.width = `${width}px`;\n\t\tthis._scrollable.setScrollDimensions({ width, height });\n\t}\n\n\tgetHeightInLines(): number {\n\t\treturn Math.min(17, this._lines);\n\t}\n}\n\nexport class MarkerNavigationWidget extends PeekViewWidget {\n\n\tprivate _parentContainer: HTMLElement;\n\tprivate _container: HTMLElement;\n\tprivate _message: MessageWidget;\n\tprivate _callOnDispose: IDisposable[] = [];\n\tprivate _severity: MarkerSeverity;\n\tprivate _backgroundColor?: Color;\n\tprivate _onDidSelectRelatedInformation = new Emitter<IRelatedInformation>();\n\tprivate _heightInPixel: number;\n\n\treadonly onDidSelectRelatedInformation: Event<IRelatedInformation> = this._onDidSelectRelatedInformation.event;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tprivate readonly actions: IAction[],\n\t\tprivate readonly _themeService: IThemeService\n\t) {\n\t\tsuper(editor, { showArrow: true, showFrame: true, isAccessible: true });\n\t\tthis._severity = MarkerSeverity.Warning;\n\t\tthis._backgroundColor = Color.white;\n\n\t\tthis._applyTheme(_themeService.getTheme());\n\t\tthis._callOnDispose.push(_themeService.onThemeChange(this._applyTheme.bind(this)));\n\n\t\tthis.create();\n\t}\n\n\tprivate _applyTheme(theme: ITheme) {\n\t\tthis._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n\t\tlet colorId = editorMarkerNavigationError;\n\t\tif (this._severity === MarkerSeverity.Warning) {\n\t\t\tcolorId = editorMarkerNavigationWarning;\n\t\t} else if (this._severity === MarkerSeverity.Info) {\n\t\t\tcolorId = editorMarkerNavigationInfo;\n\t\t}\n\t\tconst frameColor = theme.getColor(colorId);\n\t\tthis.style({\n\t\t\tarrowColor: frameColor,\n\t\t\tframeColor: frameColor,\n\t\t\theaderBackgroundColor: this._backgroundColor,\n\t\t\tprimaryHeadingColor: theme.getColor(peekViewTitleForeground),\n\t\t\tsecondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n\t\t}); // style() will trigger _applyStyles\n\t}\n\n\tprotected _applyStyles(): void {\n\t\tif (this._parentContainer) {\n\t\t\tthis._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n\t\t}\n\t\tsuper._applyStyles();\n\t}\n\n\tdispose(): void {\n\t\tthis._callOnDispose = dispose(this._callOnDispose);\n\t\tsuper.dispose();\n\t}\n\n\tfocus(): void {\n\t\tthis._parentContainer.focus();\n\t}\n\n\tprotected _fillHead(container: HTMLElement): void {\n\t\tsuper._fillHead(container);\n\t\tthis._actionbarWidget.push(this.actions, { label: false, icon: true });\n\t}\n\n\tprotected _getActionBarOptions(): IActionBarOptions {\n\t\treturn {\n\t\t\torientation: ActionsOrientation.HORIZONTAL_REVERSE\n\t\t};\n\t}\n\n\tprotected _fillBody(container: HTMLElement): void {\n\t\tthis._parentContainer = container;\n\t\tdom.addClass(container, 'marker-widget');\n\t\tthis._parentContainer.tabIndex = 0;\n\t\tthis._parentContainer.setAttribute('role', 'tooltip');\n\n\t\tthis._container = document.createElement('div');\n\t\tcontainer.appendChild(this._container);\n\n\t\tthis._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related));\n\t\tthis._disposables.push(this._message);\n\t}\n\n\tshow(where: Position, heightInLines: number): void {\n\t\tthrow new Error('call showAtMarker');\n\t}\n\n\tshowAtMarker(marker: IMarker, markerIdx: number, markerCount: number): void {\n\t\t// update:\n\t\t// * title\n\t\t// * message\n\t\tthis._container.classList.remove('stale');\n\t\tthis._message.update(marker);\n\n\t\t// update frame color (only applied on 'show')\n\t\tthis._severity = marker.severity;\n\t\tthis._applyTheme(this._themeService.getTheme());\n\n\t\t// show\n\t\tlet range = Range.lift(marker);\n\t\tconst editorPosition = this.editor.getPosition();\n\t\tlet position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n\t\tsuper.show(position, this.computeRequiredHeight());\n\n\t\tconst model = this.editor.getModel();\n\t\tif (model) {\n\t\t\tconst detail = markerCount > 1\n\t\t\t\t? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n\t\t\t\t: nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n\t\t\tthis.setTitle(basename(model.uri), detail);\n\t\t}\n\t\tlet headingIconClassName = 'error';\n\t\tif (this._severity === MarkerSeverity.Warning) {\n\t\t\theadingIconClassName = 'warning';\n\t\t} else if (this._severity === MarkerSeverity.Info) {\n\t\t\theadingIconClassName = 'info';\n\t\t}\n\t\tthis.setTitleIcon(headingIconClassName);\n\n\t\tthis.editor.revealPositionInCenter(position, ScrollType.Smooth);\n\n\t\tif (this.editor.getConfiguration().accessibilitySupport !== AccessibilitySupport.Disabled) {\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\tupdateMarker(marker: IMarker): void {\n\t\tthis._container.classList.remove('stale');\n\t\tthis._message.update(marker);\n\t}\n\n\tshowStale() {\n\t\tthis._container.classList.add('stale');\n\t\tthis._relayout();\n\t}\n\n\tprotected _doLayoutBody(heightInPixel: number, widthInPixel: number): void {\n\t\tsuper._doLayoutBody(heightInPixel, widthInPixel);\n\t\tthis._heightInPixel = heightInPixel;\n\t\tthis._message.layout(heightInPixel, widthInPixel);\n\t\tthis._container.style.height = `${heightInPixel}px`;\n\t}\n\n\tpublic _onWidth(widthInPixel: number): void {\n\t\tthis._message.layout(this._heightInPixel, widthInPixel);\n\t}\n\n\tprotected _relayout(): void {\n\t\tsuper._relayout(this.computeRequiredHeight());\n\t}\n\n\tprivate computeRequiredHeight() {\n\t\treturn 3 + this._message.getHeightInLines();\n\t}\n}\n\n// theming\n\nlet errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nlet warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nlet infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\n\nexport const editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hc: errorDefault }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport const editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hc: warningDefault }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport const editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hc: infoDefault }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport const editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: '#2D2D30', light: Color.white, hc: '#0C141F' }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n\nregisterThemingParticipant((theme, collector) => {\n\tconst link = theme.getColor(textLinkForeground);\n\tif (link) {\n\t\tcollector.addRule(`.monaco-editor .marker-widget a { color: ${link}; }`);\n\t}\n});\n"]}]}