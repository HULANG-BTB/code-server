{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/openSymbolHandler.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/openSymbolHandler.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar nls = require(\"vs/nls\");\nvar errors_1 = require(\"vs/base/common/errors\");\nvar async_1 = require(\"vs/base/common/async\");\nvar quickopen_1 = require(\"vs/workbench/browser/quickopen\");\nvar quickOpenModel_1 = require(\"vs/base/parts/quickopen/browser/quickOpenModel\");\nvar quickOpen_1 = require(\"vs/base/parts/quickopen/common/quickOpen\");\nvar filters = require(\"vs/base/common/filters\");\nvar strings = require(\"vs/base/common/strings\");\nvar range_1 = require(\"vs/editor/common/core/range\");\nvar modes_1 = require(\"vs/editor/common/modes\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar search_1 = require(\"vs/workbench/contrib/search/common/search\");\nvar resources_1 = require(\"vs/base/common/resources\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar label_1 = require(\"vs/platform/label/common/label\");\nvar cancellation_1 = require(\"vs/base/common/cancellation\");\nvar network_1 = require(\"vs/base/common/network\");\nvar opener_1 = require(\"vs/platform/opener/common/opener\");\nvar types_1 = require(\"vs/base/common/types\");\nvar SymbolEntry = /** @class */ (function (_super) {\n    tslib_1.__extends(SymbolEntry, _super);\n    function SymbolEntry(bearing, provider, configurationService, editorService, labelService, openerService) {\n        var _this = _super.call(this, editorService) || this;\n        _this.bearing = bearing;\n        _this.provider = provider;\n        _this.configurationService = configurationService;\n        _this.labelService = labelService;\n        _this.openerService = openerService;\n        return _this;\n    }\n    SymbolEntry.prototype.getLabel = function () {\n        return this.bearing.name;\n    };\n    SymbolEntry.prototype.getAriaLabel = function () {\n        return nls.localize('entryAriaLabel', \"{0}, symbols picker\", this.getLabel());\n    };\n    SymbolEntry.prototype.getDescription = function () {\n        var containerName = this.bearing.containerName;\n        if (this.bearing.location.uri) {\n            if (containerName) {\n                return containerName + \" \\u2014 \" + resources_1.basename(this.bearing.location.uri);\n            }\n            return this.labelService.getUriLabel(this.bearing.location.uri, { relative: true });\n        }\n        return types_1.withUndefinedAsNull(containerName);\n    };\n    SymbolEntry.prototype.getIcon = function () {\n        return modes_1.symbolKindToCssClass(this.bearing.kind);\n    };\n    SymbolEntry.prototype.getResource = function () {\n        return this.bearing.location.uri;\n    };\n    SymbolEntry.prototype.run = function (mode, context) {\n        var _this = this;\n        // resolve this type bearing if neccessary\n        if (!this.bearingResolve && typeof this.provider.resolveWorkspaceSymbol === 'function' && !this.bearing.location.range) {\n            this.bearingResolve = Promise.resolve(this.provider.resolveWorkspaceSymbol(this.bearing, cancellation_1.CancellationToken.None)).then(function (result) {\n                _this.bearing = result || _this.bearing;\n                return _this;\n            }, errors_1.onUnexpectedError);\n        }\n        // open after resolving\n        Promise.resolve(this.bearingResolve).then(function () {\n            var scheme = _this.bearing.location.uri ? _this.bearing.location.uri.scheme : undefined;\n            if (scheme === network_1.Schemas.http || scheme === network_1.Schemas.https) {\n                if (mode === quickOpen_1.Mode.OPEN || mode === quickOpen_1.Mode.OPEN_IN_BACKGROUND) {\n                    _this.openerService.open(_this.bearing.location.uri); // support http/https resources (https://github.com/Microsoft/vscode/issues/58924))\n                }\n            }\n            else {\n                _super.prototype.run.call(_this, mode, context);\n            }\n        });\n        // hide if OPEN\n        return mode === quickOpen_1.Mode.OPEN;\n    };\n    SymbolEntry.prototype.getInput = function () {\n        var input = {\n            resource: this.bearing.location.uri,\n            options: {\n                pinned: !this.configurationService.getValue().workbench.editor.enablePreviewFromQuickOpen\n            }\n        };\n        if (this.bearing.location.range) {\n            input.options.selection = range_1.Range.collapseToStart(this.bearing.location.range);\n        }\n        return input;\n    };\n    SymbolEntry.compare = function (elementA, elementB, searchValue) {\n        // Sort by Type if name is identical\n        var elementAName = elementA.getLabel().toLowerCase();\n        var elementBName = elementB.getLabel().toLowerCase();\n        if (elementAName === elementBName) {\n            var elementAType = modes_1.symbolKindToCssClass(elementA.bearing.kind);\n            var elementBType = modes_1.symbolKindToCssClass(elementB.bearing.kind);\n            return elementAType.localeCompare(elementBType);\n        }\n        return quickOpenModel_1.compareEntries(elementA, elementB, searchValue);\n    };\n    SymbolEntry = tslib_1.__decorate([\n        tslib_1.__param(2, configuration_1.IConfigurationService),\n        tslib_1.__param(3, editorService_1.IEditorService),\n        tslib_1.__param(4, label_1.ILabelService),\n        tslib_1.__param(5, opener_1.IOpenerService)\n    ], SymbolEntry);\n    return SymbolEntry;\n}(quickopen_1.EditorQuickOpenEntry));\nvar OpenSymbolHandler = /** @class */ (function (_super) {\n    tslib_1.__extends(OpenSymbolHandler, _super);\n    function OpenSymbolHandler(instantiationService) {\n        var _this = _super.call(this) || this;\n        _this.instantiationService = instantiationService;\n        _this.delayer = new async_1.ThrottledDelayer(OpenSymbolHandler.TYPING_SEARCH_DELAY);\n        _this.options = Object.create(null);\n        return _this;\n    }\n    OpenSymbolHandler.prototype.setOptions = function (options) {\n        this.options = options;\n    };\n    OpenSymbolHandler.prototype.canRun = function () {\n        return true;\n    };\n    OpenSymbolHandler.prototype.getResults = function (searchValue, token) {\n        var _this = this;\n        searchValue = searchValue.trim();\n        var promise;\n        if (!this.options.skipDelay) {\n            promise = this.delayer.trigger(function () {\n                if (token.isCancellationRequested) {\n                    return Promise.resolve([]);\n                }\n                return _this.doGetResults(searchValue, token);\n            });\n        }\n        else {\n            promise = this.doGetResults(searchValue, token);\n        }\n        return promise.then(function (e) { return new quickOpenModel_1.QuickOpenModel(e); });\n    };\n    OpenSymbolHandler.prototype.doGetResults = function (searchValue, token) {\n        var _this = this;\n        return search_1.getWorkspaceSymbols(searchValue, token).then(function (tuples) {\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            var result = [];\n            for (var _i = 0, tuples_1 = tuples; _i < tuples_1.length; _i++) {\n                var tuple = tuples_1[_i];\n                var provider = tuple[0], bearings = tuple[1];\n                _this.fillInSymbolEntries(result, provider, bearings, searchValue);\n            }\n            // Sort (Standalone only)\n            if (!_this.options.skipSorting) {\n                searchValue = searchValue ? strings.stripWildcards(searchValue.toLowerCase()) : searchValue;\n                return result.sort(function (a, b) { return SymbolEntry.compare(a, b, searchValue); });\n            }\n            return result;\n        });\n    };\n    OpenSymbolHandler.prototype.fillInSymbolEntries = function (bucket, provider, types, searchValue) {\n        // Convert to Entries\n        for (var _i = 0, types_2 = types; _i < types_2.length; _i++) {\n            var element = types_2[_i];\n            if (this.options.skipLocalSymbols && !!element.containerName) {\n                continue; // ignore local symbols if we are told so\n            }\n            var entry = this.instantiationService.createInstance(SymbolEntry, element, provider);\n            entry.setHighlights(filters.matchesFuzzy2(searchValue, entry.getLabel()) || []);\n            bucket.push(entry);\n        }\n    };\n    OpenSymbolHandler.prototype.getGroupLabel = function () {\n        return nls.localize('symbols', \"symbol results\");\n    };\n    OpenSymbolHandler.prototype.getEmptyLabel = function (searchString) {\n        if (searchString.length > 0) {\n            return nls.localize('noSymbolsMatching', \"No symbols matching\");\n        }\n        return nls.localize('noSymbolsWithoutInput', \"Type to search for symbols\");\n    };\n    OpenSymbolHandler.prototype.getAutoFocus = function (searchValue) {\n        return {\n            autoFocusFirstEntry: true,\n            autoFocusPrefixMatch: searchValue.trim()\n        };\n    };\n    OpenSymbolHandler.ID = 'workbench.picker.symbols';\n    OpenSymbolHandler.TYPING_SEARCH_DELAY = 200; // This delay accommodates for the user typing a word and then stops typing to start searching\n    OpenSymbolHandler = tslib_1.__decorate([\n        tslib_1.__param(0, instantiation_1.IInstantiationService)\n    ], OpenSymbolHandler);\n    return OpenSymbolHandler;\n}(quickopen_1.QuickOpenHandler));\nexports.OpenSymbolHandler = OpenSymbolHandler;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/openSymbolHandler.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/search/browser/openSymbolHandler.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { URI } from 'vs/base/common/uri';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { ThrottledDelayer } from 'vs/base/common/async';\nimport { QuickOpenHandler, EditorQuickOpenEntry } from 'vs/workbench/browser/quickopen';\nimport { QuickOpenModel, QuickOpenEntry, compareEntries } from 'vs/base/parts/quickopen/browser/quickOpenModel';\nimport { IAutoFocus, Mode, IEntryRunContext } from 'vs/base/parts/quickopen/common/quickOpen';\nimport * as filters from 'vs/base/common/filters';\nimport * as strings from 'vs/base/common/strings';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IWorkbenchEditorConfiguration } from 'vs/workbench/common/editor';\nimport { symbolKindToCssClass } from 'vs/editor/common/modes';\nimport { IResourceInput } from 'vs/platform/editor/common/editor';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IWorkspaceSymbolProvider, getWorkspaceSymbols, IWorkspaceSymbol } from 'vs/workbench/contrib/search/common/search';\nimport { basename } from 'vs/base/common/resources';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { Schemas } from 'vs/base/common/network';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { withUndefinedAsNull } from 'vs/base/common/types';\n\nclass SymbolEntry extends EditorQuickOpenEntry {\n\tprivate bearingResolve: Promise<this | undefined>;\n\n\tconstructor(\n\t\tprivate bearing: IWorkspaceSymbol,\n\t\tprivate provider: IWorkspaceSymbolProvider,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IOpenerService private readonly openerService: IOpenerService\n\t) {\n\t\tsuper(editorService);\n\t}\n\n\tgetLabel(): string {\n\t\treturn this.bearing.name;\n\t}\n\n\tgetAriaLabel(): string {\n\t\treturn nls.localize('entryAriaLabel', \"{0}, symbols picker\", this.getLabel());\n\t}\n\n\tgetDescription(): string | null {\n\t\tconst containerName = this.bearing.containerName;\n\t\tif (this.bearing.location.uri) {\n\t\t\tif (containerName) {\n\t\t\t\treturn `${containerName} â€” ${basename(this.bearing.location.uri)}`;\n\t\t\t}\n\n\t\t\treturn this.labelService.getUriLabel(this.bearing.location.uri, { relative: true });\n\t\t}\n\n\t\treturn withUndefinedAsNull(containerName);\n\t}\n\n\tgetIcon(): string {\n\t\treturn symbolKindToCssClass(this.bearing.kind);\n\t}\n\n\tgetResource(): URI {\n\t\treturn this.bearing.location.uri;\n\t}\n\n\trun(mode: Mode, context: IEntryRunContext): boolean {\n\n\t\t// resolve this type bearing if neccessary\n\t\tif (!this.bearingResolve && typeof this.provider.resolveWorkspaceSymbol === 'function' && !this.bearing.location.range) {\n\t\t\tthis.bearingResolve = Promise.resolve(this.provider.resolveWorkspaceSymbol(this.bearing, CancellationToken.None)).then(result => {\n\t\t\t\tthis.bearing = result || this.bearing;\n\n\t\t\t\treturn this;\n\t\t\t}, onUnexpectedError);\n\t\t}\n\n\t\t// open after resolving\n\t\tPromise.resolve(this.bearingResolve).then(() => {\n\t\t\tconst scheme = this.bearing.location.uri ? this.bearing.location.uri.scheme : undefined;\n\t\t\tif (scheme === Schemas.http || scheme === Schemas.https) {\n\t\t\t\tif (mode === Mode.OPEN || mode === Mode.OPEN_IN_BACKGROUND) {\n\t\t\t\t\tthis.openerService.open(this.bearing.location.uri); // support http/https resources (https://github.com/Microsoft/vscode/issues/58924))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsuper.run(mode, context);\n\t\t\t}\n\t\t});\n\n\t\t// hide if OPEN\n\t\treturn mode === Mode.OPEN;\n\t}\n\n\tgetInput(): IResourceInput {\n\t\tconst input: IResourceInput = {\n\t\t\tresource: this.bearing.location.uri,\n\t\t\toptions: {\n\t\t\t\tpinned: !this.configurationService.getValue<IWorkbenchEditorConfiguration>().workbench.editor.enablePreviewFromQuickOpen\n\t\t\t}\n\t\t};\n\n\t\tif (this.bearing.location.range) {\n\t\t\tinput.options!.selection = Range.collapseToStart(this.bearing.location.range);\n\t\t}\n\n\t\treturn input;\n\t}\n\n\tstatic compare(elementA: SymbolEntry, elementB: SymbolEntry, searchValue: string): number {\n\n\t\t// Sort by Type if name is identical\n\t\tconst elementAName = elementA.getLabel().toLowerCase();\n\t\tconst elementBName = elementB.getLabel().toLowerCase();\n\t\tif (elementAName === elementBName) {\n\t\t\tlet elementAType = symbolKindToCssClass(elementA.bearing.kind);\n\t\t\tlet elementBType = symbolKindToCssClass(elementB.bearing.kind);\n\t\t\treturn elementAType.localeCompare(elementBType);\n\t\t}\n\n\t\treturn compareEntries(elementA, elementB, searchValue);\n\t}\n}\n\nexport interface IOpenSymbolOptions {\n\tskipSorting: boolean;\n\tskipLocalSymbols: boolean;\n\tskipDelay: boolean;\n}\n\nexport class OpenSymbolHandler extends QuickOpenHandler {\n\n\tstatic readonly ID = 'workbench.picker.symbols';\n\n\tprivate static readonly TYPING_SEARCH_DELAY = 200; // This delay accommodates for the user typing a word and then stops typing to start searching\n\n\tprivate delayer: ThrottledDelayer<QuickOpenEntry[]>;\n\tprivate options: IOpenSymbolOptions;\n\n\tconstructor(@IInstantiationService private readonly instantiationService: IInstantiationService) {\n\t\tsuper();\n\n\t\tthis.delayer = new ThrottledDelayer<QuickOpenEntry[]>(OpenSymbolHandler.TYPING_SEARCH_DELAY);\n\t\tthis.options = Object.create(null);\n\t}\n\n\tsetOptions(options: IOpenSymbolOptions) {\n\t\tthis.options = options;\n\t}\n\n\tcanRun(): boolean | string {\n\t\treturn true;\n\t}\n\n\tgetResults(searchValue: string, token: CancellationToken): Promise<QuickOpenModel> {\n\t\tsearchValue = searchValue.trim();\n\n\t\tlet promise: Promise<QuickOpenEntry[]>;\n\t\tif (!this.options.skipDelay) {\n\t\t\tpromise = this.delayer.trigger(() => {\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn Promise.resolve([]);\n\t\t\t\t}\n\n\t\t\t\treturn this.doGetResults(searchValue, token);\n\t\t\t});\n\t\t} else {\n\t\t\tpromise = this.doGetResults(searchValue, token);\n\t\t}\n\n\t\treturn promise.then(e => new QuickOpenModel(e));\n\t}\n\n\tprivate doGetResults(searchValue: string, token: CancellationToken): Promise<SymbolEntry[]> {\n\t\treturn getWorkspaceSymbols(searchValue, token).then(tuples => {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst result: SymbolEntry[] = [];\n\t\t\tfor (let tuple of tuples) {\n\t\t\t\tconst [provider, bearings] = tuple;\n\t\t\t\tthis.fillInSymbolEntries(result, provider, bearings, searchValue);\n\t\t\t}\n\n\t\t\t// Sort (Standalone only)\n\t\t\tif (!this.options.skipSorting) {\n\t\t\t\tsearchValue = searchValue ? strings.stripWildcards(searchValue.toLowerCase()) : searchValue;\n\t\t\t\treturn result.sort((a, b) => SymbolEntry.compare(a, b, searchValue));\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tprivate fillInSymbolEntries(bucket: SymbolEntry[], provider: IWorkspaceSymbolProvider, types: IWorkspaceSymbol[], searchValue: string): void {\n\n\t\t// Convert to Entries\n\t\tfor (let element of types) {\n\t\t\tif (this.options.skipLocalSymbols && !!element.containerName) {\n\t\t\t\tcontinue; // ignore local symbols if we are told so\n\t\t\t}\n\n\t\t\tconst entry = this.instantiationService.createInstance(SymbolEntry, element, provider);\n\t\t\tentry.setHighlights(filters.matchesFuzzy2(searchValue, entry.getLabel()) || []);\n\t\t\tbucket.push(entry);\n\t\t}\n\t}\n\n\tgetGroupLabel(): string {\n\t\treturn nls.localize('symbols', \"symbol results\");\n\t}\n\n\tgetEmptyLabel(searchString: string): string {\n\t\tif (searchString.length > 0) {\n\t\t\treturn nls.localize('noSymbolsMatching', \"No symbols matching\");\n\t\t}\n\t\treturn nls.localize('noSymbolsWithoutInput', \"Type to search for symbols\");\n\t}\n\n\tgetAutoFocus(searchValue: string): IAutoFocus {\n\t\treturn {\n\t\t\tautoFocusFirstEntry: true,\n\t\t\tautoFocusPrefixMatch: searchValue.trim()\n\t\t};\n\t}\n}\n"]}]}