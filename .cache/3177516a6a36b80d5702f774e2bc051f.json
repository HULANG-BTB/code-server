{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/node/id.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/node/id.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar errors = require(\"vs/base/common/errors\");\nvar uuid = require(\"vs/base/common/uuid\");\nvar os_1 = require(\"os\");\nvar map_1 = require(\"vs/base/common/map\");\n// http://www.techrepublic.com/blog/data-center/mac-address-scorecard-for-common-virtual-machine-platforms/\n// VMware ESX 3, Server, Workstation, Player\t00-50-56, 00-0C-29, 00-05-69\n// Microsoft Hyper-V, Virtual Server, Virtual PC\t00-03-FF\n// Parallells Desktop, Workstation, Server, Virtuozzo\t00-1C-42\n// Virtual Iron 4\t00-0F-4B\n// Red Hat Xen\t00-16-3E\n// Oracle VM\t00-16-3E\n// XenSource\t00-16-3E\n// Novell Xen\t00-16-3E\n// Sun xVM VirtualBox\t08-00-27\nexports.virtualMachineHint = new /** @class */ (function () {\n    function class_1() {\n    }\n    class_1.prototype._isVirtualMachineMacAdress = function (mac) {\n        if (!this._virtualMachineOUIs) {\n            this._virtualMachineOUIs = map_1.TernarySearchTree.forStrings();\n            // dash-separated\n            this._virtualMachineOUIs.set('00-50-56', true);\n            this._virtualMachineOUIs.set('00-0C-29', true);\n            this._virtualMachineOUIs.set('00-05-69', true);\n            this._virtualMachineOUIs.set('00-03-FF', true);\n            this._virtualMachineOUIs.set('00-1C-42', true);\n            this._virtualMachineOUIs.set('00-16-3E', true);\n            this._virtualMachineOUIs.set('08-00-27', true);\n            // colon-separated\n            this._virtualMachineOUIs.set('00:50:56', true);\n            this._virtualMachineOUIs.set('00:0C:29', true);\n            this._virtualMachineOUIs.set('00:05:69', true);\n            this._virtualMachineOUIs.set('00:03:FF', true);\n            this._virtualMachineOUIs.set('00:1C:42', true);\n            this._virtualMachineOUIs.set('00:16:3E', true);\n            this._virtualMachineOUIs.set('08:00:27', true);\n        }\n        return !!this._virtualMachineOUIs.findSubstr(mac);\n    };\n    class_1.prototype.value = function () {\n        if (this._value === undefined) {\n            var vmOui = 0;\n            var interfaceCount = 0;\n            var interfaces = os_1.networkInterfaces();\n            for (var name in interfaces) {\n                if (Object.prototype.hasOwnProperty.call(interfaces, name)) {\n                    for (var _i = 0, _a = interfaces[name]; _i < _a.length; _i++) {\n                        var _b = _a[_i], mac = _b.mac, internal = _b.internal;\n                        if (!internal) {\n                            interfaceCount += 1;\n                            if (this._isVirtualMachineMacAdress(mac.toUpperCase())) {\n                                vmOui += 1;\n                            }\n                        }\n                    }\n                }\n            }\n            this._value = interfaceCount > 0\n                ? vmOui / interfaceCount\n                : 0;\n        }\n        return this._value;\n    };\n    return class_1;\n}());\nvar machineId;\nfunction getMachineId() {\n    return machineId || (machineId = getMacMachineId()\n        .then(function (id) { return id || uuid.generateUuid(); })); // fallback, generate a UUID\n}\nexports.getMachineId = getMachineId;\nfunction getMacMachineId() {\n    return new Promise(function (resolve) {\n        Promise.all([Promise.resolve().then(function () { return require('crypto'); }), Promise.resolve().then(function () { return require('getmac'); })]).then(function (_a) {\n            var crypto = _a[0], getmac = _a[1];\n            try {\n                getmac.getMac(function (error, macAddress) {\n                    if (!error) {\n                        resolve(crypto.createHash('sha256').update(macAddress, 'utf8').digest('hex'));\n                    }\n                    else {\n                        resolve(undefined);\n                    }\n                });\n                // Timeout due to hang with reduced privileges #58392\n                // TODO@sbatten: Remove this when getmac is patched\n                setTimeout(function () {\n                    resolve(undefined);\n                }, 10000);\n            }\n            catch (err) {\n                errors.onUnexpectedError(err);\n                resolve(undefined);\n            }\n        }, function (err) {\n            errors.onUnexpectedError(err);\n            resolve(undefined);\n        });\n    });\n}\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/node/id.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/node/id.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as errors from 'vs/base/common/errors';\nimport * as uuid from 'vs/base/common/uuid';\nimport { networkInterfaces } from 'os';\nimport { TernarySearchTree } from 'vs/base/common/map';\n\n// http://www.techrepublic.com/blog/data-center/mac-address-scorecard-for-common-virtual-machine-platforms/\n// VMware ESX 3, Server, Workstation, Player\t00-50-56, 00-0C-29, 00-05-69\n// Microsoft Hyper-V, Virtual Server, Virtual PC\t00-03-FF\n// Parallells Desktop, Workstation, Server, Virtuozzo\t00-1C-42\n// Virtual Iron 4\t00-0F-4B\n// Red Hat Xen\t00-16-3E\n// Oracle VM\t00-16-3E\n// XenSource\t00-16-3E\n// Novell Xen\t00-16-3E\n// Sun xVM VirtualBox\t08-00-27\nexport const virtualMachineHint: { value(): number } = new class {\n\n\tprivate _virtualMachineOUIs?: TernarySearchTree<boolean>;\n\tprivate _value?: number;\n\n\tprivate _isVirtualMachineMacAdress(mac: string): boolean {\n\t\tif (!this._virtualMachineOUIs) {\n\t\t\tthis._virtualMachineOUIs = TernarySearchTree.forStrings<boolean>();\n\n\t\t\t// dash-separated\n\t\t\tthis._virtualMachineOUIs.set('00-50-56', true);\n\t\t\tthis._virtualMachineOUIs.set('00-0C-29', true);\n\t\t\tthis._virtualMachineOUIs.set('00-05-69', true);\n\t\t\tthis._virtualMachineOUIs.set('00-03-FF', true);\n\t\t\tthis._virtualMachineOUIs.set('00-1C-42', true);\n\t\t\tthis._virtualMachineOUIs.set('00-16-3E', true);\n\t\t\tthis._virtualMachineOUIs.set('08-00-27', true);\n\n\t\t\t// colon-separated\n\t\t\tthis._virtualMachineOUIs.set('00:50:56', true);\n\t\t\tthis._virtualMachineOUIs.set('00:0C:29', true);\n\t\t\tthis._virtualMachineOUIs.set('00:05:69', true);\n\t\t\tthis._virtualMachineOUIs.set('00:03:FF', true);\n\t\t\tthis._virtualMachineOUIs.set('00:1C:42', true);\n\t\t\tthis._virtualMachineOUIs.set('00:16:3E', true);\n\t\t\tthis._virtualMachineOUIs.set('08:00:27', true);\n\t\t}\n\t\treturn !!this._virtualMachineOUIs.findSubstr(mac);\n\t}\n\n\tvalue(): number {\n\t\tif (this._value === undefined) {\n\t\t\tlet vmOui = 0;\n\t\t\tlet interfaceCount = 0;\n\n\t\t\tconst interfaces = networkInterfaces();\n\t\t\tfor (let name in interfaces) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(interfaces, name)) {\n\t\t\t\t\tfor (const { mac, internal } of interfaces[name]) {\n\t\t\t\t\t\tif (!internal) {\n\t\t\t\t\t\t\tinterfaceCount += 1;\n\t\t\t\t\t\t\tif (this._isVirtualMachineMacAdress(mac.toUpperCase())) {\n\t\t\t\t\t\t\t\tvmOui += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._value = interfaceCount > 0\n\t\t\t\t? vmOui / interfaceCount\n\t\t\t\t: 0;\n\t\t}\n\n\t\treturn this._value;\n\t}\n};\n\nlet machineId: Promise<string>;\nexport function getMachineId(): Promise<string> {\n\treturn machineId || (machineId = getMacMachineId()\n\t\t.then(id => id || uuid.generateUuid())); // fallback, generate a UUID\n}\n\nfunction getMacMachineId(): Promise<string> {\n\treturn new Promise<string>(resolve => {\n\t\tPromise.all([import('crypto'), import('getmac')]).then(([crypto, getmac]) => {\n\t\t\ttry {\n\t\t\t\tgetmac.getMac((error, macAddress) => {\n\t\t\t\t\tif (!error) {\n\t\t\t\t\t\tresolve(crypto.createHash('sha256').update(macAddress, 'utf8').digest('hex'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(undefined);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Timeout due to hang with reduced privileges #58392\n\t\t\t\t// TODO@sbatten: Remove this when getmac is patched\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}, 10000);\n\t\t\t} catch (err) {\n\t\t\t\terrors.onUnexpectedError(err);\n\t\t\t\tresolve(undefined);\n\t\t\t}\n\t\t}, err => {\n\t\t\terrors.onUnexpectedError(err);\n\t\t\tresolve(undefined);\n\t\t});\n\t});\n}\n"]}]}