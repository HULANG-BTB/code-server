{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/welcome/page/browser/welcomePage.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/welcome/page/browser/welcomePage.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./welcomePage\");\nvar uri_1 = require(\"vs/base/common/uri\");\nvar strings = require(\"vs/base/common/strings\");\nvar commands_1 = require(\"vs/platform/commands/common/commands\");\nvar arrays = require(\"vs/base/common/arrays\");\nvar walkThroughInput_1 = require(\"vs/workbench/contrib/welcome/walkThrough/common/walkThroughInput\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar errors_1 = require(\"vs/base/common/errors\");\nvar windows_1 = require(\"vs/platform/windows/common/windows\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar nls_1 = require(\"vs/nls\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar telemetry_1 = require(\"vs/platform/telemetry/common/telemetry\");\nvar network_1 = require(\"vs/base/common/network\");\nvar backup_1 = require(\"vs/workbench/services/backup/common/backup\");\nvar extensionsUtils_1 = require(\"vs/workbench/contrib/extensions/common/extensionsUtils\");\nvar extensionManagement_1 = require(\"vs/platform/extensionManagement/common/extensionManagement\");\nvar vs_code_welcome_page_1 = require(\"vs/workbench/contrib/welcome/page/browser/vs_code_welcome_page\");\nvar lifecycle_1 = require(\"vs/platform/lifecycle/common/lifecycle\");\nvar lifecycle_2 = require(\"vs/base/common/lifecycle\");\nvar labels_1 = require(\"vs/base/common/labels\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar walkThroughUtils_1 = require(\"vs/workbench/contrib/welcome/walkThrough/common/walkThroughUtils\");\nvar extensions_1 = require(\"vs/workbench/contrib/extensions/common/extensions\");\nvar notification_1 = require(\"vs/platform/notification/common/notification\");\nvar async_1 = require(\"vs/base/common/async\");\nvar extensionManagementUtil_1 = require(\"vs/platform/extensionManagement/common/extensionManagementUtil\");\nvar label_1 = require(\"vs/platform/label/common/label\");\nvar files_1 = require(\"vs/platform/files/common/files\");\nvar extensions_2 = require(\"vs/platform/extensions/common/extensions\");\nvar resources_1 = require(\"vs/base/common/resources\");\nvar history_1 = require(\"vs/platform/history/common/history\");\nvar cancellation_1 = require(\"vs/base/common/cancellation\");\nvs_code_welcome_page_1.used();\nvar configurationKey = 'workbench.startupEditor';\nvar oldConfigurationKey = 'workbench.welcome.enabled';\nvar telemetryFrom = 'welcomePage';\nvar WelcomePageContribution = /** @class */ (function () {\n    function WelcomePageContribution(instantiationService, configurationService, editorService, backupFileService, fileService, contextService, lifecycleService, commandService) {\n        var _this = this;\n        this.commandService = commandService;\n        var enabled = isWelcomePageEnabled(configurationService, contextService);\n        if (enabled && lifecycleService.startupKind !== lifecycle_1.StartupKind.ReloadedWindow) {\n            backupFileService.hasBackups().then(function (hasBackups) {\n                var activeEditor = editorService.activeEditor;\n                if (!activeEditor && !hasBackups) {\n                    var openWithReadme = configurationService.getValue(configurationKey) === 'readme';\n                    if (openWithReadme) {\n                        return Promise.all(contextService.getWorkspace().folders.map(function (folder) {\n                            var folderUri = folder.uri;\n                            return fileService.resolveFile(folderUri)\n                                .then(function (folder) {\n                                var files = folder.children ? folder.children.map(function (child) { return child.name; }) : [];\n                                var file = arrays.find(files.sort(), function (file) { return strings.startsWith(file.toLowerCase(), 'readme'); });\n                                if (file) {\n                                    return resources_1.joinPath(folderUri, file);\n                                }\n                                return undefined;\n                            }, errors_1.onUnexpectedError);\n                        })).then(arrays.coalesce)\n                            .then(function (readmes) {\n                            if (!editorService.activeEditor) {\n                                if (readmes.length) {\n                                    var isMarkDown_1 = function (readme) { return strings.endsWith(readme.path.toLowerCase(), '.md'); };\n                                    return Promise.all([\n                                        _this.commandService.executeCommand('markdown.showPreview', null, readmes.filter(isMarkDown_1), { locked: true }),\n                                        editorService.openEditors(readmes.filter(function (readme) { return !isMarkDown_1(readme); })\n                                            .map(function (readme) { return ({ resource: readme }); })),\n                                    ]);\n                                }\n                                else {\n                                    return instantiationService.createInstance(WelcomePage).openEditor();\n                                }\n                            }\n                            return undefined;\n                        });\n                    }\n                    else {\n                        return instantiationService.createInstance(WelcomePage).openEditor();\n                    }\n                }\n                return undefined;\n            }).then(undefined, errors_1.onUnexpectedError);\n        }\n    }\n    WelcomePageContribution = tslib_1.__decorate([\n        tslib_1.__param(0, instantiation_1.IInstantiationService),\n        tslib_1.__param(1, configuration_1.IConfigurationService),\n        tslib_1.__param(2, editorService_1.IEditorService),\n        tslib_1.__param(3, backup_1.IBackupFileService),\n        tslib_1.__param(4, files_1.IFileService),\n        tslib_1.__param(5, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(6, lifecycle_1.ILifecycleService),\n        tslib_1.__param(7, commands_1.ICommandService)\n    ], WelcomePageContribution);\n    return WelcomePageContribution;\n}());\nexports.WelcomePageContribution = WelcomePageContribution;\nfunction isWelcomePageEnabled(configurationService, contextService) {\n    var startupEditor = configurationService.inspect(configurationKey);\n    if (!startupEditor.user && !startupEditor.workspace) {\n        var welcomeEnabled = configurationService.inspect(oldConfigurationKey);\n        if (welcomeEnabled.value !== undefined && welcomeEnabled.value !== null) {\n            return welcomeEnabled.value;\n        }\n    }\n    return startupEditor.value === 'welcomePage' || startupEditor.value === 'readme' || startupEditor.value === 'welcomePageInEmptyWorkbench' && contextService.getWorkbenchState() === workspace_1.WorkbenchState.EMPTY;\n}\nvar WelcomePageAction = /** @class */ (function (_super) {\n    tslib_1.__extends(WelcomePageAction, _super);\n    function WelcomePageAction(id, label, instantiationService) {\n        var _this = _super.call(this, id, label) || this;\n        _this.instantiationService = instantiationService;\n        return _this;\n    }\n    WelcomePageAction.prototype.run = function () {\n        return this.instantiationService.createInstance(WelcomePage)\n            .openEditor()\n            .then(function () { return undefined; });\n    };\n    WelcomePageAction.ID = 'workbench.action.showWelcomePage';\n    WelcomePageAction.LABEL = nls_1.localize('welcomePage', \"Welcome\");\n    WelcomePageAction = tslib_1.__decorate([\n        tslib_1.__param(2, instantiation_1.IInstantiationService)\n    ], WelcomePageAction);\n    return WelcomePageAction;\n}(actions_1.Action));\nexports.WelcomePageAction = WelcomePageAction;\nvar extensionPacks = [\n    { name: nls_1.localize('welcomePage.javaScript', \"JavaScript\"), id: 'dbaeumer.vscode-eslint' },\n    { name: nls_1.localize('welcomePage.typeScript', \"TypeScript\"), id: 'ms-vscode.vscode-typescript-tslint-plugin' },\n    { name: nls_1.localize('welcomePage.python', \"Python\"), id: 'ms-python.python' },\n    // { name: localize('welcomePage.go', \"Go\"), id: 'lukehoban.go' },\n    { name: nls_1.localize('welcomePage.php', \"PHP\"), id: 'felixfbecker.php-pack' },\n    { name: nls_1.localize('welcomePage.azure', \"Azure\"), title: nls_1.localize('welcomePage.showAzureExtensions', \"Show Azure extensions\"), id: 'workbench.extensions.action.showAzureExtensions', isCommand: true },\n    { name: nls_1.localize('welcomePage.docker', \"Docker\"), id: 'peterjausovec.vscode-docker' },\n];\nvar keymapExtensions = [\n    { name: nls_1.localize('welcomePage.vim', \"Vim\"), id: 'vscodevim.vim', isKeymap: true },\n    { name: nls_1.localize('welcomePage.sublime', \"Sublime\"), id: 'ms-vscode.sublime-keybindings', isKeymap: true },\n    { name: nls_1.localize('welcomePage.atom', \"Atom\"), id: 'ms-vscode.atom-keybindings', isKeymap: true },\n];\n/* __GDPR__\n    \"installExtension\" : {\n        \"${include}\": [\n            \"${WelcomePageInstall-1}\"\n        ]\n    }\n*/\n/* __GDPR__\n    \"installedExtension\" : {\n        \"${include}\": [\n            \"${WelcomePageInstalled-1}\",\n            \"${WelcomePageInstalled-2}\",\n            \"${WelcomePageInstalled-3}\",\n            \"${WelcomePageInstalled-4}\",\n            \"${WelcomePageInstalled-6}\"\n        ]\n    }\n*/\n/* __GDPR__\n    \"detailsExtension\" : {\n        \"${include}\": [\n            \"${WelcomePageDetails-1}\"\n        ]\n    }\n*/\nvar extensionPackStrings = {\n    installEvent: 'installExtension',\n    installedEvent: 'installedExtension',\n    detailsEvent: 'detailsExtension',\n    alreadyInstalled: nls_1.localize('welcomePage.extensionPackAlreadyInstalled', \"Support for {0} is already installed.\"),\n    reloadAfterInstall: nls_1.localize('welcomePage.willReloadAfterInstallingExtensionPack', \"The window will reload after installing additional support for {0}.\"),\n    installing: nls_1.localize('welcomePage.installingExtensionPack', \"Installing additional support for {0}...\"),\n    extensionNotFound: nls_1.localize('welcomePage.extensionPackNotFound', \"Support for {0} with id {1} could not be found.\"),\n};\n/* __GDPR__\n    \"installKeymap\" : {\n        \"${include}\": [\n            \"${WelcomePageInstall-1}\"\n        ]\n    }\n*/\n/* __GDPR__\n    \"installedKeymap\" : {\n        \"${include}\": [\n            \"${WelcomePageInstalled-1}\",\n            \"${WelcomePageInstalled-2}\",\n            \"${WelcomePageInstalled-3}\",\n            \"${WelcomePageInstalled-4}\",\n            \"${WelcomePageInstalled-6}\"\n        ]\n    }\n*/\n/* __GDPR__\n    \"detailsKeymap\" : {\n        \"${include}\": [\n            \"${WelcomePageDetails-1}\"\n        ]\n    }\n*/\nvar keymapStrings = {\n    installEvent: 'installKeymap',\n    installedEvent: 'installedKeymap',\n    detailsEvent: 'detailsKeymap',\n    alreadyInstalled: nls_1.localize('welcomePage.keymapAlreadyInstalled', \"The {0} keyboard shortcuts are already installed.\"),\n    reloadAfterInstall: nls_1.localize('welcomePage.willReloadAfterInstallingKeymap', \"The window will reload after installing the {0} keyboard shortcuts.\"),\n    installing: nls_1.localize('welcomePage.installingKeymap', \"Installing the {0} keyboard shortcuts...\"),\n    extensionNotFound: nls_1.localize('welcomePage.keymapNotFound', \"The {0} keyboard shortcuts with id {1} could not be found.\"),\n};\nvar welcomeInputTypeId = 'workbench.editors.welcomePageInput';\nvar WelcomePage = /** @class */ (function () {\n    function WelcomePage(editorService, instantiationService, windowService, contextService, configurationService, labelService, notificationService, extensionEnablementService, extensionGalleryService, extensionManagementService, tipsService, extensionsWorkbenchService, lifecycleService, telemetryService) {\n        var _this = this;\n        this.editorService = editorService;\n        this.instantiationService = instantiationService;\n        this.windowService = windowService;\n        this.contextService = contextService;\n        this.configurationService = configurationService;\n        this.labelService = labelService;\n        this.notificationService = notificationService;\n        this.extensionEnablementService = extensionEnablementService;\n        this.extensionGalleryService = extensionGalleryService;\n        this.extensionManagementService = extensionManagementService;\n        this.tipsService = tipsService;\n        this.extensionsWorkbenchService = extensionsWorkbenchService;\n        this.telemetryService = telemetryService;\n        this.disposables = [];\n        this.disposables.push(lifecycleService.onShutdown(function () { return _this.dispose(); }));\n        var recentlyOpened = this.windowService.getRecentlyOpened();\n        var installedExtensions = this.instantiationService.invokeFunction(extensionsUtils_1.getInstalledExtensions);\n        var resource = uri_1.URI.parse(require.toUrl('./vs_code_welcome_page'))\n            .with({\n            scheme: network_1.Schemas.walkThrough,\n            query: JSON.stringify({ moduleId: 'vs/workbench/contrib/welcome/page/browser/vs_code_welcome_page' })\n        });\n        this.editorInput = this.instantiationService.createInstance(walkThroughInput_1.WalkThroughInput, {\n            typeId: welcomeInputTypeId,\n            name: nls_1.localize('welcome.title', \"Welcome\"),\n            resource: resource,\n            telemetryFrom: telemetryFrom,\n            onReady: function (container) { return _this.onReady(container, recentlyOpened, installedExtensions); }\n        });\n    }\n    WelcomePage.prototype.openEditor = function () {\n        return this.editorService.openEditor(this.editorInput, { pinned: false });\n    };\n    WelcomePage.prototype.onReady = function (container, recentlyOpened, installedExtensions) {\n        var _this = this;\n        var enabled = isWelcomePageEnabled(this.configurationService, this.contextService);\n        var showOnStartup = container.querySelector('#showOnStartup');\n        if (enabled) {\n            showOnStartup.setAttribute('checked', 'checked');\n        }\n        showOnStartup.addEventListener('click', function (e) {\n            _this.configurationService.updateValue(configurationKey, showOnStartup.checked ? 'welcomePage' : 'newUntitledFile', configuration_1.ConfigurationTarget.USER);\n        });\n        recentlyOpened.then(function (_a) {\n            var workspaces = _a.workspaces;\n            // Filter out the current workspace\n            workspaces = workspaces.filter(function (recent) { return !_this.contextService.isCurrentWorkspace(history_1.isRecentWorkspace(recent) ? recent.workspace : recent.folderUri); });\n            if (!workspaces.length) {\n                var recent = container.querySelector('.welcomePage');\n                recent.classList.add('emptyRecent');\n                return;\n            }\n            var ul = container.querySelector('.recent ul');\n            if (!ul) {\n                return;\n            }\n            var moreRecent = ul.querySelector('.moreRecent');\n            var workspacesToShow = workspaces.slice(0, 5);\n            var updateEntries = function () {\n                var listEntries = _this.createListEntries(workspacesToShow);\n                while (ul.firstChild) {\n                    ul.removeChild(ul.firstChild);\n                }\n                ul.append.apply(ul, listEntries.concat([moreRecent]));\n            };\n            updateEntries();\n            _this.disposables.push(_this.labelService.onDidChangeFormatters(updateEntries));\n        }).then(undefined, errors_1.onUnexpectedError);\n        this.addExtensionList(container, '.extensionPackList', extensionPacks, extensionPackStrings);\n        this.addExtensionList(container, '.keymapList', keymapExtensions, keymapStrings);\n        this.updateInstalledExtensions(container, installedExtensions);\n        this.disposables.push(this.instantiationService.invokeFunction(extensionsUtils_1.onExtensionChanged)(function (ids) {\n            for (var _i = 0, ids_1 = ids; _i < ids_1.length; _i++) {\n                var id = ids_1[_i];\n                if (container.querySelector(\".installExtension[data-extension=\\\"\" + id.id + \"\\\"], .enabledExtension[data-extension=\\\"\" + id.id + \"\\\"]\")) {\n                    var installedExtensions_1 = _this.instantiationService.invokeFunction(extensionsUtils_1.getInstalledExtensions);\n                    _this.updateInstalledExtensions(container, installedExtensions_1);\n                    break;\n                }\n            }\n        }));\n    };\n    WelcomePage.prototype.createListEntries = function (recents) {\n        var _this = this;\n        return recents.map(function (recent) {\n            var fullPath;\n            var resource;\n            var typeHint;\n            if (history_1.isRecentFolder(recent)) {\n                resource = recent.folderUri;\n                fullPath = recent.label || _this.labelService.getWorkspaceLabel(recent.folderUri, { verbose: true });\n                typeHint = 'folder';\n            }\n            else {\n                fullPath = recent.label || _this.labelService.getWorkspaceLabel(recent.workspace, { verbose: true });\n                resource = recent.workspace.configPath;\n                typeHint = 'file';\n            }\n            var _a = labels_1.splitName(fullPath), name = _a.name, parentPath = _a.parentPath;\n            var li = document.createElement('li');\n            var a = document.createElement('a');\n            a.innerText = name;\n            a.title = fullPath;\n            a.setAttribute('aria-label', nls_1.localize('welcomePage.openFolderWithPath', \"Open folder {0} with path {1}\", name, parentPath));\n            a.href = 'javascript:void(0)';\n            a.addEventListener('click', function (e) {\n                /* __GDPR__\n                    \"workbenchActionExecuted\" : {\n                        \"id\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                        \"from\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                    }\n                */\n                _this.telemetryService.publicLog('workbenchActionExecuted', {\n                    id: 'openRecentFolder',\n                    from: telemetryFrom\n                });\n                _this.windowService.openWindow([{ uri: resource, typeHint: typeHint }], { forceNewWindow: e.ctrlKey || e.metaKey });\n                e.preventDefault();\n                e.stopPropagation();\n            });\n            li.appendChild(a);\n            var span = document.createElement('span');\n            span.classList.add('path');\n            span.classList.add('detail');\n            span.innerText = parentPath;\n            span.title = fullPath;\n            li.appendChild(span);\n            return li;\n        });\n    };\n    WelcomePage.prototype.addExtensionList = function (container, listSelector, suggestions, strings) {\n        var _this = this;\n        var list = container.querySelector(listSelector);\n        if (list) {\n            suggestions.forEach(function (extension, i) {\n                if (i) {\n                    list.appendChild(document.createTextNode(nls_1.localize('welcomePage.extensionListSeparator', \", \")));\n                }\n                var a = document.createElement('a');\n                a.innerText = extension.name;\n                a.title = extension.title || (extension.isKeymap ? nls_1.localize('welcomePage.installKeymap', \"Install {0} keymap\", extension.name) : nls_1.localize('welcomePage.installExtensionPack', \"Install additional support for {0}\", extension.name));\n                if (extension.isCommand) {\n                    a.href = \"command:\" + extension.id;\n                    list.appendChild(a);\n                }\n                else {\n                    a.classList.add('installExtension');\n                    a.setAttribute('data-extension', extension.id);\n                    a.href = 'javascript:void(0)';\n                    a.addEventListener('click', function (e) {\n                        _this.installExtension(extension, strings);\n                        e.preventDefault();\n                        e.stopPropagation();\n                    });\n                    list.appendChild(a);\n                    var span = document.createElement('span');\n                    span.innerText = extension.name;\n                    span.title = extension.isKeymap ? nls_1.localize('welcomePage.installedKeymap', \"{0} keymap is already installed\", extension.name) : nls_1.localize('welcomePage.installedExtensionPack', \"{0} support is already installed\", extension.name);\n                    span.classList.add('enabledExtension');\n                    span.setAttribute('data-extension', extension.id);\n                    list.appendChild(span);\n                }\n            });\n        }\n    };\n    WelcomePage.prototype.installExtension = function (extensionSuggestion, strings) {\n        var _this = this;\n        /* __GDPR__FRAGMENT__\n            \"WelcomePageInstall-1\" : {\n                \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n            }\n        */\n        this.telemetryService.publicLog(strings.installEvent, {\n            from: telemetryFrom,\n            extensionId: extensionSuggestion.id,\n        });\n        this.instantiationService.invokeFunction(extensionsUtils_1.getInstalledExtensions).then(function (extensions) {\n            var installedExtension = arrays.first(extensions, function (extension) { return extensionManagementUtil_1.areSameExtensions(extension.identifier, { id: extensionSuggestion.id }); });\n            if (installedExtension && installedExtension.globallyEnabled) {\n                /* __GDPR__FRAGMENT__\n                    \"WelcomePageInstalled-1\" : {\n                        \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                        \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                        \"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                    }\n                */\n                _this.telemetryService.publicLog(strings.installedEvent, {\n                    from: telemetryFrom,\n                    extensionId: extensionSuggestion.id,\n                    outcome: 'already_enabled',\n                });\n                _this.notificationService.info(strings.alreadyInstalled.replace('{0}', extensionSuggestion.name));\n                return;\n            }\n            var foundAndInstalled = installedExtension ? Promise.resolve(installedExtension.local) : _this.extensionGalleryService.query({ names: [extensionSuggestion.id], source: telemetryFrom }, cancellation_1.CancellationToken.None)\n                .then(function (result) {\n                var extension = result.firstPage[0];\n                if (!extension) {\n                    return null;\n                }\n                return _this.extensionManagementService.installFromGallery(extension)\n                    .then(function () { return _this.extensionManagementService.getInstalled(extensions_2.ExtensionType.User); })\n                    .then(function (installed) {\n                    var local = installed.filter(function (i) { return extensionManagementUtil_1.areSameExtensions(extension.identifier, i.identifier); })[0];\n                    // TODO: Do this as part of the install to avoid multiple events.\n                    return _this.extensionEnablementService.setEnablement([local], extensionManagement_1.EnablementState.Disabled).then(function () { return local; });\n                });\n            });\n            _this.notificationService.prompt(notification_1.Severity.Info, strings.reloadAfterInstall.replace('{0}', extensionSuggestion.name), [{\n                    label: nls_1.localize('ok', \"OK\"),\n                    run: function () {\n                        var messageDelay = new async_1.TimeoutTimer();\n                        messageDelay.cancelAndSet(function () {\n                            _this.notificationService.info(strings.installing.replace('{0}', extensionSuggestion.name));\n                        }, 300);\n                        var extensionsToDisable = extensions.filter(function (extension) { return extensionsUtils_1.isKeymapExtension(_this.tipsService, extension) && extension.globallyEnabled; }).map(function (extension) { return extension.local; });\n                        extensionsToDisable.length ? _this.extensionEnablementService.setEnablement(extensionsToDisable, extensionManagement_1.EnablementState.Disabled) : Promise.resolve()\n                            .then(function () {\n                            return foundAndInstalled.then(function (foundExtension) {\n                                messageDelay.cancel();\n                                if (foundExtension) {\n                                    return _this.extensionEnablementService.setEnablement([foundExtension], extensionManagement_1.EnablementState.Enabled)\n                                        .then(function () {\n                                        /* __GDPR__FRAGMENT__\n                                            \"WelcomePageInstalled-2\" : {\n                                                \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                                \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                                \"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                                            }\n                                        */\n                                        _this.telemetryService.publicLog(strings.installedEvent, {\n                                            from: telemetryFrom,\n                                            extensionId: extensionSuggestion.id,\n                                            outcome: installedExtension ? 'enabled' : 'installed',\n                                        });\n                                        return _this.windowService.reloadWindow();\n                                    });\n                                }\n                                else {\n                                    /* __GDPR__FRAGMENT__\n                                        \"WelcomePageInstalled-3\" : {\n                                            \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                            \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                            \"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                                        }\n                                    */\n                                    _this.telemetryService.publicLog(strings.installedEvent, {\n                                        from: telemetryFrom,\n                                        extensionId: extensionSuggestion.id,\n                                        outcome: 'not_found',\n                                    });\n                                    _this.notificationService.error(strings.extensionNotFound.replace('{0}', extensionSuggestion.name).replace('{1}', extensionSuggestion.id));\n                                    return undefined;\n                                }\n                            });\n                        }).then(undefined, function (err) {\n                            /* __GDPR__FRAGMENT__\n                                \"WelcomePageInstalled-4\" : {\n                                    \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                    \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                    \"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                    \"error\": { \"classification\": \"CallstackOrException\", \"purpose\": \"PerformanceAndHealth\" }\n                                }\n                            */\n                            _this.telemetryService.publicLog(strings.installedEvent, {\n                                from: telemetryFrom,\n                                extensionId: extensionSuggestion.id,\n                                outcome: errors_1.isPromiseCanceledError(err) ? 'canceled' : 'error',\n                                error: String(err),\n                            });\n                            _this.notificationService.error(err);\n                        });\n                    }\n                }, {\n                    label: nls_1.localize('details', \"Details\"),\n                    run: function () {\n                        /* __GDPR__FRAGMENT__\n                            \"WelcomePageDetails-1\" : {\n                                \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                                \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                            }\n                        */\n                        _this.telemetryService.publicLog(strings.detailsEvent, {\n                            from: telemetryFrom,\n                            extensionId: extensionSuggestion.id,\n                        });\n                        _this.extensionsWorkbenchService.queryGallery({ names: [extensionSuggestion.id] }, cancellation_1.CancellationToken.None)\n                            .then(function (result) { return _this.extensionsWorkbenchService.open(result.firstPage[0]); })\n                            .then(undefined, errors_1.onUnexpectedError);\n                    }\n                }]);\n        }).then(undefined, function (err) {\n            /* __GDPR__FRAGMENT__\n                \"WelcomePageInstalled-6\" : {\n                    \"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                    \"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                    \"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                    \"error\": { \"classification\": \"CallstackOrException\", \"purpose\": \"PerformanceAndHealth\" }\n                }\n            */\n            _this.telemetryService.publicLog(strings.installedEvent, {\n                from: telemetryFrom,\n                extensionId: extensionSuggestion.id,\n                outcome: errors_1.isPromiseCanceledError(err) ? 'canceled' : 'error',\n                error: String(err),\n            });\n            _this.notificationService.error(err);\n        });\n    };\n    WelcomePage.prototype.updateInstalledExtensions = function (container, installedExtensions) {\n        installedExtensions.then(function (extensions) {\n            var elements = container.querySelectorAll('.installExtension, .enabledExtension');\n            for (var i = 0; i < elements.length; i++) {\n                elements[i].classList.remove('installed');\n            }\n            extensions.filter(function (ext) { return ext.globallyEnabled; })\n                .map(function (ext) { return ext.identifier.id; })\n                .forEach(function (id) {\n                var install = container.querySelectorAll(\".installExtension[data-extension=\\\"\" + id + \"\\\"]\");\n                for (var i = 0; i < install.length; i++) {\n                    install[i].classList.add('installed');\n                }\n                var enabled = container.querySelectorAll(\".enabledExtension[data-extension=\\\"\" + id + \"\\\"]\");\n                for (var i = 0; i < enabled.length; i++) {\n                    enabled[i].classList.add('installed');\n                }\n            });\n        }).then(undefined, errors_1.onUnexpectedError);\n    };\n    WelcomePage.prototype.dispose = function () {\n        this.disposables = lifecycle_2.dispose(this.disposables);\n    };\n    WelcomePage = tslib_1.__decorate([\n        tslib_1.__param(0, editorService_1.IEditorService),\n        tslib_1.__param(1, instantiation_1.IInstantiationService),\n        tslib_1.__param(2, windows_1.IWindowService),\n        tslib_1.__param(3, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(4, configuration_1.IConfigurationService),\n        tslib_1.__param(5, label_1.ILabelService),\n        tslib_1.__param(6, notification_1.INotificationService),\n        tslib_1.__param(7, extensionManagement_1.IExtensionEnablementService),\n        tslib_1.__param(8, extensionManagement_1.IExtensionGalleryService),\n        tslib_1.__param(9, extensionManagement_1.IExtensionManagementService),\n        tslib_1.__param(10, extensionManagement_1.IExtensionTipsService),\n        tslib_1.__param(11, extensions_1.IExtensionsWorkbenchService),\n        tslib_1.__param(12, lifecycle_1.ILifecycleService),\n        tslib_1.__param(13, telemetry_1.ITelemetryService)\n    ], WelcomePage);\n    return WelcomePage;\n}());\nvar WelcomeInputFactory = /** @class */ (function () {\n    function WelcomeInputFactory() {\n    }\n    WelcomeInputFactory.prototype.serialize = function (editorInput) {\n        return '{}';\n    };\n    WelcomeInputFactory.prototype.deserialize = function (instantiationService, serializedEditorInput) {\n        return instantiationService.createInstance(WelcomePage)\n            .editorInput;\n    };\n    WelcomeInputFactory.ID = welcomeInputTypeId;\n    return WelcomeInputFactory;\n}());\nexports.WelcomeInputFactory = WelcomeInputFactory;\n// theming\nexports.buttonBackground = colorRegistry_1.registerColor('welcomePage.buttonBackground', { dark: null, light: null, hc: null }, nls_1.localize('welcomePage.buttonBackground', 'Background color for the buttons on the Welcome page.'));\nexports.buttonHoverBackground = colorRegistry_1.registerColor('welcomePage.buttonHoverBackground', { dark: null, light: null, hc: null }, nls_1.localize('welcomePage.buttonHoverBackground', 'Hover background color for the buttons on the Welcome page.'));\nexports.welcomePageBackground = colorRegistry_1.registerColor('welcomePage.background', { light: null, dark: null, hc: null }, nls_1.localize('welcomePage.background', 'Background color for the Welcome page.'));\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    var backgroundColor = theme.getColor(exports.welcomePageBackground);\n    if (backgroundColor) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePageContainer { background-color: \" + backgroundColor + \"; }\");\n    }\n    var foregroundColor = theme.getColor(colorRegistry_1.foreground);\n    if (foregroundColor) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage .caption { color: \" + foregroundColor + \"; }\");\n    }\n    var descriptionColor = theme.getColor(colorRegistry_1.descriptionForeground);\n    if (descriptionColor) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage .detail { color: \" + descriptionColor + \"; }\");\n    }\n    var buttonColor = walkThroughUtils_1.getExtraColor(theme, exports.buttonBackground, { dark: 'rgba(0, 0, 0, .2)', extra_dark: 'rgba(200, 235, 255, .042)', light: 'rgba(0,0,0,.04)', hc: 'black' });\n    if (buttonColor) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage .commands .item button { background: \" + buttonColor + \"; }\");\n    }\n    var buttonHoverColor = walkThroughUtils_1.getExtraColor(theme, exports.buttonHoverBackground, { dark: 'rgba(200, 235, 255, .072)', extra_dark: 'rgba(200, 235, 255, .072)', light: 'rgba(0,0,0,.10)', hc: null });\n    if (buttonHoverColor) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage .commands .item button:hover { background: \" + buttonHoverColor + \"; }\");\n    }\n    var link = theme.getColor(colorRegistry_1.textLinkForeground);\n    if (link) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage a { color: \" + link + \"; }\");\n    }\n    var activeLink = theme.getColor(colorRegistry_1.textLinkActiveForeground);\n    if (activeLink) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage a:hover,\\n\\t\\t\\t.monaco-workbench .part.editor > .content .welcomePage a:active { color: \" + activeLink + \"; }\");\n    }\n    var focusColor = theme.getColor(colorRegistry_1.focusBorder);\n    if (focusColor) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage a:focus { outline-color: \" + focusColor + \"; }\");\n    }\n    var border = theme.getColor(colorRegistry_1.contrastBorder);\n    if (border) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage .commands .item button { border-color: \" + border + \"; }\");\n    }\n    var activeBorder = theme.getColor(colorRegistry_1.activeContrastBorder);\n    if (activeBorder) {\n        collector.addRule(\".monaco-workbench .part.editor > .content .welcomePage .commands .item button:hover { outline-color: \" + activeBorder + \"; }\");\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/welcome/page/browser/welcomePage.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/welcome/page/browser/welcomePage.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./welcomePage';\nimport { URI } from 'vs/base/common/uri';\nimport * as strings from 'vs/base/common/strings';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport * as arrays from 'vs/base/common/arrays';\nimport { WalkThroughInput } from 'vs/workbench/contrib/welcome/walkThrough/common/walkThroughInput';\nimport { IWorkbenchContribution } from 'vs/workbench/common/contributions';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { onUnexpectedError, isPromiseCanceledError } from 'vs/base/common/errors';\nimport { IWindowService, URIType } from 'vs/platform/windows/common/windows';\nimport { IWorkspaceContextService, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { IConfigurationService, ConfigurationTarget } from 'vs/platform/configuration/common/configuration';\nimport { localize } from 'vs/nls';\nimport { Action } from 'vs/base/common/actions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { Schemas } from 'vs/base/common/network';\nimport { IBackupFileService } from 'vs/workbench/services/backup/common/backup';\nimport { getInstalledExtensions, IExtensionStatus, onExtensionChanged, isKeymapExtension } from 'vs/workbench/contrib/extensions/common/extensionsUtils';\nimport { IExtensionEnablementService, IExtensionManagementService, IExtensionGalleryService, IExtensionTipsService, EnablementState, ILocalExtension } from 'vs/platform/extensionManagement/common/extensionManagement';\nimport { used } from 'vs/workbench/contrib/welcome/page/browser/vs_code_welcome_page';\nimport { ILifecycleService, StartupKind } from 'vs/platform/lifecycle/common/lifecycle';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { splitName } from 'vs/base/common/labels';\nimport { registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { registerColor, focusBorder, textLinkForeground, textLinkActiveForeground, foreground, descriptionForeground, contrastBorder, activeContrastBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { getExtraColor } from 'vs/workbench/contrib/welcome/walkThrough/common/walkThroughUtils';\nimport { IExtensionsWorkbenchService } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { IEditorInputFactory, EditorInput } from 'vs/workbench/common/editor';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { areSameExtensions } from 'vs/platform/extensionManagement/common/extensionManagementUtil';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { ExtensionType } from 'vs/platform/extensions/common/extensions';\nimport { joinPath } from 'vs/base/common/resources';\nimport { IRecentlyOpened, isRecentWorkspace, IRecentWorkspace, IRecentFolder, isRecentFolder } from 'vs/platform/history/common/history';\nimport { CancellationToken } from 'vs/base/common/cancellation';\n\nused();\n\nconst configurationKey = 'workbench.startupEditor';\nconst oldConfigurationKey = 'workbench.welcome.enabled';\nconst telemetryFrom = 'welcomePage';\n\nexport class WelcomePageContribution implements IWorkbenchContribution {\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IBackupFileService backupFileService: IBackupFileService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t) {\n\t\tconst enabled = isWelcomePageEnabled(configurationService, contextService);\n\t\tif (enabled && lifecycleService.startupKind !== StartupKind.ReloadedWindow) {\n\t\t\tbackupFileService.hasBackups().then(hasBackups => {\n\t\t\t\tconst activeEditor = editorService.activeEditor;\n\t\t\t\tif (!activeEditor && !hasBackups) {\n\t\t\t\t\tconst openWithReadme = configurationService.getValue(configurationKey) === 'readme';\n\t\t\t\t\tif (openWithReadme) {\n\t\t\t\t\t\treturn Promise.all(contextService.getWorkspace().folders.map(folder => {\n\t\t\t\t\t\t\tconst folderUri = folder.uri;\n\t\t\t\t\t\t\treturn fileService.resolveFile(folderUri)\n\t\t\t\t\t\t\t\t.then(folder => {\n\t\t\t\t\t\t\t\t\tconst files = folder.children ? folder.children.map(child => child.name) : [];\n\n\t\t\t\t\t\t\t\t\tconst file = arrays.find(files.sort(), file => strings.startsWith(file.toLowerCase(), 'readme'));\n\t\t\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\t\t\treturn joinPath(folderUri, file);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t}, onUnexpectedError);\n\t\t\t\t\t\t})).then(arrays.coalesce)\n\t\t\t\t\t\t\t.then<any>(readmes => {\n\t\t\t\t\t\t\t\tif (!editorService.activeEditor) {\n\t\t\t\t\t\t\t\t\tif (readmes.length) {\n\t\t\t\t\t\t\t\t\t\tconst isMarkDown = (readme: URI) => strings.endsWith(readme.path.toLowerCase(), '.md');\n\t\t\t\t\t\t\t\t\t\treturn Promise.all([\n\t\t\t\t\t\t\t\t\t\t\tthis.commandService.executeCommand('markdown.showPreview', null, readmes.filter(isMarkDown), { locked: true }),\n\t\t\t\t\t\t\t\t\t\t\teditorService.openEditors(readmes.filter(readme => !isMarkDown(readme))\n\t\t\t\t\t\t\t\t\t\t\t\t.map(readme => ({ resource: readme }))),\n\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn instantiationService.createInstance(WelcomePage).openEditor();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn instantiationService.createInstance(WelcomePage).openEditor();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}).then(undefined, onUnexpectedError);\n\t\t}\n\t}\n}\n\nfunction isWelcomePageEnabled(configurationService: IConfigurationService, contextService: IWorkspaceContextService) {\n\tconst startupEditor = configurationService.inspect(configurationKey);\n\tif (!startupEditor.user && !startupEditor.workspace) {\n\t\tconst welcomeEnabled = configurationService.inspect(oldConfigurationKey);\n\t\tif (welcomeEnabled.value !== undefined && welcomeEnabled.value !== null) {\n\t\t\treturn welcomeEnabled.value;\n\t\t}\n\t}\n\treturn startupEditor.value === 'welcomePage' || startupEditor.value === 'readme' || startupEditor.value === 'welcomePageInEmptyWorkbench' && contextService.getWorkbenchState() === WorkbenchState.EMPTY;\n}\n\nexport class WelcomePageAction extends Action {\n\n\tpublic static readonly ID = 'workbench.action.showWelcomePage';\n\tpublic static readonly LABEL = localize('welcomePage', \"Welcome\");\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): Promise<void> {\n\t\treturn this.instantiationService.createInstance(WelcomePage)\n\t\t\t.openEditor()\n\t\t\t.then(() => undefined);\n\t}\n}\n\ninterface ExtensionSuggestion {\n\tname: string;\n\ttitle?: string;\n\tid: string;\n\tisKeymap?: boolean;\n\tisCommand?: boolean;\n}\n\nconst extensionPacks: ExtensionSuggestion[] = [\n\t{ name: localize('welcomePage.javaScript', \"JavaScript\"), id: 'dbaeumer.vscode-eslint' },\n\t{ name: localize('welcomePage.typeScript', \"TypeScript\"), id: 'ms-vscode.vscode-typescript-tslint-plugin' },\n\t{ name: localize('welcomePage.python', \"Python\"), id: 'ms-python.python' },\n\t// { name: localize('welcomePage.go', \"Go\"), id: 'lukehoban.go' },\n\t{ name: localize('welcomePage.php', \"PHP\"), id: 'felixfbecker.php-pack' },\n\t{ name: localize('welcomePage.azure', \"Azure\"), title: localize('welcomePage.showAzureExtensions', \"Show Azure extensions\"), id: 'workbench.extensions.action.showAzureExtensions', isCommand: true },\n\t{ name: localize('welcomePage.docker', \"Docker\"), id: 'peterjausovec.vscode-docker' },\n];\n\nconst keymapExtensions: ExtensionSuggestion[] = [\n\t{ name: localize('welcomePage.vim', \"Vim\"), id: 'vscodevim.vim', isKeymap: true },\n\t{ name: localize('welcomePage.sublime', \"Sublime\"), id: 'ms-vscode.sublime-keybindings', isKeymap: true },\n\t{ name: localize('welcomePage.atom', \"Atom\"), id: 'ms-vscode.atom-keybindings', isKeymap: true },\n];\n\ninterface Strings {\n\tinstallEvent: string;\n\tinstalledEvent: string;\n\tdetailsEvent: string;\n\n\talreadyInstalled: string;\n\treloadAfterInstall: string;\n\tinstalling: string;\n\textensionNotFound: string;\n}\n\n/* __GDPR__\n\t\"installExtension\" : {\n\t\t\"${include}\": [\n\t\t\t\"${WelcomePageInstall-1}\"\n\t\t]\n\t}\n*/\n/* __GDPR__\n\t\"installedExtension\" : {\n\t\t\"${include}\": [\n\t\t\t\"${WelcomePageInstalled-1}\",\n\t\t\t\"${WelcomePageInstalled-2}\",\n\t\t\t\"${WelcomePageInstalled-3}\",\n\t\t\t\"${WelcomePageInstalled-4}\",\n\t\t\t\"${WelcomePageInstalled-6}\"\n\t\t]\n\t}\n*/\n/* __GDPR__\n\t\"detailsExtension\" : {\n\t\t\"${include}\": [\n\t\t\t\"${WelcomePageDetails-1}\"\n\t\t]\n\t}\n*/\nconst extensionPackStrings: Strings = {\n\tinstallEvent: 'installExtension',\n\tinstalledEvent: 'installedExtension',\n\tdetailsEvent: 'detailsExtension',\n\n\talreadyInstalled: localize('welcomePage.extensionPackAlreadyInstalled', \"Support for {0} is already installed.\"),\n\treloadAfterInstall: localize('welcomePage.willReloadAfterInstallingExtensionPack', \"The window will reload after installing additional support for {0}.\"),\n\tinstalling: localize('welcomePage.installingExtensionPack', \"Installing additional support for {0}...\"),\n\textensionNotFound: localize('welcomePage.extensionPackNotFound', \"Support for {0} with id {1} could not be found.\"),\n};\n\n/* __GDPR__\n\t\"installKeymap\" : {\n\t\t\"${include}\": [\n\t\t\t\"${WelcomePageInstall-1}\"\n\t\t]\n\t}\n*/\n/* __GDPR__\n\t\"installedKeymap\" : {\n\t\t\"${include}\": [\n\t\t\t\"${WelcomePageInstalled-1}\",\n\t\t\t\"${WelcomePageInstalled-2}\",\n\t\t\t\"${WelcomePageInstalled-3}\",\n\t\t\t\"${WelcomePageInstalled-4}\",\n\t\t\t\"${WelcomePageInstalled-6}\"\n\t\t]\n\t}\n*/\n/* __GDPR__\n\t\"detailsKeymap\" : {\n\t\t\"${include}\": [\n\t\t\t\"${WelcomePageDetails-1}\"\n\t\t]\n\t}\n*/\nconst keymapStrings: Strings = {\n\tinstallEvent: 'installKeymap',\n\tinstalledEvent: 'installedKeymap',\n\tdetailsEvent: 'detailsKeymap',\n\n\talreadyInstalled: localize('welcomePage.keymapAlreadyInstalled', \"The {0} keyboard shortcuts are already installed.\"),\n\treloadAfterInstall: localize('welcomePage.willReloadAfterInstallingKeymap', \"The window will reload after installing the {0} keyboard shortcuts.\"),\n\tinstalling: localize('welcomePage.installingKeymap', \"Installing the {0} keyboard shortcuts...\"),\n\textensionNotFound: localize('welcomePage.keymapNotFound', \"The {0} keyboard shortcuts with id {1} could not be found.\"),\n};\n\nconst welcomeInputTypeId = 'workbench.editors.welcomePageInput';\n\nclass WelcomePage {\n\n\tprivate disposables: IDisposable[] = [];\n\n\treadonly editorInput: WalkThroughInput;\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IWindowService private readonly windowService: IWindowService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IExtensionEnablementService private readonly extensionEnablementService: IExtensionEnablementService,\n\t\t@IExtensionGalleryService private readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IExtensionTipsService private readonly tipsService: IExtensionTipsService,\n\t\t@IExtensionsWorkbenchService private readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService\n\t) {\n\t\tthis.disposables.push(lifecycleService.onShutdown(() => this.dispose()));\n\n\t\tconst recentlyOpened = this.windowService.getRecentlyOpened();\n\t\tconst installedExtensions = this.instantiationService.invokeFunction(getInstalledExtensions);\n\t\tconst resource = URI.parse(require.toUrl('./vs_code_welcome_page'))\n\t\t\t.with({\n\t\t\t\tscheme: Schemas.walkThrough,\n\t\t\t\tquery: JSON.stringify({ moduleId: 'vs/workbench/contrib/welcome/page/browser/vs_code_welcome_page' })\n\t\t\t});\n\t\tthis.editorInput = this.instantiationService.createInstance(WalkThroughInput, {\n\t\t\ttypeId: welcomeInputTypeId,\n\t\t\tname: localize('welcome.title', \"Welcome\"),\n\t\t\tresource,\n\t\t\ttelemetryFrom,\n\t\t\tonReady: (container: HTMLElement) => this.onReady(container, recentlyOpened, installedExtensions)\n\t\t});\n\t}\n\n\tpublic openEditor() {\n\t\treturn this.editorService.openEditor(this.editorInput, { pinned: false });\n\t}\n\n\tprivate onReady(container: HTMLElement, recentlyOpened: Promise<IRecentlyOpened>, installedExtensions: Promise<IExtensionStatus[]>): void {\n\t\tconst enabled = isWelcomePageEnabled(this.configurationService, this.contextService);\n\t\tconst showOnStartup = <HTMLInputElement>container.querySelector('#showOnStartup');\n\t\tif (enabled) {\n\t\t\tshowOnStartup.setAttribute('checked', 'checked');\n\t\t}\n\t\tshowOnStartup.addEventListener('click', e => {\n\t\t\tthis.configurationService.updateValue(configurationKey, showOnStartup.checked ? 'welcomePage' : 'newUntitledFile', ConfigurationTarget.USER);\n\t\t});\n\n\t\trecentlyOpened.then(({ workspaces }) => {\n\t\t\t// Filter out the current workspace\n\t\t\tworkspaces = workspaces.filter(recent => !this.contextService.isCurrentWorkspace(isRecentWorkspace(recent) ? recent.workspace : recent.folderUri));\n\t\t\tif (!workspaces.length) {\n\t\t\t\tconst recent = container.querySelector('.welcomePage') as HTMLElement;\n\t\t\t\trecent.classList.add('emptyRecent');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst ul = container.querySelector('.recent ul');\n\t\t\tif (!ul) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst moreRecent = ul.querySelector('.moreRecent')!;\n\t\t\tconst workspacesToShow = workspaces.slice(0, 5);\n\t\t\tconst updateEntries = () => {\n\t\t\t\tconst listEntries = this.createListEntries(workspacesToShow);\n\t\t\t\twhile (ul.firstChild) {\n\t\t\t\t\tul.removeChild(ul.firstChild);\n\t\t\t\t}\n\t\t\t\tul.append(...listEntries, moreRecent);\n\t\t\t};\n\t\t\tupdateEntries();\n\t\t\tthis.disposables.push(this.labelService.onDidChangeFormatters(updateEntries));\n\t\t}).then(undefined, onUnexpectedError);\n\n\t\tthis.addExtensionList(container, '.extensionPackList', extensionPacks, extensionPackStrings);\n\t\tthis.addExtensionList(container, '.keymapList', keymapExtensions, keymapStrings);\n\n\t\tthis.updateInstalledExtensions(container, installedExtensions);\n\t\tthis.disposables.push(this.instantiationService.invokeFunction(onExtensionChanged)(ids => {\n\t\t\tfor (const id of ids) {\n\t\t\t\tif (container.querySelector(`.installExtension[data-extension=\"${id.id}\"], .enabledExtension[data-extension=\"${id.id}\"]`)) {\n\t\t\t\t\tconst installedExtensions = this.instantiationService.invokeFunction(getInstalledExtensions);\n\t\t\t\t\tthis.updateInstalledExtensions(container, installedExtensions);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate createListEntries(recents: (IRecentWorkspace | IRecentFolder)[]) {\n\t\treturn recents.map(recent => {\n\t\t\tlet fullPath: string;\n\t\t\tlet resource: URI;\n\t\t\tlet typeHint: URIType | undefined;\n\t\t\tif (isRecentFolder(recent)) {\n\t\t\t\tresource = recent.folderUri;\n\t\t\t\tfullPath = recent.label || this.labelService.getWorkspaceLabel(recent.folderUri, { verbose: true });\n\t\t\t\ttypeHint = 'folder';\n\t\t\t} else {\n\t\t\t\tfullPath = recent.label || this.labelService.getWorkspaceLabel(recent.workspace, { verbose: true });\n\t\t\t\tresource = recent.workspace.configPath;\n\t\t\t\ttypeHint = 'file';\n\t\t\t}\n\n\t\t\tconst { name, parentPath } = splitName(fullPath);\n\n\t\t\tconst li = document.createElement('li');\n\t\t\tconst a = document.createElement('a');\n\n\t\t\ta.innerText = name;\n\t\t\ta.title = fullPath;\n\t\t\ta.setAttribute('aria-label', localize('welcomePage.openFolderWithPath', \"Open folder {0} with path {1}\", name, parentPath));\n\t\t\ta.href = 'javascript:void(0)';\n\t\t\ta.addEventListener('click', e => {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"workbenchActionExecuted\" : {\n\t\t\t\t\t\t\"id\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\"from\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tthis.telemetryService.publicLog('workbenchActionExecuted', {\n\t\t\t\t\tid: 'openRecentFolder',\n\t\t\t\t\tfrom: telemetryFrom\n\t\t\t\t});\n\t\t\t\tthis.windowService.openWindow([{ uri: resource, typeHint }], { forceNewWindow: e.ctrlKey || e.metaKey });\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\tli.appendChild(a);\n\n\t\t\tconst span = document.createElement('span');\n\t\t\tspan.classList.add('path');\n\t\t\tspan.classList.add('detail');\n\t\t\tspan.innerText = parentPath;\n\t\t\tspan.title = fullPath;\n\t\t\tli.appendChild(span);\n\n\t\t\treturn li;\n\t\t});\n\t}\n\n\tprivate addExtensionList(container: HTMLElement, listSelector: string, suggestions: ExtensionSuggestion[], strings: Strings) {\n\t\tconst list = container.querySelector(listSelector);\n\t\tif (list) {\n\t\t\tsuggestions.forEach((extension, i) => {\n\t\t\t\tif (i) {\n\t\t\t\t\tlist.appendChild(document.createTextNode(localize('welcomePage.extensionListSeparator', \", \")));\n\t\t\t\t}\n\n\t\t\t\tconst a = document.createElement('a');\n\t\t\t\ta.innerText = extension.name;\n\t\t\t\ta.title = extension.title || (extension.isKeymap ? localize('welcomePage.installKeymap', \"Install {0} keymap\", extension.name) : localize('welcomePage.installExtensionPack', \"Install additional support for {0}\", extension.name));\n\t\t\t\tif (extension.isCommand) {\n\t\t\t\t\ta.href = `command:${extension.id}`;\n\t\t\t\t\tlist.appendChild(a);\n\t\t\t\t} else {\n\t\t\t\t\ta.classList.add('installExtension');\n\t\t\t\t\ta.setAttribute('data-extension', extension.id);\n\t\t\t\t\ta.href = 'javascript:void(0)';\n\t\t\t\t\ta.addEventListener('click', e => {\n\t\t\t\t\t\tthis.installExtension(extension, strings);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t\tlist.appendChild(a);\n\n\t\t\t\t\tconst span = document.createElement('span');\n\t\t\t\t\tspan.innerText = extension.name;\n\t\t\t\t\tspan.title = extension.isKeymap ? localize('welcomePage.installedKeymap', \"{0} keymap is already installed\", extension.name) : localize('welcomePage.installedExtensionPack', \"{0} support is already installed\", extension.name);\n\t\t\t\t\tspan.classList.add('enabledExtension');\n\t\t\t\t\tspan.setAttribute('data-extension', extension.id);\n\t\t\t\t\tlist.appendChild(span);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate installExtension(extensionSuggestion: ExtensionSuggestion, strings: Strings): void {\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"WelcomePageInstall-1\" : {\n\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryService.publicLog(strings.installEvent, {\n\t\t\tfrom: telemetryFrom,\n\t\t\textensionId: extensionSuggestion.id,\n\t\t});\n\t\tthis.instantiationService.invokeFunction(getInstalledExtensions).then(extensions => {\n\t\t\tconst installedExtension = arrays.first(extensions, extension => areSameExtensions(extension.identifier, { id: extensionSuggestion.id }));\n\t\t\tif (installedExtension && installedExtension.globallyEnabled) {\n\t\t\t\t/* __GDPR__FRAGMENT__\n\t\t\t\t\t\"WelcomePageInstalled-1\" : {\n\t\t\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tthis.telemetryService.publicLog(strings.installedEvent, {\n\t\t\t\t\tfrom: telemetryFrom,\n\t\t\t\t\textensionId: extensionSuggestion.id,\n\t\t\t\t\toutcome: 'already_enabled',\n\t\t\t\t});\n\t\t\t\tthis.notificationService.info(strings.alreadyInstalled.replace('{0}', extensionSuggestion.name));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst foundAndInstalled = installedExtension ? Promise.resolve(installedExtension.local) : this.extensionGalleryService.query({ names: [extensionSuggestion.id], source: telemetryFrom }, CancellationToken.None)\n\t\t\t\t.then((result): null | Promise<ILocalExtension | null> => {\n\t\t\t\t\tconst [extension] = result.firstPage;\n\t\t\t\t\tif (!extension) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.extensionManagementService.installFromGallery(extension)\n\t\t\t\t\t\t.then(() => this.extensionManagementService.getInstalled(ExtensionType.User))\n\t\t\t\t\t\t.then(installed => {\n\t\t\t\t\t\t\tconst local = installed.filter(i => areSameExtensions(extension.identifier, i.identifier))[0];\n\t\t\t\t\t\t\t// TODO: Do this as part of the install to avoid multiple events.\n\t\t\t\t\t\t\treturn this.extensionEnablementService.setEnablement([local], EnablementState.Disabled).then(() => local);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\tthis.notificationService.prompt(\n\t\t\t\tSeverity.Info,\n\t\t\t\tstrings.reloadAfterInstall.replace('{0}', extensionSuggestion.name),\n\t\t\t\t[{\n\t\t\t\t\tlabel: localize('ok', \"OK\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tconst messageDelay = new TimeoutTimer();\n\t\t\t\t\t\tmessageDelay.cancelAndSet(() => {\n\t\t\t\t\t\t\tthis.notificationService.info(strings.installing.replace('{0}', extensionSuggestion.name));\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\tconst extensionsToDisable = extensions.filter(extension => isKeymapExtension(this.tipsService, extension) && extension.globallyEnabled).map(extension => extension.local);\n\t\t\t\t\t\textensionsToDisable.length ? this.extensionEnablementService.setEnablement(extensionsToDisable, EnablementState.Disabled) : Promise.resolve()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn foundAndInstalled.then(foundExtension => {\n\t\t\t\t\t\t\t\t\tmessageDelay.cancel();\n\t\t\t\t\t\t\t\t\tif (foundExtension) {\n\t\t\t\t\t\t\t\t\t\treturn this.extensionEnablementService.setEnablement([foundExtension], EnablementState.Enabled)\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t/* __GDPR__FRAGMENT__\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"WelcomePageInstalled-2\" : {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t\t\t\tthis.telemetryService.publicLog(strings.installedEvent, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfrom: telemetryFrom,\n\t\t\t\t\t\t\t\t\t\t\t\t\textensionId: extensionSuggestion.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\toutcome: installedExtension ? 'enabled' : 'installed',\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\treturn this.windowService.reloadWindow();\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t/* __GDPR__FRAGMENT__\n\t\t\t\t\t\t\t\t\t\t\t\"WelcomePageInstalled-3\" : {\n\t\t\t\t\t\t\t\t\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t\tthis.telemetryService.publicLog(strings.installedEvent, {\n\t\t\t\t\t\t\t\t\t\t\tfrom: telemetryFrom,\n\t\t\t\t\t\t\t\t\t\t\textensionId: extensionSuggestion.id,\n\t\t\t\t\t\t\t\t\t\t\toutcome: 'not_found',\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tthis.notificationService.error(strings.extensionNotFound.replace('{0}', extensionSuggestion.name).replace('{1}', extensionSuggestion.id));\n\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).then(undefined, err => {\n\t\t\t\t\t\t\t\t/* __GDPR__FRAGMENT__\n\t\t\t\t\t\t\t\t\t\"WelcomePageInstalled-4\" : {\n\t\t\t\t\t\t\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\t\t\"error\": { \"classification\": \"CallstackOrException\", \"purpose\": \"PerformanceAndHealth\" }\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\tthis.telemetryService.publicLog(strings.installedEvent, {\n\t\t\t\t\t\t\t\t\tfrom: telemetryFrom,\n\t\t\t\t\t\t\t\t\textensionId: extensionSuggestion.id,\n\t\t\t\t\t\t\t\t\toutcome: isPromiseCanceledError(err) ? 'canceled' : 'error',\n\t\t\t\t\t\t\t\t\terror: String(err),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.notificationService.error(err);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tlabel: localize('details', \"Details\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\t/* __GDPR__FRAGMENT__\n\t\t\t\t\t\t\t\"WelcomePageDetails-1\" : {\n\t\t\t\t\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tthis.telemetryService.publicLog(strings.detailsEvent, {\n\t\t\t\t\t\t\tfrom: telemetryFrom,\n\t\t\t\t\t\t\textensionId: extensionSuggestion.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.extensionsWorkbenchService.queryGallery({ names: [extensionSuggestion.id] }, CancellationToken.None)\n\t\t\t\t\t\t\t.then(result => this.extensionsWorkbenchService.open(result.firstPage[0]))\n\t\t\t\t\t\t\t.then(undefined, onUnexpectedError);\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t);\n\t\t}).then(undefined, err => {\n\t\t\t/* __GDPR__FRAGMENT__\n\t\t\t\t\"WelcomePageInstalled-6\" : {\n\t\t\t\t\t\"from\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"extensionId\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"outcome\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"error\": { \"classification\": \"CallstackOrException\", \"purpose\": \"PerformanceAndHealth\" }\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryService.publicLog(strings.installedEvent, {\n\t\t\t\tfrom: telemetryFrom,\n\t\t\t\textensionId: extensionSuggestion.id,\n\t\t\t\toutcome: isPromiseCanceledError(err) ? 'canceled' : 'error',\n\t\t\t\terror: String(err),\n\t\t\t});\n\t\t\tthis.notificationService.error(err);\n\t\t});\n\t}\n\n\tprivate updateInstalledExtensions(container: HTMLElement, installedExtensions: Promise<IExtensionStatus[]>) {\n\t\tinstalledExtensions.then(extensions => {\n\t\t\tconst elements = container.querySelectorAll('.installExtension, .enabledExtension');\n\t\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\t\telements[i].classList.remove('installed');\n\t\t\t}\n\t\t\textensions.filter(ext => ext.globallyEnabled)\n\t\t\t\t.map(ext => ext.identifier.id)\n\t\t\t\t.forEach(id => {\n\t\t\t\t\tconst install = container.querySelectorAll(`.installExtension[data-extension=\"${id}\"]`);\n\t\t\t\t\tfor (let i = 0; i < install.length; i++) {\n\t\t\t\t\t\tinstall[i].classList.add('installed');\n\t\t\t\t\t}\n\t\t\t\t\tconst enabled = container.querySelectorAll(`.enabledExtension[data-extension=\"${id}\"]`);\n\t\t\t\t\tfor (let i = 0; i < enabled.length; i++) {\n\t\t\t\t\t\tenabled[i].classList.add('installed');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}).then(undefined, onUnexpectedError);\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables = dispose(this.disposables);\n\t}\n}\n\nexport class WelcomeInputFactory implements IEditorInputFactory {\n\n\tstatic readonly ID = welcomeInputTypeId;\n\n\tpublic serialize(editorInput: EditorInput): string {\n\t\treturn '{}';\n\t}\n\n\tpublic deserialize(instantiationService: IInstantiationService, serializedEditorInput: string): WalkThroughInput {\n\t\treturn instantiationService.createInstance(WelcomePage)\n\t\t\t.editorInput;\n\t}\n}\n\n// theming\n\nexport const buttonBackground = registerColor('welcomePage.buttonBackground', { dark: null, light: null, hc: null }, localize('welcomePage.buttonBackground', 'Background color for the buttons on the Welcome page.'));\nexport const buttonHoverBackground = registerColor('welcomePage.buttonHoverBackground', { dark: null, light: null, hc: null }, localize('welcomePage.buttonHoverBackground', 'Hover background color for the buttons on the Welcome page.'));\nexport const welcomePageBackground = registerColor('welcomePage.background', { light: null, dark: null, hc: null }, localize('welcomePage.background', 'Background color for the Welcome page.'));\n\nregisterThemingParticipant((theme, collector) => {\n\tconst backgroundColor = theme.getColor(welcomePageBackground);\n\tif (backgroundColor) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePageContainer { background-color: ${backgroundColor}; }`);\n\t}\n\tconst foregroundColor = theme.getColor(foreground);\n\tif (foregroundColor) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage .caption { color: ${foregroundColor}; }`);\n\t}\n\tconst descriptionColor = theme.getColor(descriptionForeground);\n\tif (descriptionColor) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage .detail { color: ${descriptionColor}; }`);\n\t}\n\tconst buttonColor = getExtraColor(theme, buttonBackground, { dark: 'rgba(0, 0, 0, .2)', extra_dark: 'rgba(200, 235, 255, .042)', light: 'rgba(0,0,0,.04)', hc: 'black' });\n\tif (buttonColor) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage .commands .item button { background: ${buttonColor}; }`);\n\t}\n\tconst buttonHoverColor = getExtraColor(theme, buttonHoverBackground, { dark: 'rgba(200, 235, 255, .072)', extra_dark: 'rgba(200, 235, 255, .072)', light: 'rgba(0,0,0,.10)', hc: null });\n\tif (buttonHoverColor) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage .commands .item button:hover { background: ${buttonHoverColor}; }`);\n\t}\n\tconst link = theme.getColor(textLinkForeground);\n\tif (link) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage a { color: ${link}; }`);\n\t}\n\tconst activeLink = theme.getColor(textLinkActiveForeground);\n\tif (activeLink) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage a:hover,\n\t\t\t.monaco-workbench .part.editor > .content .welcomePage a:active { color: ${activeLink}; }`);\n\t}\n\tconst focusColor = theme.getColor(focusBorder);\n\tif (focusColor) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage a:focus { outline-color: ${focusColor}; }`);\n\t}\n\tconst border = theme.getColor(contrastBorder);\n\tif (border) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage .commands .item button { border-color: ${border}; }`);\n\t}\n\tconst activeBorder = theme.getColor(activeContrastBorder);\n\tif (activeBorder) {\n\t\tcollector.addRule(`.monaco-workbench .part.editor > .content .welcomePage .commands .item button:hover { outline-color: ${activeBorder}; }`);\n\t}\n});\n"]}]}