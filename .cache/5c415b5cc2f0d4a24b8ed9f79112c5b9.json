{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/editor/contrib/colorPicker/colorPickerWidget.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/colorPicker/colorPickerWidget.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./colorPicker\");\nvar browser_1 = require(\"vs/base/browser/browser\");\nvar dom = require(\"vs/base/browser/dom\");\nvar globalMouseMoveMonitor_1 = require(\"vs/base/browser/globalMouseMoveMonitor\");\nvar widget_1 = require(\"vs/base/browser/ui/widget\");\nvar color_1 = require(\"vs/base/common/color\");\nvar event_1 = require(\"vs/base/common/event\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar $ = dom.$;\nvar ColorPickerHeader = /** @class */ (function (_super) {\n    tslib_1.__extends(ColorPickerHeader, _super);\n    function ColorPickerHeader(container, model, themeService) {\n        var _this = _super.call(this) || this;\n        _this.model = model;\n        _this.domNode = $('.colorpicker-header');\n        dom.append(container, _this.domNode);\n        _this.pickedColorNode = dom.append(_this.domNode, $('.picked-color'));\n        var colorBox = dom.append(_this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = color_1.Color.Format.CSS.format(_this.model.originalColor);\n        _this.backgroundColor = themeService.getTheme().getColor(colorRegistry_1.editorHoverBackground) || color_1.Color.white;\n        _this._register(themeService_1.registerThemingParticipant(function (theme, collector) {\n            _this.backgroundColor = theme.getColor(colorRegistry_1.editorHoverBackground) || color_1.Color.white;\n        }));\n        _this._register(dom.addDisposableListener(_this.pickedColorNode, dom.EventType.CLICK, function () { return _this.model.selectNextColorPresentation(); }));\n        _this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, function () {\n            _this.model.color = _this.model.originalColor;\n            _this.model.flushColor();\n        }));\n        _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\n        _this._register(model.onDidChangePresentation(_this.onDidChangePresentation, _this));\n        _this.pickedColorNode.style.backgroundColor = color_1.Color.Format.CSS.format(model.color);\n        dom.toggleClass(_this.pickedColorNode, 'light', model.color.rgba.a < 0.5 ? _this.backgroundColor.isLighter() : model.color.isLighter());\n        return _this;\n    }\n    ColorPickerHeader.prototype.onDidChangeColor = function (color) {\n        this.pickedColorNode.style.backgroundColor = color_1.Color.Format.CSS.format(color);\n        dom.toggleClass(this.pickedColorNode, 'light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    };\n    ColorPickerHeader.prototype.onDidChangePresentation = function () {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n    };\n    return ColorPickerHeader;\n}(lifecycle_1.Disposable));\nexports.ColorPickerHeader = ColorPickerHeader;\nvar ColorPickerBody = /** @class */ (function (_super) {\n    tslib_1.__extends(ColorPickerBody, _super);\n    function ColorPickerBody(container, model, pixelRatio) {\n        var _this = _super.call(this) || this;\n        _this.model = model;\n        _this.pixelRatio = pixelRatio;\n        _this.domNode = $('.colorpicker-body');\n        dom.append(container, _this.domNode);\n        _this.saturationBox = new SaturationBox(_this.domNode, _this.model, _this.pixelRatio);\n        _this._register(_this.saturationBox);\n        _this._register(_this.saturationBox.onDidChange(_this.onDidSaturationValueChange, _this));\n        _this._register(_this.saturationBox.onColorFlushed(_this.flushColor, _this));\n        _this.opacityStrip = new OpacityStrip(_this.domNode, _this.model);\n        _this._register(_this.opacityStrip);\n        _this._register(_this.opacityStrip.onDidChange(_this.onDidOpacityChange, _this));\n        _this._register(_this.opacityStrip.onColorFlushed(_this.flushColor, _this));\n        _this.hueStrip = new HueStrip(_this.domNode, _this.model);\n        _this._register(_this.hueStrip);\n        _this._register(_this.hueStrip.onDidChange(_this.onDidHueChange, _this));\n        _this._register(_this.hueStrip.onColorFlushed(_this.flushColor, _this));\n        return _this;\n    }\n    ColorPickerBody.prototype.flushColor = function () {\n        this.model.flushColor();\n    };\n    ColorPickerBody.prototype.onDidSaturationValueChange = function (_a) {\n        var s = _a.s, v = _a.v;\n        var hsva = this.model.color.hsva;\n        this.model.color = new color_1.Color(new color_1.HSVA(hsva.h, s, v, hsva.a));\n    };\n    ColorPickerBody.prototype.onDidOpacityChange = function (a) {\n        var hsva = this.model.color.hsva;\n        this.model.color = new color_1.Color(new color_1.HSVA(hsva.h, hsva.s, hsva.v, a));\n    };\n    ColorPickerBody.prototype.onDidHueChange = function (value) {\n        var hsva = this.model.color.hsva;\n        var h = (1 - value) * 360;\n        this.model.color = new color_1.Color(new color_1.HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    };\n    ColorPickerBody.prototype.layout = function () {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    };\n    return ColorPickerBody;\n}(lifecycle_1.Disposable));\nexports.ColorPickerBody = ColorPickerBody;\nvar SaturationBox = /** @class */ (function (_super) {\n    tslib_1.__extends(SaturationBox, _super);\n    function SaturationBox(container, model, pixelRatio) {\n        var _this = _super.call(this) || this;\n        _this.model = model;\n        _this.pixelRatio = pixelRatio;\n        _this._onDidChange = new event_1.Emitter();\n        _this.onDidChange = _this._onDidChange.event;\n        _this._onColorFlushed = new event_1.Emitter();\n        _this.onColorFlushed = _this._onColorFlushed.event;\n        _this.domNode = $('.saturation-wrap');\n        dom.append(container, _this.domNode);\n        // Create canvas, draw selected color\n        _this.canvas = document.createElement('canvas');\n        _this.canvas.className = 'saturation-box';\n        dom.append(_this.domNode, _this.canvas);\n        // Add selection circle\n        _this.selection = $('.saturation-selection');\n        dom.append(_this.domNode, _this.selection);\n        _this.layout();\n        _this._register(dom.addDisposableListener(_this.domNode, dom.EventType.MOUSE_DOWN, function (e) { return _this.onMouseDown(e); }));\n        _this._register(_this.model.onDidChangeColor(_this.onDidChangeColor, _this));\n        _this.monitor = null;\n        return _this;\n    }\n    SaturationBox.prototype.onMouseDown = function (e) {\n        var _this = this;\n        this.monitor = this._register(new globalMouseMoveMonitor_1.GlobalMouseMoveMonitor());\n        var origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(globalMouseMoveMonitor_1.standardMouseMoveMerger, function (event) { return _this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top); }, function () { return null; });\n        var mouseUpListener = dom.addDisposableListener(document, dom.EventType.MOUSE_UP, function () {\n            _this._onColorFlushed.fire();\n            mouseUpListener.dispose();\n            if (_this.monitor) {\n                _this.monitor.stopMonitoring(true);\n                _this.monitor = null;\n            }\n        }, true);\n    };\n    SaturationBox.prototype.onDidChangePosition = function (left, top) {\n        var s = Math.max(0, Math.min(1, left / this.width));\n        var v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s: s, v: v });\n    };\n    SaturationBox.prototype.layout = function () {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        var hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    };\n    SaturationBox.prototype.paint = function () {\n        var hsva = this.model.color.hsva;\n        var saturatedColor = new color_1.Color(new color_1.HSVA(hsva.h, 1, 1, 1));\n        var ctx = this.canvas.getContext('2d');\n        var whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        var blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = color_1.Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    };\n    SaturationBox.prototype.paintSelection = function (s, v) {\n        this.selection.style.left = s * this.width + \"px\";\n        this.selection.style.top = this.height - v * this.height + \"px\";\n    };\n    SaturationBox.prototype.onDidChangeColor = function () {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    };\n    return SaturationBox;\n}(lifecycle_1.Disposable));\nvar Strip = /** @class */ (function (_super) {\n    tslib_1.__extends(Strip, _super);\n    function Strip(container, model) {\n        var _this = _super.call(this) || this;\n        _this.model = model;\n        _this._onDidChange = new event_1.Emitter();\n        _this.onDidChange = _this._onDidChange.event;\n        _this._onColorFlushed = new event_1.Emitter();\n        _this.onColorFlushed = _this._onColorFlushed.event;\n        _this.domNode = dom.append(container, $('.strip'));\n        _this.overlay = dom.append(_this.domNode, $('.overlay'));\n        _this.slider = dom.append(_this.domNode, $('.slider'));\n        _this.slider.style.top = \"0px\";\n        _this._register(dom.addDisposableListener(_this.domNode, dom.EventType.MOUSE_DOWN, function (e) { return _this.onMouseDown(e); }));\n        _this.layout();\n        return _this;\n    }\n    Strip.prototype.layout = function () {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        var value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    };\n    Strip.prototype.onMouseDown = function (e) {\n        var _this = this;\n        var monitor = this._register(new globalMouseMoveMonitor_1.GlobalMouseMoveMonitor());\n        var origin = dom.getDomNodePagePosition(this.domNode);\n        dom.addClass(this.domNode, 'grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(globalMouseMoveMonitor_1.standardMouseMoveMerger, function (event) { return _this.onDidChangeTop(event.posy - origin.top); }, function () { return null; });\n        var mouseUpListener = dom.addDisposableListener(document, dom.EventType.MOUSE_UP, function () {\n            _this._onColorFlushed.fire();\n            mouseUpListener.dispose();\n            monitor.stopMonitoring(true);\n            dom.removeClass(_this.domNode, 'grabbing');\n        }, true);\n    };\n    Strip.prototype.onDidChangeTop = function (top) {\n        var value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    };\n    Strip.prototype.updateSliderPosition = function (value) {\n        this.slider.style.top = (1 - value) * this.height + \"px\";\n    };\n    return Strip;\n}(lifecycle_1.Disposable));\nvar OpacityStrip = /** @class */ (function (_super) {\n    tslib_1.__extends(OpacityStrip, _super);\n    function OpacityStrip(container, model) {\n        var _this = _super.call(this, container, model) || this;\n        dom.addClass(_this.domNode, 'opacity-strip');\n        _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\n        _this.onDidChangeColor(_this.model.color);\n        return _this;\n    }\n    OpacityStrip.prototype.onDidChangeColor = function (color) {\n        var _a = color.rgba, r = _a.r, g = _a.g, b = _a.b;\n        var opaque = new color_1.Color(new color_1.RGBA(r, g, b, 1));\n        var transparent = new color_1.Color(new color_1.RGBA(r, g, b, 0));\n        this.overlay.style.background = \"linear-gradient(to bottom, \" + opaque + \" 0%, \" + transparent + \" 100%)\";\n    };\n    OpacityStrip.prototype.getValue = function (color) {\n        return color.hsva.a;\n    };\n    return OpacityStrip;\n}(Strip));\nvar HueStrip = /** @class */ (function (_super) {\n    tslib_1.__extends(HueStrip, _super);\n    function HueStrip(container, model) {\n        var _this = _super.call(this, container, model) || this;\n        dom.addClass(_this.domNode, 'hue-strip');\n        return _this;\n    }\n    HueStrip.prototype.getValue = function (color) {\n        return 1 - (color.hsva.h / 360);\n    };\n    return HueStrip;\n}(Strip));\nvar ColorPickerWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(ColorPickerWidget, _super);\n    function ColorPickerWidget(container, model, pixelRatio, themeService) {\n        var _this = _super.call(this) || this;\n        _this.model = model;\n        _this.pixelRatio = pixelRatio;\n        _this._register(browser_1.onDidChangeZoomLevel(function () { return _this.layout(); }));\n        var element = $('.colorpicker-widget');\n        container.appendChild(element);\n        var header = new ColorPickerHeader(element, _this.model, themeService);\n        _this.body = new ColorPickerBody(element, _this.model, _this.pixelRatio);\n        _this._register(header);\n        _this._register(_this.body);\n        return _this;\n    }\n    ColorPickerWidget.prototype.getId = function () {\n        return ColorPickerWidget.ID;\n    };\n    ColorPickerWidget.prototype.layout = function () {\n        this.body.layout();\n    };\n    ColorPickerWidget.ID = 'editor.contrib.colorPickerWidget';\n    return ColorPickerWidget;\n}(widget_1.Widget));\nexports.ColorPickerWidget = ColorPickerWidget;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/colorPicker/colorPickerWidget.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/editor/contrib/colorPicker/colorPickerWidget.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./colorPicker';\nimport { onDidChangeZoomLevel } from 'vs/base/browser/browser';\nimport * as dom from 'vs/base/browser/dom';\nimport { GlobalMouseMoveMonitor, IStandardMouseMoveEventData, standardMouseMoveMerger } from 'vs/base/browser/globalMouseMoveMonitor';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { Color, HSVA, RGBA } from 'vs/base/common/color';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ColorPickerModel } from 'vs/editor/contrib/colorPicker/colorPickerModel';\nimport { editorHoverBackground } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService, registerThemingParticipant } from 'vs/platform/theme/common/themeService';\n\nconst $ = dom.$;\n\nexport class ColorPickerHeader extends Disposable {\n\n\tprivate readonly domNode: HTMLElement;\n\tprivate readonly pickedColorNode: HTMLElement;\n\tprivate backgroundColor: Color;\n\n\tconstructor(container: HTMLElement, private readonly model: ColorPickerModel, themeService: IThemeService) {\n\t\tsuper();\n\n\t\tthis.domNode = $('.colorpicker-header');\n\t\tdom.append(container, this.domNode);\n\n\t\tthis.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n\n\t\tconst colorBox = dom.append(this.domNode, $('.original-color'));\n\t\tcolorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor);\n\n\t\tthis.backgroundColor = themeService.getTheme().getColor(editorHoverBackground) || Color.white;\n\t\tthis._register(registerThemingParticipant((theme, collector) => {\n\t\t\tthis.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n\t\t}));\n\n\t\tthis._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n\t\tthis._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n\t\t\tthis.model.color = this.model.originalColor;\n\t\t\tthis.model.flushColor();\n\t\t}));\n\t\tthis._register(model.onDidChangeColor(this.onDidChangeColor, this));\n\t\tthis._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n\t\tthis.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color);\n\t\tdom.toggleClass(this.pickedColorNode, 'light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n\t}\n\n\tprivate onDidChangeColor(color: Color): void {\n\t\tthis.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color);\n\t\tdom.toggleClass(this.pickedColorNode, 'light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n\t\tthis.onDidChangePresentation();\n\t}\n\n\tprivate onDidChangePresentation(): void {\n\t\tthis.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n\t}\n}\n\nexport class ColorPickerBody extends Disposable {\n\n\tprivate readonly domNode: HTMLElement;\n\tprivate readonly saturationBox: SaturationBox;\n\tprivate readonly hueStrip: Strip;\n\tprivate readonly opacityStrip: Strip;\n\n\tconstructor(container: HTMLElement, private readonly model: ColorPickerModel, private pixelRatio: number) {\n\t\tsuper();\n\n\t\tthis.domNode = $('.colorpicker-body');\n\t\tdom.append(container, this.domNode);\n\n\t\tthis.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n\t\tthis._register(this.saturationBox);\n\t\tthis._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n\t\tthis._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n\n\t\tthis.opacityStrip = new OpacityStrip(this.domNode, this.model);\n\t\tthis._register(this.opacityStrip);\n\t\tthis._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n\t\tthis._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n\n\t\tthis.hueStrip = new HueStrip(this.domNode, this.model);\n\t\tthis._register(this.hueStrip);\n\t\tthis._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n\t\tthis._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n\t}\n\n\tprivate flushColor(): void {\n\t\tthis.model.flushColor();\n\t}\n\n\tprivate onDidSaturationValueChange({ s, v }: { s: number, v: number }): void {\n\t\tconst hsva = this.model.color.hsva;\n\t\tthis.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n\t}\n\n\tprivate onDidOpacityChange(a: number): void {\n\t\tconst hsva = this.model.color.hsva;\n\t\tthis.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n\t}\n\n\tprivate onDidHueChange(value: number): void {\n\t\tconst hsva = this.model.color.hsva;\n\t\tconst h = (1 - value) * 360;\n\n\t\tthis.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n\t}\n\n\tlayout(): void {\n\t\tthis.saturationBox.layout();\n\t\tthis.opacityStrip.layout();\n\t\tthis.hueStrip.layout();\n\t}\n}\n\nclass SaturationBox extends Disposable {\n\n\tprivate readonly domNode: HTMLElement;\n\tprivate readonly selection: HTMLElement;\n\tprivate readonly canvas: HTMLCanvasElement;\n\tprivate width: number;\n\tprivate height: number;\n\n\tprivate monitor: GlobalMouseMoveMonitor<IStandardMouseMoveEventData> | null;\n\tprivate _onDidChange = new Emitter<{ s: number, v: number }>();\n\treadonly onDidChange: Event<{ s: number, v: number }> = this._onDidChange.event;\n\n\tprivate _onColorFlushed = new Emitter<void>();\n\treadonly onColorFlushed: Event<void> = this._onColorFlushed.event;\n\n\tconstructor(container: HTMLElement, private readonly model: ColorPickerModel, private pixelRatio: number) {\n\t\tsuper();\n\n\t\tthis.domNode = $('.saturation-wrap');\n\t\tdom.append(container, this.domNode);\n\n\t\t// Create canvas, draw selected color\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.canvas.className = 'saturation-box';\n\t\tdom.append(this.domNode, this.canvas);\n\n\t\t// Add selection circle\n\t\tthis.selection = $('.saturation-selection');\n\t\tdom.append(this.domNode, this.selection);\n\n\t\tthis.layout();\n\n\t\tthis._register(dom.addDisposableListener(this.domNode, dom.EventType.MOUSE_DOWN, e => this.onMouseDown(e)));\n\t\tthis._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n\t\tthis.monitor = null;\n\t}\n\n\tprivate onMouseDown(e: MouseEvent): void {\n\t\tthis.monitor = this._register(new GlobalMouseMoveMonitor<IStandardMouseMoveEventData>());\n\t\tconst origin = dom.getDomNodePagePosition(this.domNode);\n\n\t\tif (e.target !== this.selection) {\n\t\t\tthis.onDidChangePosition(e.offsetX, e.offsetY);\n\t\t}\n\n\t\tthis.monitor.startMonitoring(standardMouseMoveMerger, event => this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top), () => null);\n\n\t\tconst mouseUpListener = dom.addDisposableListener(document, dom.EventType.MOUSE_UP, () => {\n\t\t\tthis._onColorFlushed.fire();\n\t\t\tmouseUpListener.dispose();\n\t\t\tif (this.monitor) {\n\t\t\t\tthis.monitor.stopMonitoring(true);\n\t\t\t\tthis.monitor = null;\n\t\t\t}\n\t\t}, true);\n\t}\n\n\tprivate onDidChangePosition(left: number, top: number): void {\n\t\tconst s = Math.max(0, Math.min(1, left / this.width));\n\t\tconst v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n\n\t\tthis.paintSelection(s, v);\n\t\tthis._onDidChange.fire({ s, v });\n\t}\n\n\tlayout(): void {\n\t\tthis.width = this.domNode.offsetWidth;\n\t\tthis.height = this.domNode.offsetHeight;\n\t\tthis.canvas.width = this.width * this.pixelRatio;\n\t\tthis.canvas.height = this.height * this.pixelRatio;\n\t\tthis.paint();\n\n\t\tconst hsva = this.model.color.hsva;\n\t\tthis.paintSelection(hsva.s, hsva.v);\n\t}\n\n\tprivate paint(): void {\n\t\tconst hsva = this.model.color.hsva;\n\t\tconst saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n\t\tconst ctx = this.canvas.getContext('2d')!;\n\n\t\tconst whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n\t\twhiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n\t\twhiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n\t\twhiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n\n\t\tconst blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n\t\tblackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n\t\tblackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n\n\t\tctx.rect(0, 0, this.canvas.width, this.canvas.height);\n\t\tctx.fillStyle = Color.Format.CSS.format(saturatedColor)!;\n\t\tctx.fill();\n\t\tctx.fillStyle = whiteGradient;\n\t\tctx.fill();\n\t\tctx.fillStyle = blackGradient;\n\t\tctx.fill();\n\t}\n\n\tprivate paintSelection(s: number, v: number): void {\n\t\tthis.selection.style.left = `${s * this.width}px`;\n\t\tthis.selection.style.top = `${this.height - v * this.height}px`;\n\t}\n\n\tprivate onDidChangeColor(): void {\n\t\tif (this.monitor && this.monitor.isMonitoring()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.paint();\n\t}\n}\n\nabstract class Strip extends Disposable {\n\n\tprotected domNode: HTMLElement;\n\tprotected overlay: HTMLElement;\n\tprotected slider: HTMLElement;\n\tprivate height: number;\n\n\tprivate _onDidChange = new Emitter<number>();\n\treadonly onDidChange: Event<number> = this._onDidChange.event;\n\n\tprivate _onColorFlushed = new Emitter<void>();\n\treadonly onColorFlushed: Event<void> = this._onColorFlushed.event;\n\n\tconstructor(container: HTMLElement, protected model: ColorPickerModel) {\n\t\tsuper();\n\t\tthis.domNode = dom.append(container, $('.strip'));\n\t\tthis.overlay = dom.append(this.domNode, $('.overlay'));\n\t\tthis.slider = dom.append(this.domNode, $('.slider'));\n\t\tthis.slider.style.top = `0px`;\n\n\t\tthis._register(dom.addDisposableListener(this.domNode, dom.EventType.MOUSE_DOWN, e => this.onMouseDown(e)));\n\t\tthis.layout();\n\t}\n\n\tlayout(): void {\n\t\tthis.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n\n\t\tconst value = this.getValue(this.model.color);\n\t\tthis.updateSliderPosition(value);\n\t}\n\n\tprivate onMouseDown(e: MouseEvent): void {\n\t\tconst monitor = this._register(new GlobalMouseMoveMonitor<IStandardMouseMoveEventData>());\n\t\tconst origin = dom.getDomNodePagePosition(this.domNode);\n\t\tdom.addClass(this.domNode, 'grabbing');\n\n\t\tif (e.target !== this.slider) {\n\t\t\tthis.onDidChangeTop(e.offsetY);\n\t\t}\n\n\t\tmonitor.startMonitoring(standardMouseMoveMerger, event => this.onDidChangeTop(event.posy - origin.top), () => null);\n\n\t\tconst mouseUpListener = dom.addDisposableListener(document, dom.EventType.MOUSE_UP, () => {\n\t\t\tthis._onColorFlushed.fire();\n\t\t\tmouseUpListener.dispose();\n\t\t\tmonitor.stopMonitoring(true);\n\t\t\tdom.removeClass(this.domNode, 'grabbing');\n\t\t}, true);\n\t}\n\n\tprivate onDidChangeTop(top: number): void {\n\t\tconst value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n\n\t\tthis.updateSliderPosition(value);\n\t\tthis._onDidChange.fire(value);\n\t}\n\n\tprivate updateSliderPosition(value: number): void {\n\t\tthis.slider.style.top = `${(1 - value) * this.height}px`;\n\t}\n\n\tprotected abstract getValue(color: Color): number;\n}\n\nclass OpacityStrip extends Strip {\n\n\tconstructor(container: HTMLElement, model: ColorPickerModel) {\n\t\tsuper(container, model);\n\t\tdom.addClass(this.domNode, 'opacity-strip');\n\n\t\tthis._register(model.onDidChangeColor(this.onDidChangeColor, this));\n\t\tthis.onDidChangeColor(this.model.color);\n\t}\n\n\tprivate onDidChangeColor(color: Color): void {\n\t\tconst { r, g, b } = color.rgba;\n\t\tconst opaque = new Color(new RGBA(r, g, b, 1));\n\t\tconst transparent = new Color(new RGBA(r, g, b, 0));\n\n\t\tthis.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n\t}\n\n\tprotected getValue(color: Color): number {\n\t\treturn color.hsva.a;\n\t}\n}\n\nclass HueStrip extends Strip {\n\n\tconstructor(container: HTMLElement, model: ColorPickerModel) {\n\t\tsuper(container, model);\n\t\tdom.addClass(this.domNode, 'hue-strip');\n\t}\n\n\tprotected getValue(color: Color): number {\n\t\treturn 1 - (color.hsva.h / 360);\n\t}\n}\n\nexport class ColorPickerWidget extends Widget {\n\n\tprivate static readonly ID = 'editor.contrib.colorPickerWidget';\n\n\tbody: ColorPickerBody;\n\n\tconstructor(container: Node, private readonly model: ColorPickerModel, private pixelRatio: number, themeService: IThemeService) {\n\t\tsuper();\n\n\t\tthis._register(onDidChangeZoomLevel(() => this.layout()));\n\n\t\tconst element = $('.colorpicker-widget');\n\t\tcontainer.appendChild(element);\n\n\t\tconst header = new ColorPickerHeader(element, this.model, themeService);\n\t\tthis.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n\n\t\tthis._register(header);\n\t\tthis._register(this.body);\n\t}\n\n\tgetId(): string {\n\t\treturn ColorPickerWidget.ID;\n\t}\n\n\tlayout(): void {\n\t\tthis.body.layout();\n\t}\n}\n"]}]}