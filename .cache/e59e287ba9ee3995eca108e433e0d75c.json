{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/debug/browser/loadedScriptsView.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/debug/browser/loadedScriptsView.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar nls = require(\"vs/nls\");\nvar dom = require(\"vs/base/browser/dom\");\nvar path_1 = require(\"vs/base/common/path\");\nvar panelViewlet_1 = require(\"vs/workbench/browser/parts/views/panelViewlet\");\nvar contextView_1 = require(\"vs/platform/contextview/browser/contextView\");\nvar keybinding_1 = require(\"vs/platform/keybinding/common/keybinding\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar baseDebugView_1 = require(\"vs/workbench/contrib/debug/browser/baseDebugView\");\nvar debug_1 = require(\"vs/workbench/contrib/debug/common/debug\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar contextkey_1 = require(\"vs/platform/contextkey/common/contextkey\");\nvar environment_1 = require(\"vs/platform/environment/common/environment\");\nvar labels_1 = require(\"vs/base/common/labels\");\nvar platform_1 = require(\"vs/base/common/platform\");\nvar uri_1 = require(\"vs/base/common/uri\");\nvar strings_1 = require(\"vs/base/common/strings\");\nvar async_1 = require(\"vs/base/common/async\");\nvar labels_2 = require(\"vs/workbench/browser/labels\");\nvar files_1 = require(\"vs/platform/files/common/files\");\nvar tree_1 = require(\"vs/base/browser/ui/tree/tree\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar listService_1 = require(\"vs/platform/list/browser/listService\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar filters_1 = require(\"vs/base/common/filters\");\nvar debugContentProvider_1 = require(\"vs/workbench/contrib/debug/common/debugContentProvider\");\nvar label_1 = require(\"vs/platform/label/common/label\");\nvar SMART = true;\n// RFC 2396, Appendix A: https://www.ietf.org/rfc/rfc2396.txt\nvar URI_SCHEMA_PATTERN = /^[a-zA-Z][a-zA-Z0-9\\+\\-\\.]+:/;\nvar BaseTreeItem = /** @class */ (function () {\n    function BaseTreeItem(_parent, _label) {\n        this._parent = _parent;\n        this._label = _label;\n        this._children = {};\n        this._showedMoreThanOne = false;\n    }\n    BaseTreeItem.prototype.isLeaf = function () {\n        return Object.keys(this._children).length === 0;\n    };\n    BaseTreeItem.prototype.getSession = function () {\n        if (this._parent) {\n            return this._parent.getSession();\n        }\n        return undefined;\n    };\n    BaseTreeItem.prototype.setSource = function (session, source) {\n        this._source = source;\n        this._children = {};\n        if (source.raw && source.raw.sources) {\n            for (var _i = 0, _a = source.raw.sources; _i < _a.length; _i++) {\n                var src = _a[_i];\n                if (src.name && src.path) {\n                    var s = new BaseTreeItem(this, src.name);\n                    this._children[src.path] = s;\n                    var ss = session.getSource(src);\n                    s.setSource(session, ss);\n                }\n            }\n        }\n    };\n    BaseTreeItem.prototype.createIfNeeded = function (key, factory) {\n        var child = this._children[key];\n        if (!child) {\n            child = factory(this, key);\n            this._children[key] = child;\n        }\n        return child;\n    };\n    BaseTreeItem.prototype.getChild = function (key) {\n        return this._children[key];\n    };\n    BaseTreeItem.prototype.remove = function (key) {\n        delete this._children[key];\n    };\n    BaseTreeItem.prototype.removeFromParent = function () {\n        if (this._parent) {\n            this._parent.remove(this._label);\n            if (Object.keys(this._parent._children).length === 0) {\n                this._parent.removeFromParent();\n            }\n        }\n    };\n    BaseTreeItem.prototype.getTemplateId = function () {\n        return 'id';\n    };\n    // a dynamic ID based on the parent chain; required for reparenting (see #55448)\n    BaseTreeItem.prototype.getId = function () {\n        var parent = this.getParent();\n        return parent ? parent.getId() + \"/\" + this._label : this._label;\n    };\n    // skips intermediate single-child nodes\n    BaseTreeItem.prototype.getParent = function () {\n        if (this._parent) {\n            if (this._parent.isSkipped()) {\n                return this._parent.getParent();\n            }\n            return this._parent;\n        }\n        return undefined;\n    };\n    BaseTreeItem.prototype.isSkipped = function () {\n        if (this._parent) {\n            if (this._parent.oneChild()) {\n                return true; // skipped if I'm the only child of my parents\n            }\n            return false;\n        }\n        return true; // roots are never skipped\n    };\n    // skips intermediate single-child nodes\n    BaseTreeItem.prototype.hasChildren = function () {\n        var child = this.oneChild();\n        if (child) {\n            return child.hasChildren();\n        }\n        return Object.keys(this._children).length > 0;\n    };\n    // skips intermediate single-child nodes\n    BaseTreeItem.prototype.getChildren = function () {\n        var _this = this;\n        var child = this.oneChild();\n        if (child) {\n            return child.getChildren();\n        }\n        var array = Object.keys(this._children).map(function (key) { return _this._children[key]; });\n        return Promise.resolve(array.sort(function (a, b) { return _this.compare(a, b); }));\n    };\n    // skips intermediate single-child nodes\n    BaseTreeItem.prototype.getLabel = function (separateRootFolder) {\n        if (separateRootFolder === void 0) { separateRootFolder = true; }\n        var child = this.oneChild();\n        if (child) {\n            var sep = (this instanceof RootFolderTreeItem && separateRootFolder) ? ' â€¢ ' : path_1.posix.sep;\n            return \"\" + this._label + sep + child.getLabel();\n        }\n        return this._label;\n    };\n    // skips intermediate single-child nodes\n    BaseTreeItem.prototype.getHoverLabel = function () {\n        if (this._source && this._parent && this._parent._source) {\n            return this._source.raw.path || this._source.raw.name;\n        }\n        var label = this.getLabel(false);\n        var parent = this.getParent();\n        if (parent) {\n            var hover = parent.getHoverLabel();\n            if (hover) {\n                return hover + \"/\" + label;\n            }\n        }\n        return label;\n    };\n    // skips intermediate single-child nodes\n    BaseTreeItem.prototype.getSource = function () {\n        var child = this.oneChild();\n        if (child) {\n            return child.getSource();\n        }\n        return this._source;\n    };\n    BaseTreeItem.prototype.compare = function (a, b) {\n        if (a._label && b._label) {\n            return a._label.localeCompare(b._label);\n        }\n        return 0;\n    };\n    BaseTreeItem.prototype.oneChild = function () {\n        if (SMART && !this._source && !this._showedMoreThanOne && !(this instanceof RootFolderTreeItem) && !(this instanceof SessionTreeItem)) {\n            var keys = Object.keys(this._children);\n            if (keys.length === 1) {\n                return this._children[keys[0]];\n            }\n            // if a node had more than one child once, it will never be skipped again\n            if (keys.length > 1) {\n                this._showedMoreThanOne = true;\n            }\n        }\n        return undefined;\n    };\n    return BaseTreeItem;\n}());\nvar RootFolderTreeItem = /** @class */ (function (_super) {\n    tslib_1.__extends(RootFolderTreeItem, _super);\n    function RootFolderTreeItem(parent, folder) {\n        var _this = _super.call(this, parent, folder.name) || this;\n        _this.folder = folder;\n        return _this;\n    }\n    return RootFolderTreeItem;\n}(BaseTreeItem));\nvar RootTreeItem = /** @class */ (function (_super) {\n    tslib_1.__extends(RootTreeItem, _super);\n    function RootTreeItem(_debugModel, _environmentService, _contextService, _labelService) {\n        var _this = _super.call(this, undefined, 'Root') || this;\n        _this._debugModel = _debugModel;\n        _this._environmentService = _environmentService;\n        _this._contextService = _contextService;\n        _this._labelService = _labelService;\n        _this._debugModel.getSessions().forEach(function (session) {\n            _this.add(session);\n        });\n        return _this;\n    }\n    RootTreeItem.prototype.add = function (session) {\n        var _this = this;\n        return this.createIfNeeded(session.getId(), function () { return new SessionTreeItem(_this._labelService, _this, session, _this._environmentService, _this._contextService); });\n    };\n    RootTreeItem.prototype.find = function (session) {\n        return this.getChild(session.getId());\n    };\n    return RootTreeItem;\n}(BaseTreeItem));\nvar SessionTreeItem = /** @class */ (function (_super) {\n    tslib_1.__extends(SessionTreeItem, _super);\n    function SessionTreeItem(labelService, parent, session, _environmentService, rootProvider) {\n        var _this = _super.call(this, parent, session.getLabel()) || this;\n        _this._environmentService = _environmentService;\n        _this.rootProvider = rootProvider;\n        _this._labelService = labelService;\n        _this._initialized = false;\n        _this._session = session;\n        _this._map = new Map();\n        return _this;\n    }\n    SessionTreeItem.prototype.getSession = function () {\n        return this._session;\n    };\n    SessionTreeItem.prototype.getHoverLabel = function () {\n        return undefined;\n    };\n    SessionTreeItem.prototype.hasChildren = function () {\n        return true;\n    };\n    SessionTreeItem.prototype.getChildren = function () {\n        var _this = this;\n        if (!this._initialized) {\n            this._initialized = true;\n            return this._session.getLoadedSources().then(function (paths) {\n                paths.forEach(function (path) { return _this.addPath(path); });\n                return _super.prototype.getChildren.call(_this);\n            });\n        }\n        return _super.prototype.getChildren.call(this);\n    };\n    SessionTreeItem.prototype.compare = function (a, b) {\n        var acat = this.category(a);\n        var bcat = this.category(b);\n        if (acat !== bcat) {\n            return acat - bcat;\n        }\n        return _super.prototype.compare.call(this, a, b);\n    };\n    SessionTreeItem.prototype.category = function (item) {\n        // workspace scripts come at the beginning in \"folder\" order\n        if (item instanceof RootFolderTreeItem) {\n            return item.folder.index;\n        }\n        // <...> come at the very end\n        var l = item.getLabel();\n        if (l && /^<.+>$/.test(l)) {\n            return 1000;\n        }\n        // everything else in between\n        return 999;\n    };\n    SessionTreeItem.prototype.addPath = function (source) {\n        var folder;\n        var url;\n        var path = source.raw.path;\n        if (!path) {\n            return;\n        }\n        if (this._labelService && URI_SCHEMA_PATTERN.test(path)) {\n            path = this._labelService.getUriLabel(uri_1.URI.parse(path));\n        }\n        var match = SessionTreeItem.URL_REGEXP.exec(path);\n        if (match && match.length === 3) {\n            url = match[1];\n            path = decodeURI(match[2]);\n        }\n        else {\n            if (path_1.isAbsolute(path)) {\n                var resource = uri_1.URI.file(path);\n                // return early if we can resolve a relative path label from the root folder\n                folder = this.rootProvider ? this.rootProvider.getWorkspaceFolder(resource) : null;\n                if (folder) {\n                    // strip off the root folder path\n                    path = path_1.normalize(strings_1.ltrim(resource.path.substr(folder.uri.path.length), path_1.posix.sep));\n                    var hasMultipleRoots = this.rootProvider.getWorkspace().folders.length > 1;\n                    if (hasMultipleRoots) {\n                        path = path_1.posix.sep + path;\n                    }\n                    else {\n                        // don't show root folder\n                        folder = null;\n                    }\n                }\n                else {\n                    // on unix try to tildify absolute paths\n                    path = path_1.normalize(path);\n                    if (!platform_1.isWindows) {\n                        path = labels_1.tildify(path, this._environmentService.userHome);\n                    }\n                }\n            }\n        }\n        var leaf = this;\n        path.split(/[\\/\\\\]/).forEach(function (segment, i) {\n            if (i === 0 && folder) {\n                var f_1 = folder;\n                leaf = leaf.createIfNeeded(folder.name, function (parent) { return new RootFolderTreeItem(parent, f_1); });\n            }\n            else if (i === 0 && url) {\n                leaf = leaf.createIfNeeded(url, function (parent) { return new BaseTreeItem(parent, url); });\n            }\n            else {\n                leaf = leaf.createIfNeeded(segment, function (parent) { return new BaseTreeItem(parent, segment); });\n            }\n        });\n        leaf.setSource(this._session, source);\n        if (source.raw.path) {\n            this._map.set(source.raw.path, leaf);\n        }\n    };\n    SessionTreeItem.prototype.removePath = function (source) {\n        if (source.raw.path) {\n            var leaf = this._map.get(source.raw.path);\n            if (leaf) {\n                leaf.removeFromParent();\n                return true;\n            }\n        }\n        return false;\n    };\n    SessionTreeItem.URL_REGEXP = /^(https?:\\/\\/[^/]+)(\\/.*)$/;\n    return SessionTreeItem;\n}(BaseTreeItem));\nvar LoadedScriptsView = /** @class */ (function (_super) {\n    tslib_1.__extends(LoadedScriptsView, _super);\n    function LoadedScriptsView(options, contextMenuService, keybindingService, instantiationService, configurationService, editorService, contextKeyService, contextService, environmentService, debugService, labelService) {\n        var _this = _super.call(this, tslib_1.__assign({}, options, { ariaHeaderLabel: nls.localize('loadedScriptsSection', \"Loaded Scripts Section\") }), keybindingService, contextMenuService, configurationService) || this;\n        _this.instantiationService = instantiationService;\n        _this.editorService = editorService;\n        _this.contextKeyService = contextKeyService;\n        _this.contextService = contextService;\n        _this.environmentService = environmentService;\n        _this.debugService = debugService;\n        _this.labelService = labelService;\n        _this.loadedScriptsItemType = debug_1.CONTEXT_LOADED_SCRIPTS_ITEM_TYPE.bindTo(contextKeyService);\n        return _this;\n    }\n    LoadedScriptsView.prototype.renderBody = function (container) {\n        var _this = this;\n        dom.addClass(container, 'debug-loaded-scripts');\n        dom.addClass(container, 'show-file-icons');\n        this.treeContainer = baseDebugView_1.renderViewTree(container);\n        this.filter = new LoadedScriptsFilter();\n        var root = new RootTreeItem(this.debugService.getModel(), this.environmentService, this.contextService, this.labelService);\n        this.treeLabels = this.instantiationService.createInstance(labels_2.ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility });\n        this.disposables.push(this.treeLabels);\n        this.tree = this.instantiationService.createInstance(listService_1.WorkbenchAsyncDataTree, this.treeContainer, new LoadedScriptsDelegate(), [new LoadedScriptsRenderer(this.treeLabels)], new LoadedScriptsDataSource(), {\n            identityProvider: {\n                getId: function (element) { return element.getId(); }\n            },\n            keyboardNavigationLabelProvider: {\n                getKeyboardNavigationLabel: function (element) { return element.getLabel(); }\n            },\n            filter: this.filter,\n            accessibilityProvider: new LoadedSciptsAccessibilityProvider(),\n            ariaLabel: nls.localize({ comment: ['Debug is a noun in this context, not a verb.'], key: 'loadedScriptsAriaLabel' }, \"Debug Loaded Scripts\"),\n        });\n        this.tree.setInput(root);\n        this.changeScheduler = new async_1.RunOnceScheduler(function () {\n            _this.treeNeedsRefreshOnVisible = false;\n            if (_this.tree) {\n                _this.tree.updateChildren();\n            }\n        }, 300);\n        this.disposables.push(this.changeScheduler);\n        var loadedScriptsNavigator = new listService_1.TreeResourceNavigator2(this.tree);\n        this.disposables.push(loadedScriptsNavigator);\n        this.disposables.push(loadedScriptsNavigator.onDidOpenResource(function (e) {\n            if (e.element instanceof BaseTreeItem) {\n                var source = e.element.getSource();\n                if (source && source.available) {\n                    var nullRange = { startLineNumber: 0, startColumn: 0, endLineNumber: 0, endColumn: 0 };\n                    source.openInEditor(_this.editorService, nullRange, e.editorOptions.preserveFocus, e.sideBySide, e.editorOptions.pinned);\n                }\n            }\n        }));\n        this.disposables.push(this.tree.onDidChangeFocus(function () {\n            var focus = _this.tree.getFocus();\n            if (focus instanceof SessionTreeItem) {\n                _this.loadedScriptsItemType.set('session');\n            }\n            else {\n                _this.loadedScriptsItemType.reset();\n            }\n        }));\n        var registerLoadedSourceListener = function (session) {\n            _this.disposables.push(session.onDidLoadedSource(function (event) {\n                var sessionRoot;\n                switch (event.reason) {\n                    case 'new':\n                    case 'changed':\n                        sessionRoot = root.add(session);\n                        sessionRoot.addPath(event.source);\n                        if (_this.isBodyVisible()) {\n                            _this.changeScheduler.schedule();\n                        }\n                        else {\n                            _this.treeNeedsRefreshOnVisible = true;\n                        }\n                        if (event.reason === 'changed') {\n                            debugContentProvider_1.DebugContentProvider.refreshDebugContent(event.source.uri);\n                        }\n                        break;\n                    case 'removed':\n                        sessionRoot = root.find(session);\n                        if (sessionRoot && sessionRoot.removePath(event.source)) {\n                            if (_this.isBodyVisible()) {\n                                _this.changeScheduler.schedule();\n                            }\n                            else {\n                                _this.treeNeedsRefreshOnVisible = true;\n                            }\n                        }\n                        break;\n                    default:\n                        _this.filter.setFilter(event.source.name);\n                        _this.tree.refilter();\n                        break;\n                }\n            }));\n        };\n        this.disposables.push(this.debugService.onDidNewSession(registerLoadedSourceListener));\n        this.debugService.getModel().getSessions().forEach(registerLoadedSourceListener);\n        this.disposables.push(this.debugService.onDidEndSession(function (session) {\n            root.remove(session.getId());\n            _this.changeScheduler.schedule();\n        }));\n        this.changeScheduler.schedule(0);\n        this.disposables.push(this.onDidChangeBodyVisibility(function (visible) {\n            if (visible && _this.treeNeedsRefreshOnVisible) {\n                _this.changeScheduler.schedule();\n            }\n        }));\n    };\n    LoadedScriptsView.prototype.layoutBody = function (height, width) {\n        this.tree.layout(height, width);\n    };\n    LoadedScriptsView.prototype.dispose = function () {\n        this.tree = lifecycle_1.dispose(this.tree);\n        this.treeLabels = lifecycle_1.dispose(this.treeLabels);\n        _super.prototype.dispose.call(this);\n    };\n    LoadedScriptsView = tslib_1.__decorate([\n        tslib_1.__param(1, contextView_1.IContextMenuService),\n        tslib_1.__param(2, keybinding_1.IKeybindingService),\n        tslib_1.__param(3, instantiation_1.IInstantiationService),\n        tslib_1.__param(4, configuration_1.IConfigurationService),\n        tslib_1.__param(5, editorService_1.IEditorService),\n        tslib_1.__param(6, contextkey_1.IContextKeyService),\n        tslib_1.__param(7, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(8, environment_1.IEnvironmentService),\n        tslib_1.__param(9, debug_1.IDebugService),\n        tslib_1.__param(10, label_1.ILabelService)\n    ], LoadedScriptsView);\n    return LoadedScriptsView;\n}(panelViewlet_1.ViewletPanel));\nexports.LoadedScriptsView = LoadedScriptsView;\nvar LoadedScriptsDelegate = /** @class */ (function () {\n    function LoadedScriptsDelegate() {\n    }\n    LoadedScriptsDelegate.prototype.getHeight = function (element) {\n        return 22;\n    };\n    LoadedScriptsDelegate.prototype.getTemplateId = function (element) {\n        return LoadedScriptsRenderer.ID;\n    };\n    return LoadedScriptsDelegate;\n}());\nvar LoadedScriptsDataSource = /** @class */ (function () {\n    function LoadedScriptsDataSource() {\n    }\n    LoadedScriptsDataSource.prototype.hasChildren = function (element) {\n        return element.hasChildren();\n    };\n    LoadedScriptsDataSource.prototype.getChildren = function (element) {\n        return element.getChildren();\n    };\n    return LoadedScriptsDataSource;\n}());\nvar LoadedScriptsRenderer = /** @class */ (function () {\n    function LoadedScriptsRenderer(labels) {\n        this.labels = labels;\n    }\n    Object.defineProperty(LoadedScriptsRenderer.prototype, \"templateId\", {\n        get: function () {\n            return LoadedScriptsRenderer.ID;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LoadedScriptsRenderer.prototype.renderTemplate = function (container) {\n        var label = this.labels.create(container, { supportHighlights: true });\n        return { label: label };\n    };\n    LoadedScriptsRenderer.prototype.renderElement = function (node, index, data) {\n        var element = node.element;\n        var label = {\n            name: element.getLabel()\n        };\n        var options = {\n            title: element.getHoverLabel()\n        };\n        if (element instanceof RootFolderTreeItem) {\n            options.fileKind = files_1.FileKind.ROOT_FOLDER;\n        }\n        else if (element instanceof SessionTreeItem) {\n            options.title = nls.localize('loadedScriptsSession', \"Debug Session\");\n            options.hideIcon = true;\n        }\n        else if (element instanceof BaseTreeItem) {\n            var src = element.getSource();\n            if (src && src.uri) {\n                label.resource = src.uri;\n                options.fileKind = files_1.FileKind.FILE;\n            }\n            else {\n                options.fileKind = files_1.FileKind.FOLDER;\n            }\n        }\n        options.matches = filters_1.createMatches(node.filterData);\n        data.label.setResource(label, options);\n    };\n    LoadedScriptsRenderer.prototype.disposeTemplate = function (templateData) {\n        templateData.label.dispose();\n    };\n    LoadedScriptsRenderer.ID = 'lsrenderer';\n    return LoadedScriptsRenderer;\n}());\nvar LoadedSciptsAccessibilityProvider = /** @class */ (function () {\n    function LoadedSciptsAccessibilityProvider() {\n    }\n    LoadedSciptsAccessibilityProvider.prototype.getAriaLabel = function (element) {\n        if (element instanceof RootFolderTreeItem) {\n            return nls.localize('loadedScriptsRootFolderAriaLabel', \"Workspace folder {0}, loaded script, debug\", element.getLabel());\n        }\n        if (element instanceof SessionTreeItem) {\n            return nls.localize('loadedScriptsSessionAriaLabel', \"Session {0}, loaded script, debug\", element.getLabel());\n        }\n        if (element.hasChildren()) {\n            return nls.localize('loadedScriptsFolderAriaLabel', \"Folder {0}, loaded script, debug\", element.getLabel());\n        }\n        else {\n            return nls.localize('loadedScriptsSourceAriaLabel', \"{0}, loaded script, debug\", element.getLabel());\n        }\n    };\n    return LoadedSciptsAccessibilityProvider;\n}());\nvar LoadedScriptsFilter = /** @class */ (function () {\n    function LoadedScriptsFilter() {\n    }\n    LoadedScriptsFilter.prototype.setFilter = function (filterText) {\n        this.filterText = filterText;\n    };\n    LoadedScriptsFilter.prototype.filter = function (element, parentVisibility) {\n        if (!this.filterText) {\n            return tree_1.TreeVisibility.Visible;\n        }\n        if (element.isLeaf()) {\n            var name = element.getLabel();\n            if (name.indexOf(this.filterText) >= 0) {\n                return tree_1.TreeVisibility.Visible;\n            }\n            return tree_1.TreeVisibility.Hidden;\n        }\n        return tree_1.TreeVisibility.Recurse;\n    };\n    return LoadedScriptsFilter;\n}());\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/debug/browser/loadedScriptsView.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/debug/browser/loadedScriptsView.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport * as dom from 'vs/base/browser/dom';\nimport { IViewletViewOptions } from 'vs/workbench/browser/parts/views/viewsViewlet';\nimport { normalize, isAbsolute, posix } from 'vs/base/common/path';\nimport { IViewletPanelOptions, ViewletPanel } from 'vs/workbench/browser/parts/views/panelViewlet';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { renderViewTree } from 'vs/workbench/contrib/debug/browser/baseDebugView';\nimport { IDebugSession, IDebugService, IDebugModel, CONTEXT_LOADED_SCRIPTS_ITEM_TYPE } from 'vs/workbench/contrib/debug/common/debug';\nimport { Source } from 'vs/workbench/contrib/debug/common/debugSource';\nimport { IWorkspaceContextService, IWorkspaceFolder } from 'vs/platform/workspace/common/workspace';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { tildify } from 'vs/base/common/labels';\nimport { isWindows } from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\nimport { ltrim } from 'vs/base/common/strings';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { ResourceLabels, IResourceLabelProps, IResourceLabelOptions, IResourceLabel, IResourceLabelsContainer } from 'vs/workbench/browser/labels';\nimport { FileKind } from 'vs/platform/files/common/files';\nimport { IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { ITreeRenderer, ITreeNode, ITreeFilter, TreeVisibility, TreeFilterResult, IAsyncDataSource } from 'vs/base/browser/ui/tree/tree';\nimport { IAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { WorkbenchAsyncDataTree, TreeResourceNavigator2 } from 'vs/platform/list/browser/listService';\nimport { dispose } from 'vs/base/common/lifecycle';\nimport { createMatches, FuzzyScore } from 'vs/base/common/filters';\nimport { DebugContentProvider } from 'vs/workbench/contrib/debug/common/debugContentProvider';\nimport { ILabelService } from 'vs/platform/label/common/label';\n\nconst SMART = true;\n\n// RFC 2396, Appendix A: https://www.ietf.org/rfc/rfc2396.txt\nconst URI_SCHEMA_PATTERN = /^[a-zA-Z][a-zA-Z0-9\\+\\-\\.]+:/;\n\ntype LoadedScriptsItem = BaseTreeItem;\n\nclass BaseTreeItem {\n\n\tprivate _showedMoreThanOne: boolean;\n\tprivate _children: { [key: string]: BaseTreeItem; };\n\tprivate _source: Source;\n\n\tconstructor(private _parent: BaseTreeItem | undefined, private _label: string) {\n\t\tthis._children = {};\n\t\tthis._showedMoreThanOne = false;\n\t}\n\n\tisLeaf(): boolean {\n\t\treturn Object.keys(this._children).length === 0;\n\t}\n\n\tgetSession(): IDebugSession | undefined {\n\t\tif (this._parent) {\n\t\t\treturn this._parent.getSession();\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsetSource(session: IDebugSession, source: Source): void {\n\t\tthis._source = source;\n\t\tthis._children = {};\n\t\tif (source.raw && source.raw.sources) {\n\t\t\tfor (const src of source.raw.sources) {\n\t\t\t\tif (src.name && src.path) {\n\t\t\t\t\tconst s = new BaseTreeItem(this, src.name);\n\t\t\t\t\tthis._children[src.path] = s;\n\t\t\t\t\tconst ss = session.getSource(src);\n\t\t\t\t\ts.setSource(session, ss);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateIfNeeded<T extends BaseTreeItem>(key: string, factory: (parent: BaseTreeItem, label: string) => T): T {\n\t\tlet child = <T>this._children[key];\n\t\tif (!child) {\n\t\t\tchild = factory(this, key);\n\t\t\tthis._children[key] = child;\n\t\t}\n\t\treturn child;\n\t}\n\n\tgetChild(key: string): BaseTreeItem {\n\t\treturn this._children[key];\n\t}\n\n\tremove(key: string): void {\n\t\tdelete this._children[key];\n\t}\n\n\tremoveFromParent(): void {\n\t\tif (this._parent) {\n\t\t\tthis._parent.remove(this._label);\n\t\t\tif (Object.keys(this._parent._children).length === 0) {\n\t\t\t\tthis._parent.removeFromParent();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTemplateId(): string {\n\t\treturn 'id';\n\t}\n\n\t// a dynamic ID based on the parent chain; required for reparenting (see #55448)\n\tgetId(): string {\n\t\tconst parent = this.getParent();\n\t\treturn parent ? `${parent.getId()}/${this._label}` : this._label;\n\t}\n\n\t// skips intermediate single-child nodes\n\tgetParent(): BaseTreeItem | undefined {\n\t\tif (this._parent) {\n\t\t\tif (this._parent.isSkipped()) {\n\t\t\t\treturn this._parent.getParent();\n\t\t\t}\n\t\t\treturn this._parent;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tisSkipped(): boolean {\n\t\tif (this._parent) {\n\t\t\tif (this._parent.oneChild()) {\n\t\t\t\treturn true;\t// skipped if I'm the only child of my parents\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\t// roots are never skipped\n\t}\n\n\t// skips intermediate single-child nodes\n\thasChildren(): boolean {\n\t\tconst child = this.oneChild();\n\t\tif (child) {\n\t\t\treturn child.hasChildren();\n\t\t}\n\t\treturn Object.keys(this._children).length > 0;\n\t}\n\n\t// skips intermediate single-child nodes\n\tgetChildren(): Promise<BaseTreeItem[]> {\n\t\tconst child = this.oneChild();\n\t\tif (child) {\n\t\t\treturn child.getChildren();\n\t\t}\n\t\tconst array = Object.keys(this._children).map(key => this._children[key]);\n\t\treturn Promise.resolve(array.sort((a, b) => this.compare(a, b)));\n\t}\n\n\t// skips intermediate single-child nodes\n\tgetLabel(separateRootFolder = true): string {\n\t\tconst child = this.oneChild();\n\t\tif (child) {\n\t\t\tconst sep = (this instanceof RootFolderTreeItem && separateRootFolder) ? ' â€¢ ' : posix.sep;\n\t\t\treturn `${this._label}${sep}${child.getLabel()}`;\n\t\t}\n\t\treturn this._label;\n\t}\n\n\t// skips intermediate single-child nodes\n\tgetHoverLabel(): string | undefined {\n\t\tif (this._source && this._parent && this._parent._source) {\n\t\t\treturn this._source.raw.path || this._source.raw.name;\n\t\t}\n\t\tlet label = this.getLabel(false);\n\t\tconst parent = this.getParent();\n\t\tif (parent) {\n\t\t\tconst hover = parent.getHoverLabel();\n\t\t\tif (hover) {\n\t\t\t\treturn `${hover}/${label}`;\n\t\t\t}\n\t\t}\n\t\treturn label;\n\t}\n\n\t// skips intermediate single-child nodes\n\tgetSource(): Source {\n\t\tconst child = this.oneChild();\n\t\tif (child) {\n\t\t\treturn child.getSource();\n\t\t}\n\t\treturn this._source;\n\t}\n\n\tprotected compare(a: BaseTreeItem, b: BaseTreeItem): number {\n\t\tif (a._label && b._label) {\n\t\t\treturn a._label.localeCompare(b._label);\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprivate oneChild(): BaseTreeItem | undefined {\n\t\tif (SMART && !this._source && !this._showedMoreThanOne && !(this instanceof RootFolderTreeItem) && !(this instanceof SessionTreeItem)) {\n\t\t\tconst keys = Object.keys(this._children);\n\t\t\tif (keys.length === 1) {\n\t\t\t\treturn this._children[keys[0]];\n\t\t\t}\n\t\t\t// if a node had more than one child once, it will never be skipped again\n\t\t\tif (keys.length > 1) {\n\t\t\t\tthis._showedMoreThanOne = true;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass RootFolderTreeItem extends BaseTreeItem {\n\n\tconstructor(parent: BaseTreeItem, public folder: IWorkspaceFolder) {\n\t\tsuper(parent, folder.name);\n\t}\n}\n\nclass RootTreeItem extends BaseTreeItem {\n\n\tconstructor(private _debugModel: IDebugModel, private _environmentService: IEnvironmentService, private _contextService: IWorkspaceContextService, private _labelService: ILabelService) {\n\t\tsuper(undefined, 'Root');\n\t\tthis._debugModel.getSessions().forEach(session => {\n\t\t\tthis.add(session);\n\t\t});\n\t}\n\n\tadd(session: IDebugSession): SessionTreeItem {\n\t\treturn this.createIfNeeded(session.getId(), () => new SessionTreeItem(this._labelService, this, session, this._environmentService, this._contextService));\n\t}\n\n\tfind(session: IDebugSession): SessionTreeItem {\n\t\treturn <SessionTreeItem>this.getChild(session.getId());\n\t}\n}\n\nclass SessionTreeItem extends BaseTreeItem {\n\n\tprivate static URL_REGEXP = /^(https?:\\/\\/[^/]+)(\\/.*)$/;\n\n\tprivate _session: IDebugSession;\n\tprivate _initialized: boolean;\n\tprivate _map: Map<string, BaseTreeItem>;\n\tprivate _labelService: ILabelService;\n\n\tconstructor(labelService: ILabelService, parent: BaseTreeItem, session: IDebugSession, private _environmentService: IEnvironmentService, private rootProvider: IWorkspaceContextService) {\n\t\tsuper(parent, session.getLabel());\n\t\tthis._labelService = labelService;\n\t\tthis._initialized = false;\n\t\tthis._session = session;\n\t\tthis._map = new Map();\n\t}\n\n\tgetSession(): IDebugSession {\n\t\treturn this._session;\n\t}\n\n\tgetHoverLabel(): string | undefined {\n\t\treturn undefined;\n\t}\n\n\thasChildren(): boolean {\n\t\treturn true;\n\t}\n\n\tgetChildren(): Promise<BaseTreeItem[]> {\n\n\t\tif (!this._initialized) {\n\t\t\tthis._initialized = true;\n\t\t\treturn this._session.getLoadedSources().then(paths => {\n\t\t\t\tpaths.forEach(path => this.addPath(path));\n\t\t\t\treturn super.getChildren();\n\t\t\t});\n\t\t}\n\n\t\treturn super.getChildren();\n\t}\n\n\tprotected compare(a: BaseTreeItem, b: BaseTreeItem): number {\n\t\tconst acat = this.category(a);\n\t\tconst bcat = this.category(b);\n\t\tif (acat !== bcat) {\n\t\t\treturn acat - bcat;\n\t\t}\n\t\treturn super.compare(a, b);\n\t}\n\n\tprivate category(item: BaseTreeItem): number {\n\n\t\t// workspace scripts come at the beginning in \"folder\" order\n\t\tif (item instanceof RootFolderTreeItem) {\n\t\t\treturn item.folder.index;\n\t\t}\n\n\t\t// <...> come at the very end\n\t\tconst l = item.getLabel();\n\t\tif (l && /^<.+>$/.test(l)) {\n\t\t\treturn 1000;\n\t\t}\n\n\t\t// everything else in between\n\t\treturn 999;\n\t}\n\n\taddPath(source: Source): void {\n\n\t\tlet folder: IWorkspaceFolder | null;\n\t\tlet url: string;\n\n\t\tlet path = source.raw.path;\n\t\tif (!path) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._labelService && URI_SCHEMA_PATTERN.test(path)) {\n\t\t\tpath = this._labelService.getUriLabel(URI.parse(path));\n\t\t}\n\n\t\tconst match = SessionTreeItem.URL_REGEXP.exec(path);\n\t\tif (match && match.length === 3) {\n\t\t\turl = match[1];\n\t\t\tpath = decodeURI(match[2]);\n\t\t} else {\n\t\t\tif (isAbsolute(path)) {\n\t\t\t\tconst resource = URI.file(path);\n\n\t\t\t\t// return early if we can resolve a relative path label from the root folder\n\t\t\t\tfolder = this.rootProvider ? this.rootProvider.getWorkspaceFolder(resource) : null;\n\t\t\t\tif (folder) {\n\t\t\t\t\t// strip off the root folder path\n\t\t\t\t\tpath = normalize(ltrim(resource.path.substr(folder.uri.path.length), posix.sep));\n\t\t\t\t\tconst hasMultipleRoots = this.rootProvider.getWorkspace().folders.length > 1;\n\t\t\t\t\tif (hasMultipleRoots) {\n\t\t\t\t\t\tpath = posix.sep + path;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// don't show root folder\n\t\t\t\t\t\tfolder = null;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// on unix try to tildify absolute paths\n\t\t\t\t\tpath = normalize(path);\n\t\t\t\t\tif (!isWindows) {\n\t\t\t\t\t\tpath = tildify(path, this._environmentService.userHome);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet leaf: BaseTreeItem = this;\n\t\tpath.split(/[\\/\\\\]/).forEach((segment, i) => {\n\t\t\tif (i === 0 && folder) {\n\t\t\t\tconst f = folder;\n\t\t\t\tleaf = leaf.createIfNeeded(folder.name, parent => new RootFolderTreeItem(parent, f));\n\t\t\t} else if (i === 0 && url) {\n\t\t\t\tleaf = leaf.createIfNeeded(url, parent => new BaseTreeItem(parent, url));\n\t\t\t} else {\n\t\t\t\tleaf = leaf.createIfNeeded(segment, parent => new BaseTreeItem(parent, segment));\n\t\t\t}\n\t\t});\n\n\t\tleaf.setSource(this._session, source);\n\t\tif (source.raw.path) {\n\t\t\tthis._map.set(source.raw.path, leaf);\n\t\t}\n\t}\n\n\tremovePath(source: Source): boolean {\n\t\tif (source.raw.path) {\n\t\t\tconst leaf = this._map.get(source.raw.path);\n\t\t\tif (leaf) {\n\t\t\t\tleaf.removeFromParent();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class LoadedScriptsView extends ViewletPanel {\n\n\tprivate treeContainer: HTMLElement;\n\tprivate loadedScriptsItemType: IContextKey<string>;\n\tprivate tree: WorkbenchAsyncDataTree<LoadedScriptsItem, LoadedScriptsItem, FuzzyScore>;\n\tprivate treeLabels: ResourceLabels;\n\tprivate changeScheduler: RunOnceScheduler;\n\tprivate treeNeedsRefreshOnVisible: boolean;\n\tprivate filter: LoadedScriptsFilter;\n\n\tconstructor(\n\t\toptions: IViewletViewOptions,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IContextKeyService readonly contextKeyService: IContextKeyService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@ILabelService private readonly labelService: ILabelService\n\t) {\n\t\tsuper({ ...(options as IViewletPanelOptions), ariaHeaderLabel: nls.localize('loadedScriptsSection', \"Loaded Scripts Section\") }, keybindingService, contextMenuService, configurationService);\n\t\tthis.loadedScriptsItemType = CONTEXT_LOADED_SCRIPTS_ITEM_TYPE.bindTo(contextKeyService);\n\t}\n\n\trenderBody(container: HTMLElement): void {\n\t\tdom.addClass(container, 'debug-loaded-scripts');\n\t\tdom.addClass(container, 'show-file-icons');\n\n\t\tthis.treeContainer = renderViewTree(container);\n\n\t\tthis.filter = new LoadedScriptsFilter();\n\n\t\tconst root = new RootTreeItem(this.debugService.getModel(), this.environmentService, this.contextService, this.labelService);\n\n\t\tthis.treeLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility } as IResourceLabelsContainer);\n\t\tthis.disposables.push(this.treeLabels);\n\n\t\tthis.tree = this.instantiationService.createInstance(WorkbenchAsyncDataTree, this.treeContainer, new LoadedScriptsDelegate(),\n\t\t\t[new LoadedScriptsRenderer(this.treeLabels)],\n\t\t\tnew LoadedScriptsDataSource(),\n\t\t\t{\n\t\t\t\tidentityProvider: {\n\t\t\t\t\tgetId: (element: LoadedScriptsItem) => element.getId()\n\t\t\t\t},\n\t\t\t\tkeyboardNavigationLabelProvider: {\n\t\t\t\t\tgetKeyboardNavigationLabel: (element: LoadedScriptsItem) => element.getLabel()\n\t\t\t\t},\n\t\t\t\tfilter: this.filter,\n\t\t\t\taccessibilityProvider: new LoadedSciptsAccessibilityProvider(),\n\t\t\t\tariaLabel: nls.localize({ comment: ['Debug is a noun in this context, not a verb.'], key: 'loadedScriptsAriaLabel' }, \"Debug Loaded Scripts\"),\n\t\t\t}\n\t\t) as WorkbenchAsyncDataTree<LoadedScriptsItem, LoadedScriptsItem, FuzzyScore>;\n\n\t\tthis.tree.setInput(root);\n\n\t\tthis.changeScheduler = new RunOnceScheduler(() => {\n\t\t\tthis.treeNeedsRefreshOnVisible = false;\n\t\t\tif (this.tree) {\n\t\t\t\tthis.tree.updateChildren();\n\t\t\t}\n\t\t}, 300);\n\t\tthis.disposables.push(this.changeScheduler);\n\n\t\tconst loadedScriptsNavigator = new TreeResourceNavigator2(this.tree);\n\t\tthis.disposables.push(loadedScriptsNavigator);\n\t\tthis.disposables.push(loadedScriptsNavigator.onDidOpenResource(e => {\n\t\t\tif (e.element instanceof BaseTreeItem) {\n\t\t\t\tconst source = e.element.getSource();\n\t\t\t\tif (source && source.available) {\n\t\t\t\t\tconst nullRange = { startLineNumber: 0, startColumn: 0, endLineNumber: 0, endColumn: 0 };\n\t\t\t\t\tsource.openInEditor(this.editorService, nullRange, e.editorOptions.preserveFocus, e.sideBySide, e.editorOptions.pinned);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.disposables.push(this.tree.onDidChangeFocus(() => {\n\t\t\tconst focus = this.tree.getFocus();\n\t\t\tif (focus instanceof SessionTreeItem) {\n\t\t\t\tthis.loadedScriptsItemType.set('session');\n\t\t\t} else {\n\t\t\t\tthis.loadedScriptsItemType.reset();\n\t\t\t}\n\t\t}));\n\n\t\tconst registerLoadedSourceListener = (session: IDebugSession) => {\n\t\t\tthis.disposables.push(session.onDidLoadedSource(event => {\n\t\t\t\tlet sessionRoot: SessionTreeItem;\n\t\t\t\tswitch (event.reason) {\n\t\t\t\t\tcase 'new':\n\t\t\t\t\tcase 'changed':\n\t\t\t\t\t\tsessionRoot = root.add(session);\n\t\t\t\t\t\tsessionRoot.addPath(event.source);\n\t\t\t\t\t\tif (this.isBodyVisible()) {\n\t\t\t\t\t\t\tthis.changeScheduler.schedule();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.treeNeedsRefreshOnVisible = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (event.reason === 'changed') {\n\t\t\t\t\t\t\tDebugContentProvider.refreshDebugContent(event.source.uri);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'removed':\n\t\t\t\t\t\tsessionRoot = root.find(session);\n\t\t\t\t\t\tif (sessionRoot && sessionRoot.removePath(event.source)) {\n\t\t\t\t\t\t\tif (this.isBodyVisible()) {\n\t\t\t\t\t\t\t\tthis.changeScheduler.schedule();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.treeNeedsRefreshOnVisible = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.filter.setFilter(event.source.name);\n\t\t\t\t\t\tthis.tree.refilter();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}));\n\t\t};\n\n\t\tthis.disposables.push(this.debugService.onDidNewSession(registerLoadedSourceListener));\n\t\tthis.debugService.getModel().getSessions().forEach(registerLoadedSourceListener);\n\n\t\tthis.disposables.push(this.debugService.onDidEndSession(session => {\n\t\t\troot.remove(session.getId());\n\t\t\tthis.changeScheduler.schedule();\n\t\t}));\n\n\t\tthis.changeScheduler.schedule(0);\n\n\t\tthis.disposables.push(this.onDidChangeBodyVisibility(visible => {\n\t\t\tif (visible && this.treeNeedsRefreshOnVisible) {\n\t\t\t\tthis.changeScheduler.schedule();\n\t\t\t}\n\t\t}));\n\t}\n\n\tlayoutBody(height: number, width: number): void {\n\t\tthis.tree.layout(height, width);\n\t}\n\n\tdispose(): void {\n\t\tthis.tree = dispose(this.tree);\n\t\tthis.treeLabels = dispose(this.treeLabels);\n\t\tsuper.dispose();\n\t}\n}\n\nclass LoadedScriptsDelegate implements IListVirtualDelegate<LoadedScriptsItem> {\n\n\tgetHeight(element: LoadedScriptsItem): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: LoadedScriptsItem): string {\n\t\treturn LoadedScriptsRenderer.ID;\n\t}\n}\n\nclass LoadedScriptsDataSource implements IAsyncDataSource<LoadedScriptsItem, LoadedScriptsItem> {\n\n\thasChildren(element: LoadedScriptsItem): boolean {\n\t\treturn element.hasChildren();\n\t}\n\n\tgetChildren(element: LoadedScriptsItem): Promise<LoadedScriptsItem[]> {\n\t\treturn element.getChildren();\n\t}\n}\n\ninterface ILoadedScriptsItemTemplateData {\n\tlabel: IResourceLabel;\n}\n\nclass LoadedScriptsRenderer implements ITreeRenderer<BaseTreeItem, FuzzyScore, ILoadedScriptsItemTemplateData> {\n\n\tstatic readonly ID = 'lsrenderer';\n\n\tconstructor(\n\t\tprivate labels: ResourceLabels\n\t) {\n\t}\n\n\tget templateId(): string {\n\t\treturn LoadedScriptsRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): ILoadedScriptsItemTemplateData {\n\t\tconst label = this.labels.create(container, { supportHighlights: true });\n\t\treturn { label };\n\t}\n\n\trenderElement(node: ITreeNode<BaseTreeItem, FuzzyScore>, index: number, data: ILoadedScriptsItemTemplateData): void {\n\n\t\tconst element = node.element;\n\n\t\tconst label: IResourceLabelProps = {\n\t\t\tname: element.getLabel()\n\t\t};\n\t\tconst options: IResourceLabelOptions = {\n\t\t\ttitle: element.getHoverLabel()\n\t\t};\n\n\t\tif (element instanceof RootFolderTreeItem) {\n\n\t\t\toptions.fileKind = FileKind.ROOT_FOLDER;\n\n\t\t} else if (element instanceof SessionTreeItem) {\n\n\t\t\toptions.title = nls.localize('loadedScriptsSession', \"Debug Session\");\n\t\t\toptions.hideIcon = true;\n\n\t\t} else if (element instanceof BaseTreeItem) {\n\n\t\t\tconst src = element.getSource();\n\t\t\tif (src && src.uri) {\n\t\t\t\tlabel.resource = src.uri;\n\t\t\t\toptions.fileKind = FileKind.FILE;\n\t\t\t} else {\n\t\t\t\toptions.fileKind = FileKind.FOLDER;\n\t\t\t}\n\t\t}\n\t\toptions.matches = createMatches(node.filterData);\n\n\t\tdata.label.setResource(label, options);\n\t}\n\n\tdisposeTemplate(templateData: ILoadedScriptsItemTemplateData): void {\n\t\ttemplateData.label.dispose();\n\t}\n}\n\nclass LoadedSciptsAccessibilityProvider implements IAccessibilityProvider<LoadedScriptsItem> {\n\n\tgetAriaLabel(element: LoadedScriptsItem): string {\n\n\t\tif (element instanceof RootFolderTreeItem) {\n\t\t\treturn nls.localize('loadedScriptsRootFolderAriaLabel', \"Workspace folder {0}, loaded script, debug\", element.getLabel());\n\t\t}\n\n\t\tif (element instanceof SessionTreeItem) {\n\t\t\treturn nls.localize('loadedScriptsSessionAriaLabel', \"Session {0}, loaded script, debug\", element.getLabel());\n\t\t}\n\n\t\tif (element.hasChildren()) {\n\t\t\treturn nls.localize('loadedScriptsFolderAriaLabel', \"Folder {0}, loaded script, debug\", element.getLabel());\n\t\t} else {\n\t\t\treturn nls.localize('loadedScriptsSourceAriaLabel', \"{0}, loaded script, debug\", element.getLabel());\n\t\t}\n\t}\n}\n\nclass LoadedScriptsFilter implements ITreeFilter<BaseTreeItem, FuzzyScore> {\n\n\tprivate filterText: string;\n\n\tsetFilter(filterText: string) {\n\t\tthis.filterText = filterText;\n\t}\n\n\tfilter(element: BaseTreeItem, parentVisibility: TreeVisibility): TreeFilterResult<FuzzyScore> {\n\n\t\tif (!this.filterText) {\n\t\t\treturn TreeVisibility.Visible;\n\t\t}\n\n\t\tif (element.isLeaf()) {\n\t\t\tconst name = element.getLabel();\n\t\t\tif (name.indexOf(this.filterText) >= 0) {\n\t\t\t\treturn TreeVisibility.Visible;\n\t\t\t}\n\t\t\treturn TreeVisibility.Hidden;\n\t\t}\n\t\treturn TreeVisibility.Recurse;\n\t}\n}\n"]}]}