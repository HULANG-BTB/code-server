{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/preferences/browser/preferencesWidgets.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/preferences/browser/preferencesWidgets.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar DOM = require(\"vs/base/browser/dom\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar inputBox_1 = require(\"vs/base/browser/ui/inputbox/inputBox\");\nvar widget_1 = require(\"vs/base/browser/ui/widget\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar event_1 = require(\"vs/base/common/event\");\nvar htmlContent_1 = require(\"vs/base/common/htmlContent\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar uri_1 = require(\"vs/base/common/uri\");\nvar editorBrowser_1 = require(\"vs/editor/browser/editorBrowser\");\nvar model_1 = require(\"vs/editor/common/model\");\nvar nls_1 = require(\"vs/nls\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar contextView_1 = require(\"vs/platform/contextview/browser/contextView\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar styler_1 = require(\"vs/platform/theme/common/styler\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar theme_1 = require(\"vs/workbench/common/theme\");\nvar SettingsHeaderWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(SettingsHeaderWidget, _super);\n    function SettingsHeaderWidget(editor, title) {\n        var _this = _super.call(this) || this;\n        _this.editor = editor;\n        _this.title = title;\n        _this.create();\n        _this._register(_this.editor.onDidChangeConfiguration(function () { return _this.layout(); }));\n        _this._register(_this.editor.onDidLayoutChange(function () { return _this.layout(); }));\n        return _this;\n    }\n    Object.defineProperty(SettingsHeaderWidget.prototype, \"domNode\", {\n        get: function () {\n            return this._domNode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SettingsHeaderWidget.prototype, \"heightInLines\", {\n        get: function () {\n            return 1;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SettingsHeaderWidget.prototype, \"afterLineNumber\", {\n        get: function () {\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SettingsHeaderWidget.prototype.create = function () {\n        var _this = this;\n        this._domNode = DOM.$('.settings-header-widget');\n        this.titleContainer = DOM.append(this._domNode, DOM.$('.title-container'));\n        if (this.title) {\n            DOM.append(this.titleContainer, DOM.$('.title')).textContent = this.title;\n        }\n        this.messageElement = DOM.append(this.titleContainer, DOM.$('.message'));\n        if (this.title) {\n            this.messageElement.style.paddingLeft = '12px';\n        }\n        this.editor.changeViewZones(function (accessor) {\n            _this.id = accessor.addZone(_this);\n            _this.layout();\n        });\n    };\n    SettingsHeaderWidget.prototype.setMessage = function (message) {\n        this.messageElement.textContent = message;\n    };\n    SettingsHeaderWidget.prototype.layout = function () {\n        var configuration = this.editor.getConfiguration();\n        this.titleContainer.style.fontSize = configuration.fontInfo.fontSize + 'px';\n        if (!configuration.contribInfo.folding) {\n            this.titleContainer.style.paddingLeft = '6px';\n        }\n    };\n    SettingsHeaderWidget.prototype.dispose = function () {\n        var _this = this;\n        this.editor.changeViewZones(function (accessor) {\n            accessor.removeZone(_this.id);\n        });\n        _super.prototype.dispose.call(this);\n    };\n    return SettingsHeaderWidget;\n}(widget_1.Widget));\nexports.SettingsHeaderWidget = SettingsHeaderWidget;\nvar DefaultSettingsHeaderWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(DefaultSettingsHeaderWidget, _super);\n    function DefaultSettingsHeaderWidget() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._onClick = _this._register(new event_1.Emitter());\n        _this.onClick = _this._onClick.event;\n        return _this;\n    }\n    DefaultSettingsHeaderWidget.prototype.create = function () {\n        _super.prototype.create.call(this);\n        this.toggleMessage(true);\n    };\n    DefaultSettingsHeaderWidget.prototype.toggleMessage = function (hasSettings) {\n        if (hasSettings) {\n            this.setMessage(nls_1.localize('defaultSettings', \"Place your settings in the right hand side editor to override.\"));\n        }\n        else {\n            this.setMessage(nls_1.localize('noSettingsFound', \"No Settings Found.\"));\n        }\n    };\n    return DefaultSettingsHeaderWidget;\n}(SettingsHeaderWidget));\nexports.DefaultSettingsHeaderWidget = DefaultSettingsHeaderWidget;\nvar SettingsGroupTitleWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(SettingsGroupTitleWidget, _super);\n    function SettingsGroupTitleWidget(editor, settingsGroup) {\n        var _this = _super.call(this) || this;\n        _this.editor = editor;\n        _this.settingsGroup = settingsGroup;\n        _this._onToggled = _this._register(new event_1.Emitter());\n        _this.onToggled = _this._onToggled.event;\n        _this.create();\n        _this._register(_this.editor.onDidChangeConfiguration(function () { return _this.layout(); }));\n        _this._register(_this.editor.onDidLayoutChange(function () { return _this.layout(); }));\n        _this._register(_this.editor.onDidChangeCursorPosition(function (e) { return _this.onCursorChange(e); }));\n        return _this;\n    }\n    Object.defineProperty(SettingsGroupTitleWidget.prototype, \"domNode\", {\n        get: function () {\n            return this._domNode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SettingsGroupTitleWidget.prototype, \"heightInLines\", {\n        get: function () {\n            return 1.5;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SettingsGroupTitleWidget.prototype, \"afterLineNumber\", {\n        get: function () {\n            return this._afterLineNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SettingsGroupTitleWidget.prototype.create = function () {\n        var _this = this;\n        this._domNode = DOM.$('.settings-group-title-widget');\n        this.titleContainer = DOM.append(this._domNode, DOM.$('.title-container'));\n        this.titleContainer.tabIndex = 0;\n        this.onclick(this.titleContainer, function () { return _this.toggle(); });\n        this.onkeydown(this.titleContainer, function (e) { return _this.onKeyDown(e); });\n        var focusTracker = this._register(DOM.trackFocus(this.titleContainer));\n        this._register(focusTracker.onDidFocus(function () { return _this.toggleFocus(true); }));\n        this._register(focusTracker.onDidBlur(function () { return _this.toggleFocus(false); }));\n        this.icon = DOM.append(this.titleContainer, DOM.$('.expand-collapse-icon'));\n        this.title = DOM.append(this.titleContainer, DOM.$('.title'));\n        this.title.textContent = this.settingsGroup.title + (\" (\" + this.settingsGroup.sections.reduce(function (count, section) { return count + section.settings.length; }, 0) + \")\");\n        this.layout();\n    };\n    SettingsGroupTitleWidget.prototype.render = function () {\n        var _this = this;\n        if (!this.settingsGroup.range) {\n            // #61352\n            return;\n        }\n        this._afterLineNumber = this.settingsGroup.range.startLineNumber - 2;\n        this.editor.changeViewZones(function (accessor) {\n            _this.id = accessor.addZone(_this);\n            _this.layout();\n        });\n    };\n    SettingsGroupTitleWidget.prototype.toggleCollapse = function (collapse) {\n        DOM.toggleClass(this.titleContainer, 'collapsed', collapse);\n    };\n    SettingsGroupTitleWidget.prototype.toggleFocus = function (focus) {\n        DOM.toggleClass(this.titleContainer, 'focused', focus);\n    };\n    SettingsGroupTitleWidget.prototype.isCollapsed = function () {\n        return DOM.hasClass(this.titleContainer, 'collapsed');\n    };\n    SettingsGroupTitleWidget.prototype.layout = function () {\n        var configuration = this.editor.getConfiguration();\n        var layoutInfo = this.editor.getLayoutInfo();\n        this._domNode.style.width = layoutInfo.contentWidth - layoutInfo.verticalScrollbarWidth + 'px';\n        this.titleContainer.style.lineHeight = configuration.lineHeight + 3 + 'px';\n        this.titleContainer.style.height = configuration.lineHeight + 3 + 'px';\n        this.titleContainer.style.fontSize = configuration.fontInfo.fontSize + 'px';\n        this.icon.style.minWidth = this.getIconSize(16) + \"px\";\n    };\n    SettingsGroupTitleWidget.prototype.getIconSize = function (minSize) {\n        var fontSize = this.editor.getConfiguration().fontInfo.fontSize;\n        return fontSize > 8 ? Math.max(fontSize, minSize) : 12;\n    };\n    SettingsGroupTitleWidget.prototype.onKeyDown = function (keyboardEvent) {\n        switch (keyboardEvent.keyCode) {\n            case keyCodes_1.KeyCode.Enter:\n            case keyCodes_1.KeyCode.Space:\n                this.toggle();\n                break;\n            case keyCodes_1.KeyCode.LeftArrow:\n                this.collapse(true);\n                break;\n            case keyCodes_1.KeyCode.RightArrow:\n                this.collapse(false);\n                break;\n            case keyCodes_1.KeyCode.UpArrow:\n                if (this.settingsGroup.range.startLineNumber - 3 !== 1) {\n                    this.editor.focus();\n                    var lineNumber_1 = this.settingsGroup.range.startLineNumber - 2;\n                    if (this.editor.hasModel()) {\n                        this.editor.setPosition({ lineNumber: lineNumber_1, column: this.editor.getModel().getLineMinColumn(lineNumber_1) });\n                    }\n                }\n                break;\n            case keyCodes_1.KeyCode.DownArrow:\n                var lineNumber = this.isCollapsed() ? this.settingsGroup.range.startLineNumber : this.settingsGroup.range.startLineNumber - 1;\n                this.editor.focus();\n                if (this.editor.hasModel()) {\n                    this.editor.setPosition({ lineNumber: lineNumber, column: this.editor.getModel().getLineMinColumn(lineNumber) });\n                }\n                break;\n        }\n    };\n    SettingsGroupTitleWidget.prototype.toggle = function () {\n        this.collapse(!this.isCollapsed());\n    };\n    SettingsGroupTitleWidget.prototype.collapse = function (collapse) {\n        if (collapse !== this.isCollapsed()) {\n            DOM.toggleClass(this.titleContainer, 'collapsed', collapse);\n            this._onToggled.fire(collapse);\n        }\n    };\n    SettingsGroupTitleWidget.prototype.onCursorChange = function (e) {\n        if (e.source !== 'mouse' && this.focusTitle(e.position)) {\n            this.titleContainer.focus();\n        }\n    };\n    SettingsGroupTitleWidget.prototype.focusTitle = function (currentPosition) {\n        var previousPosition = this.previousPosition;\n        this.previousPosition = currentPosition;\n        if (!previousPosition) {\n            return false;\n        }\n        if (previousPosition.lineNumber === currentPosition.lineNumber) {\n            return false;\n        }\n        if (!this.settingsGroup.range) {\n            // #60460?\n            return false;\n        }\n        if (currentPosition.lineNumber === this.settingsGroup.range.startLineNumber - 1 || currentPosition.lineNumber === this.settingsGroup.range.startLineNumber - 2) {\n            return true;\n        }\n        if (this.isCollapsed() && currentPosition.lineNumber === this.settingsGroup.range.endLineNumber) {\n            return true;\n        }\n        return false;\n    };\n    SettingsGroupTitleWidget.prototype.dispose = function () {\n        var _this = this;\n        this.editor.changeViewZones(function (accessor) {\n            accessor.removeZone(_this.id);\n        });\n        _super.prototype.dispose.call(this);\n    };\n    return SettingsGroupTitleWidget;\n}(widget_1.Widget));\nexports.SettingsGroupTitleWidget = SettingsGroupTitleWidget;\nvar FolderSettingsActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(FolderSettingsActionItem, _super);\n    function FolderSettingsActionItem(action, contextService, contextMenuService) {\n        var _this = _super.call(this, null, action) || this;\n        _this.contextService = contextService;\n        _this.contextMenuService = contextMenuService;\n        _this._folderSettingCounts = new Map();\n        _this.disposables = [];\n        var workspace = _this.contextService.getWorkspace();\n        _this._folder = workspace.folders.length === 1 ? workspace.folders[0] : null;\n        _this.disposables.push(_this.contextService.onDidChangeWorkspaceFolders(function () { return _this.onWorkspaceFoldersChanged(); }));\n        return _this;\n    }\n    Object.defineProperty(FolderSettingsActionItem.prototype, \"folder\", {\n        get: function () {\n            return this._folder;\n        },\n        set: function (folder) {\n            this._folder = folder;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FolderSettingsActionItem.prototype.setCount = function (settingsTarget, count) {\n        var workspaceFolder = this.contextService.getWorkspaceFolder(settingsTarget);\n        if (!workspaceFolder) {\n            throw new Error('unknown folder');\n        }\n        var folder = workspaceFolder.uri;\n        this._folderSettingCounts.set(folder.toString(), count);\n        this.update();\n    };\n    FolderSettingsActionItem.prototype.render = function (container) {\n        var _this = this;\n        this.element = container;\n        this.container = container;\n        this.labelElement = DOM.$('.action-title');\n        this.detailsElement = DOM.$('.action-details');\n        this.dropDownElement = DOM.$('.dropdown-icon.octicon.octicon-triangle-down.hide');\n        this.anchorElement = DOM.$('a.action-label.folder-settings', {\n            role: 'button',\n            'aria-haspopup': 'true',\n            'tabindex': '0'\n        }, this.labelElement, this.detailsElement, this.dropDownElement);\n        this._register(DOM.addDisposableListener(this.anchorElement, DOM.EventType.MOUSE_DOWN, function (e) { return DOM.EventHelper.stop(e); }));\n        this.disposables.push(DOM.addDisposableListener(this.anchorElement, DOM.EventType.CLICK, function (e) { return _this.onClick(e); }));\n        this.disposables.push(DOM.addDisposableListener(this.anchorElement, DOM.EventType.KEY_UP, function (e) { return _this.onKeyUp(e); }));\n        DOM.append(this.container, this.anchorElement);\n        this.update();\n    };\n    FolderSettingsActionItem.prototype.onKeyUp = function (event) {\n        var keyboardEvent = new keyboardEvent_1.StandardKeyboardEvent(event);\n        switch (keyboardEvent.keyCode) {\n            case keyCodes_1.KeyCode.Enter:\n            case keyCodes_1.KeyCode.Space:\n                this.onClick(event);\n                return;\n        }\n    };\n    FolderSettingsActionItem.prototype.onClick = function (event) {\n        DOM.EventHelper.stop(event, true);\n        if (!this.folder || this._action.checked) {\n            this.showMenu();\n        }\n        else {\n            this._action.run(this._folder);\n        }\n    };\n    FolderSettingsActionItem.prototype.updateEnabled = function () {\n        this.update();\n    };\n    FolderSettingsActionItem.prototype.updateChecked = function () {\n        this.update();\n    };\n    FolderSettingsActionItem.prototype.onWorkspaceFoldersChanged = function () {\n        var oldFolder = this._folder;\n        var workspace = this.contextService.getWorkspace();\n        if (oldFolder) {\n            this._folder = workspace.folders.filter(function (folder) { return folder.uri.toString() === oldFolder.uri.toString(); })[0] || workspace.folders[0];\n        }\n        this._folder = this._folder ? this._folder : workspace.folders.length === 1 ? workspace.folders[0] : null;\n        this.update();\n        if (this._action.checked) {\n            if ((oldFolder || !this._folder)\n                || (!oldFolder || this._folder)\n                || (oldFolder && this._folder && oldFolder.uri.toString() === this._folder.uri.toString())) {\n                this._action.run(this._folder);\n            }\n        }\n    };\n    FolderSettingsActionItem.prototype.update = function () {\n        var total = 0;\n        this._folderSettingCounts.forEach(function (n) { return total += n; });\n        var workspace = this.contextService.getWorkspace();\n        if (this._folder) {\n            this.labelElement.textContent = this._folder.name;\n            this.anchorElement.title = this._folder.name;\n            var detailsText = this.labelWithCount(this._action.label, total);\n            this.detailsElement.textContent = detailsText;\n            DOM.toggleClass(this.dropDownElement, 'hide', workspace.folders.length === 1 || !this._action.checked);\n        }\n        else {\n            var labelText = this.labelWithCount(this._action.label, total);\n            this.labelElement.textContent = labelText;\n            this.detailsElement.textContent = '';\n            this.anchorElement.title = this._action.label;\n            DOM.removeClass(this.dropDownElement, 'hide');\n        }\n        DOM.toggleClass(this.anchorElement, 'checked', this._action.checked);\n        DOM.toggleClass(this.container, 'disabled', !this._action.enabled);\n    };\n    FolderSettingsActionItem.prototype.showMenu = function () {\n        var _this = this;\n        this.contextMenuService.showContextMenu({\n            getAnchor: function () { return _this.container; },\n            getActions: function () { return _this.getDropdownMenuActions(); },\n            getActionItem: function () { return undefined; },\n            onHide: function () {\n                _this.anchorElement.blur();\n            }\n        });\n    };\n    FolderSettingsActionItem.prototype.getDropdownMenuActions = function () {\n        var _this = this;\n        var actions = [];\n        var workspaceFolders = this.contextService.getWorkspace().folders;\n        if (this.contextService.getWorkbenchState() === workspace_1.WorkbenchState.WORKSPACE && workspaceFolders.length > 0) {\n            actions.push.apply(actions, workspaceFolders.map(function (folder, index) {\n                var folderCount = _this._folderSettingCounts.get(folder.uri.toString());\n                return {\n                    id: 'folderSettingsTarget' + index,\n                    label: _this.labelWithCount(folder.name, folderCount),\n                    checked: _this.folder && _this.folder.uri.toString() === folder.uri.toString(),\n                    enabled: true,\n                    run: function () { return _this._action.run(folder); }\n                };\n            }));\n        }\n        return actions;\n    };\n    FolderSettingsActionItem.prototype.labelWithCount = function (label, count) {\n        // Append the count if it's >0 and not undefined\n        if (count) {\n            label += \" (\" + count + \")\";\n        }\n        return label;\n    };\n    FolderSettingsActionItem.prototype.dispose = function () {\n        lifecycle_1.dispose(this.disposables);\n        _super.prototype.dispose.call(this);\n    };\n    FolderSettingsActionItem = tslib_1.__decorate([\n        tslib_1.__param(1, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(2, contextView_1.IContextMenuService)\n    ], FolderSettingsActionItem);\n    return FolderSettingsActionItem;\n}(actionbar_1.BaseActionItem));\nexports.FolderSettingsActionItem = FolderSettingsActionItem;\nvar SettingsTargetsWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(SettingsTargetsWidget, _super);\n    function SettingsTargetsWidget(parent, contextService, instantiationService) {\n        var _this = _super.call(this) || this;\n        _this.contextService = contextService;\n        _this.instantiationService = instantiationService;\n        _this._onDidTargetChange = new event_1.Emitter();\n        _this.onDidTargetChange = _this._onDidTargetChange.event;\n        _this.create(parent);\n        _this._register(_this.contextService.onDidChangeWorkbenchState(function () { return _this.onWorkbenchStateChanged(); }));\n        _this._register(_this.contextService.onDidChangeWorkspaceFolders(function () { return _this.update(); }));\n        return _this;\n    }\n    SettingsTargetsWidget.prototype.create = function (parent) {\n        var _this = this;\n        var settingsTabsWidget = DOM.append(parent, DOM.$('.settings-tabs-widget'));\n        this.settingsSwitcherBar = this._register(new actionbar_1.ActionBar(settingsTabsWidget, {\n            orientation: actionbar_1.ActionsOrientation.HORIZONTAL,\n            ariaLabel: nls_1.localize('settingsSwitcherBarAriaLabel', \"Settings Switcher\"),\n            animated: false,\n            actionItemProvider: function (action) { return action.id === 'folderSettings' ? _this.folderSettings : undefined; }\n        }));\n        this.userSettings = new actions_1.Action('userSettings', nls_1.localize('userSettings', \"User Settings\"), '.settings-tab', true, function () { return _this.updateTarget(configuration_1.ConfigurationTarget.USER); });\n        this.userSettings.tooltip = this.userSettings.label;\n        this.workspaceSettings = new actions_1.Action('workspaceSettings', nls_1.localize('workspaceSettings', \"Workspace Settings\"), '.settings-tab', false, function () { return _this.updateTarget(configuration_1.ConfigurationTarget.WORKSPACE); });\n        this.workspaceSettings.tooltip = this.workspaceSettings.label;\n        var folderSettingsAction = new actions_1.Action('folderSettings', nls_1.localize('folderSettings', \"Folder Settings\"), '.settings-tab', false, function (folder) { return _this.updateTarget(folder ? folder.uri : configuration_1.ConfigurationTarget.USER); });\n        this.folderSettings = this.instantiationService.createInstance(FolderSettingsActionItem, folderSettingsAction);\n        this.update();\n        this.settingsSwitcherBar.push([this.userSettings, this.workspaceSettings, folderSettingsAction]);\n    };\n    Object.defineProperty(SettingsTargetsWidget.prototype, \"settingsTarget\", {\n        get: function () {\n            return this._settingsTarget;\n        },\n        set: function (settingsTarget) {\n            this._settingsTarget = settingsTarget;\n            this.userSettings.checked = configuration_1.ConfigurationTarget.USER === this.settingsTarget;\n            this.workspaceSettings.checked = configuration_1.ConfigurationTarget.WORKSPACE === this.settingsTarget;\n            if (this.settingsTarget instanceof uri_1.URI) {\n                this.folderSettings.getAction().checked = true;\n                this.folderSettings.folder = this.contextService.getWorkspaceFolder(this.settingsTarget);\n            }\n            else {\n                this.folderSettings.getAction().checked = false;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SettingsTargetsWidget.prototype.setResultCount = function (settingsTarget, count) {\n        if (settingsTarget === configuration_1.ConfigurationTarget.WORKSPACE) {\n            var label = nls_1.localize('workspaceSettings', \"Workspace Settings\");\n            if (count) {\n                label += \" (\" + count + \")\";\n            }\n            this.workspaceSettings.label = label;\n        }\n        else if (settingsTarget === configuration_1.ConfigurationTarget.USER) {\n            var label = nls_1.localize('userSettings', \"User Settings\");\n            if (count) {\n                label += \" (\" + count + \")\";\n            }\n            this.userSettings.label = label;\n        }\n        else if (settingsTarget instanceof uri_1.URI) {\n            this.folderSettings.setCount(settingsTarget, count);\n        }\n    };\n    SettingsTargetsWidget.prototype.onWorkbenchStateChanged = function () {\n        this.folderSettings.folder = null;\n        this.update();\n        if (this.settingsTarget === configuration_1.ConfigurationTarget.WORKSPACE && this.contextService.getWorkbenchState() === workspace_1.WorkbenchState.WORKSPACE) {\n            this.updateTarget(configuration_1.ConfigurationTarget.USER);\n        }\n    };\n    SettingsTargetsWidget.prototype.updateTarget = function (settingsTarget) {\n        var isSameTarget = this.settingsTarget === settingsTarget || settingsTarget instanceof uri_1.URI && this.settingsTarget instanceof uri_1.URI && this.settingsTarget.toString() === settingsTarget.toString();\n        if (!isSameTarget) {\n            this.settingsTarget = settingsTarget;\n            this._onDidTargetChange.fire(this.settingsTarget);\n        }\n        return Promise.resolve(undefined);\n    };\n    SettingsTargetsWidget.prototype.update = function () {\n        DOM.toggleClass(this.settingsSwitcherBar.domNode, 'empty-workbench', this.contextService.getWorkbenchState() === workspace_1.WorkbenchState.EMPTY);\n        this.workspaceSettings.enabled = this.contextService.getWorkbenchState() !== workspace_1.WorkbenchState.EMPTY;\n        this.folderSettings.getAction().enabled = this.contextService.getWorkbenchState() === workspace_1.WorkbenchState.WORKSPACE && this.contextService.getWorkspace().folders.length > 0;\n    };\n    SettingsTargetsWidget = tslib_1.__decorate([\n        tslib_1.__param(1, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(2, instantiation_1.IInstantiationService)\n    ], SettingsTargetsWidget);\n    return SettingsTargetsWidget;\n}(widget_1.Widget));\nexports.SettingsTargetsWidget = SettingsTargetsWidget;\nvar SearchWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(SearchWidget, _super);\n    function SearchWidget(parent, options, contextViewService, instantiationService, themeService) {\n        var _this = _super.call(this) || this;\n        _this.options = options;\n        _this.contextViewService = contextViewService;\n        _this.instantiationService = instantiationService;\n        _this.themeService = themeService;\n        _this._onDidChange = _this._register(new event_1.Emitter());\n        _this.onDidChange = _this._onDidChange.event;\n        _this._onFocus = _this._register(new event_1.Emitter());\n        _this.onFocus = _this._onFocus.event;\n        _this.create(parent);\n        return _this;\n    }\n    SearchWidget.prototype.create = function (parent) {\n        var _this = this;\n        this.domNode = DOM.append(parent, DOM.$('div.settings-header-widget'));\n        this.createSearchContainer(DOM.append(this.domNode, DOM.$('div.settings-search-container')));\n        this.controlsDiv = DOM.append(this.domNode, DOM.$('div.settings-search-controls'));\n        if (this.options.showResultCount) {\n            this.countElement = DOM.append(this.controlsDiv, DOM.$('.settings-count-widget'));\n            this._register(styler_1.attachStylerCallback(this.themeService, { badgeBackground: colorRegistry_1.badgeBackground, contrastBorder: colorRegistry_1.contrastBorder }, function (colors) {\n                var background = colors.badgeBackground ? colors.badgeBackground.toString() : null;\n                var border = colors.contrastBorder ? colors.contrastBorder.toString() : null;\n                _this.countElement.style.backgroundColor = background;\n                _this.countElement.style.borderWidth = border ? '1px' : null;\n                _this.countElement.style.borderStyle = border ? 'solid' : null;\n                _this.countElement.style.borderColor = border;\n                var color = _this.themeService.getTheme().getColor(colorRegistry_1.badgeForeground);\n                _this.countElement.style.color = color ? color.toString() : null;\n            }));\n        }\n        this.inputBox.inputElement.setAttribute('aria-live', this.options.ariaLive || 'off');\n        if (this.options.ariaLabelledBy) {\n            this.inputBox.inputElement.setAttribute('aria-labelledBy', this.options.ariaLabelledBy);\n        }\n        var focusTracker = this._register(DOM.trackFocus(this.inputBox.inputElement));\n        this._register(focusTracker.onDidFocus(function () { return _this._onFocus.fire(); }));\n        var focusKey = this.options.focusKey;\n        if (focusKey) {\n            this._register(focusTracker.onDidFocus(function () { return focusKey.set(true); }));\n            this._register(focusTracker.onDidBlur(function () { return focusKey.set(false); }));\n        }\n    };\n    SearchWidget.prototype.createSearchContainer = function (searchContainer) {\n        var _this = this;\n        this.searchContainer = searchContainer;\n        var searchInput = DOM.append(this.searchContainer, DOM.$('div.settings-search-input'));\n        this.inputBox = this._register(this.createInputBox(searchInput));\n        this._register(this.inputBox.onDidChange(function (value) { return _this._onDidChange.fire(value); }));\n    };\n    SearchWidget.prototype.createInputBox = function (parent) {\n        var box = this._register(new inputBox_1.InputBox(parent, this.contextViewService, this.options));\n        this._register(styler_1.attachInputBoxStyler(box, this.themeService));\n        return box;\n    };\n    SearchWidget.prototype.showMessage = function (message) {\n        // Avoid setting the aria-label unnecessarily, the screenreader will read the count every time it's set, since it's aria-live:assertive. #50968\n        if (this.countElement && message !== this.countElement.textContent) {\n            this.countElement.textContent = message;\n            this.inputBox.inputElement.setAttribute('aria-label', message);\n            this.inputBox.inputElement.style.paddingRight = this.getControlsWidth() + 'px';\n        }\n    };\n    SearchWidget.prototype.layout = function (dimension) {\n        if (dimension.width < 400) {\n            if (this.countElement) {\n                DOM.addClass(this.countElement, 'hide');\n            }\n            this.inputBox.inputElement.style.paddingRight = '0px';\n        }\n        else {\n            if (this.countElement) {\n                DOM.removeClass(this.countElement, 'hide');\n            }\n            this.inputBox.inputElement.style.paddingRight = this.getControlsWidth() + 'px';\n        }\n    };\n    SearchWidget.prototype.getControlsWidth = function () {\n        var countWidth = this.countElement ? DOM.getTotalWidth(this.countElement) : 0;\n        return countWidth + 20;\n    };\n    SearchWidget.prototype.focus = function () {\n        this.inputBox.focus();\n        if (this.getValue()) {\n            this.inputBox.select();\n        }\n    };\n    SearchWidget.prototype.hasFocus = function () {\n        return this.inputBox.hasFocus();\n    };\n    SearchWidget.prototype.clear = function () {\n        this.inputBox.value = '';\n    };\n    SearchWidget.prototype.getValue = function () {\n        return this.inputBox.value;\n    };\n    SearchWidget.prototype.setValue = function (value) {\n        return this.inputBox.value = value;\n    };\n    SearchWidget.prototype.dispose = function () {\n        if (this.options.focusKey) {\n            this.options.focusKey.set(false);\n        }\n        _super.prototype.dispose.call(this);\n    };\n    SearchWidget = tslib_1.__decorate([\n        tslib_1.__param(2, contextView_1.IContextViewService),\n        tslib_1.__param(3, instantiation_1.IInstantiationService),\n        tslib_1.__param(4, themeService_1.IThemeService)\n    ], SearchWidget);\n    return SearchWidget;\n}(widget_1.Widget));\nexports.SearchWidget = SearchWidget;\nvar EditPreferenceWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(EditPreferenceWidget, _super);\n    function EditPreferenceWidget(editor) {\n        var _this = _super.call(this) || this;\n        _this.editor = editor;\n        _this._onClick = new event_1.Emitter();\n        _this._editPreferenceDecoration = [];\n        _this._register(_this.editor.onMouseDown(function (e) {\n            var data = e.target.detail;\n            if (e.target.type !== editorBrowser_1.MouseTargetType.GUTTER_GLYPH_MARGIN || data.isAfterLines || !_this.isVisible()) {\n                return;\n            }\n            _this._onClick.fire(e);\n        }));\n        return _this;\n    }\n    Object.defineProperty(EditPreferenceWidget.prototype, \"onClick\", {\n        get: function () { return this._onClick.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EditPreferenceWidget.prototype, \"preferences\", {\n        get: function () {\n            return this._preferences;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EditPreferenceWidget.prototype.getLine = function () {\n        return this._line;\n    };\n    EditPreferenceWidget.prototype.show = function (line, hoverMessage, preferences) {\n        this._preferences = preferences;\n        var newDecoration = [];\n        this._line = line;\n        newDecoration.push({\n            options: {\n                glyphMarginClassName: EditPreferenceWidget.GLYPH_MARGIN_CLASS_NAME,\n                glyphMarginHoverMessage: new htmlContent_1.MarkdownString().appendText(hoverMessage),\n                stickiness: model_1.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n            },\n            range: {\n                startLineNumber: line,\n                startColumn: 1,\n                endLineNumber: line,\n                endColumn: 1\n            }\n        });\n        this._editPreferenceDecoration = this.editor.deltaDecorations(this._editPreferenceDecoration, newDecoration);\n    };\n    EditPreferenceWidget.prototype.hide = function () {\n        this._editPreferenceDecoration = this.editor.deltaDecorations(this._editPreferenceDecoration, []);\n    };\n    EditPreferenceWidget.prototype.isVisible = function () {\n        return this._editPreferenceDecoration.length > 0;\n    };\n    EditPreferenceWidget.prototype.dispose = function () {\n        this.hide();\n        _super.prototype.dispose.call(this);\n    };\n    EditPreferenceWidget.GLYPH_MARGIN_CLASS_NAME = 'edit-preferences-widget';\n    return EditPreferenceWidget;\n}(lifecycle_1.Disposable));\nexports.EditPreferenceWidget = EditPreferenceWidget;\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    collector.addRule(\"\\n\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:focus,\\n\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label.checked {\\n\\t\\t\\tborder-bottom: 1px solid;\\n\\t\\t}\\n\\t\");\n    // Title Active\n    var titleActive = theme.getColor(theme_1.PANEL_ACTIVE_TITLE_FOREGROUND);\n    var titleActiveBorder = theme.getColor(theme_1.PANEL_ACTIVE_TITLE_BORDER);\n    if (titleActive || titleActiveBorder) {\n        collector.addRule(\"\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:hover,\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label.checked {\\n\\t\\t\\t\\tcolor: \" + titleActive + \";\\n\\t\\t\\t\\tborder-bottom-color: \" + titleActiveBorder + \";\\n\\t\\t\\t}\\n\\t\\t\");\n    }\n    // Title Inactive\n    var titleInactive = theme.getColor(theme_1.PANEL_INACTIVE_TITLE_FOREGROUND);\n    if (titleInactive) {\n        collector.addRule(\"\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label {\\n\\t\\t\\t\\tcolor: \" + titleInactive + \";\\n\\t\\t\\t}\\n\\t\\t\");\n    }\n    // Title focus\n    var focusBorderColor = theme.getColor(colorRegistry_1.focusBorder);\n    if (focusBorderColor) {\n        collector.addRule(\"\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:focus {\\n\\t\\t\\t\\tborder-bottom-color: \" + focusBorderColor + \" !important;\\n\\t\\t\\t}\\n\\t\\t\\t\");\n        collector.addRule(\"\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:focus {\\n\\t\\t\\t\\toutline: none;\\n\\t\\t\\t}\\n\\t\\t\\t\");\n    }\n    // Styling with Outline color (e.g. high contrast theme)\n    var outline = theme.getColor(colorRegistry_1.activeContrastBorder);\n    if (outline) {\n        var outline_1 = theme.getColor(colorRegistry_1.activeContrastBorder);\n        collector.addRule(\"\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label.checked,\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:hover {\\n\\t\\t\\t\\toutline-color: \" + outline_1 + \";\\n\\t\\t\\t\\toutline-width: 1px;\\n\\t\\t\\t\\toutline-style: solid;\\n\\t\\t\\t\\tborder-bottom: none;\\n\\t\\t\\t\\tpadding-bottom: 0;\\n\\t\\t\\t\\toutline-offset: -1px;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:not(.checked):hover {\\n\\t\\t\\t\\toutline-style: dashed;\\n\\t\\t\\t}\\n\\t\\t\");\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/preferences/browser/preferencesWidgets.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/preferences/browser/preferencesWidgets.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { ActionBar, ActionsOrientation, BaseActionItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IInputOptions, InputBox } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { Action, IAction } from 'vs/base/common/actions';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { MarkdownString } from 'vs/base/common/htmlContent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { Disposable, dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { IMarginData } from 'vs/editor/browser/controller/mouseTarget';\nimport { ICodeEditor, IEditorMouseEvent, IViewZone, MouseTargetType } from 'vs/editor/browser/editorBrowser';\nimport { ICursorPositionChangedEvent } from 'vs/editor/common/controller/cursorEvents';\nimport { Position } from 'vs/editor/common/core/position';\nimport { IModelDeltaDecoration, TrackedRangeStickiness } from 'vs/editor/common/model';\nimport { localize } from 'vs/nls';\nimport { ConfigurationTarget } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService, IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { activeContrastBorder, badgeBackground, badgeForeground, contrastBorder, focusBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { attachInputBoxStyler, attachStylerCallback } from 'vs/platform/theme/common/styler';\nimport { ICssStyleCollector, ITheme, IThemeService, registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { IWorkspaceContextService, IWorkspaceFolder, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { PANEL_ACTIVE_TITLE_BORDER, PANEL_ACTIVE_TITLE_FOREGROUND, PANEL_INACTIVE_TITLE_FOREGROUND } from 'vs/workbench/common/theme';\nimport { ISettingsGroup } from 'vs/workbench/services/preferences/common/preferences';\n\nexport class SettingsHeaderWidget extends Widget implements IViewZone {\n\n\tprivate id: number;\n\tprivate _domNode: HTMLElement;\n\n\tprotected titleContainer: HTMLElement;\n\tprivate messageElement: HTMLElement;\n\n\tconstructor(protected editor: ICodeEditor, private title: string) {\n\t\tsuper();\n\t\tthis.create();\n\t\tthis._register(this.editor.onDidChangeConfiguration(() => this.layout()));\n\t\tthis._register(this.editor.onDidLayoutChange(() => this.layout()));\n\t}\n\n\tget domNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tget heightInLines(): number {\n\t\treturn 1;\n\t}\n\n\tget afterLineNumber(): number {\n\t\treturn 0;\n\t}\n\n\tprotected create() {\n\t\tthis._domNode = DOM.$('.settings-header-widget');\n\n\t\tthis.titleContainer = DOM.append(this._domNode, DOM.$('.title-container'));\n\t\tif (this.title) {\n\t\t\tDOM.append(this.titleContainer, DOM.$('.title')).textContent = this.title;\n\t\t}\n\t\tthis.messageElement = DOM.append(this.titleContainer, DOM.$('.message'));\n\t\tif (this.title) {\n\t\t\tthis.messageElement.style.paddingLeft = '12px';\n\t\t}\n\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\tthis.id = accessor.addZone(this);\n\t\t\tthis.layout();\n\t\t});\n\t}\n\n\tsetMessage(message: string): void {\n\t\tthis.messageElement.textContent = message;\n\t}\n\n\tprivate layout(): void {\n\t\tconst configuration = this.editor.getConfiguration();\n\t\tthis.titleContainer.style.fontSize = configuration.fontInfo.fontSize + 'px';\n\t\tif (!configuration.contribInfo.folding) {\n\t\t\tthis.titleContainer.style.paddingLeft = '6px';\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\taccessor.removeZone(this.id);\n\t\t});\n\t\tsuper.dispose();\n\t}\n}\n\nexport class DefaultSettingsHeaderWidget extends SettingsHeaderWidget {\n\n\tprivate _onClick = this._register(new Emitter<void>());\n\treadonly onClick: Event<void> = this._onClick.event;\n\n\tprotected create() {\n\t\tsuper.create();\n\n\t\tthis.toggleMessage(true);\n\t}\n\n\ttoggleMessage(hasSettings: boolean): void {\n\t\tif (hasSettings) {\n\t\t\tthis.setMessage(localize('defaultSettings', \"Place your settings in the right hand side editor to override.\"));\n\t\t} else {\n\t\t\tthis.setMessage(localize('noSettingsFound', \"No Settings Found.\"));\n\t\t}\n\t}\n}\n\nexport class SettingsGroupTitleWidget extends Widget implements IViewZone {\n\n\tprivate id: number;\n\tprivate _afterLineNumber: number;\n\tprivate _domNode: HTMLElement;\n\n\tprivate titleContainer: HTMLElement;\n\tprivate icon: HTMLElement;\n\tprivate title: HTMLElement;\n\n\tprivate _onToggled = this._register(new Emitter<boolean>());\n\treadonly onToggled: Event<boolean> = this._onToggled.event;\n\n\tprivate previousPosition: Position;\n\n\tconstructor(private editor: ICodeEditor, public settingsGroup: ISettingsGroup) {\n\t\tsuper();\n\t\tthis.create();\n\t\tthis._register(this.editor.onDidChangeConfiguration(() => this.layout()));\n\t\tthis._register(this.editor.onDidLayoutChange(() => this.layout()));\n\t\tthis._register(this.editor.onDidChangeCursorPosition((e) => this.onCursorChange(e)));\n\t}\n\n\tget domNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tget heightInLines(): number {\n\t\treturn 1.5;\n\t}\n\n\tget afterLineNumber(): number {\n\t\treturn this._afterLineNumber;\n\t}\n\n\tprivate create() {\n\t\tthis._domNode = DOM.$('.settings-group-title-widget');\n\n\t\tthis.titleContainer = DOM.append(this._domNode, DOM.$('.title-container'));\n\t\tthis.titleContainer.tabIndex = 0;\n\t\tthis.onclick(this.titleContainer, () => this.toggle());\n\t\tthis.onkeydown(this.titleContainer, (e) => this.onKeyDown(e));\n\t\tconst focusTracker = this._register(DOM.trackFocus(this.titleContainer));\n\n\t\tthis._register(focusTracker.onDidFocus(() => this.toggleFocus(true)));\n\t\tthis._register(focusTracker.onDidBlur(() => this.toggleFocus(false)));\n\n\t\tthis.icon = DOM.append(this.titleContainer, DOM.$('.expand-collapse-icon'));\n\t\tthis.title = DOM.append(this.titleContainer, DOM.$('.title'));\n\t\tthis.title.textContent = this.settingsGroup.title + ` (${this.settingsGroup.sections.reduce((count, section) => count + section.settings.length, 0)})`;\n\n\t\tthis.layout();\n\t}\n\n\trender() {\n\t\tif (!this.settingsGroup.range) {\n\t\t\t// #61352\n\t\t\treturn;\n\t\t}\n\n\t\tthis._afterLineNumber = this.settingsGroup.range.startLineNumber - 2;\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\tthis.id = accessor.addZone(this);\n\t\t\tthis.layout();\n\t\t});\n\t}\n\n\ttoggleCollapse(collapse: boolean) {\n\t\tDOM.toggleClass(this.titleContainer, 'collapsed', collapse);\n\t}\n\n\ttoggleFocus(focus: boolean): void {\n\t\tDOM.toggleClass(this.titleContainer, 'focused', focus);\n\t}\n\n\tisCollapsed(): boolean {\n\t\treturn DOM.hasClass(this.titleContainer, 'collapsed');\n\t}\n\n\tprivate layout(): void {\n\t\tconst configuration = this.editor.getConfiguration();\n\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\tthis._domNode.style.width = layoutInfo.contentWidth - layoutInfo.verticalScrollbarWidth + 'px';\n\t\tthis.titleContainer.style.lineHeight = configuration.lineHeight + 3 + 'px';\n\t\tthis.titleContainer.style.height = configuration.lineHeight + 3 + 'px';\n\t\tthis.titleContainer.style.fontSize = configuration.fontInfo.fontSize + 'px';\n\t\tthis.icon.style.minWidth = `${this.getIconSize(16)}px`;\n\t}\n\n\tprivate getIconSize(minSize: number): number {\n\t\tconst fontSize = this.editor.getConfiguration().fontInfo.fontSize;\n\t\treturn fontSize > 8 ? Math.max(fontSize, minSize) : 12;\n\t}\n\n\tprivate onKeyDown(keyboardEvent: IKeyboardEvent): void {\n\t\tswitch (keyboardEvent.keyCode) {\n\t\t\tcase KeyCode.Enter:\n\t\t\tcase KeyCode.Space:\n\t\t\t\tthis.toggle();\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.LeftArrow:\n\t\t\t\tthis.collapse(true);\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.RightArrow:\n\t\t\t\tthis.collapse(false);\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.UpArrow:\n\t\t\t\tif (this.settingsGroup.range.startLineNumber - 3 !== 1) {\n\t\t\t\t\tthis.editor.focus();\n\t\t\t\t\tconst lineNumber = this.settingsGroup.range.startLineNumber - 2;\n\t\t\t\t\tif (this.editor.hasModel()) {\n\t\t\t\t\t\tthis.editor.setPosition({ lineNumber, column: this.editor.getModel().getLineMinColumn(lineNumber) });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase KeyCode.DownArrow:\n\t\t\t\tconst lineNumber = this.isCollapsed() ? this.settingsGroup.range.startLineNumber : this.settingsGroup.range.startLineNumber - 1;\n\t\t\t\tthis.editor.focus();\n\t\t\t\tif (this.editor.hasModel()) {\n\t\t\t\t\tthis.editor.setPosition({ lineNumber, column: this.editor.getModel().getLineMinColumn(lineNumber) });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate toggle() {\n\t\tthis.collapse(!this.isCollapsed());\n\t}\n\n\tprivate collapse(collapse: boolean) {\n\t\tif (collapse !== this.isCollapsed()) {\n\t\t\tDOM.toggleClass(this.titleContainer, 'collapsed', collapse);\n\t\t\tthis._onToggled.fire(collapse);\n\t\t}\n\t}\n\n\tprivate onCursorChange(e: ICursorPositionChangedEvent): void {\n\t\tif (e.source !== 'mouse' && this.focusTitle(e.position)) {\n\t\t\tthis.titleContainer.focus();\n\t\t}\n\t}\n\n\tprivate focusTitle(currentPosition: Position): boolean {\n\t\tconst previousPosition = this.previousPosition;\n\t\tthis.previousPosition = currentPosition;\n\t\tif (!previousPosition) {\n\t\t\treturn false;\n\t\t}\n\t\tif (previousPosition.lineNumber === currentPosition.lineNumber) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.settingsGroup.range) {\n\t\t\t// #60460?\n\t\t\treturn false;\n\t\t}\n\t\tif (currentPosition.lineNumber === this.settingsGroup.range.startLineNumber - 1 || currentPosition.lineNumber === this.settingsGroup.range.startLineNumber - 2) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.isCollapsed() && currentPosition.lineNumber === this.settingsGroup.range.endLineNumber) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdispose() {\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\taccessor.removeZone(this.id);\n\t\t});\n\t\tsuper.dispose();\n\t}\n}\n\nexport class FolderSettingsActionItem extends BaseActionItem {\n\n\tprivate _folder: IWorkspaceFolder | null;\n\tprivate _folderSettingCounts = new Map<string, number>();\n\n\tprivate container: HTMLElement;\n\tprivate anchorElement: HTMLElement;\n\tprivate labelElement: HTMLElement;\n\tprivate detailsElement: HTMLElement;\n\tprivate dropDownElement: HTMLElement;\n\n\tprivate disposables: IDisposable[] = [];\n\n\tconstructor(\n\t\taction: IAction,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService\n\t) {\n\t\tsuper(null, action);\n\t\tconst workspace = this.contextService.getWorkspace();\n\t\tthis._folder = workspace.folders.length === 1 ? workspace.folders[0] : null;\n\t\tthis.disposables.push(this.contextService.onDidChangeWorkspaceFolders(() => this.onWorkspaceFoldersChanged()));\n\t}\n\n\tget folder(): IWorkspaceFolder | null {\n\t\treturn this._folder;\n\t}\n\n\tset folder(folder: IWorkspaceFolder | null) {\n\t\tthis._folder = folder;\n\t\tthis.update();\n\t}\n\n\tsetCount(settingsTarget: URI, count: number): void {\n\t\tconst workspaceFolder = this.contextService.getWorkspaceFolder(settingsTarget);\n\t\tif (!workspaceFolder) {\n\t\t\tthrow new Error('unknown folder');\n\t\t}\n\t\tconst folder = workspaceFolder.uri;\n\t\tthis._folderSettingCounts.set(folder.toString(), count);\n\t\tthis.update();\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tthis.element = container;\n\n\t\tthis.container = container;\n\t\tthis.labelElement = DOM.$('.action-title');\n\t\tthis.detailsElement = DOM.$('.action-details');\n\t\tthis.dropDownElement = DOM.$('.dropdown-icon.octicon.octicon-triangle-down.hide');\n\t\tthis.anchorElement = DOM.$('a.action-label.folder-settings', {\n\t\t\trole: 'button',\n\t\t\t'aria-haspopup': 'true',\n\t\t\t'tabindex': '0'\n\t\t}, this.labelElement, this.detailsElement, this.dropDownElement);\n\t\tthis._register(DOM.addDisposableListener(this.anchorElement, DOM.EventType.MOUSE_DOWN, e => DOM.EventHelper.stop(e)));\n\t\tthis.disposables.push(DOM.addDisposableListener(this.anchorElement, DOM.EventType.CLICK, e => this.onClick(e)));\n\t\tthis.disposables.push(DOM.addDisposableListener(this.anchorElement, DOM.EventType.KEY_UP, e => this.onKeyUp(e)));\n\n\t\tDOM.append(this.container, this.anchorElement);\n\n\t\tthis.update();\n\t}\n\n\tprivate onKeyUp(event: any): void {\n\t\tconst keyboardEvent = new StandardKeyboardEvent(event);\n\t\tswitch (keyboardEvent.keyCode) {\n\t\t\tcase KeyCode.Enter:\n\t\t\tcase KeyCode.Space:\n\t\t\t\tthis.onClick(event);\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\tonClick(event: DOM.EventLike): void {\n\t\tDOM.EventHelper.stop(event, true);\n\t\tif (!this.folder || this._action.checked) {\n\t\t\tthis.showMenu();\n\t\t} else {\n\t\t\tthis._action.run(this._folder);\n\t\t}\n\t}\n\n\tprotected updateEnabled(): void {\n\t\tthis.update();\n\t}\n\n\tprotected updateChecked(): void {\n\t\tthis.update();\n\t}\n\n\tprivate onWorkspaceFoldersChanged(): void {\n\t\tconst oldFolder = this._folder;\n\t\tconst workspace = this.contextService.getWorkspace();\n\t\tif (oldFolder) {\n\t\t\tthis._folder = workspace.folders.filter(folder => folder.uri.toString() === oldFolder.uri.toString())[0] || workspace.folders[0];\n\t\t}\n\t\tthis._folder = this._folder ? this._folder : workspace.folders.length === 1 ? workspace.folders[0] : null;\n\n\t\tthis.update();\n\n\t\tif (this._action.checked) {\n\t\t\tif ((oldFolder || !this._folder)\n\t\t\t\t|| (!oldFolder || this._folder)\n\t\t\t\t|| (oldFolder && this._folder && (oldFolder as IWorkspaceFolder).uri.toString() === (this._folder as IWorkspaceFolder).uri.toString())) {\n\t\t\t\tthis._action.run(this._folder);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate update(): void {\n\t\tlet total = 0;\n\t\tthis._folderSettingCounts.forEach(n => total += n);\n\n\t\tconst workspace = this.contextService.getWorkspace();\n\t\tif (this._folder) {\n\t\t\tthis.labelElement.textContent = this._folder.name;\n\t\t\tthis.anchorElement.title = this._folder.name;\n\t\t\tconst detailsText = this.labelWithCount(this._action.label, total);\n\t\t\tthis.detailsElement.textContent = detailsText;\n\t\t\tDOM.toggleClass(this.dropDownElement, 'hide', workspace.folders.length === 1 || !this._action.checked);\n\t\t} else {\n\t\t\tconst labelText = this.labelWithCount(this._action.label, total);\n\t\t\tthis.labelElement.textContent = labelText;\n\t\t\tthis.detailsElement.textContent = '';\n\t\t\tthis.anchorElement.title = this._action.label;\n\t\t\tDOM.removeClass(this.dropDownElement, 'hide');\n\t\t}\n\t\tDOM.toggleClass(this.anchorElement, 'checked', this._action.checked);\n\t\tDOM.toggleClass(this.container, 'disabled', !this._action.enabled);\n\t}\n\n\tprivate showMenu(): void {\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => this.container,\n\t\t\tgetActions: () => this.getDropdownMenuActions(),\n\t\t\tgetActionItem: () => undefined,\n\t\t\tonHide: () => {\n\t\t\t\tthis.anchorElement.blur();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getDropdownMenuActions(): IAction[] {\n\t\tconst actions: IAction[] = [];\n\t\tconst workspaceFolders = this.contextService.getWorkspace().folders;\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.WORKSPACE && workspaceFolders.length > 0) {\n\t\t\tactions.push(...workspaceFolders.map((folder, index) => {\n\t\t\t\tconst folderCount = this._folderSettingCounts.get(folder.uri.toString());\n\t\t\t\treturn <IAction>{\n\t\t\t\t\tid: 'folderSettingsTarget' + index,\n\t\t\t\t\tlabel: this.labelWithCount(folder.name, folderCount),\n\t\t\t\t\tchecked: this.folder && this.folder.uri.toString() === folder.uri.toString(),\n\t\t\t\t\tenabled: true,\n\t\t\t\t\trun: () => this._action.run(folder)\n\t\t\t\t};\n\t\t\t}));\n\t\t}\n\t\treturn actions;\n\t}\n\n\tprivate labelWithCount(label: string, count: number | undefined): string {\n\t\t// Append the count if it's >0 and not undefined\n\t\tif (count) {\n\t\t\tlabel += ` (${count})`;\n\t\t}\n\n\t\treturn label;\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.disposables);\n\t\tsuper.dispose();\n\t}\n}\n\nexport type SettingsTarget = ConfigurationTarget.USER | ConfigurationTarget.WORKSPACE | URI;\n\nexport class SettingsTargetsWidget extends Widget {\n\n\tprivate settingsSwitcherBar: ActionBar;\n\tprivate userSettings: Action;\n\tprivate workspaceSettings: Action;\n\tprivate folderSettings: FolderSettingsActionItem;\n\n\tprivate _settingsTarget: SettingsTarget;\n\n\tprivate readonly _onDidTargetChange = new Emitter<SettingsTarget>();\n\treadonly onDidTargetChange: Event<SettingsTarget> = this._onDidTargetChange.event;\n\n\tconstructor(\n\t\tparent: HTMLElement,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis.create(parent);\n\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => this.onWorkbenchStateChanged()));\n\t\tthis._register(this.contextService.onDidChangeWorkspaceFolders(() => this.update()));\n\t}\n\n\tprivate create(parent: HTMLElement): void {\n\t\tconst settingsTabsWidget = DOM.append(parent, DOM.$('.settings-tabs-widget'));\n\t\tthis.settingsSwitcherBar = this._register(new ActionBar(settingsTabsWidget, {\n\t\t\torientation: ActionsOrientation.HORIZONTAL,\n\t\t\tariaLabel: localize('settingsSwitcherBarAriaLabel', \"Settings Switcher\"),\n\t\t\tanimated: false,\n\t\t\tactionItemProvider: (action: Action) => action.id === 'folderSettings' ? this.folderSettings : undefined\n\t\t}));\n\n\t\tthis.userSettings = new Action('userSettings', localize('userSettings', \"User Settings\"), '.settings-tab', true, () => this.updateTarget(ConfigurationTarget.USER));\n\t\tthis.userSettings.tooltip = this.userSettings.label;\n\n\t\tthis.workspaceSettings = new Action('workspaceSettings', localize('workspaceSettings', \"Workspace Settings\"), '.settings-tab', false, () => this.updateTarget(ConfigurationTarget.WORKSPACE));\n\t\tthis.workspaceSettings.tooltip = this.workspaceSettings.label;\n\n\t\tconst folderSettingsAction = new Action('folderSettings', localize('folderSettings', \"Folder Settings\"), '.settings-tab', false, (folder: IWorkspaceFolder) => this.updateTarget(folder ? folder.uri : ConfigurationTarget.USER));\n\t\tthis.folderSettings = this.instantiationService.createInstance(FolderSettingsActionItem, folderSettingsAction);\n\n\t\tthis.update();\n\n\t\tthis.settingsSwitcherBar.push([this.userSettings, this.workspaceSettings, folderSettingsAction]);\n\t}\n\n\tget settingsTarget(): SettingsTarget {\n\t\treturn this._settingsTarget;\n\t}\n\n\tset settingsTarget(settingsTarget: SettingsTarget) {\n\t\tthis._settingsTarget = settingsTarget;\n\t\tthis.userSettings.checked = ConfigurationTarget.USER === this.settingsTarget;\n\t\tthis.workspaceSettings.checked = ConfigurationTarget.WORKSPACE === this.settingsTarget;\n\t\tif (this.settingsTarget instanceof URI) {\n\t\t\tthis.folderSettings.getAction().checked = true;\n\t\t\tthis.folderSettings.folder = this.contextService.getWorkspaceFolder(this.settingsTarget as URI);\n\t\t} else {\n\t\t\tthis.folderSettings.getAction().checked = false;\n\t\t}\n\t}\n\n\tsetResultCount(settingsTarget: SettingsTarget, count: number): void {\n\t\tif (settingsTarget === ConfigurationTarget.WORKSPACE) {\n\t\t\tlet label = localize('workspaceSettings', \"Workspace Settings\");\n\t\t\tif (count) {\n\t\t\t\tlabel += ` (${count})`;\n\t\t\t}\n\n\t\t\tthis.workspaceSettings.label = label;\n\t\t} else if (settingsTarget === ConfigurationTarget.USER) {\n\t\t\tlet label = localize('userSettings', \"User Settings\");\n\t\t\tif (count) {\n\t\t\t\tlabel += ` (${count})`;\n\t\t\t}\n\n\t\t\tthis.userSettings.label = label;\n\t\t} else if (settingsTarget instanceof URI) {\n\t\t\tthis.folderSettings.setCount(settingsTarget, count);\n\t\t}\n\t}\n\n\tprivate onWorkbenchStateChanged(): void {\n\t\tthis.folderSettings.folder = null;\n\t\tthis.update();\n\t\tif (this.settingsTarget === ConfigurationTarget.WORKSPACE && this.contextService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\t\t\tthis.updateTarget(ConfigurationTarget.USER);\n\t\t}\n\t}\n\n\tupdateTarget(settingsTarget: SettingsTarget): Promise<void> {\n\t\tconst isSameTarget = this.settingsTarget === settingsTarget || settingsTarget instanceof URI && this.settingsTarget instanceof URI && this.settingsTarget.toString() === settingsTarget.toString();\n\t\tif (!isSameTarget) {\n\t\t\tthis.settingsTarget = settingsTarget;\n\t\t\tthis._onDidTargetChange.fire(this.settingsTarget);\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tprivate update(): void {\n\t\tDOM.toggleClass(this.settingsSwitcherBar.domNode, 'empty-workbench', this.contextService.getWorkbenchState() === WorkbenchState.EMPTY);\n\t\tthis.workspaceSettings.enabled = this.contextService.getWorkbenchState() !== WorkbenchState.EMPTY;\n\t\tthis.folderSettings.getAction().enabled = this.contextService.getWorkbenchState() === WorkbenchState.WORKSPACE && this.contextService.getWorkspace().folders.length > 0;\n\t}\n\n}\n\nexport interface SearchOptions extends IInputOptions {\n\tfocusKey?: IContextKey<boolean>;\n\tshowResultCount?: boolean;\n\tariaLive?: string;\n\tariaLabelledBy?: string;\n}\n\nexport class SearchWidget extends Widget {\n\n\tdomNode: HTMLElement;\n\n\tprivate countElement: HTMLElement;\n\tprivate searchContainer: HTMLElement;\n\tinputBox: InputBox;\n\tprivate controlsDiv: HTMLElement;\n\n\tprivate readonly _onDidChange: Emitter<string> = this._register(new Emitter<string>());\n\treadonly onDidChange: Event<string> = this._onDidChange.event;\n\n\tprivate readonly _onFocus: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onFocus: Event<void> = this._onFocus.event;\n\n\tconstructor(parent: HTMLElement, protected options: SearchOptions,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly themeService: IThemeService\n\t) {\n\t\tsuper();\n\t\tthis.create(parent);\n\t}\n\n\tprivate create(parent: HTMLElement) {\n\t\tthis.domNode = DOM.append(parent, DOM.$('div.settings-header-widget'));\n\t\tthis.createSearchContainer(DOM.append(this.domNode, DOM.$('div.settings-search-container')));\n\t\tthis.controlsDiv = DOM.append(this.domNode, DOM.$('div.settings-search-controls'));\n\n\t\tif (this.options.showResultCount) {\n\t\t\tthis.countElement = DOM.append(this.controlsDiv, DOM.$('.settings-count-widget'));\n\t\t\tthis._register(attachStylerCallback(this.themeService, { badgeBackground, contrastBorder }, colors => {\n\t\t\t\tconst background = colors.badgeBackground ? colors.badgeBackground.toString() : null;\n\t\t\t\tconst border = colors.contrastBorder ? colors.contrastBorder.toString() : null;\n\n\t\t\t\tthis.countElement.style.backgroundColor = background;\n\n\t\t\t\tthis.countElement.style.borderWidth = border ? '1px' : null;\n\t\t\t\tthis.countElement.style.borderStyle = border ? 'solid' : null;\n\t\t\t\tthis.countElement.style.borderColor = border;\n\n\t\t\t\tconst color = this.themeService.getTheme().getColor(badgeForeground);\n\t\t\t\tthis.countElement.style.color = color ? color.toString() : null;\n\t\t\t}));\n\t\t}\n\n\t\tthis.inputBox.inputElement.setAttribute('aria-live', this.options.ariaLive || 'off');\n\t\tif (this.options.ariaLabelledBy) {\n\t\t\tthis.inputBox.inputElement.setAttribute('aria-labelledBy', this.options.ariaLabelledBy);\n\t\t}\n\t\tconst focusTracker = this._register(DOM.trackFocus(this.inputBox.inputElement));\n\t\tthis._register(focusTracker.onDidFocus(() => this._onFocus.fire()));\n\n\t\tconst focusKey = this.options.focusKey;\n\t\tif (focusKey) {\n\t\t\tthis._register(focusTracker.onDidFocus(() => focusKey.set(true)));\n\t\t\tthis._register(focusTracker.onDidBlur(() => focusKey.set(false)));\n\t\t}\n\t}\n\n\tprivate createSearchContainer(searchContainer: HTMLElement) {\n\t\tthis.searchContainer = searchContainer;\n\t\tconst searchInput = DOM.append(this.searchContainer, DOM.$('div.settings-search-input'));\n\t\tthis.inputBox = this._register(this.createInputBox(searchInput));\n\t\tthis._register(this.inputBox.onDidChange(value => this._onDidChange.fire(value)));\n\t}\n\n\tprotected createInputBox(parent: HTMLElement): InputBox {\n\t\tconst box = this._register(new InputBox(parent, this.contextViewService, this.options));\n\t\tthis._register(attachInputBoxStyler(box, this.themeService));\n\n\t\treturn box;\n\t}\n\n\tshowMessage(message: string): void {\n\t\t// Avoid setting the aria-label unnecessarily, the screenreader will read the count every time it's set, since it's aria-live:assertive. #50968\n\t\tif (this.countElement && message !== this.countElement.textContent) {\n\t\t\tthis.countElement.textContent = message;\n\t\t\tthis.inputBox.inputElement.setAttribute('aria-label', message);\n\t\t\tthis.inputBox.inputElement.style.paddingRight = this.getControlsWidth() + 'px';\n\t\t}\n\t}\n\n\tlayout(dimension: DOM.Dimension) {\n\t\tif (dimension.width < 400) {\n\t\t\tif (this.countElement) {\n\t\t\t\tDOM.addClass(this.countElement, 'hide');\n\t\t\t}\n\n\t\t\tthis.inputBox.inputElement.style.paddingRight = '0px';\n\t\t} else {\n\t\t\tif (this.countElement) {\n\t\t\t\tDOM.removeClass(this.countElement, 'hide');\n\t\t\t}\n\n\t\t\tthis.inputBox.inputElement.style.paddingRight = this.getControlsWidth() + 'px';\n\t\t}\n\t}\n\n\tprivate getControlsWidth(): number {\n\t\tconst countWidth = this.countElement ? DOM.getTotalWidth(this.countElement) : 0;\n\t\treturn countWidth + 20;\n\t}\n\n\tfocus() {\n\t\tthis.inputBox.focus();\n\t\tif (this.getValue()) {\n\t\t\tthis.inputBox.select();\n\t\t}\n\t}\n\n\thasFocus(): boolean {\n\t\treturn this.inputBox.hasFocus();\n\t}\n\n\tclear() {\n\t\tthis.inputBox.value = '';\n\t}\n\n\tgetValue(): string {\n\t\treturn this.inputBox.value;\n\t}\n\n\tsetValue(value: string): string {\n\t\treturn this.inputBox.value = value;\n\t}\n\n\tdispose(): void {\n\t\tif (this.options.focusKey) {\n\t\t\tthis.options.focusKey.set(false);\n\t\t}\n\t\tsuper.dispose();\n\t}\n}\n\nexport class EditPreferenceWidget<T> extends Disposable {\n\n\tstatic readonly GLYPH_MARGIN_CLASS_NAME = 'edit-preferences-widget';\n\n\tprivate _line: number;\n\tprivate _preferences: T[];\n\n\tprivate _editPreferenceDecoration: string[];\n\n\tprivate readonly _onClick = new Emitter<IEditorMouseEvent>();\n\tget onClick(): Event<IEditorMouseEvent> { return this._onClick.event; }\n\n\tconstructor(private editor: ICodeEditor\n\t) {\n\t\tsuper();\n\t\tthis._editPreferenceDecoration = [];\n\t\tthis._register(this.editor.onMouseDown((e: IEditorMouseEvent) => {\n\t\t\tconst data = e.target.detail as IMarginData;\n\t\t\tif (e.target.type !== MouseTargetType.GUTTER_GLYPH_MARGIN || data.isAfterLines || !this.isVisible()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._onClick.fire(e);\n\t\t}));\n\t}\n\n\tget preferences(): T[] {\n\t\treturn this._preferences;\n\t}\n\n\tgetLine(): number {\n\t\treturn this._line;\n\t}\n\n\tshow(line: number, hoverMessage: string, preferences: T[]): void {\n\t\tthis._preferences = preferences;\n\t\tconst newDecoration: IModelDeltaDecoration[] = [];\n\t\tthis._line = line;\n\t\tnewDecoration.push({\n\t\t\toptions: {\n\t\t\t\tglyphMarginClassName: EditPreferenceWidget.GLYPH_MARGIN_CLASS_NAME,\n\t\t\t\tglyphMarginHoverMessage: new MarkdownString().appendText(hoverMessage),\n\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t},\n\t\t\trange: {\n\t\t\t\tstartLineNumber: line,\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendLineNumber: line,\n\t\t\t\tendColumn: 1\n\t\t\t}\n\t\t});\n\t\tthis._editPreferenceDecoration = this.editor.deltaDecorations(this._editPreferenceDecoration, newDecoration);\n\t}\n\n\thide(): void {\n\t\tthis._editPreferenceDecoration = this.editor.deltaDecorations(this._editPreferenceDecoration, []);\n\t}\n\n\tisVisible(): boolean {\n\t\treturn this._editPreferenceDecoration.length > 0;\n\t}\n\n\tdispose(): void {\n\t\tthis.hide();\n\t\tsuper.dispose();\n\t}\n}\n\nregisterThemingParticipant((theme: ITheme, collector: ICssStyleCollector) => {\n\n\tcollector.addRule(`\n\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:focus,\n\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label.checked {\n\t\t\tborder-bottom: 1px solid;\n\t\t}\n\t`);\n\t// Title Active\n\tconst titleActive = theme.getColor(PANEL_ACTIVE_TITLE_FOREGROUND);\n\tconst titleActiveBorder = theme.getColor(PANEL_ACTIVE_TITLE_BORDER);\n\tif (titleActive || titleActiveBorder) {\n\t\tcollector.addRule(`\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:hover,\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label.checked {\n\t\t\t\tcolor: ${titleActive};\n\t\t\t\tborder-bottom-color: ${titleActiveBorder};\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Title Inactive\n\tconst titleInactive = theme.getColor(PANEL_INACTIVE_TITLE_FOREGROUND);\n\tif (titleInactive) {\n\t\tcollector.addRule(`\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label {\n\t\t\t\tcolor: ${titleInactive};\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Title focus\n\tconst focusBorderColor = theme.getColor(focusBorder);\n\tif (focusBorderColor) {\n\t\tcollector.addRule(`\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:focus {\n\t\t\t\tborder-bottom-color: ${focusBorderColor} !important;\n\t\t\t}\n\t\t\t`);\n\t\tcollector.addRule(`\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:focus {\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t\t`);\n\t}\n\n\t// Styling with Outline color (e.g. high contrast theme)\n\tconst outline = theme.getColor(activeContrastBorder);\n\tif (outline) {\n\t\tconst outline = theme.getColor(activeContrastBorder);\n\n\t\tcollector.addRule(`\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label.checked,\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:hover {\n\t\t\t\toutline-color: ${outline};\n\t\t\t\toutline-width: 1px;\n\t\t\t\toutline-style: solid;\n\t\t\t\tborder-bottom: none;\n\t\t\t\tpadding-bottom: 0;\n\t\t\t\toutline-offset: -1px;\n\t\t\t}\n\n\t\t\t.settings-tabs-widget > .monaco-action-bar .action-item .action-label:not(.checked):hover {\n\t\t\t\toutline-style: dashed;\n\t\t\t}\n\t\t`);\n\t}\n});\n"]}]}