{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/inputbox/inputBox.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/inputbox/inputBox.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./inputBox\");\nvar nls = require(\"vs/nls\");\nvar Bal = require(\"vs/base/browser/browser\");\nvar dom = require(\"vs/base/browser/dom\");\nvar htmlContentRenderer_1 = require(\"vs/base/browser/htmlContentRenderer\");\nvar aria = require(\"vs/base/browser/ui/aria/aria\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar contextview_1 = require(\"vs/base/browser/ui/contextview/contextview\");\nvar event_1 = require(\"vs/base/common/event\");\nvar widget_1 = require(\"vs/base/browser/ui/widget\");\nvar color_1 = require(\"vs/base/common/color\");\nvar objects_1 = require(\"vs/base/common/objects\");\nvar history_1 = require(\"vs/base/common/history\");\nvar $ = dom.$;\nvar MessageType;\n(function (MessageType) {\n    MessageType[MessageType[\"INFO\"] = 1] = \"INFO\";\n    MessageType[MessageType[\"WARNING\"] = 2] = \"WARNING\";\n    MessageType[MessageType[\"ERROR\"] = 3] = \"ERROR\";\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\nvar defaultOpts = {\n    inputBackground: color_1.Color.fromHex('#3C3C3C'),\n    inputForeground: color_1.Color.fromHex('#CCCCCC'),\n    inputValidationInfoBorder: color_1.Color.fromHex('#55AAFF'),\n    inputValidationInfoBackground: color_1.Color.fromHex('#063B49'),\n    inputValidationWarningBorder: color_1.Color.fromHex('#B89500'),\n    inputValidationWarningBackground: color_1.Color.fromHex('#352A05'),\n    inputValidationErrorBorder: color_1.Color.fromHex('#BE1100'),\n    inputValidationErrorBackground: color_1.Color.fromHex('#5A1D1D')\n};\nvar InputBox = /** @class */ (function (_super) {\n    tslib_1.__extends(InputBox, _super);\n    function InputBox(container, contextViewProvider, options) {\n        var _this = _super.call(this) || this;\n        _this.state = 'idle';\n        _this._onDidChange = _this._register(new event_1.Emitter());\n        _this.onDidChange = _this._onDidChange.event;\n        _this._onDidHeightChange = _this._register(new event_1.Emitter());\n        _this.onDidHeightChange = _this._onDidHeightChange.event;\n        _this.contextViewProvider = contextViewProvider;\n        _this.options = options || Object.create(null);\n        objects_1.mixin(_this.options, defaultOpts, false);\n        _this.message = null;\n        _this.cachedHeight = null;\n        _this.placeholder = _this.options.placeholder || '';\n        _this.ariaLabel = _this.options.ariaLabel || '';\n        _this.inputBackground = _this.options.inputBackground;\n        _this.inputForeground = _this.options.inputForeground;\n        _this.inputBorder = _this.options.inputBorder;\n        _this.inputValidationInfoBorder = _this.options.inputValidationInfoBorder;\n        _this.inputValidationInfoBackground = _this.options.inputValidationInfoBackground;\n        _this.inputValidationInfoForeground = _this.options.inputValidationInfoForeground;\n        _this.inputValidationWarningBorder = _this.options.inputValidationWarningBorder;\n        _this.inputValidationWarningBackground = _this.options.inputValidationWarningBackground;\n        _this.inputValidationWarningForeground = _this.options.inputValidationWarningForeground;\n        _this.inputValidationErrorBorder = _this.options.inputValidationErrorBorder;\n        _this.inputValidationErrorBackground = _this.options.inputValidationErrorBackground;\n        _this.inputValidationErrorForeground = _this.options.inputValidationErrorForeground;\n        if (_this.options.validationOptions) {\n            _this.validation = _this.options.validationOptions.validation;\n        }\n        _this.element = dom.append(container, $('.monaco-inputbox.idle'));\n        var tagName = _this.options.flexibleHeight ? 'textarea' : 'input';\n        var wrapper = dom.append(_this.element, $('.wrapper'));\n        _this.input = dom.append(wrapper, $(tagName + '.input'));\n        _this.input.setAttribute('autocorrect', 'off');\n        _this.input.setAttribute('autocapitalize', 'off');\n        _this.input.setAttribute('spellcheck', 'false');\n        _this.onfocus(_this.input, function () { return dom.addClass(_this.element, 'synthetic-focus'); });\n        _this.onblur(_this.input, function () { return dom.removeClass(_this.element, 'synthetic-focus'); });\n        if (_this.options.flexibleHeight) {\n            _this.mirror = dom.append(wrapper, $('div.mirror'));\n            _this.mirror.innerHTML = '&nbsp;';\n        }\n        else {\n            _this.input.type = _this.options.type || 'text';\n            _this.input.setAttribute('wrap', 'off');\n        }\n        if (_this.ariaLabel) {\n            _this.input.setAttribute('aria-label', _this.ariaLabel);\n        }\n        if (_this.placeholder) {\n            _this.setPlaceHolder(_this.placeholder);\n        }\n        _this.oninput(_this.input, function () { return _this.onValueChange(); });\n        _this.onblur(_this.input, function () { return _this.onBlur(); });\n        _this.onfocus(_this.input, function () { return _this.onFocus(); });\n        // Add placeholder shim for IE because IE decides to hide the placeholder on focus (we dont want that!)\n        if (_this.placeholder && Bal.isIE) {\n            _this.onclick(_this.input, function (e) {\n                dom.EventHelper.stop(e, true);\n                _this.input.focus();\n            });\n        }\n        setTimeout(function () {\n            if (!_this.input) {\n                return;\n            }\n            _this.updateMirror();\n        }, 0);\n        // Support actions\n        if (_this.options.actions) {\n            _this.actionbar = _this._register(new actionbar_1.ActionBar(_this.element));\n            _this.actionbar.push(_this.options.actions, { icon: true, label: false });\n        }\n        _this.applyStyles();\n        return _this;\n    }\n    InputBox.prototype.onBlur = function () {\n        this._hideMessage();\n    };\n    InputBox.prototype.onFocus = function () {\n        this._showMessage();\n    };\n    InputBox.prototype.setPlaceHolder = function (placeHolder) {\n        if (this.input) {\n            this.input.setAttribute('placeholder', placeHolder);\n            this.input.title = placeHolder;\n        }\n    };\n    InputBox.prototype.setAriaLabel = function (label) {\n        this.ariaLabel = label;\n        if (this.input) {\n            if (label) {\n                this.input.setAttribute('aria-label', this.ariaLabel);\n            }\n            else {\n                this.input.removeAttribute('aria-label');\n            }\n        }\n    };\n    Object.defineProperty(InputBox.prototype, \"mirrorElement\", {\n        get: function () {\n            return this.mirror;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"inputElement\", {\n        get: function () {\n            return this.input;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"value\", {\n        get: function () {\n            return this.input.value;\n        },\n        set: function (newValue) {\n            if (this.input.value !== newValue) {\n                this.input.value = newValue;\n                this.onValueChange();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"height\", {\n        get: function () {\n            return this.cachedHeight === null ? dom.getTotalHeight(this.element) : this.cachedHeight;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InputBox.prototype.focus = function () {\n        this.input.focus();\n    };\n    InputBox.prototype.blur = function () {\n        this.input.blur();\n    };\n    InputBox.prototype.hasFocus = function () {\n        return document.activeElement === this.input;\n    };\n    InputBox.prototype.select = function (range) {\n        if (range === void 0) { range = null; }\n        this.input.select();\n        if (range) {\n            this.input.setSelectionRange(range.start, range.end);\n        }\n    };\n    InputBox.prototype.enable = function () {\n        this.input.removeAttribute('disabled');\n    };\n    InputBox.prototype.disable = function () {\n        this.input.disabled = true;\n        this._hideMessage();\n    };\n    InputBox.prototype.setEnabled = function (enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    };\n    Object.defineProperty(InputBox.prototype, \"width\", {\n        get: function () {\n            return dom.getTotalWidth(this.input);\n        },\n        set: function (width) {\n            this.input.style.width = width + 'px';\n            if (this.mirror) {\n                this.mirror.style.width = width + 'px';\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InputBox.prototype.showMessage = function (message, force) {\n        this.message = message;\n        dom.removeClass(this.element, 'idle');\n        dom.removeClass(this.element, 'info');\n        dom.removeClass(this.element, 'warning');\n        dom.removeClass(this.element, 'error');\n        dom.addClass(this.element, this.classForType(message.type));\n        var styles = this.stylesForType(this.message.type);\n        this.element.style.border = styles.border ? \"1px solid \" + styles.border : null;\n        // ARIA Support\n        var alertText;\n        if (message.type === MessageType.ERROR) {\n            alertText = nls.localize('alertErrorMessage', \"Error: {0}\", message.content);\n        }\n        else if (message.type === MessageType.WARNING) {\n            alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", message.content);\n        }\n        else {\n            alertText = nls.localize('alertInfoMessage', \"Info: {0}\", message.content);\n        }\n        aria.alert(alertText);\n        if (this.hasFocus() || force) {\n            this._showMessage();\n        }\n    };\n    InputBox.prototype.hideMessage = function () {\n        this.message = null;\n        dom.removeClass(this.element, 'info');\n        dom.removeClass(this.element, 'warning');\n        dom.removeClass(this.element, 'error');\n        dom.addClass(this.element, 'idle');\n        this._hideMessage();\n        this.applyStyles();\n    };\n    InputBox.prototype.isInputValid = function () {\n        return !!this.validation && !this.validation(this.value);\n    };\n    InputBox.prototype.validate = function () {\n        var errorMsg = null;\n        if (this.validation) {\n            errorMsg = this.validation(this.value);\n            if (errorMsg) {\n                this.inputElement.setAttribute('aria-invalid', 'true');\n                this.showMessage(errorMsg);\n            }\n            else if (this.inputElement.hasAttribute('aria-invalid')) {\n                this.inputElement.removeAttribute('aria-invalid');\n                this.hideMessage();\n            }\n        }\n        return !errorMsg;\n    };\n    InputBox.prototype.stylesForType = function (type) {\n        switch (type) {\n            case MessageType.INFO: return { border: this.inputValidationInfoBorder, background: this.inputValidationInfoBackground, foreground: this.inputValidationInfoForeground };\n            case MessageType.WARNING: return { border: this.inputValidationWarningBorder, background: this.inputValidationWarningBackground, foreground: this.inputValidationWarningForeground };\n            default: return { border: this.inputValidationErrorBorder, background: this.inputValidationErrorBackground, foreground: this.inputValidationErrorForeground };\n        }\n    };\n    InputBox.prototype.classForType = function (type) {\n        switch (type) {\n            case MessageType.INFO: return 'info';\n            case MessageType.WARNING: return 'warning';\n            default: return 'error';\n        }\n    };\n    InputBox.prototype._showMessage = function () {\n        var _this = this;\n        if (!this.contextViewProvider || !this.message) {\n            return;\n        }\n        var div;\n        var layout = function () { return div.style.width = dom.getTotalWidth(_this.element) + 'px'; };\n        this.state = 'open';\n        this.contextViewProvider.showContextView({\n            getAnchor: function () { return _this.element; },\n            anchorAlignment: contextview_1.AnchorAlignment.RIGHT,\n            render: function (container) {\n                if (!_this.message) {\n                    return null;\n                }\n                div = dom.append(container, $('.monaco-inputbox-container'));\n                layout();\n                var renderOptions = {\n                    inline: true,\n                    className: 'monaco-inputbox-message'\n                };\n                var spanElement = (_this.message.formatContent\n                    ? htmlContentRenderer_1.renderFormattedText(_this.message.content, renderOptions)\n                    : htmlContentRenderer_1.renderText(_this.message.content, renderOptions));\n                dom.addClass(spanElement, _this.classForType(_this.message.type));\n                var styles = _this.stylesForType(_this.message.type);\n                spanElement.style.backgroundColor = styles.background ? styles.background.toString() : null;\n                spanElement.style.color = styles.foreground ? styles.foreground.toString() : null;\n                spanElement.style.border = styles.border ? \"1px solid \" + styles.border : null;\n                dom.append(div, spanElement);\n                return null;\n            },\n            layout: layout\n        });\n    };\n    InputBox.prototype._hideMessage = function () {\n        if (!this.contextViewProvider || this.state !== 'open') {\n            return;\n        }\n        this.state = 'idle';\n        this.contextViewProvider.hideContextView();\n    };\n    InputBox.prototype.onValueChange = function () {\n        this._onDidChange.fire(this.value);\n        this.validate();\n        this.updateMirror();\n        if (this.state === 'open' && this.contextViewProvider) {\n            this.contextViewProvider.layout();\n        }\n    };\n    InputBox.prototype.updateMirror = function () {\n        if (!this.mirror) {\n            return;\n        }\n        var value = this.value || this.placeholder;\n        var lastCharCode = value.charCodeAt(value.length - 1);\n        var suffix = lastCharCode === 10 ? ' ' : '';\n        var mirrorTextContent = value + suffix;\n        if (mirrorTextContent) {\n            this.mirror.textContent = value + suffix;\n        }\n        else {\n            this.mirror.innerHTML = '&nbsp;';\n        }\n        this.layout();\n    };\n    InputBox.prototype.style = function (styles) {\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    };\n    InputBox.prototype.applyStyles = function () {\n        if (this.element) {\n            var background = this.inputBackground ? this.inputBackground.toString() : null;\n            var foreground = this.inputForeground ? this.inputForeground.toString() : null;\n            var border = this.inputBorder ? this.inputBorder.toString() : null;\n            this.element.style.backgroundColor = background;\n            this.element.style.color = foreground;\n            this.input.style.backgroundColor = background;\n            this.input.style.color = foreground;\n            this.element.style.borderWidth = border ? '1px' : null;\n            this.element.style.borderStyle = border ? 'solid' : null;\n            this.element.style.borderColor = border;\n        }\n    };\n    InputBox.prototype.layout = function () {\n        if (!this.mirror) {\n            return;\n        }\n        var previousHeight = this.cachedHeight;\n        this.cachedHeight = dom.getTotalHeight(this.mirror);\n        if (previousHeight !== this.cachedHeight) {\n            this.input.style.height = this.cachedHeight + 'px';\n            this._onDidHeightChange.fire(this.cachedHeight);\n        }\n    };\n    InputBox.prototype.dispose = function () {\n        this._hideMessage();\n        this.element = null; // StrictNullOverride: nulling out ok in dispose\n        this.input = null; // StrictNullOverride: nulling out ok in dispose\n        this.contextViewProvider = undefined;\n        this.message = null;\n        this.validation = undefined;\n        this.state = null;\n        this.actionbar = undefined;\n        _super.prototype.dispose.call(this);\n    };\n    return InputBox;\n}(widget_1.Widget));\nexports.InputBox = InputBox;\nvar HistoryInputBox = /** @class */ (function (_super) {\n    tslib_1.__extends(HistoryInputBox, _super);\n    function HistoryInputBox(container, contextViewProvider, options) {\n        var _this = _super.call(this, container, contextViewProvider, options) || this;\n        _this.history = new history_1.HistoryNavigator(options.history, 100);\n        return _this;\n    }\n    HistoryInputBox.prototype.addToHistory = function () {\n        if (this.value && this.value !== this.getCurrentValue()) {\n            this.history.add(this.value);\n        }\n    };\n    HistoryInputBox.prototype.getHistory = function () {\n        return this.history.getHistory();\n    };\n    HistoryInputBox.prototype.showNextValue = function () {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        var next = this.getNextValue();\n        if (next) {\n            next = next === this.value ? this.getNextValue() : next;\n        }\n        if (next) {\n            this.value = next;\n            aria.status(this.value);\n        }\n    };\n    HistoryInputBox.prototype.showPreviousValue = function () {\n        if (!this.history.has(this.value)) {\n            this.addToHistory();\n        }\n        var previous = this.getPreviousValue();\n        if (previous) {\n            previous = previous === this.value ? this.getPreviousValue() : previous;\n        }\n        if (previous) {\n            this.value = previous;\n            aria.status(this.value);\n        }\n    };\n    HistoryInputBox.prototype.clearHistory = function () {\n        this.history.clear();\n    };\n    HistoryInputBox.prototype.getCurrentValue = function () {\n        var currentValue = this.history.current();\n        if (!currentValue) {\n            currentValue = this.history.last();\n            this.history.next();\n        }\n        return currentValue;\n    };\n    HistoryInputBox.prototype.getPreviousValue = function () {\n        return this.history.previous() || this.history.first();\n    };\n    HistoryInputBox.prototype.getNextValue = function () {\n        return this.history.next() || this.history.last();\n    };\n    return HistoryInputBox;\n}(InputBox));\nexports.HistoryInputBox = HistoryInputBox;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/inputbox/inputBox.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/inputbox/inputBox.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./inputBox';\n\nimport * as nls from 'vs/nls';\nimport * as Bal from 'vs/base/browser/browser';\nimport * as dom from 'vs/base/browser/dom';\nimport { RenderOptions, renderFormattedText, renderText } from 'vs/base/browser/htmlContentRenderer';\nimport * as aria from 'vs/base/browser/ui/aria/aria';\nimport { IAction } from 'vs/base/common/actions';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IContextViewProvider, AnchorAlignment } from 'vs/base/browser/ui/contextview/contextview';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { Color } from 'vs/base/common/color';\nimport { mixin } from 'vs/base/common/objects';\nimport { HistoryNavigator } from 'vs/base/common/history';\nimport { IHistoryNavigationWidget } from 'vs/base/browser/history';\n\nconst $ = dom.$;\n\nexport interface IInputOptions extends IInputBoxStyles {\n\treadonly placeholder?: string;\n\treadonly ariaLabel?: string;\n\treadonly type?: string;\n\treadonly validationOptions?: IInputValidationOptions;\n\treadonly flexibleHeight?: boolean;\n\treadonly actions?: IAction[];\n}\n\nexport interface IInputBoxStyles {\n\treadonly inputBackground?: Color;\n\treadonly inputForeground?: Color;\n\treadonly inputBorder?: Color;\n\treadonly inputValidationInfoBorder?: Color;\n\treadonly inputValidationInfoBackground?: Color;\n\treadonly inputValidationInfoForeground?: Color;\n\treadonly inputValidationWarningBorder?: Color;\n\treadonly inputValidationWarningBackground?: Color;\n\treadonly inputValidationWarningForeground?: Color;\n\treadonly inputValidationErrorBorder?: Color;\n\treadonly inputValidationErrorBackground?: Color;\n\treadonly inputValidationErrorForeground?: Color;\n}\n\nexport interface IInputValidator {\n\t(value: string): IMessage | null;\n}\n\nexport interface IMessage {\n\treadonly content: string;\n\treadonly formatContent?: boolean; // defaults to false\n\treadonly type?: MessageType;\n}\n\nexport interface IInputValidationOptions {\n\tvalidation?: IInputValidator;\n}\n\nexport const enum MessageType {\n\tINFO = 1,\n\tWARNING = 2,\n\tERROR = 3\n}\n\nexport interface IRange {\n\tstart: number;\n\tend: number;\n}\n\nconst defaultOpts = {\n\tinputBackground: Color.fromHex('#3C3C3C'),\n\tinputForeground: Color.fromHex('#CCCCCC'),\n\tinputValidationInfoBorder: Color.fromHex('#55AAFF'),\n\tinputValidationInfoBackground: Color.fromHex('#063B49'),\n\tinputValidationWarningBorder: Color.fromHex('#B89500'),\n\tinputValidationWarningBackground: Color.fromHex('#352A05'),\n\tinputValidationErrorBorder: Color.fromHex('#BE1100'),\n\tinputValidationErrorBackground: Color.fromHex('#5A1D1D')\n};\n\nexport class InputBox extends Widget {\n\tprivate contextViewProvider?: IContextViewProvider;\n\telement: HTMLElement;\n\tprivate input: HTMLInputElement;\n\tprivate mirror: HTMLElement;\n\tprivate actionbar?: ActionBar;\n\tprivate options: IInputOptions;\n\tprivate message: IMessage | null;\n\tprivate placeholder: string;\n\tprivate ariaLabel: string;\n\tprivate validation?: IInputValidator;\n\tprivate state: string | null = 'idle';\n\tprivate cachedHeight: number | null;\n\n\tprivate inputBackground?: Color;\n\tprivate inputForeground?: Color;\n\tprivate inputBorder?: Color;\n\n\tprivate inputValidationInfoBorder?: Color;\n\tprivate inputValidationInfoBackground?: Color;\n\tprivate inputValidationInfoForeground?: Color;\n\tprivate inputValidationWarningBorder?: Color;\n\tprivate inputValidationWarningBackground?: Color;\n\tprivate inputValidationWarningForeground?: Color;\n\tprivate inputValidationErrorBorder?: Color;\n\tprivate inputValidationErrorBackground?: Color;\n\tprivate inputValidationErrorForeground?: Color;\n\n\tprivate _onDidChange = this._register(new Emitter<string>());\n\tpublic readonly onDidChange: Event<string> = this._onDidChange.event;\n\n\tprivate _onDidHeightChange = this._register(new Emitter<number>());\n\tpublic readonly onDidHeightChange: Event<number> = this._onDidHeightChange.event;\n\n\tconstructor(container: HTMLElement, contextViewProvider: IContextViewProvider | undefined, options?: IInputOptions) {\n\t\tsuper();\n\n\t\tthis.contextViewProvider = contextViewProvider;\n\t\tthis.options = options || Object.create(null);\n\t\tmixin(this.options, defaultOpts, false);\n\t\tthis.message = null;\n\t\tthis.cachedHeight = null;\n\t\tthis.placeholder = this.options.placeholder || '';\n\t\tthis.ariaLabel = this.options.ariaLabel || '';\n\n\t\tthis.inputBackground = this.options.inputBackground;\n\t\tthis.inputForeground = this.options.inputForeground;\n\t\tthis.inputBorder = this.options.inputBorder;\n\n\t\tthis.inputValidationInfoBorder = this.options.inputValidationInfoBorder;\n\t\tthis.inputValidationInfoBackground = this.options.inputValidationInfoBackground;\n\t\tthis.inputValidationInfoForeground = this.options.inputValidationInfoForeground;\n\t\tthis.inputValidationWarningBorder = this.options.inputValidationWarningBorder;\n\t\tthis.inputValidationWarningBackground = this.options.inputValidationWarningBackground;\n\t\tthis.inputValidationWarningForeground = this.options.inputValidationWarningForeground;\n\t\tthis.inputValidationErrorBorder = this.options.inputValidationErrorBorder;\n\t\tthis.inputValidationErrorBackground = this.options.inputValidationErrorBackground;\n\t\tthis.inputValidationErrorForeground = this.options.inputValidationErrorForeground;\n\n\t\tif (this.options.validationOptions) {\n\t\t\tthis.validation = this.options.validationOptions.validation;\n\t\t}\n\n\t\tthis.element = dom.append(container, $('.monaco-inputbox.idle'));\n\n\t\tlet tagName = this.options.flexibleHeight ? 'textarea' : 'input';\n\n\t\tlet wrapper = dom.append(this.element, $('.wrapper'));\n\t\tthis.input = <HTMLInputElement>dom.append(wrapper, $(tagName + '.input'));\n\t\tthis.input.setAttribute('autocorrect', 'off');\n\t\tthis.input.setAttribute('autocapitalize', 'off');\n\t\tthis.input.setAttribute('spellcheck', 'false');\n\n\t\tthis.onfocus(this.input, () => dom.addClass(this.element, 'synthetic-focus'));\n\t\tthis.onblur(this.input, () => dom.removeClass(this.element, 'synthetic-focus'));\n\n\t\tif (this.options.flexibleHeight) {\n\t\t\tthis.mirror = dom.append(wrapper, $('div.mirror'));\n\t\t\tthis.mirror.innerHTML = '&nbsp;';\n\t\t} else {\n\t\t\tthis.input.type = this.options.type || 'text';\n\t\t\tthis.input.setAttribute('wrap', 'off');\n\t\t}\n\n\t\tif (this.ariaLabel) {\n\t\t\tthis.input.setAttribute('aria-label', this.ariaLabel);\n\t\t}\n\n\t\tif (this.placeholder) {\n\t\t\tthis.setPlaceHolder(this.placeholder);\n\t\t}\n\n\t\tthis.oninput(this.input, () => this.onValueChange());\n\t\tthis.onblur(this.input, () => this.onBlur());\n\t\tthis.onfocus(this.input, () => this.onFocus());\n\n\t\t// Add placeholder shim for IE because IE decides to hide the placeholder on focus (we dont want that!)\n\t\tif (this.placeholder && Bal.isIE) {\n\t\t\tthis.onclick(this.input, (e) => {\n\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\tthis.input.focus();\n\t\t\t});\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tif (!this.input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateMirror();\n\t\t}, 0);\n\n\t\t// Support actions\n\t\tif (this.options.actions) {\n\t\t\tthis.actionbar = this._register(new ActionBar(this.element));\n\t\t\tthis.actionbar.push(this.options.actions, { icon: true, label: false });\n\t\t}\n\n\t\tthis.applyStyles();\n\t}\n\n\tprivate onBlur(): void {\n\t\tthis._hideMessage();\n\t}\n\n\tprivate onFocus(): void {\n\t\tthis._showMessage();\n\t}\n\n\tpublic setPlaceHolder(placeHolder: string): void {\n\t\tif (this.input) {\n\t\t\tthis.input.setAttribute('placeholder', placeHolder);\n\t\t\tthis.input.title = placeHolder;\n\t\t}\n\t}\n\n\tpublic setAriaLabel(label: string): void {\n\t\tthis.ariaLabel = label;\n\n\t\tif (this.input) {\n\t\t\tif (label) {\n\t\t\t\tthis.input.setAttribute('aria-label', this.ariaLabel);\n\t\t\t} else {\n\t\t\t\tthis.input.removeAttribute('aria-label');\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get mirrorElement(): HTMLElement {\n\t\treturn this.mirror;\n\t}\n\n\tpublic get inputElement(): HTMLInputElement {\n\t\treturn this.input;\n\t}\n\n\tpublic get value(): string {\n\t\treturn this.input.value;\n\t}\n\n\tpublic set value(newValue: string) {\n\t\tif (this.input.value !== newValue) {\n\t\t\tthis.input.value = newValue;\n\t\t\tthis.onValueChange();\n\t\t}\n\t}\n\n\tpublic get height(): number {\n\t\treturn this.cachedHeight === null ? dom.getTotalHeight(this.element) : this.cachedHeight;\n\t}\n\n\tpublic focus(): void {\n\t\tthis.input.focus();\n\t}\n\n\tpublic blur(): void {\n\t\tthis.input.blur();\n\t}\n\n\tpublic hasFocus(): boolean {\n\t\treturn document.activeElement === this.input;\n\t}\n\n\tpublic select(range: IRange | null = null): void {\n\t\tthis.input.select();\n\n\t\tif (range) {\n\t\t\tthis.input.setSelectionRange(range.start, range.end);\n\t\t}\n\t}\n\n\tpublic enable(): void {\n\t\tthis.input.removeAttribute('disabled');\n\t}\n\n\tpublic disable(): void {\n\t\tthis.input.disabled = true;\n\t\tthis._hideMessage();\n\t}\n\n\tpublic setEnabled(enabled: boolean): void {\n\t\tif (enabled) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\t}\n\n\tpublic get width(): number {\n\t\treturn dom.getTotalWidth(this.input);\n\t}\n\n\tpublic set width(width: number) {\n\t\tthis.input.style.width = width + 'px';\n\t\tif (this.mirror) {\n\t\t\tthis.mirror.style.width = width + 'px';\n\t\t}\n\t}\n\n\tpublic showMessage(message: IMessage, force?: boolean): void {\n\t\tthis.message = message;\n\n\t\tdom.removeClass(this.element, 'idle');\n\t\tdom.removeClass(this.element, 'info');\n\t\tdom.removeClass(this.element, 'warning');\n\t\tdom.removeClass(this.element, 'error');\n\t\tdom.addClass(this.element, this.classForType(message.type));\n\n\t\tconst styles = this.stylesForType(this.message.type);\n\t\tthis.element.style.border = styles.border ? `1px solid ${styles.border}` : null;\n\n\t\t// ARIA Support\n\t\tlet alertText: string;\n\t\tif (message.type === MessageType.ERROR) {\n\t\t\talertText = nls.localize('alertErrorMessage', \"Error: {0}\", message.content);\n\t\t} else if (message.type === MessageType.WARNING) {\n\t\t\talertText = nls.localize('alertWarningMessage', \"Warning: {0}\", message.content);\n\t\t} else {\n\t\t\talertText = nls.localize('alertInfoMessage', \"Info: {0}\", message.content);\n\t\t}\n\n\t\taria.alert(alertText);\n\n\t\tif (this.hasFocus() || force) {\n\t\t\tthis._showMessage();\n\t\t}\n\t}\n\n\tpublic hideMessage(): void {\n\t\tthis.message = null;\n\n\t\tdom.removeClass(this.element, 'info');\n\t\tdom.removeClass(this.element, 'warning');\n\t\tdom.removeClass(this.element, 'error');\n\t\tdom.addClass(this.element, 'idle');\n\n\t\tthis._hideMessage();\n\t\tthis.applyStyles();\n\t}\n\n\tpublic isInputValid(): boolean {\n\t\treturn !!this.validation && !this.validation(this.value);\n\t}\n\n\tpublic validate(): boolean {\n\t\tlet errorMsg: IMessage | null = null;\n\n\t\tif (this.validation) {\n\t\t\terrorMsg = this.validation(this.value);\n\n\t\t\tif (errorMsg) {\n\t\t\t\tthis.inputElement.setAttribute('aria-invalid', 'true');\n\t\t\t\tthis.showMessage(errorMsg);\n\t\t\t}\n\t\t\telse if (this.inputElement.hasAttribute('aria-invalid')) {\n\t\t\t\tthis.inputElement.removeAttribute('aria-invalid');\n\t\t\t\tthis.hideMessage();\n\t\t\t}\n\t\t}\n\n\t\treturn !errorMsg;\n\t}\n\n\tprivate stylesForType(type: MessageType | undefined): { border: Color | undefined; background: Color | undefined; foreground: Color | undefined } {\n\t\tswitch (type) {\n\t\t\tcase MessageType.INFO: return { border: this.inputValidationInfoBorder, background: this.inputValidationInfoBackground, foreground: this.inputValidationInfoForeground };\n\t\t\tcase MessageType.WARNING: return { border: this.inputValidationWarningBorder, background: this.inputValidationWarningBackground, foreground: this.inputValidationWarningForeground };\n\t\t\tdefault: return { border: this.inputValidationErrorBorder, background: this.inputValidationErrorBackground, foreground: this.inputValidationErrorForeground };\n\t\t}\n\t}\n\n\tprivate classForType(type: MessageType | undefined): string {\n\t\tswitch (type) {\n\t\t\tcase MessageType.INFO: return 'info';\n\t\t\tcase MessageType.WARNING: return 'warning';\n\t\t\tdefault: return 'error';\n\t\t}\n\t}\n\n\tprivate _showMessage(): void {\n\t\tif (!this.contextViewProvider || !this.message) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet div: HTMLElement;\n\t\tlet layout = () => div.style.width = dom.getTotalWidth(this.element) + 'px';\n\n\t\tthis.state = 'open';\n\n\t\tthis.contextViewProvider.showContextView({\n\t\t\tgetAnchor: () => this.element,\n\t\t\tanchorAlignment: AnchorAlignment.RIGHT,\n\t\t\trender: (container: HTMLElement) => {\n\t\t\t\tif (!this.message) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdiv = dom.append(container, $('.monaco-inputbox-container'));\n\t\t\t\tlayout();\n\n\t\t\t\tconst renderOptions: RenderOptions = {\n\t\t\t\t\tinline: true,\n\t\t\t\t\tclassName: 'monaco-inputbox-message'\n\t\t\t\t};\n\n\t\t\t\tconst spanElement = (this.message.formatContent\n\t\t\t\t\t? renderFormattedText(this.message.content, renderOptions)\n\t\t\t\t\t: renderText(this.message.content, renderOptions));\n\t\t\t\tdom.addClass(spanElement, this.classForType(this.message.type));\n\n\t\t\t\tconst styles = this.stylesForType(this.message.type);\n\t\t\t\tspanElement.style.backgroundColor = styles.background ? styles.background.toString() : null;\n\t\t\t\tspanElement.style.color = styles.foreground ? styles.foreground.toString() : null;\n\t\t\t\tspanElement.style.border = styles.border ? `1px solid ${styles.border}` : null;\n\n\t\t\t\tdom.append(div, spanElement);\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tlayout: layout\n\t\t});\n\t}\n\n\tprivate _hideMessage(): void {\n\t\tif (!this.contextViewProvider || this.state !== 'open') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state = 'idle';\n\n\t\tthis.contextViewProvider.hideContextView();\n\t}\n\n\tprivate onValueChange(): void {\n\t\tthis._onDidChange.fire(this.value);\n\n\t\tthis.validate();\n\t\tthis.updateMirror();\n\n\t\tif (this.state === 'open' && this.contextViewProvider) {\n\t\t\tthis.contextViewProvider.layout();\n\t\t}\n\t}\n\n\tprivate updateMirror(): void {\n\t\tif (!this.mirror) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.value || this.placeholder;\n\t\tconst lastCharCode = value.charCodeAt(value.length - 1);\n\t\tconst suffix = lastCharCode === 10 ? ' ' : '';\n\t\tconst mirrorTextContent = value + suffix;\n\n\t\tif (mirrorTextContent) {\n\t\t\tthis.mirror.textContent = value + suffix;\n\t\t} else {\n\t\t\tthis.mirror.innerHTML = '&nbsp;';\n\t\t}\n\n\t\tthis.layout();\n\t}\n\n\tpublic style(styles: IInputBoxStyles): void {\n\t\tthis.inputBackground = styles.inputBackground;\n\t\tthis.inputForeground = styles.inputForeground;\n\t\tthis.inputBorder = styles.inputBorder;\n\n\t\tthis.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n\t\tthis.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n\t\tthis.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n\t\tthis.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n\t\tthis.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n\t\tthis.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n\t\tthis.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n\t\tthis.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n\t\tthis.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n\n\t\tthis.applyStyles();\n\t}\n\n\tprotected applyStyles(): void {\n\t\tif (this.element) {\n\t\t\tconst background = this.inputBackground ? this.inputBackground.toString() : null;\n\t\t\tconst foreground = this.inputForeground ? this.inputForeground.toString() : null;\n\t\t\tconst border = this.inputBorder ? this.inputBorder.toString() : null;\n\n\t\t\tthis.element.style.backgroundColor = background;\n\t\t\tthis.element.style.color = foreground;\n\t\t\tthis.input.style.backgroundColor = background;\n\t\t\tthis.input.style.color = foreground;\n\n\t\t\tthis.element.style.borderWidth = border ? '1px' : null;\n\t\t\tthis.element.style.borderStyle = border ? 'solid' : null;\n\t\t\tthis.element.style.borderColor = border;\n\t\t}\n\t}\n\n\tpublic layout(): void {\n\t\tif (!this.mirror) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst previousHeight = this.cachedHeight;\n\t\tthis.cachedHeight = dom.getTotalHeight(this.mirror);\n\n\t\tif (previousHeight !== this.cachedHeight) {\n\t\t\tthis.input.style.height = this.cachedHeight + 'px';\n\t\t\tthis._onDidHeightChange.fire(this.cachedHeight);\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._hideMessage();\n\n\t\tthis.element = null!; // StrictNullOverride: nulling out ok in dispose\n\t\tthis.input = null!; // StrictNullOverride: nulling out ok in dispose\n\t\tthis.contextViewProvider = undefined;\n\t\tthis.message = null;\n\t\tthis.validation = undefined;\n\t\tthis.state = null;\n\t\tthis.actionbar = undefined;\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport interface IHistoryInputOptions extends IInputOptions {\n\thistory: string[];\n}\n\nexport class HistoryInputBox extends InputBox implements IHistoryNavigationWidget {\n\n\tprivate readonly history: HistoryNavigator<string>;\n\n\tconstructor(container: HTMLElement, contextViewProvider: IContextViewProvider | undefined, options: IHistoryInputOptions) {\n\t\tsuper(container, contextViewProvider, options);\n\t\tthis.history = new HistoryNavigator<string>(options.history, 100);\n\t}\n\n\tpublic addToHistory(): void {\n\t\tif (this.value && this.value !== this.getCurrentValue()) {\n\t\t\tthis.history.add(this.value);\n\t\t}\n\t}\n\n\tpublic getHistory(): string[] {\n\t\treturn this.history.getHistory();\n\t}\n\n\tpublic showNextValue(): void {\n\t\tif (!this.history.has(this.value)) {\n\t\t\tthis.addToHistory();\n\t\t}\n\n\t\tlet next = this.getNextValue();\n\t\tif (next) {\n\t\t\tnext = next === this.value ? this.getNextValue() : next;\n\t\t}\n\n\t\tif (next) {\n\t\t\tthis.value = next;\n\t\t\taria.status(this.value);\n\t\t}\n\t}\n\n\tpublic showPreviousValue(): void {\n\t\tif (!this.history.has(this.value)) {\n\t\t\tthis.addToHistory();\n\t\t}\n\n\t\tlet previous = this.getPreviousValue();\n\t\tif (previous) {\n\t\t\tprevious = previous === this.value ? this.getPreviousValue() : previous;\n\t\t}\n\n\t\tif (previous) {\n\t\t\tthis.value = previous;\n\t\t\taria.status(this.value);\n\t\t}\n\t}\n\n\tpublic clearHistory(): void {\n\t\tthis.history.clear();\n\t}\n\n\tprivate getCurrentValue(): string | null {\n\t\tlet currentValue = this.history.current();\n\t\tif (!currentValue) {\n\t\t\tcurrentValue = this.history.last();\n\t\t\tthis.history.next();\n\t\t}\n\t\treturn currentValue;\n\t}\n\n\tprivate getPreviousValue(): string | null {\n\t\treturn this.history.previous() || this.history.first();\n\t}\n\n\tprivate getNextValue(): string | null {\n\t\treturn this.history.next() || this.history.last();\n\t}\n}\n"]}]}