{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/feedback/electron-browser/feedback.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/feedback/electron-browser/feedback.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./media/feedback\");\nvar nls = require(\"vs/nls\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar dropdown_1 = require(\"vs/base/browser/ui/dropdown/dropdown\");\nvar product_1 = require(\"vs/platform/product/node/product\");\nvar dom = require(\"vs/base/browser/dom\");\nvar commands_1 = require(\"vs/platform/commands/common/commands\");\nvar integrity_1 = require(\"vs/workbench/services/integrity/common/integrity\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar styler_1 = require(\"vs/platform/theme/common/styler\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar button_1 = require(\"vs/base/browser/ui/button/button\");\nvar telemetry_1 = require(\"vs/platform/telemetry/common/telemetry\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nexports.FEEDBACK_VISIBLE_CONFIG = 'workbench.statusBar.feedback.visible';\nvar FeedbackDropdown = /** @class */ (function (_super) {\n    tslib_1.__extends(FeedbackDropdown, _super);\n    function FeedbackDropdown(container, options, commandService, telemetryService, integrityService, themeService, configurationService) {\n        var _this = _super.call(this, container, {\n            contextViewProvider: options.contextViewProvider,\n            labelRenderer: function (container) {\n                dom.addClasses(container, 'send-feedback', 'mask-icon');\n                return lifecycle_1.Disposable.None;\n            }\n        }) || this;\n        _this.options = options;\n        _this.commandService = commandService;\n        _this.telemetryService = telemetryService;\n        _this.integrityService = integrityService;\n        _this.themeService = themeService;\n        _this.configurationService = configurationService;\n        _this.feedback = '';\n        _this.sentiment = 1;\n        _this.isPure = true;\n        _this.feedbackDelegate = options.feedbackService;\n        _this.maxFeedbackCharacters = _this.feedbackDelegate.getCharacterLimit(_this.sentiment);\n        _this.requestFeatureLink = product_1.default.sendASmile.requestFeatureUrl;\n        _this.integrityService.isPure().then(function (result) {\n            if (!result.isPure) {\n                _this.isPure = false;\n            }\n        });\n        dom.addClass(_this.element, 'send-feedback');\n        _this.element.title = nls.localize('sendFeedback', \"Tweet Feedback\");\n        return _this;\n    }\n    FeedbackDropdown.prototype.getAnchor = function () {\n        var position = dom.getDomNodePagePosition(this.element);\n        return {\n            x: position.left + position.width,\n            y: position.top - 9,\n            width: position.width,\n            height: position.height\n        };\n    };\n    FeedbackDropdown.prototype.renderContents = function (container) {\n        var _this = this;\n        var disposables = [];\n        dom.addClass(container, 'monaco-menu-container');\n        // Form\n        this.feedbackForm = dom.append(container, dom.$('form.feedback-form'));\n        this.feedbackForm.setAttribute('action', 'javascript:void(0);');\n        // Title\n        dom.append(this.feedbackForm, dom.$('h2.title')).textContent = nls.localize(\"label.sendASmile\", \"Tweet us your feedback.\");\n        // Close Button (top right)\n        var closeBtn = dom.append(this.feedbackForm, dom.$('div.cancel'));\n        closeBtn.tabIndex = 0;\n        closeBtn.setAttribute('role', 'button');\n        closeBtn.title = nls.localize('close', \"Close\");\n        disposables.push(dom.addDisposableListener(closeBtn, dom.EventType.MOUSE_OVER, function () {\n            var theme = _this.themeService.getTheme();\n            var darkenFactor;\n            switch (theme.type) {\n                case 'light':\n                    darkenFactor = 0.1;\n                    break;\n                case 'dark':\n                    darkenFactor = 0.2;\n                    break;\n            }\n            if (darkenFactor) {\n                var backgroundBaseColor = theme.getColor(colorRegistry_1.editorWidgetBackground);\n                if (backgroundBaseColor) {\n                    var backgroundColor = colorRegistry_1.darken(backgroundBaseColor, darkenFactor)(theme);\n                    if (backgroundColor) {\n                        closeBtn.style.backgroundColor = backgroundColor.toString();\n                    }\n                }\n            }\n        }));\n        disposables.push(dom.addDisposableListener(closeBtn, dom.EventType.MOUSE_OUT, function () {\n            closeBtn.style.backgroundColor = null;\n        }));\n        this.invoke(closeBtn, disposables, function () { return _this.hide(); });\n        // Content\n        var content = dom.append(this.feedbackForm, dom.$('div.content'));\n        // Sentiment Buttons\n        var sentimentContainer = dom.append(content, dom.$('div'));\n        if (!this.isPure) {\n            dom.append(sentimentContainer, dom.$('span')).textContent = nls.localize(\"patchedVersion1\", \"Your installation is corrupt.\");\n            sentimentContainer.appendChild(document.createElement('br'));\n            dom.append(sentimentContainer, dom.$('span')).textContent = nls.localize(\"patchedVersion2\", \"Please specify this if you submit a bug.\");\n            sentimentContainer.appendChild(document.createElement('br'));\n        }\n        dom.append(sentimentContainer, dom.$('span')).textContent = nls.localize(\"sentiment\", \"How was your experience?\");\n        var feedbackSentiment = dom.append(sentimentContainer, dom.$('div.feedback-sentiment'));\n        // Sentiment: Smiley\n        this.smileyInput = dom.append(feedbackSentiment, dom.$('div.sentiment'));\n        dom.addClass(this.smileyInput, 'smile');\n        this.smileyInput.setAttribute('aria-checked', 'false');\n        this.smileyInput.setAttribute('aria-label', nls.localize('smileCaption', \"Happy Feedback Sentiment\"));\n        this.smileyInput.setAttribute('role', 'checkbox');\n        this.smileyInput.title = nls.localize('smileCaption', \"Happy Feedback Sentiment\");\n        this.smileyInput.tabIndex = 0;\n        this.invoke(this.smileyInput, disposables, function () { return _this.setSentiment(true); });\n        // Sentiment: Frowny\n        this.frownyInput = dom.append(feedbackSentiment, dom.$('div.sentiment'));\n        dom.addClass(this.frownyInput, 'frown');\n        this.frownyInput.setAttribute('aria-checked', 'false');\n        this.frownyInput.setAttribute('aria-label', nls.localize('frownCaption', \"Sad Feedback Sentiment\"));\n        this.frownyInput.setAttribute('role', 'checkbox');\n        this.frownyInput.title = nls.localize('frownCaption', \"Sad Feedback Sentiment\");\n        this.frownyInput.tabIndex = 0;\n        this.invoke(this.frownyInput, disposables, function () { return _this.setSentiment(false); });\n        if (this.sentiment === 1) {\n            dom.addClass(this.smileyInput, 'checked');\n            this.smileyInput.setAttribute('aria-checked', 'true');\n        }\n        else {\n            dom.addClass(this.frownyInput, 'checked');\n            this.frownyInput.setAttribute('aria-checked', 'true');\n        }\n        // Contact Us Box\n        var contactUsContainer = dom.append(content, dom.$('div.contactus'));\n        dom.append(contactUsContainer, dom.$('span')).textContent = nls.localize(\"other ways to contact us\", \"Other ways to contact us\");\n        var channelsContainer = dom.append(contactUsContainer, dom.$('div.channels'));\n        // Contact: Submit a Bug\n        var submitBugLinkContainer = dom.append(channelsContainer, dom.$('div'));\n        var submitBugLink = dom.append(submitBugLinkContainer, dom.$('a'));\n        submitBugLink.setAttribute('target', '_blank');\n        submitBugLink.setAttribute('href', '#');\n        submitBugLink.textContent = nls.localize(\"submit a bug\", \"Submit a bug\");\n        submitBugLink.tabIndex = 0;\n        disposables.push(dom.addDisposableListener(submitBugLink, 'click', function (e) {\n            dom.EventHelper.stop(e);\n            var actionId = 'workbench.action.openIssueReporter';\n            _this.commandService.executeCommand(actionId);\n            _this.hide();\n            /* __GDPR__\n                \"workbenchActionExecuted\" : {\n                    \"id\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                    \"from\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n                }\n            */\n            _this.telemetryService.publicLog('workbenchActionExecuted', { id: actionId, from: 'feedback' });\n        }));\n        // Contact: Request a Feature\n        if (!!this.requestFeatureLink) {\n            var requestFeatureLinkContainer = dom.append(channelsContainer, dom.$('div'));\n            var requestFeatureLink = dom.append(requestFeatureLinkContainer, dom.$('a'));\n            requestFeatureLink.setAttribute('target', '_blank');\n            requestFeatureLink.setAttribute('href', this.requestFeatureLink);\n            requestFeatureLink.textContent = nls.localize(\"request a missing feature\", \"Request a missing feature\");\n            requestFeatureLink.tabIndex = 0;\n            disposables.push(dom.addDisposableListener(requestFeatureLink, 'click', function (e) { return _this.hide(); }));\n        }\n        // Remaining Characters\n        var remainingCharacterCountContainer = dom.append(this.feedbackForm, dom.$('h3'));\n        remainingCharacterCountContainer.textContent = nls.localize(\"tell us why\", \"Tell us why?\");\n        this.remainingCharacterCount = dom.append(remainingCharacterCountContainer, dom.$('span.char-counter'));\n        this.remainingCharacterCount.textContent = this.getCharCountText(0);\n        // Feedback Input Form\n        this.feedbackDescriptionInput = dom.append(this.feedbackForm, dom.$('textarea.feedback-description'));\n        this.feedbackDescriptionInput.rows = 3;\n        this.feedbackDescriptionInput.maxLength = this.maxFeedbackCharacters;\n        this.feedbackDescriptionInput.textContent = this.feedback;\n        this.feedbackDescriptionInput.required = true;\n        this.feedbackDescriptionInput.setAttribute('aria-label', nls.localize(\"feedbackTextInput\", \"Tell us your feedback\"));\n        this.feedbackDescriptionInput.focus();\n        disposables.push(dom.addDisposableListener(this.feedbackDescriptionInput, 'keyup', function () { return _this.updateCharCountText(); }));\n        // Feedback Input Form Buttons Container\n        var buttonsContainer = dom.append(this.feedbackForm, dom.$('div.form-buttons'));\n        // Checkbox: Hide Feedback Smiley\n        var hideButtonContainer = dom.append(buttonsContainer, dom.$('div.hide-button-container'));\n        this.hideButton = dom.append(hideButtonContainer, dom.$('input.hide-button'));\n        this.hideButton.type = 'checkbox';\n        this.hideButton.checked = true;\n        this.hideButton.id = 'hide-button';\n        var hideButtonLabel = dom.append(hideButtonContainer, dom.$('label'));\n        hideButtonLabel.setAttribute('for', 'hide-button');\n        hideButtonLabel.textContent = nls.localize('showFeedback', \"Show Feedback Smiley in Status Bar\");\n        // Button: Send Feedback\n        this.sendButton = new button_1.Button(buttonsContainer);\n        this.sendButton.enabled = false;\n        this.sendButton.label = nls.localize('tweet', \"Tweet\");\n        dom.addClass(this.sendButton.element, 'send');\n        this.sendButton.element.title = nls.localize('tweetFeedback', \"Tweet Feedback\");\n        disposables.push(styler_1.attachButtonStyler(this.sendButton, this.themeService));\n        this.sendButton.onDidClick(function () { return _this.onSubmit(); });\n        disposables.push(styler_1.attachStylerCallback(this.themeService, { widgetShadow: colorRegistry_1.widgetShadow, editorWidgetBackground: colorRegistry_1.editorWidgetBackground, inputBackground: colorRegistry_1.inputBackground, inputForeground: colorRegistry_1.inputForeground, inputBorder: colorRegistry_1.inputBorder, editorBackground: colorRegistry_1.editorBackground, contrastBorder: colorRegistry_1.contrastBorder }, function (colors) {\n            if (_this.feedbackForm) {\n                _this.feedbackForm.style.backgroundColor = colors.editorWidgetBackground ? colors.editorWidgetBackground.toString() : null;\n                _this.feedbackForm.style.boxShadow = colors.widgetShadow ? \"0 0 8px \" + colors.widgetShadow : null;\n            }\n            if (_this.feedbackDescriptionInput) {\n                _this.feedbackDescriptionInput.style.backgroundColor = colors.inputBackground ? colors.inputBackground.toString() : null;\n                _this.feedbackDescriptionInput.style.color = colors.inputForeground ? colors.inputForeground.toString() : null;\n                _this.feedbackDescriptionInput.style.border = \"1px solid \" + (colors.inputBorder || 'transparent');\n            }\n            contactUsContainer.style.backgroundColor = colors.editorBackground ? colors.editorBackground.toString() : null;\n            contactUsContainer.style.border = \"1px solid \" + (colors.contrastBorder || 'transparent');\n        }));\n        return {\n            dispose: function () {\n                _this.feedbackForm = null;\n                _this.feedbackDescriptionInput = null;\n                _this.smileyInput = null;\n                _this.frownyInput = null;\n                lifecycle_1.dispose(disposables);\n            }\n        };\n    };\n    FeedbackDropdown.prototype.getCharCountText = function (charCount) {\n        var remaining = this.maxFeedbackCharacters - charCount;\n        var text = (remaining === 1)\n            ? nls.localize(\"character left\", \"character left\")\n            : nls.localize(\"characters left\", \"characters left\");\n        return \"(\" + remaining + \" \" + text + \")\";\n    };\n    FeedbackDropdown.prototype.updateCharCountText = function () {\n        if (this.feedbackDescriptionInput) {\n            this.remainingCharacterCount.innerText = this.getCharCountText(this.feedbackDescriptionInput.value.length);\n            this.sendButton.enabled = this.feedbackDescriptionInput.value.length > 0;\n        }\n    };\n    FeedbackDropdown.prototype.setSentiment = function (smile) {\n        if (smile) {\n            if (this.smileyInput) {\n                dom.addClass(this.smileyInput, 'checked');\n                this.smileyInput.setAttribute('aria-checked', 'true');\n            }\n            if (this.frownyInput) {\n                dom.removeClass(this.frownyInput, 'checked');\n                this.frownyInput.setAttribute('aria-checked', 'false');\n            }\n        }\n        else {\n            if (this.frownyInput) {\n                dom.addClass(this.frownyInput, 'checked');\n                this.frownyInput.setAttribute('aria-checked', 'true');\n            }\n            if (this.smileyInput) {\n                dom.removeClass(this.smileyInput, 'checked');\n                this.smileyInput.setAttribute('aria-checked', 'false');\n            }\n        }\n        this.sentiment = smile ? 1 : 0;\n        this.maxFeedbackCharacters = this.feedbackDelegate.getCharacterLimit(this.sentiment);\n        this.updateCharCountText();\n        if (this.feedbackDescriptionInput) {\n            this.feedbackDescriptionInput.maxLength = this.maxFeedbackCharacters;\n        }\n    };\n    FeedbackDropdown.prototype.invoke = function (element, disposables, callback) {\n        disposables.push(dom.addDisposableListener(element, 'click', callback));\n        disposables.push(dom.addDisposableListener(element, 'keypress', function (e) {\n            if (e instanceof KeyboardEvent) {\n                var keyboardEvent = e;\n                if (keyboardEvent.keyCode === 13 || keyboardEvent.keyCode === 32) { // Enter or Spacebar\n                    callback();\n                }\n            }\n        }));\n        return element;\n    };\n    FeedbackDropdown.prototype.show = function () {\n        _super.prototype.show.call(this);\n        if (this.options.onFeedbackVisibilityChange) {\n            this.options.onFeedbackVisibilityChange(true);\n        }\n    };\n    FeedbackDropdown.prototype.onHide = function () {\n        if (this.options.onFeedbackVisibilityChange) {\n            this.options.onFeedbackVisibilityChange(false);\n        }\n    };\n    FeedbackDropdown.prototype.hide = function () {\n        if (this.feedbackDescriptionInput) {\n            this.feedback = this.feedbackDescriptionInput.value;\n        }\n        if (this.autoHideTimeout) {\n            clearTimeout(this.autoHideTimeout);\n            this.autoHideTimeout = undefined;\n        }\n        if (this.hideButton && !this.hideButton.checked) {\n            this.configurationService.updateValue(exports.FEEDBACK_VISIBLE_CONFIG, false);\n        }\n        _super.prototype.hide.call(this);\n    };\n    FeedbackDropdown.prototype.onEvent = function (e, activeElement) {\n        if (e instanceof KeyboardEvent) {\n            var keyboardEvent = e;\n            if (keyboardEvent.keyCode === 27) { // Escape\n                this.hide();\n            }\n        }\n    };\n    FeedbackDropdown.prototype.onSubmit = function () {\n        if (!this.feedbackForm || !this.feedbackDescriptionInput || (this.feedbackForm.checkValidity && !this.feedbackForm.checkValidity())) {\n            return;\n        }\n        this.feedbackDelegate.submitFeedback({\n            feedback: this.feedbackDescriptionInput.value,\n            sentiment: this.sentiment\n        });\n        this.hide();\n    };\n    FeedbackDropdown = tslib_1.__decorate([\n        tslib_1.__param(2, commands_1.ICommandService),\n        tslib_1.__param(3, telemetry_1.ITelemetryService),\n        tslib_1.__param(4, integrity_1.IIntegrityService),\n        tslib_1.__param(5, themeService_1.IThemeService),\n        tslib_1.__param(6, configuration_1.IConfigurationService)\n    ], FeedbackDropdown);\n    return FeedbackDropdown;\n}(dropdown_1.Dropdown));\nexports.FeedbackDropdown = FeedbackDropdown;\nthemeService_1.registerThemingParticipant(function (theme, collector) {\n    // Sentiment Buttons\n    var inputActiveOptionBorderColor = theme.getColor(colorRegistry_1.inputActiveOptionBorder);\n    if (inputActiveOptionBorderColor) {\n        collector.addRule(\".monaco-workbench .feedback-form .sentiment.checked { border: 1px solid \" + inputActiveOptionBorderColor + \"; }\");\n    }\n    // Links\n    var linkColor = theme.getColor(colorRegistry_1.buttonBackground) || theme.getColor(colorRegistry_1.contrastBorder);\n    if (linkColor) {\n        collector.addRule(\".monaco-workbench .feedback-form .content .channels a { color: \" + linkColor + \"; }\");\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/feedback/electron-browser/feedback.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/feedback/electron-browser/feedback.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/feedback';\nimport * as nls from 'vs/nls';\nimport { IDisposable, dispose, Disposable } from 'vs/base/common/lifecycle';\nimport { Dropdown } from 'vs/base/browser/ui/dropdown/dropdown';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport product from 'vs/platform/product/node/product';\nimport * as dom from 'vs/base/browser/dom';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IIntegrityService } from 'vs/workbench/services/integrity/common/integrity';\nimport { IThemeService, registerThemingParticipant, ITheme, ICssStyleCollector } from 'vs/platform/theme/common/themeService';\nimport { attachButtonStyler, attachStylerCallback } from 'vs/platform/theme/common/styler';\nimport { editorWidgetBackground, widgetShadow, inputBorder, inputForeground, inputBackground, inputActiveOptionBorder, editorBackground, buttonBackground, contrastBorder, darken } from 'vs/platform/theme/common/colorRegistry';\nimport { IAnchor } from 'vs/base/browser/ui/contextview/contextview';\nimport { Button } from 'vs/base/browser/ui/button/button';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\n\nexport const FEEDBACK_VISIBLE_CONFIG = 'workbench.statusBar.feedback.visible';\n\nexport interface IFeedback {\n\tfeedback: string;\n\tsentiment: number;\n}\n\nexport interface IFeedbackDelegate {\n\tsubmitFeedback(feedback: IFeedback): void;\n\tgetCharacterLimit(sentiment: number): number;\n}\n\nexport interface IFeedbackDropdownOptions {\n\tcontextViewProvider: IContextViewService;\n\tfeedbackService: IFeedbackDelegate;\n\tonFeedbackVisibilityChange?: (visible: boolean) => void;\n}\n\nexport class FeedbackDropdown extends Dropdown {\n\tprivate maxFeedbackCharacters: number;\n\n\tprivate feedback: string = '';\n\tprivate sentiment: number = 1;\n\tprivate autoHideTimeout?: number;\n\n\tprivate readonly feedbackDelegate: IFeedbackDelegate;\n\n\tprivate feedbackForm: HTMLFormElement | null;\n\tprivate feedbackDescriptionInput: HTMLTextAreaElement | null;\n\tprivate smileyInput: HTMLElement | null;\n\tprivate frownyInput: HTMLElement | null;\n\tprivate sendButton: Button;\n\tprivate hideButton: HTMLInputElement;\n\tprivate remainingCharacterCount: HTMLElement;\n\n\tprivate requestFeatureLink: string;\n\n\tprivate isPure: boolean = true;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate options: IFeedbackDropdownOptions,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IIntegrityService private readonly integrityService: IIntegrityService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper(container, {\n\t\t\tcontextViewProvider: options.contextViewProvider,\n\t\t\tlabelRenderer: (container: HTMLElement): IDisposable => {\n\t\t\t\tdom.addClasses(container, 'send-feedback', 'mask-icon');\n\n\t\t\t\treturn Disposable.None;\n\t\t\t}\n\t\t});\n\n\t\tthis.feedbackDelegate = options.feedbackService;\n\t\tthis.maxFeedbackCharacters = this.feedbackDelegate.getCharacterLimit(this.sentiment);\n\t\tthis.requestFeatureLink = product.sendASmile.requestFeatureUrl;\n\n\t\tthis.integrityService.isPure().then(result => {\n\t\t\tif (!result.isPure) {\n\t\t\t\tthis.isPure = false;\n\t\t\t}\n\t\t});\n\n\t\tdom.addClass(this.element, 'send-feedback');\n\t\tthis.element.title = nls.localize('sendFeedback', \"Tweet Feedback\");\n\t}\n\n\tprotected getAnchor(): HTMLElement | IAnchor {\n\t\tconst position = dom.getDomNodePagePosition(this.element);\n\n\t\treturn {\n\t\t\tx: position.left + position.width, // center above the container\n\t\t\ty: position.top - 9, // above status bar\n\t\t\twidth: position.width,\n\t\t\theight: position.height\n\t\t} as IAnchor;\n\t}\n\n\tprotected renderContents(container: HTMLElement): IDisposable {\n\t\tconst disposables: IDisposable[] = [];\n\n\t\tdom.addClass(container, 'monaco-menu-container');\n\n\t\t// Form\n\t\tthis.feedbackForm = dom.append<HTMLFormElement>(container, dom.$('form.feedback-form'));\n\t\tthis.feedbackForm.setAttribute('action', 'javascript:void(0);');\n\n\t\t// Title\n\t\tdom.append(this.feedbackForm, dom.$('h2.title')).textContent = nls.localize(\"label.sendASmile\", \"Tweet us your feedback.\");\n\n\t\t// Close Button (top right)\n\t\tconst closeBtn = dom.append(this.feedbackForm, dom.$('div.cancel'));\n\t\tcloseBtn.tabIndex = 0;\n\t\tcloseBtn.setAttribute('role', 'button');\n\t\tcloseBtn.title = nls.localize('close', \"Close\");\n\n\t\tdisposables.push(dom.addDisposableListener(closeBtn, dom.EventType.MOUSE_OVER, () => {\n\t\t\tconst theme = this.themeService.getTheme();\n\t\t\tlet darkenFactor: number | undefined;\n\t\t\tswitch (theme.type) {\n\t\t\t\tcase 'light':\n\t\t\t\t\tdarkenFactor = 0.1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dark':\n\t\t\t\t\tdarkenFactor = 0.2;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (darkenFactor) {\n\t\t\t\tconst backgroundBaseColor = theme.getColor(editorWidgetBackground);\n\t\t\t\tif (backgroundBaseColor) {\n\t\t\t\t\tconst backgroundColor = darken(backgroundBaseColor, darkenFactor)(theme);\n\t\t\t\t\tif (backgroundColor) {\n\t\t\t\t\t\tcloseBtn.style.backgroundColor = backgroundColor.toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.push(dom.addDisposableListener(closeBtn, dom.EventType.MOUSE_OUT, () => {\n\t\t\tcloseBtn.style.backgroundColor = null;\n\t\t}));\n\n\t\tthis.invoke(closeBtn, disposables, () => this.hide());\n\n\t\t// Content\n\t\tconst content = dom.append(this.feedbackForm, dom.$('div.content'));\n\n\t\t// Sentiment Buttons\n\t\tconst sentimentContainer = dom.append(content, dom.$('div'));\n\n\t\tif (!this.isPure) {\n\t\t\tdom.append(sentimentContainer, dom.$('span')).textContent = nls.localize(\"patchedVersion1\", \"Your installation is corrupt.\");\n\t\t\tsentimentContainer.appendChild(document.createElement('br'));\n\t\t\tdom.append(sentimentContainer, dom.$('span')).textContent = nls.localize(\"patchedVersion2\", \"Please specify this if you submit a bug.\");\n\t\t\tsentimentContainer.appendChild(document.createElement('br'));\n\t\t}\n\n\t\tdom.append(sentimentContainer, dom.$('span')).textContent = nls.localize(\"sentiment\", \"How was your experience?\");\n\n\t\tconst feedbackSentiment = dom.append(sentimentContainer, dom.$('div.feedback-sentiment'));\n\n\t\t// Sentiment: Smiley\n\t\tthis.smileyInput = dom.append(feedbackSentiment, dom.$('div.sentiment'));\n\t\tdom.addClass(this.smileyInput, 'smile');\n\t\tthis.smileyInput.setAttribute('aria-checked', 'false');\n\t\tthis.smileyInput.setAttribute('aria-label', nls.localize('smileCaption', \"Happy Feedback Sentiment\"));\n\t\tthis.smileyInput.setAttribute('role', 'checkbox');\n\t\tthis.smileyInput.title = nls.localize('smileCaption', \"Happy Feedback Sentiment\");\n\t\tthis.smileyInput.tabIndex = 0;\n\n\t\tthis.invoke(this.smileyInput, disposables, () => this.setSentiment(true));\n\n\t\t// Sentiment: Frowny\n\t\tthis.frownyInput = dom.append(feedbackSentiment, dom.$('div.sentiment'));\n\t\tdom.addClass(this.frownyInput, 'frown');\n\t\tthis.frownyInput.setAttribute('aria-checked', 'false');\n\t\tthis.frownyInput.setAttribute('aria-label', nls.localize('frownCaption', \"Sad Feedback Sentiment\"));\n\t\tthis.frownyInput.setAttribute('role', 'checkbox');\n\t\tthis.frownyInput.title = nls.localize('frownCaption', \"Sad Feedback Sentiment\");\n\t\tthis.frownyInput.tabIndex = 0;\n\n\t\tthis.invoke(this.frownyInput, disposables, () => this.setSentiment(false));\n\n\t\tif (this.sentiment === 1) {\n\t\t\tdom.addClass(this.smileyInput, 'checked');\n\t\t\tthis.smileyInput.setAttribute('aria-checked', 'true');\n\t\t} else {\n\t\t\tdom.addClass(this.frownyInput, 'checked');\n\t\t\tthis.frownyInput.setAttribute('aria-checked', 'true');\n\t\t}\n\n\t\t// Contact Us Box\n\t\tconst contactUsContainer = dom.append(content, dom.$('div.contactus'));\n\n\t\tdom.append(contactUsContainer, dom.$('span')).textContent = nls.localize(\"other ways to contact us\", \"Other ways to contact us\");\n\n\t\tconst channelsContainer = dom.append(contactUsContainer, dom.$('div.channels'));\n\n\t\t// Contact: Submit a Bug\n\t\tconst submitBugLinkContainer = dom.append(channelsContainer, dom.$('div'));\n\n\t\tconst submitBugLink = dom.append(submitBugLinkContainer, dom.$('a'));\n\t\tsubmitBugLink.setAttribute('target', '_blank');\n\t\tsubmitBugLink.setAttribute('href', '#');\n\t\tsubmitBugLink.textContent = nls.localize(\"submit a bug\", \"Submit a bug\");\n\t\tsubmitBugLink.tabIndex = 0;\n\n\t\tdisposables.push(dom.addDisposableListener(submitBugLink, 'click', e => {\n\t\t\tdom.EventHelper.stop(e);\n\t\t\tconst actionId = 'workbench.action.openIssueReporter';\n\t\t\tthis.commandService.executeCommand(actionId);\n\t\t\tthis.hide();\n\n\t\t\t/* __GDPR__\n\t\t\t\t\"workbenchActionExecuted\" : {\n\t\t\t\t\t\"id\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\t\"from\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.telemetryService.publicLog('workbenchActionExecuted', { id: actionId, from: 'feedback' });\n\t\t}));\n\n\t\t// Contact: Request a Feature\n\t\tif (!!this.requestFeatureLink) {\n\t\t\tconst requestFeatureLinkContainer = dom.append(channelsContainer, dom.$('div'));\n\n\t\t\tconst requestFeatureLink = dom.append(requestFeatureLinkContainer, dom.$('a'));\n\t\t\trequestFeatureLink.setAttribute('target', '_blank');\n\t\t\trequestFeatureLink.setAttribute('href', this.requestFeatureLink);\n\t\t\trequestFeatureLink.textContent = nls.localize(\"request a missing feature\", \"Request a missing feature\");\n\t\t\trequestFeatureLink.tabIndex = 0;\n\n\t\t\tdisposables.push(dom.addDisposableListener(requestFeatureLink, 'click', e => this.hide()));\n\t\t}\n\n\t\t// Remaining Characters\n\t\tconst remainingCharacterCountContainer = dom.append(this.feedbackForm, dom.$('h3'));\n\t\tremainingCharacterCountContainer.textContent = nls.localize(\"tell us why\", \"Tell us why?\");\n\n\t\tthis.remainingCharacterCount = dom.append(remainingCharacterCountContainer, dom.$('span.char-counter'));\n\t\tthis.remainingCharacterCount.textContent = this.getCharCountText(0);\n\n\t\t// Feedback Input Form\n\t\tthis.feedbackDescriptionInput = dom.append<HTMLTextAreaElement>(this.feedbackForm, dom.$('textarea.feedback-description'));\n\t\tthis.feedbackDescriptionInput.rows = 3;\n\t\tthis.feedbackDescriptionInput.maxLength = this.maxFeedbackCharacters;\n\t\tthis.feedbackDescriptionInput.textContent = this.feedback;\n\t\tthis.feedbackDescriptionInput.required = true;\n\t\tthis.feedbackDescriptionInput.setAttribute('aria-label', nls.localize(\"feedbackTextInput\", \"Tell us your feedback\"));\n\t\tthis.feedbackDescriptionInput.focus();\n\n\t\tdisposables.push(dom.addDisposableListener(this.feedbackDescriptionInput, 'keyup', () => this.updateCharCountText()));\n\n\t\t// Feedback Input Form Buttons Container\n\t\tconst buttonsContainer = dom.append(this.feedbackForm, dom.$('div.form-buttons'));\n\n\t\t// Checkbox: Hide Feedback Smiley\n\t\tconst hideButtonContainer = dom.append(buttonsContainer, dom.$('div.hide-button-container'));\n\n\t\tthis.hideButton = dom.append(hideButtonContainer, dom.$('input.hide-button'));\n\t\tthis.hideButton.type = 'checkbox';\n\t\tthis.hideButton.checked = true;\n\t\tthis.hideButton.id = 'hide-button';\n\n\t\tconst hideButtonLabel = dom.append(hideButtonContainer, dom.$('label'));\n\t\thideButtonLabel.setAttribute('for', 'hide-button');\n\t\thideButtonLabel.textContent = nls.localize('showFeedback', \"Show Feedback Smiley in Status Bar\");\n\n\t\t// Button: Send Feedback\n\t\tthis.sendButton = new Button(buttonsContainer);\n\t\tthis.sendButton.enabled = false;\n\t\tthis.sendButton.label = nls.localize('tweet', \"Tweet\");\n\t\tdom.addClass(this.sendButton.element, 'send');\n\t\tthis.sendButton.element.title = nls.localize('tweetFeedback', \"Tweet Feedback\");\n\t\tdisposables.push(attachButtonStyler(this.sendButton, this.themeService));\n\n\t\tthis.sendButton.onDidClick(() => this.onSubmit());\n\n\t\tdisposables.push(attachStylerCallback(this.themeService, { widgetShadow, editorWidgetBackground, inputBackground, inputForeground, inputBorder, editorBackground, contrastBorder }, colors => {\n\t\t\tif (this.feedbackForm) {\n\t\t\t\tthis.feedbackForm.style.backgroundColor = colors.editorWidgetBackground ? colors.editorWidgetBackground.toString() : null;\n\t\t\t\tthis.feedbackForm.style.boxShadow = colors.widgetShadow ? `0 0 8px ${colors.widgetShadow}` : null;\n\t\t\t}\n\t\t\tif (this.feedbackDescriptionInput) {\n\t\t\t\tthis.feedbackDescriptionInput.style.backgroundColor = colors.inputBackground ? colors.inputBackground.toString() : null;\n\t\t\t\tthis.feedbackDescriptionInput.style.color = colors.inputForeground ? colors.inputForeground.toString() : null;\n\t\t\t\tthis.feedbackDescriptionInput.style.border = `1px solid ${colors.inputBorder || 'transparent'}`;\n\t\t\t}\n\n\t\t\tcontactUsContainer.style.backgroundColor = colors.editorBackground ? colors.editorBackground.toString() : null;\n\t\t\tcontactUsContainer.style.border = `1px solid ${colors.contrastBorder || 'transparent'}`;\n\t\t}));\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.feedbackForm = null;\n\t\t\t\tthis.feedbackDescriptionInput = null;\n\t\t\t\tthis.smileyInput = null;\n\t\t\t\tthis.frownyInput = null;\n\n\t\t\t\tdispose(disposables);\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate getCharCountText(charCount: number): string {\n\t\tconst remaining = this.maxFeedbackCharacters - charCount;\n\t\tconst text = (remaining === 1)\n\t\t\t? nls.localize(\"character left\", \"character left\")\n\t\t\t: nls.localize(\"characters left\", \"characters left\");\n\n\t\treturn `(${remaining} ${text})`;\n\t}\n\n\tprivate updateCharCountText(): void {\n\t\tif (this.feedbackDescriptionInput) {\n\t\t\tthis.remainingCharacterCount.innerText = this.getCharCountText(this.feedbackDescriptionInput.value.length);\n\t\t\tthis.sendButton.enabled = this.feedbackDescriptionInput.value.length > 0;\n\t\t}\n\t}\n\n\tprivate setSentiment(smile: boolean): void {\n\t\tif (smile) {\n\t\t\tif (this.smileyInput) {\n\t\t\t\tdom.addClass(this.smileyInput, 'checked');\n\t\t\t\tthis.smileyInput.setAttribute('aria-checked', 'true');\n\t\t\t}\n\t\t\tif (this.frownyInput) {\n\t\t\t\tdom.removeClass(this.frownyInput, 'checked');\n\t\t\t\tthis.frownyInput.setAttribute('aria-checked', 'false');\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.frownyInput) {\n\t\t\t\tdom.addClass(this.frownyInput, 'checked');\n\t\t\t\tthis.frownyInput.setAttribute('aria-checked', 'true');\n\t\t\t}\n\t\t\tif (this.smileyInput) {\n\t\t\t\tdom.removeClass(this.smileyInput, 'checked');\n\t\t\t\tthis.smileyInput.setAttribute('aria-checked', 'false');\n\t\t\t}\n\t\t}\n\n\t\tthis.sentiment = smile ? 1 : 0;\n\t\tthis.maxFeedbackCharacters = this.feedbackDelegate.getCharacterLimit(this.sentiment);\n\t\tthis.updateCharCountText();\n\t\tif (this.feedbackDescriptionInput) {\n\t\t\tthis.feedbackDescriptionInput.maxLength = this.maxFeedbackCharacters;\n\t\t}\n\t}\n\n\tprivate invoke(element: HTMLElement, disposables: IDisposable[], callback: () => void): HTMLElement {\n\t\tdisposables.push(dom.addDisposableListener(element, 'click', callback));\n\n\t\tdisposables.push(dom.addDisposableListener(element, 'keypress', e => {\n\t\t\tif (e instanceof KeyboardEvent) {\n\t\t\t\tconst keyboardEvent = <KeyboardEvent>e;\n\t\t\t\tif (keyboardEvent.keyCode === 13 || keyboardEvent.keyCode === 32) { // Enter or Spacebar\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\treturn element;\n\t}\n\n\tshow(): void {\n\t\tsuper.show();\n\n\t\tif (this.options.onFeedbackVisibilityChange) {\n\t\t\tthis.options.onFeedbackVisibilityChange(true);\n\t\t}\n\t}\n\n\tprotected onHide(): void {\n\t\tif (this.options.onFeedbackVisibilityChange) {\n\t\t\tthis.options.onFeedbackVisibilityChange(false);\n\t\t}\n\t}\n\n\thide(): void {\n\t\tif (this.feedbackDescriptionInput) {\n\t\t\tthis.feedback = this.feedbackDescriptionInput.value;\n\t\t}\n\n\t\tif (this.autoHideTimeout) {\n\t\t\tclearTimeout(this.autoHideTimeout);\n\t\t\tthis.autoHideTimeout = undefined;\n\t\t}\n\n\t\tif (this.hideButton && !this.hideButton.checked) {\n\t\t\tthis.configurationService.updateValue(FEEDBACK_VISIBLE_CONFIG, false);\n\t\t}\n\n\t\tsuper.hide();\n\t}\n\n\tonEvent(e: Event, activeElement: HTMLElement): void {\n\t\tif (e instanceof KeyboardEvent) {\n\t\t\tconst keyboardEvent = <KeyboardEvent>e;\n\t\t\tif (keyboardEvent.keyCode === 27) { // Escape\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSubmit(): void {\n\t\tif (!this.feedbackForm || !this.feedbackDescriptionInput || (this.feedbackForm.checkValidity && !this.feedbackForm.checkValidity())) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.feedbackDelegate.submitFeedback({\n\t\t\tfeedback: this.feedbackDescriptionInput.value,\n\t\t\tsentiment: this.sentiment\n\t\t});\n\n\t\tthis.hide();\n\t}\n}\n\nregisterThemingParticipant((theme: ITheme, collector: ICssStyleCollector) => {\n\n\t// Sentiment Buttons\n\tconst inputActiveOptionBorderColor = theme.getColor(inputActiveOptionBorder);\n\tif (inputActiveOptionBorderColor) {\n\t\tcollector.addRule(`.monaco-workbench .feedback-form .sentiment.checked { border: 1px solid ${inputActiveOptionBorderColor}; }`);\n\t}\n\n\t// Links\n\tconst linkColor = theme.getColor(buttonBackground) || theme.getColor(contrastBorder);\n\tif (linkColor) {\n\t\tcollector.addRule(`.monaco-workbench .feedback-form .content .channels a { color: ${linkColor}; }`);\n\t}\n});"]}]}