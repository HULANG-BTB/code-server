{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/menu/menu.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/menu/menu.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./menu\");\nvar nls = require(\"vs/nls\");\nvar strings = require(\"vs/base/common/strings\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar dom_1 = require(\"vs/base/browser/dom\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar async_1 = require(\"vs/base/common/async\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar scrollableElement_1 = require(\"vs/base/browser/ui/scrollbar/scrollableElement\");\nvar scrollable_1 = require(\"vs/base/common/scrollable\");\nvar event_1 = require(\"vs/base/common/event\");\nvar platform_1 = require(\"vs/base/common/platform\");\nfunction createMenuMnemonicRegExp() {\n    try {\n        return new RegExp('\\\\(&([^\\\\s&])\\\\)|(?<!&)&([^\\\\s&])');\n    }\n    catch (err) {\n        return new RegExp('\\uFFFF'); // never match please\n    }\n}\nexports.MENU_MNEMONIC_REGEX = createMenuMnemonicRegExp();\nfunction createMenuEscapedMnemonicRegExp() {\n    try {\n        return new RegExp('(?<!&amp;)(?:&amp;)([^\\\\s&])');\n    }\n    catch (err) {\n        return new RegExp('\\uFFFF'); // never match please\n    }\n}\nexports.MENU_ESCAPED_MNEMONIC_REGEX = createMenuEscapedMnemonicRegExp();\nvar SubmenuAction = /** @class */ (function (_super) {\n    tslib_1.__extends(SubmenuAction, _super);\n    function SubmenuAction(label, entries, cssClass) {\n        var _this = _super.call(this, !!cssClass ? cssClass : 'submenu', label, '', true) || this;\n        _this.entries = entries;\n        return _this;\n    }\n    return SubmenuAction;\n}(actions_1.Action));\nexports.SubmenuAction = SubmenuAction;\nvar Menu = /** @class */ (function (_super) {\n    tslib_1.__extends(Menu, _super);\n    function Menu(container, actions, options) {\n        if (options === void 0) { options = {}; }\n        var _this = this;\n        dom_1.addClass(container, 'monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        var menuElement = document.createElement('div');\n        dom_1.addClass(menuElement, 'monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        _this = _super.call(this, menuElement, {\n            orientation: actionbar_1.ActionsOrientation.VERTICAL,\n            actionItemProvider: function (action) { return _this.doGetActionItem(action, options, parentData); },\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            triggerKeys: { keys: [keyCodes_1.KeyCode.Enter], keyDown: true }\n        }) || this;\n        _this.menuElement = menuElement;\n        _this._onScroll = _this._register(new event_1.Emitter());\n        _this.actionsList.setAttribute('role', 'menu');\n        _this.actionsList.tabIndex = 0;\n        _this.menuDisposables = [];\n        if (options.enableMnemonics) {\n            _this.menuDisposables.push(dom_1.addDisposableListener(menuElement, dom_1.EventType.KEY_DOWN, function (e) {\n                var key = e.key.toLocaleLowerCase();\n                if (_this.mnemonics.has(key)) {\n                    dom_1.EventHelper.stop(e, true);\n                    var actions_2 = _this.mnemonics.get(key);\n                    if (actions_2.length === 1) {\n                        if (actions_2[0] instanceof SubmenuActionItem) {\n                            _this.focusItemByElement(actions_2[0].container);\n                        }\n                        actions_2[0].onClick(e);\n                    }\n                    if (actions_2.length > 1) {\n                        var action = actions_2.shift();\n                        if (action) {\n                            _this.focusItemByElement(action.container);\n                            actions_2.push(action);\n                        }\n                        _this.mnemonics.set(key, actions_2);\n                    }\n                }\n            }));\n        }\n        if (platform_1.isLinux) {\n            _this._register(dom_1.addDisposableListener(menuElement, dom_1.EventType.KEY_DOWN, function (e) {\n                var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n                if (event.equals(keyCodes_1.KeyCode.Home) || event.equals(keyCodes_1.KeyCode.PageUp)) {\n                    _this.focusedItem = _this.items.length - 1;\n                    _this.focusNext();\n                    dom_1.EventHelper.stop(e, true);\n                }\n                else if (event.equals(keyCodes_1.KeyCode.End) || event.equals(keyCodes_1.KeyCode.PageDown)) {\n                    _this.focusedItem = 0;\n                    _this.focusPrevious();\n                    dom_1.EventHelper.stop(e, true);\n                }\n            }));\n        }\n        _this._register(dom_1.addDisposableListener(_this.domNode, dom_1.EventType.MOUSE_OUT, function (e) {\n            var relatedTarget = e.relatedTarget;\n            if (!dom_1.isAncestor(relatedTarget, _this.domNode)) {\n                _this.focusedItem = undefined;\n                _this.scrollTopHold = _this.menuElement.scrollTop;\n                _this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        _this._register(dom_1.addDisposableListener(_this.domNode, dom_1.EventType.MOUSE_UP, function (e) {\n            // Absorb clicks in menu dead space https://github.com/Microsoft/vscode/issues/63575\n            dom_1.EventHelper.stop(e, true);\n        }));\n        _this._register(dom_1.addDisposableListener(_this.actionsList, dom_1.EventType.MOUSE_OVER, function (e) {\n            var target = e.target;\n            if (!target || !dom_1.isAncestor(target, _this.actionsList) || target === _this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== _this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (dom_1.hasClass(target, 'action-item')) {\n                var lastFocusedItem = _this.focusedItem;\n                _this.scrollTopHold = _this.menuElement.scrollTop;\n                _this.setFocusedItem(target);\n                if (lastFocusedItem !== _this.focusedItem) {\n                    _this.updateFocus();\n                }\n            }\n        }));\n        var parentData = {\n            parent: _this\n        };\n        _this.mnemonics = new Map();\n        _this.push(actions, { icon: true, label: true, isMenu: true });\n        // Scroll Logic\n        _this.scrollableElement = _this._register(new scrollableElement_1.DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: scrollable_1.ScrollbarVisibility.Hidden,\n            vertical: scrollable_1.ScrollbarVisibility.Visible,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        var scrollElement = _this.scrollableElement.getDomNode();\n        scrollElement.style.position = null;\n        menuElement.style.maxHeight = Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 30) + \"px\";\n        _this.scrollableElement.onScroll(function () {\n            _this._onScroll.fire();\n        }, _this, _this.menuDisposables);\n        _this._register(dom_1.addDisposableListener(_this.menuElement, dom_1.EventType.SCROLL, function (e) {\n            if (_this.scrollTopHold !== undefined) {\n                _this.menuElement.scrollTop = _this.scrollTopHold;\n                _this.scrollTopHold = undefined;\n            }\n            _this.scrollableElement.scanDomNode();\n        }));\n        container.appendChild(_this.scrollableElement.getDomNode());\n        _this.scrollableElement.scanDomNode();\n        _this.items.filter(function (item) { return !(item instanceof MenuSeparatorActionItem); }).forEach(function (item, index, array) {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n        return _this;\n    }\n    Menu.prototype.style = function (style) {\n        var container = this.getContainer();\n        var fgColor = style.foregroundColor ? \"\" + style.foregroundColor : null;\n        var bgColor = style.backgroundColor ? \"\" + style.backgroundColor : null;\n        var border = style.borderColor ? \"2px solid \" + style.borderColor : null;\n        var shadow = style.shadowColor ? \"0 2px 4px \" + style.shadowColor : null;\n        container.style.border = border;\n        this.domNode.style.color = fgColor;\n        this.domNode.style.backgroundColor = bgColor;\n        container.style.boxShadow = shadow;\n        if (this.items) {\n            this.items.forEach(function (item) {\n                if (item instanceof MenuActionItem || item instanceof MenuSeparatorActionItem) {\n                    item.style(style);\n                }\n            });\n        }\n    };\n    Menu.prototype.getContainer = function () {\n        return this.scrollableElement.getDomNode();\n    };\n    Object.defineProperty(Menu.prototype, \"onScroll\", {\n        get: function () {\n            return this._onScroll.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Menu.prototype, \"scrollOffset\", {\n        get: function () {\n            return this.menuElement.scrollTop;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Menu.prototype.trigger = function (index) {\n        if (index <= this.items.length && index >= 0) {\n            var item = this.items[index];\n            if (item instanceof SubmenuActionItem) {\n                _super.prototype.focus.call(this, index);\n                item.open(true);\n            }\n            else if (item instanceof MenuActionItem) {\n                _super.prototype.run.call(this, item._action, item._context);\n            }\n            else {\n                return;\n            }\n        }\n    };\n    Menu.prototype.focusItemByElement = function (element) {\n        var lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    };\n    Menu.prototype.setFocusedItem = function (element) {\n        for (var i = 0; i < this.actionsList.children.length; i++) {\n            var elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    };\n    Menu.prototype.doGetActionItem = function (action, options, parentData) {\n        if (action instanceof actionbar_1.Separator) {\n            return new MenuSeparatorActionItem(options.context, action, { icon: true });\n        }\n        else if (action instanceof SubmenuAction) {\n            var menuActionItem = new SubmenuActionItem(action, action.entries, parentData, options);\n            if (options.enableMnemonics) {\n                var mnemonic = menuActionItem.getMnemonic();\n                if (mnemonic && menuActionItem.isEnabled()) {\n                    var actionItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionItems.push(menuActionItem);\n                    this.mnemonics.set(mnemonic, actionItems);\n                }\n            }\n            return menuActionItem;\n        }\n        else {\n            var menuItemOptions = { enableMnemonics: options.enableMnemonics };\n            if (options.getKeyBinding) {\n                var keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    var keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            var menuActionItem = new MenuActionItem(options.context, action, menuItemOptions);\n            if (options.enableMnemonics) {\n                var mnemonic = menuActionItem.getMnemonic();\n                if (mnemonic && menuActionItem.isEnabled()) {\n                    var actionItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionItems.push(menuActionItem);\n                    this.mnemonics.set(mnemonic, actionItems);\n                }\n            }\n            return menuActionItem;\n        }\n    };\n    return Menu;\n}(actionbar_1.ActionBar));\nexports.Menu = Menu;\nvar MenuActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(MenuActionItem, _super);\n    function MenuActionItem(ctx, action, options) {\n        if (options === void 0) { options = {}; }\n        var _this = this;\n        options.isMenu = true;\n        _this = _super.call(this, action, action, options) || this;\n        _this.options = options;\n        _this.options.icon = options.icon !== undefined ? options.icon : false;\n        _this.options.label = options.label !== undefined ? options.label : true;\n        _this.cssClass = '';\n        // Set mnemonic\n        if (_this.options.label && options.enableMnemonics) {\n            var label = _this.getAction().label;\n            if (label) {\n                var matches = exports.MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    _this.mnemonic = (!!matches[1] ? matches[1] : matches[2]).toLocaleLowerCase();\n                }\n            }\n        }\n        return _this;\n    }\n    MenuActionItem.prototype.render = function (container) {\n        var _this = this;\n        _super.prototype.render.call(this, container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = dom_1.append(this.element, dom_1.$('a.action-menu-item'));\n        if (this._action.id === actionbar_1.Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', \"\" + this.mnemonic);\n            }\n        }\n        this.check = dom_1.append(this.item, dom_1.$('span.menu-item-check'));\n        this.check.setAttribute('role', 'none');\n        this.label = dom_1.append(this.item, dom_1.$('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            dom_1.append(this.item, dom_1.$('span.keybinding')).textContent = this.options.keybinding;\n        }\n        this._register(dom_1.addDisposableListener(this.element, dom_1.EventType.MOUSE_UP, function (e) {\n            dom_1.EventHelper.stop(e, true);\n            _this.onClick(e);\n        }));\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    };\n    MenuActionItem.prototype.blur = function () {\n        _super.prototype.blur.call(this);\n        this.applyStyle();\n    };\n    MenuActionItem.prototype.focus = function () {\n        _super.prototype.focus.call(this);\n        this.item.focus();\n        this.applyStyle();\n    };\n    MenuActionItem.prototype.updatePositionInSet = function (pos, setSize) {\n        this.item.setAttribute('aria-posinset', \"\" + pos);\n        this.item.setAttribute('aria-setsize', \"\" + setSize);\n    };\n    MenuActionItem.prototype.updateLabel = function () {\n        if (this.options.label) {\n            var label = this.getAction().label;\n            if (label) {\n                var cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                var matches = exports.MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label).replace(exports.MENU_ESCAPED_MNEMONIC_REGEX, '<u aria-hidden=\"true\">$1</u>');\n                    label = label.replace(/&amp;&amp;/g, '&amp;');\n                    this.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[2]).toLocaleLowerCase());\n                }\n                else {\n                    label = label.replace(/&&/g, '&');\n                }\n            }\n            this.label.innerHTML = label.trim();\n        }\n    };\n    MenuActionItem.prototype.updateTooltip = function () {\n        var title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\n            title = this.getAction().label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        if (title) {\n            this.item.title = title;\n        }\n    };\n    MenuActionItem.prototype.updateClass = function () {\n        if (this.cssClass) {\n            dom_1.removeClasses(this.item, this.cssClass);\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getAction().class || '';\n            dom_1.addClass(this.label, 'icon');\n            if (this.cssClass) {\n                dom_1.addClasses(this.label, this.cssClass);\n            }\n            this.updateEnabled();\n        }\n        else {\n            dom_1.removeClass(this.label, 'icon');\n        }\n    };\n    MenuActionItem.prototype.updateEnabled = function () {\n        if (this.getAction().enabled) {\n            if (this.element) {\n                dom_1.removeClass(this.element, 'disabled');\n            }\n            dom_1.removeClass(this.item, 'disabled');\n            this.item.tabIndex = 0;\n        }\n        else {\n            if (this.element) {\n                dom_1.addClass(this.element, 'disabled');\n            }\n            dom_1.addClass(this.item, 'disabled');\n            dom_1.removeTabIndexAndUpdateFocus(this.item);\n        }\n    };\n    MenuActionItem.prototype.updateChecked = function () {\n        if (this.getAction().checked) {\n            dom_1.addClass(this.item, 'checked');\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', 'true');\n        }\n        else {\n            dom_1.removeClass(this.item, 'checked');\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', 'false');\n        }\n    };\n    MenuActionItem.prototype.getMnemonic = function () {\n        return this.mnemonic;\n    };\n    MenuActionItem.prototype.applyStyle = function () {\n        if (!this.menuStyle) {\n            return;\n        }\n        var isSelected = this.element && dom_1.hasClass(this.element, 'focused');\n        var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        var bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : this.menuStyle.backgroundColor;\n        var border = isSelected && this.menuStyle.selectionBorderColor ? \"1px solid \" + this.menuStyle.selectionBorderColor : null;\n        this.item.style.color = fgColor ? \"\" + fgColor : null;\n        this.check.style.backgroundColor = fgColor ? \"\" + fgColor : null;\n        this.item.style.backgroundColor = bgColor ? \"\" + bgColor : null;\n        this.container.style.border = border;\n    };\n    MenuActionItem.prototype.style = function (style) {\n        this.menuStyle = style;\n        this.applyStyle();\n    };\n    return MenuActionItem;\n}(actionbar_1.BaseActionItem));\nvar SubmenuActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(SubmenuActionItem, _super);\n    function SubmenuActionItem(action, submenuActions, parentData, submenuOptions) {\n        var _this = _super.call(this, action, action, submenuOptions) || this;\n        _this.submenuActions = submenuActions;\n        _this.parentData = parentData;\n        _this.submenuOptions = submenuOptions;\n        _this.submenuDisposables = [];\n        _this.showScheduler = new async_1.RunOnceScheduler(function () {\n            if (_this.mouseOver) {\n                _this.cleanupExistingSubmenu(false);\n                _this.createSubmenu(false);\n            }\n        }, 250);\n        _this.hideScheduler = new async_1.RunOnceScheduler(function () {\n            if (_this.element && (!dom_1.isAncestor(document.activeElement, _this.element) && _this.parentData.submenu === _this.mysubmenu)) {\n                _this.parentData.parent.focus(false);\n                _this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n        return _this;\n    }\n    SubmenuActionItem.prototype.render = function (container) {\n        var _this = this;\n        _super.prototype.render.call(this, container);\n        if (!this.element) {\n            return;\n        }\n        dom_1.addClass(this.item, 'monaco-submenu-item');\n        this.item.setAttribute('aria-haspopup', 'true');\n        this.submenuIndicator = dom_1.append(this.item, dom_1.$('span.submenu-indicator'));\n        this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        this._register(dom_1.addDisposableListener(this.element, dom_1.EventType.KEY_UP, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            if (event.equals(keyCodes_1.KeyCode.RightArrow) || event.equals(keyCodes_1.KeyCode.Enter)) {\n                dom_1.EventHelper.stop(e, true);\n                _this.createSubmenu(true);\n            }\n        }));\n        this._register(dom_1.addDisposableListener(this.element, dom_1.EventType.KEY_DOWN, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            if (event.equals(keyCodes_1.KeyCode.RightArrow) || event.equals(keyCodes_1.KeyCode.Enter)) {\n                dom_1.EventHelper.stop(e, true);\n            }\n        }));\n        this._register(dom_1.addDisposableListener(this.element, dom_1.EventType.MOUSE_OVER, function (e) {\n            if (!_this.mouseOver) {\n                _this.mouseOver = true;\n                _this.showScheduler.schedule();\n            }\n        }));\n        this._register(dom_1.addDisposableListener(this.element, dom_1.EventType.MOUSE_LEAVE, function (e) {\n            _this.mouseOver = false;\n        }));\n        this._register(dom_1.addDisposableListener(this.element, dom_1.EventType.FOCUS_OUT, function (e) {\n            if (_this.element && !dom_1.isAncestor(document.activeElement, _this.element)) {\n                _this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(function () {\n            _this.parentData.parent.focus(false);\n            _this.cleanupExistingSubmenu(false);\n        }));\n    };\n    SubmenuActionItem.prototype.open = function (selectFirst) {\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(selectFirst);\n    };\n    SubmenuActionItem.prototype.onClick = function (e) {\n        // stop clicking from trying to run an action\n        dom_1.EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(false);\n    };\n    SubmenuActionItem.prototype.cleanupExistingSubmenu = function (force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            this.parentData.submenu.dispose();\n            this.parentData.submenu = undefined;\n            if (this.submenuContainer) {\n                this.submenuDisposables = lifecycle_1.dispose(this.submenuDisposables);\n                this.submenuContainer = undefined;\n            }\n        }\n    };\n    SubmenuActionItem.prototype.createSubmenu = function (selectFirstItem) {\n        var _this = this;\n        if (selectFirstItem === void 0) { selectFirstItem = true; }\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.submenuContainer = dom_1.append(this.element, dom_1.$('div.monaco-submenu'));\n            dom_1.addClasses(this.submenuContainer, 'menubar-menu-items-holder', 'context-view');\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions, this.submenuOptions);\n            if (this.menuStyle) {\n                this.parentData.submenu.style(this.menuStyle);\n            }\n            var boundingRect = this.element.getBoundingClientRect();\n            var childBoundingRect = this.submenuContainer.getBoundingClientRect();\n            var computedStyles = getComputedStyle(this.parentData.parent.domNode);\n            var paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            if (window.innerWidth <= boundingRect.right + childBoundingRect.width) {\n                this.submenuContainer.style.left = '10px';\n                this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset + boundingRect.height + \"px\";\n            }\n            else {\n                this.submenuContainer.style.left = this.element.offsetWidth + \"px\";\n                this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\n            }\n            this.submenuDisposables.push(dom_1.addDisposableListener(this.submenuContainer, dom_1.EventType.KEY_UP, function (e) {\n                var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n                if (event.equals(keyCodes_1.KeyCode.LeftArrow)) {\n                    dom_1.EventHelper.stop(e, true);\n                    _this.parentData.parent.focus();\n                    if (_this.parentData.submenu) {\n                        _this.parentData.submenu.dispose();\n                        _this.parentData.submenu = undefined;\n                    }\n                    _this.submenuDisposables = lifecycle_1.dispose(_this.submenuDisposables);\n                    _this.submenuContainer = undefined;\n                }\n            }));\n            this.submenuDisposables.push(dom_1.addDisposableListener(this.submenuContainer, dom_1.EventType.KEY_DOWN, function (e) {\n                var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n                if (event.equals(keyCodes_1.KeyCode.LeftArrow)) {\n                    dom_1.EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.push(this.parentData.submenu.onDidCancel(function () {\n                _this.parentData.parent.focus();\n                if (_this.parentData.submenu) {\n                    _this.parentData.submenu.dispose();\n                    _this.parentData.submenu = undefined;\n                }\n                _this.submenuDisposables = lifecycle_1.dispose(_this.submenuDisposables);\n                _this.submenuContainer = undefined;\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    };\n    SubmenuActionItem.prototype.applyStyle = function () {\n        _super.prototype.applyStyle.call(this);\n        if (!this.menuStyle) {\n            return;\n        }\n        var isSelected = this.element && dom_1.hasClass(this.element, 'focused');\n        var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        this.submenuIndicator.style.backgroundColor = fgColor ? \"\" + fgColor : null;\n        if (this.parentData.submenu) {\n            this.parentData.submenu.style(this.menuStyle);\n        }\n    };\n    SubmenuActionItem.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuDisposables = lifecycle_1.dispose(this.submenuDisposables);\n            this.submenuContainer = undefined;\n        }\n    };\n    return SubmenuActionItem;\n}(MenuActionItem));\nvar MenuSeparatorActionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(MenuSeparatorActionItem, _super);\n    function MenuSeparatorActionItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MenuSeparatorActionItem.prototype.style = function (style) {\n        this.label.style.borderBottomColor = style.separatorColor ? \"\" + style.separatorColor : null;\n    };\n    return MenuSeparatorActionItem;\n}(actionbar_1.ActionItem));\nfunction cleanMnemonic(label) {\n    var regex = exports.MENU_MNEMONIC_REGEX;\n    var matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    var mnemonicInText = matches[0].charAt(0) === '&';\n    return label.replace(regex, mnemonicInText ? '$2' : '').trim();\n}\nexports.cleanMnemonic = cleanMnemonic;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/menu/menu.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/browser/ui/menu/menu.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./menu';\nimport * as nls from 'vs/nls';\nimport * as strings from 'vs/base/common/strings';\nimport { IActionRunner, IAction, Action } from 'vs/base/common/actions';\nimport { ActionBar, IActionItemProvider, ActionsOrientation, Separator, ActionItem, IActionItemOptions, BaseActionItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { ResolvedKeybinding, KeyCode } from 'vs/base/common/keyCodes';\nimport { addClass, EventType, EventHelper, EventLike, removeTabIndexAndUpdateFocus, isAncestor, hasClass, addDisposableListener, removeClass, append, $, addClasses, removeClasses } from 'vs/base/browser/dom';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { Color } from 'vs/base/common/color';\nimport { DomScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { ScrollbarVisibility, ScrollEvent } from 'vs/base/common/scrollable';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { AnchorAlignment } from 'vs/base/browser/ui/contextview/contextview';\nimport { isLinux } from 'vs/base/common/platform';\n\nfunction createMenuMnemonicRegExp() {\n\ttry {\n\t\treturn new RegExp('\\\\(&([^\\\\s&])\\\\)|(?<!&)&([^\\\\s&])');\n\t} catch (err) {\n\t\treturn new RegExp('\\uFFFF'); // never match please\n\t}\n}\nexport const MENU_MNEMONIC_REGEX = createMenuMnemonicRegExp();\nfunction createMenuEscapedMnemonicRegExp() {\n\ttry {\n\t\treturn new RegExp('(?<!&amp;)(?:&amp;)([^\\\\s&])');\n\t} catch (err) {\n\t\treturn new RegExp('\\uFFFF'); // never match please\n\t}\n}\nexport const MENU_ESCAPED_MNEMONIC_REGEX: RegExp = createMenuEscapedMnemonicRegExp();\n\nexport interface IMenuOptions {\n\tcontext?: any;\n\tactionItemProvider?: IActionItemProvider;\n\tactionRunner?: IActionRunner;\n\tgetKeyBinding?: (action: IAction) => ResolvedKeybinding | undefined;\n\tariaLabel?: string;\n\tenableMnemonics?: boolean;\n\tanchorAlignment?: AnchorAlignment;\n}\n\nexport interface IMenuStyles {\n\tshadowColor?: Color;\n\tborderColor?: Color;\n\tforegroundColor?: Color;\n\tbackgroundColor?: Color;\n\tselectionForegroundColor?: Color;\n\tselectionBackgroundColor?: Color;\n\tselectionBorderColor?: Color;\n\tseparatorColor?: Color;\n}\n\nexport class SubmenuAction extends Action {\n\tconstructor(label: string, public entries: Array<SubmenuAction | IAction>, cssClass?: string) {\n\t\tsuper(!!cssClass ? cssClass : 'submenu', label, '', true);\n\t}\n}\n\ninterface ISubMenuData {\n\tparent: Menu;\n\tsubmenu?: Menu;\n}\n\nexport class Menu extends ActionBar {\n\tprivate mnemonics: Map<string, Array<MenuActionItem>>;\n\tprivate menuDisposables: IDisposable[];\n\tprivate scrollableElement: DomScrollableElement;\n\tprivate menuElement: HTMLElement;\n\tprivate scrollTopHold: number | undefined;\n\n\tprivate readonly _onScroll: Emitter<void>;\n\n\tconstructor(container: HTMLElement, actions: IAction[], options: IMenuOptions = {}) {\n\n\t\taddClass(container, 'monaco-menu-container');\n\t\tcontainer.setAttribute('role', 'presentation');\n\t\tconst menuElement = document.createElement('div');\n\t\taddClass(menuElement, 'monaco-menu');\n\t\tmenuElement.setAttribute('role', 'presentation');\n\n\t\tsuper(menuElement, {\n\t\t\torientation: ActionsOrientation.VERTICAL,\n\t\t\tactionItemProvider: action => this.doGetActionItem(action, options, parentData),\n\t\t\tcontext: options.context,\n\t\t\tactionRunner: options.actionRunner,\n\t\t\tariaLabel: options.ariaLabel,\n\t\t\ttriggerKeys: { keys: [KeyCode.Enter], keyDown: true }\n\t\t});\n\n\t\tthis.menuElement = menuElement;\n\n\t\tthis._onScroll = this._register(new Emitter<void>());\n\n\t\tthis.actionsList.setAttribute('role', 'menu');\n\n\t\tthis.actionsList.tabIndex = 0;\n\n\t\tthis.menuDisposables = [];\n\n\t\tif (options.enableMnemonics) {\n\t\t\tthis.menuDisposables.push(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n\t\t\t\tconst key = e.key.toLocaleLowerCase();\n\t\t\t\tif (this.mnemonics.has(key)) {\n\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\tconst actions = this.mnemonics.get(key)!;\n\n\t\t\t\t\tif (actions.length === 1) {\n\t\t\t\t\t\tif (actions[0] instanceof SubmenuActionItem) {\n\t\t\t\t\t\t\tthis.focusItemByElement(actions[0].container);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tactions[0].onClick(e);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (actions.length > 1) {\n\t\t\t\t\t\tconst action = actions.shift();\n\t\t\t\t\t\tif (action) {\n\t\t\t\t\t\t\tthis.focusItemByElement(action.container);\n\t\t\t\t\t\t\tactions.push(action);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.mnemonics.set(key, actions);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tif (isLinux) {\n\t\t\tthis._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\t\tif (event.equals(KeyCode.Home) || event.equals(KeyCode.PageUp)) {\n\t\t\t\t\tthis.focusedItem = this.items.length - 1;\n\t\t\t\t\tthis.focusNext();\n\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t} else if (event.equals(KeyCode.End) || event.equals(KeyCode.PageDown)) {\n\t\t\t\t\tthis.focusedItem = 0;\n\t\t\t\t\tthis.focusPrevious();\n\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tthis._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n\t\t\tlet relatedTarget = e.relatedTarget as HTMLElement;\n\t\t\tif (!isAncestor(relatedTarget, this.domNode)) {\n\t\t\t\tthis.focusedItem = undefined;\n\t\t\t\tthis.scrollTopHold = this.menuElement.scrollTop;\n\t\t\t\tthis.updateFocus();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.domNode, EventType.MOUSE_UP, e => {\n\t\t\t// Absorb clicks in menu dead space https://github.com/Microsoft/vscode/issues/63575\n\t\t\tEventHelper.stop(e, true);\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n\t\t\tlet target = e.target as HTMLElement;\n\t\t\tif (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twhile (target.parentElement !== this.actionsList && target.parentElement !== null) {\n\t\t\t\ttarget = target.parentElement;\n\t\t\t}\n\n\t\t\tif (hasClass(target, 'action-item')) {\n\t\t\t\tconst lastFocusedItem = this.focusedItem;\n\t\t\t\tthis.scrollTopHold = this.menuElement.scrollTop;\n\t\t\t\tthis.setFocusedItem(target);\n\n\t\t\t\tif (lastFocusedItem !== this.focusedItem) {\n\t\t\t\t\tthis.updateFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tlet parentData: ISubMenuData = {\n\t\t\tparent: this\n\t\t};\n\n\t\tthis.mnemonics = new Map<string, Array<MenuActionItem>>();\n\n\t\tthis.push(actions, { icon: true, label: true, isMenu: true });\n\n\t\t// Scroll Logic\n\t\tthis.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n\t\t\talwaysConsumeMouseWheel: true,\n\t\t\thorizontal: ScrollbarVisibility.Hidden,\n\t\t\tvertical: ScrollbarVisibility.Visible,\n\t\t\tverticalScrollbarSize: 7,\n\t\t\thandleMouseWheel: true,\n\t\t\tuseShadows: true\n\t\t}));\n\n\t\tconst scrollElement = this.scrollableElement.getDomNode();\n\t\tscrollElement.style.position = null;\n\n\t\tmenuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 30)}px`;\n\n\t\tthis.scrollableElement.onScroll(() => {\n\t\t\tthis._onScroll.fire();\n\t\t}, this, this.menuDisposables);\n\n\t\tthis._register(addDisposableListener(this.menuElement, EventType.SCROLL, (e: ScrollEvent) => {\n\t\t\tif (this.scrollTopHold !== undefined) {\n\t\t\t\tthis.menuElement.scrollTop = this.scrollTopHold;\n\t\t\t\tthis.scrollTopHold = undefined;\n\t\t\t}\n\t\t\tthis.scrollableElement.scanDomNode();\n\t\t}));\n\n\t\tcontainer.appendChild(this.scrollableElement.getDomNode());\n\t\tthis.scrollableElement.scanDomNode();\n\n\t\tthis.items.filter(item => !(item instanceof MenuSeparatorActionItem)).forEach((item: MenuActionItem, index: number, array: any[]) => {\n\t\t\titem.updatePositionInSet(index + 1, array.length);\n\t\t});\n\t}\n\n\tstyle(style: IMenuStyles): void {\n\t\tconst container = this.getContainer();\n\n\t\tconst fgColor = style.foregroundColor ? `${style.foregroundColor}` : null;\n\t\tconst bgColor = style.backgroundColor ? `${style.backgroundColor}` : null;\n\t\tconst border = style.borderColor ? `2px solid ${style.borderColor}` : null;\n\t\tconst shadow = style.shadowColor ? `0 2px 4px ${style.shadowColor}` : null;\n\n\t\tcontainer.style.border = border;\n\t\tthis.domNode.style.color = fgColor;\n\t\tthis.domNode.style.backgroundColor = bgColor;\n\t\tcontainer.style.boxShadow = shadow;\n\n\t\tif (this.items) {\n\t\t\tthis.items.forEach(item => {\n\t\t\t\tif (item instanceof MenuActionItem || item instanceof MenuSeparatorActionItem) {\n\t\t\t\t\titem.style(style);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement {\n\t\treturn this.scrollableElement.getDomNode();\n\t}\n\n\tget onScroll(): Event<void> {\n\t\treturn this._onScroll.event;\n\t}\n\n\tget scrollOffset(): number {\n\t\treturn this.menuElement.scrollTop;\n\t}\n\n\ttrigger(index: number): void {\n\t\tif (index <= this.items.length && index >= 0) {\n\t\t\tconst item = this.items[index];\n\t\t\tif (item instanceof SubmenuActionItem) {\n\t\t\t\tsuper.focus(index);\n\t\t\t\titem.open(true);\n\t\t\t} else if (item instanceof MenuActionItem) {\n\t\t\t\tsuper.run(item._action, item._context);\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate focusItemByElement(element: HTMLElement) {\n\t\tconst lastFocusedItem = this.focusedItem;\n\t\tthis.setFocusedItem(element);\n\n\t\tif (lastFocusedItem !== this.focusedItem) {\n\t\t\tthis.updateFocus();\n\t\t}\n\t}\n\n\tprivate setFocusedItem(element: HTMLElement): void {\n\t\tfor (let i = 0; i < this.actionsList.children.length; i++) {\n\t\t\tlet elem = this.actionsList.children[i];\n\t\t\tif (element === elem) {\n\t\t\t\tthis.focusedItem = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate doGetActionItem(action: IAction, options: IMenuOptions, parentData: ISubMenuData): BaseActionItem {\n\t\tif (action instanceof Separator) {\n\t\t\treturn new MenuSeparatorActionItem(options.context, action, { icon: true });\n\t\t} else if (action instanceof SubmenuAction) {\n\t\t\tconst menuActionItem = new SubmenuActionItem(action, action.entries, parentData, options);\n\n\t\t\tif (options.enableMnemonics) {\n\t\t\t\tconst mnemonic = menuActionItem.getMnemonic();\n\t\t\t\tif (mnemonic && menuActionItem.isEnabled()) {\n\t\t\t\t\tlet actionItems: MenuActionItem[] = [];\n\t\t\t\t\tif (this.mnemonics.has(mnemonic)) {\n\t\t\t\t\t\tactionItems = this.mnemonics.get(mnemonic)!;\n\t\t\t\t\t}\n\n\t\t\t\t\tactionItems.push(menuActionItem);\n\n\t\t\t\t\tthis.mnemonics.set(mnemonic, actionItems);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn menuActionItem;\n\t\t} else {\n\t\t\tconst menuItemOptions: IMenuItemOptions = { enableMnemonics: options.enableMnemonics };\n\t\t\tif (options.getKeyBinding) {\n\t\t\t\tconst keybinding = options.getKeyBinding(action);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\tconst keybindingLabel = keybinding.getLabel();\n\n\t\t\t\t\tif (keybindingLabel) {\n\t\t\t\t\t\tmenuItemOptions.keybinding = keybindingLabel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst menuActionItem = new MenuActionItem(options.context, action, menuItemOptions);\n\n\t\t\tif (options.enableMnemonics) {\n\t\t\t\tconst mnemonic = menuActionItem.getMnemonic();\n\t\t\t\tif (mnemonic && menuActionItem.isEnabled()) {\n\t\t\t\t\tlet actionItems: MenuActionItem[] = [];\n\t\t\t\t\tif (this.mnemonics.has(mnemonic)) {\n\t\t\t\t\t\tactionItems = this.mnemonics.get(mnemonic)!;\n\t\t\t\t\t}\n\n\t\t\t\t\tactionItems.push(menuActionItem);\n\n\t\t\t\t\tthis.mnemonics.set(mnemonic, actionItems);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn menuActionItem;\n\t\t}\n\t}\n}\n\ninterface IMenuItemOptions extends IActionItemOptions {\n\tenableMnemonics?: boolean;\n}\n\nclass MenuActionItem extends BaseActionItem {\n\n\tpublic container: HTMLElement;\n\n\tprotected options: IMenuItemOptions;\n\tprotected item: HTMLElement;\n\n\tprivate label: HTMLElement;\n\tprivate check: HTMLElement;\n\tprivate mnemonic: string;\n\tprivate cssClass: string;\n\tprotected menuStyle: IMenuStyles;\n\n\tconstructor(ctx: any, action: IAction, options: IMenuItemOptions = {}) {\n\t\toptions.isMenu = true;\n\t\tsuper(action, action, options);\n\n\t\tthis.options = options;\n\t\tthis.options.icon = options.icon !== undefined ? options.icon : false;\n\t\tthis.options.label = options.label !== undefined ? options.label : true;\n\t\tthis.cssClass = '';\n\n\t\t// Set mnemonic\n\t\tif (this.options.label && options.enableMnemonics) {\n\t\t\tlet label = this.getAction().label;\n\t\t\tif (label) {\n\t\t\t\tlet matches = MENU_MNEMONIC_REGEX.exec(label);\n\t\t\t\tif (matches) {\n\t\t\t\t\tthis.mnemonic = (!!matches[1] ? matches[1] : matches[2]).toLocaleLowerCase();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.container = container;\n\n\t\tthis.item = append(this.element, $('a.action-menu-item'));\n\t\tif (this._action.id === Separator.ID) {\n\t\t\t// A separator is a presentation item\n\t\t\tthis.item.setAttribute('role', 'presentation');\n\t\t} else {\n\t\t\tthis.item.setAttribute('role', 'menuitem');\n\t\t\tif (this.mnemonic) {\n\t\t\t\tthis.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n\t\t\t}\n\t\t}\n\n\t\tthis.check = append(this.item, $('span.menu-item-check'));\n\t\tthis.check.setAttribute('role', 'none');\n\n\t\tthis.label = append(this.item, $('span.action-label'));\n\n\t\tif (this.options.label && this.options.keybinding) {\n\t\t\tappend(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n\t\t}\n\n\t\tthis._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n\t\t\tEventHelper.stop(e, true);\n\t\t\tthis.onClick(e);\n\t\t}));\n\n\t\tthis.updateClass();\n\t\tthis.updateLabel();\n\t\tthis.updateTooltip();\n\t\tthis.updateEnabled();\n\t\tthis.updateChecked();\n\t}\n\n\tblur(): void {\n\t\tsuper.blur();\n\t\tthis.applyStyle();\n\t}\n\n\tfocus(): void {\n\t\tsuper.focus();\n\t\tthis.item.focus();\n\t\tthis.applyStyle();\n\t}\n\n\tupdatePositionInSet(pos: number, setSize: number): void {\n\t\tthis.item.setAttribute('aria-posinset', `${pos}`);\n\t\tthis.item.setAttribute('aria-setsize', `${setSize}`);\n\t}\n\n\tupdateLabel(): void {\n\t\tif (this.options.label) {\n\t\t\tlet label = this.getAction().label;\n\t\t\tif (label) {\n\t\t\t\tconst cleanLabel = cleanMnemonic(label);\n\t\t\t\tif (!this.options.enableMnemonics) {\n\t\t\t\t\tlabel = cleanLabel;\n\t\t\t\t}\n\n\t\t\t\tthis.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n\n\t\t\t\tconst matches = MENU_MNEMONIC_REGEX.exec(label);\n\n\t\t\t\tif (matches) {\n\t\t\t\t\tlabel = strings.escape(label).replace(MENU_ESCAPED_MNEMONIC_REGEX, '<u aria-hidden=\"true\">$1</u>');\n\t\t\t\t\tlabel = label.replace(/&amp;&amp;/g, '&amp;');\n\t\t\t\t\tthis.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[2]).toLocaleLowerCase());\n\t\t\t\t} else {\n\t\t\t\t\tlabel = label.replace(/&&/g, '&');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.label.innerHTML = label.trim();\n\t\t}\n\t}\n\n\tupdateTooltip(): void {\n\t\tlet title: string | null = null;\n\n\t\tif (this.getAction().tooltip) {\n\t\t\ttitle = this.getAction().tooltip;\n\n\t\t} else if (!this.options.label && this.getAction().label && this.options.icon) {\n\t\t\ttitle = this.getAction().label;\n\n\t\t\tif (this.options.keybinding) {\n\t\t\t\ttitle = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n\t\t\t}\n\t\t}\n\n\t\tif (title) {\n\t\t\tthis.item.title = title;\n\t\t}\n\t}\n\n\tupdateClass(): void {\n\t\tif (this.cssClass) {\n\t\t\tremoveClasses(this.item, this.cssClass);\n\t\t}\n\t\tif (this.options.icon) {\n\t\t\tthis.cssClass = this.getAction().class || '';\n\t\t\taddClass(this.label, 'icon');\n\t\t\tif (this.cssClass) {\n\t\t\t\taddClasses(this.label, this.cssClass);\n\t\t\t}\n\t\t\tthis.updateEnabled();\n\t\t} else {\n\t\t\tremoveClass(this.label, 'icon');\n\t\t}\n\t}\n\n\tupdateEnabled(): void {\n\t\tif (this.getAction().enabled) {\n\t\t\tif (this.element) {\n\t\t\t\tremoveClass(this.element, 'disabled');\n\t\t\t}\n\n\t\t\tremoveClass(this.item, 'disabled');\n\t\t\tthis.item.tabIndex = 0;\n\t\t} else {\n\t\t\tif (this.element) {\n\t\t\t\taddClass(this.element, 'disabled');\n\t\t\t}\n\n\t\t\taddClass(this.item, 'disabled');\n\t\t\tremoveTabIndexAndUpdateFocus(this.item);\n\t\t}\n\t}\n\n\tupdateChecked(): void {\n\t\tif (this.getAction().checked) {\n\t\t\taddClass(this.item, 'checked');\n\t\t\tthis.item.setAttribute('role', 'menuitemcheckbox');\n\t\t\tthis.item.setAttribute('aria-checked', 'true');\n\t\t} else {\n\t\t\tremoveClass(this.item, 'checked');\n\t\t\tthis.item.setAttribute('role', 'menuitem');\n\t\t\tthis.item.setAttribute('aria-checked', 'false');\n\t\t}\n\t}\n\n\tgetMnemonic(): string {\n\t\treturn this.mnemonic;\n\t}\n\n\tprotected applyStyle(): void {\n\t\tif (!this.menuStyle) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isSelected = this.element && hasClass(this.element, 'focused');\n\t\tconst fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n\t\tconst bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : this.menuStyle.backgroundColor;\n\t\tconst border = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : null;\n\n\t\tthis.item.style.color = fgColor ? `${fgColor}` : null;\n\t\tthis.check.style.backgroundColor = fgColor ? `${fgColor}` : null;\n\t\tthis.item.style.backgroundColor = bgColor ? `${bgColor}` : null;\n\t\tthis.container.style.border = border;\n\t}\n\n\tstyle(style: IMenuStyles): void {\n\t\tthis.menuStyle = style;\n\t\tthis.applyStyle();\n\t}\n}\n\nclass SubmenuActionItem extends MenuActionItem {\n\tprivate mysubmenu: Menu | null;\n\tprivate submenuContainer: HTMLElement | undefined;\n\tprivate submenuIndicator: HTMLElement;\n\tprivate submenuDisposables: IDisposable[] = [];\n\tprivate mouseOver: boolean;\n\tprivate showScheduler: RunOnceScheduler;\n\tprivate hideScheduler: RunOnceScheduler;\n\n\tconstructor(\n\t\taction: IAction,\n\t\tprivate submenuActions: IAction[],\n\t\tprivate parentData: ISubMenuData,\n\t\tprivate submenuOptions?: IMenuOptions\n\t) {\n\t\tsuper(action, action, submenuOptions);\n\n\t\tthis.showScheduler = new RunOnceScheduler(() => {\n\t\t\tif (this.mouseOver) {\n\t\t\t\tthis.cleanupExistingSubmenu(false);\n\t\t\t\tthis.createSubmenu(false);\n\t\t\t}\n\t\t}, 250);\n\n\t\tthis.hideScheduler = new RunOnceScheduler(() => {\n\t\t\tif (this.element && (!isAncestor(document.activeElement, this.element) && this.parentData.submenu === this.mysubmenu)) {\n\t\t\t\tthis.parentData.parent.focus(false);\n\t\t\t\tthis.cleanupExistingSubmenu(true);\n\t\t\t}\n\t\t}, 750);\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\taddClass(this.item, 'monaco-submenu-item');\n\t\tthis.item.setAttribute('aria-haspopup', 'true');\n\n\t\tthis.submenuIndicator = append(this.item, $('span.submenu-indicator'));\n\t\tthis.submenuIndicator.setAttribute('aria-hidden', 'true');\n\n\t\tthis._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n\t\t\tlet event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.RightArrow) || event.equals(KeyCode.Enter)) {\n\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\tthis.createSubmenu(true);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n\t\t\tlet event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.RightArrow) || event.equals(KeyCode.Enter)) {\n\t\t\t\tEventHelper.stop(e, true);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n\t\t\tif (!this.mouseOver) {\n\t\t\t\tthis.mouseOver = true;\n\n\t\t\t\tthis.showScheduler.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n\t\t\tthis.mouseOver = false;\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n\t\t\tif (this.element && !isAncestor(document.activeElement, this.element)) {\n\t\t\t\tthis.hideScheduler.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.parentData.parent.onScroll(() => {\n\t\t\tthis.parentData.parent.focus(false);\n\t\t\tthis.cleanupExistingSubmenu(false);\n\t\t}));\n\t}\n\n\topen(selectFirst?: boolean): void {\n\t\tthis.cleanupExistingSubmenu(false);\n\t\tthis.createSubmenu(selectFirst);\n\t}\n\n\tonClick(e: EventLike): void {\n\t\t// stop clicking from trying to run an action\n\t\tEventHelper.stop(e, true);\n\n\t\tthis.cleanupExistingSubmenu(false);\n\t\tthis.createSubmenu(false);\n\t}\n\n\tprivate cleanupExistingSubmenu(force: boolean): void {\n\t\tif (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n\t\t\tthis.parentData.submenu.dispose();\n\t\t\tthis.parentData.submenu = undefined;\n\n\t\t\tif (this.submenuContainer) {\n\t\t\t\tthis.submenuDisposables = dispose(this.submenuDisposables);\n\t\t\t\tthis.submenuContainer = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate createSubmenu(selectFirstItem = true): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.parentData.submenu) {\n\t\t\tthis.submenuContainer = append(this.element, $('div.monaco-submenu'));\n\t\t\taddClasses(this.submenuContainer, 'menubar-menu-items-holder', 'context-view');\n\n\t\t\tthis.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions, this.submenuOptions);\n\t\t\tif (this.menuStyle) {\n\t\t\t\tthis.parentData.submenu.style(this.menuStyle);\n\t\t\t}\n\n\t\t\tconst boundingRect = this.element.getBoundingClientRect();\n\t\t\tconst childBoundingRect = this.submenuContainer.getBoundingClientRect();\n\t\t\tconst computedStyles = getComputedStyle(this.parentData.parent.domNode);\n\t\t\tconst paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n\n\t\t\tif (window.innerWidth <= boundingRect.right + childBoundingRect.width) {\n\t\t\t\tthis.submenuContainer.style.left = '10px';\n\t\t\t\tthis.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset + boundingRect.height}px`;\n\t\t\t} else {\n\t\t\t\tthis.submenuContainer.style.left = `${this.element.offsetWidth}px`;\n\t\t\t\tthis.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n\t\t\t}\n\n\t\t\tthis.submenuDisposables.push(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n\t\t\t\tlet event = new StandardKeyboardEvent(e);\n\t\t\t\tif (event.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t\tthis.parentData.parent.focus();\n\n\t\t\t\t\tif (this.parentData.submenu) {\n\t\t\t\t\t\tthis.parentData.submenu.dispose();\n\t\t\t\t\t\tthis.parentData.submenu = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.submenuDisposables = dispose(this.submenuDisposables);\n\t\t\t\t\tthis.submenuContainer = undefined;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.submenuDisposables.push(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n\t\t\t\tlet event = new StandardKeyboardEvent(e);\n\t\t\t\tif (event.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t}\n\t\t\t}));\n\n\n\t\t\tthis.submenuDisposables.push(this.parentData.submenu.onDidCancel(() => {\n\t\t\t\tthis.parentData.parent.focus();\n\n\t\t\t\tif (this.parentData.submenu) {\n\t\t\t\t\tthis.parentData.submenu.dispose();\n\t\t\t\t\tthis.parentData.submenu = undefined;\n\t\t\t\t}\n\n\t\t\t\tthis.submenuDisposables = dispose(this.submenuDisposables);\n\t\t\t\tthis.submenuContainer = undefined;\n\t\t\t}));\n\n\t\t\tthis.parentData.submenu.focus(selectFirstItem);\n\n\t\t\tthis.mysubmenu = this.parentData.submenu;\n\t\t} else {\n\t\t\tthis.parentData.submenu.focus(false);\n\t\t}\n\t}\n\n\tprotected applyStyle(): void {\n\t\tsuper.applyStyle();\n\n\t\tif (!this.menuStyle) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isSelected = this.element && hasClass(this.element, 'focused');\n\t\tconst fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n\n\t\tthis.submenuIndicator.style.backgroundColor = fgColor ? `${fgColor}` : null;\n\n\t\tif (this.parentData.submenu) {\n\t\t\tthis.parentData.submenu.style(this.menuStyle);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.hideScheduler.dispose();\n\n\t\tif (this.mysubmenu) {\n\t\t\tthis.mysubmenu.dispose();\n\t\t\tthis.mysubmenu = null;\n\t\t}\n\n\t\tif (this.submenuContainer) {\n\t\t\tthis.submenuDisposables = dispose(this.submenuDisposables);\n\t\t\tthis.submenuContainer = undefined;\n\t\t}\n\t}\n}\n\nclass MenuSeparatorActionItem extends ActionItem {\n\tstyle(style: IMenuStyles): void {\n\t\tthis.label.style.borderBottomColor = style.separatorColor ? `${style.separatorColor}` : null;\n\t}\n}\n\nexport function cleanMnemonic(label: string): string {\n\tconst regex = MENU_MNEMONIC_REGEX;\n\n\tconst matches = regex.exec(label);\n\tif (!matches) {\n\t\treturn label;\n\t}\n\n\tconst mnemonicInText = matches[0].charAt(0) === '&';\n\n\treturn label.replace(regex, mnemonicInText ? '$2' : '').trim();\n}"]}]}