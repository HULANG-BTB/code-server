{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/editor/contrib/quickOpen/quickOpen.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/quickOpen/quickOpen.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar errors_1 = require(\"vs/base/common/errors\");\nvar uri_1 = require(\"vs/base/common/uri\");\nvar range_1 = require(\"vs/editor/common/core/range\");\nvar editorExtensions_1 = require(\"vs/editor/browser/editorExtensions\");\nvar modes_1 = require(\"vs/editor/common/modes\");\nvar modelService_1 = require(\"vs/editor/common/services/modelService\");\nvar cancellation_1 = require(\"vs/base/common/cancellation\");\nvar resolverService_1 = require(\"vs/editor/common/services/resolverService\");\nfunction getDocumentSymbols(model, flat, token) {\n    var roots = [];\n    var promises = modes_1.DocumentSymbolProviderRegistry.all(model).map(function (support) {\n        return Promise.resolve(support.provideDocumentSymbols(model, token)).then(function (result) {\n            if (Array.isArray(result)) {\n                roots.push.apply(roots, result);\n            }\n        }, function (err) {\n            errors_1.onUnexpectedExternalError(err);\n        });\n    });\n    return Promise.all(promises).then(function () {\n        var flatEntries = [];\n        if (token.isCancellationRequested) {\n            return flatEntries;\n        }\n        if (flat) {\n            flatten(flatEntries, roots, '');\n        }\n        else {\n            flatEntries = roots;\n        }\n        flatEntries.sort(compareEntriesUsingStart);\n        return flatEntries;\n    });\n}\nexports.getDocumentSymbols = getDocumentSymbols;\nfunction compareEntriesUsingStart(a, b) {\n    return range_1.Range.compareRangesUsingStarts(a.range, b.range);\n}\nfunction flatten(bucket, entries, overrideContainerLabel) {\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n        var entry = entries_1[_i];\n        bucket.push({\n            kind: entry.kind,\n            name: entry.name,\n            detail: entry.detail,\n            containerName: entry.containerName || overrideContainerLabel,\n            range: entry.range,\n            selectionRange: entry.selectionRange,\n            children: undefined,\n        });\n        if (entry.children) {\n            flatten(bucket, entry.children, entry.name);\n        }\n    }\n}\neditorExtensions_1.registerLanguageCommand('_executeDocumentSymbolProvider', function (accessor, args) {\n    var resource = args.resource;\n    if (!(resource instanceof uri_1.URI)) {\n        throw errors_1.illegalArgument('resource');\n    }\n    var model = accessor.get(modelService_1.IModelService).getModel(resource);\n    if (model) {\n        return getDocumentSymbols(model, false, cancellation_1.CancellationToken.None);\n    }\n    return accessor.get(resolverService_1.ITextModelService).createModelReference(resource).then(function (reference) {\n        return new Promise(function (resolve, reject) {\n            try {\n                var result = getDocumentSymbols(reference.object.textEditorModel, false, cancellation_1.CancellationToken.None);\n                resolve(result);\n            }\n            catch (err) {\n                reject(err);\n            }\n        }).finally(function () {\n            reference.dispose();\n        });\n    });\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/editor/contrib/quickOpen/quickOpen.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/editor/contrib/quickOpen/quickOpen.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { illegalArgument, onUnexpectedExternalError } from 'vs/base/common/errors';\nimport { URI } from 'vs/base/common/uri';\nimport { Range } from 'vs/editor/common/core/range';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { registerLanguageCommand } from 'vs/editor/browser/editorExtensions';\nimport { DocumentSymbol, DocumentSymbolProviderRegistry } from 'vs/editor/common/modes';\nimport { IModelService } from 'vs/editor/common/services/modelService';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\n\nexport function getDocumentSymbols(model: ITextModel, flat: boolean, token: CancellationToken): Promise<DocumentSymbol[]> {\n\n\tlet roots: DocumentSymbol[] = [];\n\n\tlet promises = DocumentSymbolProviderRegistry.all(model).map(support => {\n\n\t\treturn Promise.resolve(support.provideDocumentSymbols(model, token)).then(result => {\n\t\t\tif (Array.isArray(result)) {\n\t\t\t\troots.push(...result);\n\t\t\t}\n\t\t}, err => {\n\t\t\tonUnexpectedExternalError(err);\n\t\t});\n\t});\n\n\treturn Promise.all(promises).then(() => {\n\t\tlet flatEntries: DocumentSymbol[] = [];\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn flatEntries;\n\t\t}\n\t\tif (flat) {\n\t\t\tflatten(flatEntries, roots, '');\n\t\t} else {\n\t\t\tflatEntries = roots;\n\t\t}\n\t\tflatEntries.sort(compareEntriesUsingStart);\n\t\treturn flatEntries;\n\t});\n}\n\nfunction compareEntriesUsingStart(a: DocumentSymbol, b: DocumentSymbol): number {\n\treturn Range.compareRangesUsingStarts(a.range, b.range);\n}\n\nfunction flatten(bucket: DocumentSymbol[], entries: DocumentSymbol[], overrideContainerLabel: string): void {\n\tfor (let entry of entries) {\n\t\tbucket.push({\n\t\t\tkind: entry.kind,\n\t\t\tname: entry.name,\n\t\t\tdetail: entry.detail,\n\t\t\tcontainerName: entry.containerName || overrideContainerLabel,\n\t\t\trange: entry.range,\n\t\t\tselectionRange: entry.selectionRange,\n\t\t\tchildren: undefined, // we flatten it...\n\t\t});\n\t\tif (entry.children) {\n\t\t\tflatten(bucket, entry.children, entry.name);\n\t\t}\n\t}\n}\n\n\nregisterLanguageCommand('_executeDocumentSymbolProvider', function (accessor, args) {\n\tconst { resource } = args;\n\tif (!(resource instanceof URI)) {\n\t\tthrow illegalArgument('resource');\n\t}\n\tconst model = accessor.get(IModelService).getModel(resource);\n\tif (model) {\n\t\treturn getDocumentSymbols(model, false, CancellationToken.None);\n\t}\n\n\treturn accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tconst result = getDocumentSymbols(reference.object.textEditorModel, false, CancellationToken.None);\n\t\t\t\tresolve(result);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t}).finally(() => {\n\t\t\treference.dispose();\n\t\t});\n\t});\n});\n"]}]}