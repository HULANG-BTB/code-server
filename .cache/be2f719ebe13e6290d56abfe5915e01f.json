{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/base/browser/dom.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/base/browser/dom.ts","mtime":1555102316000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar browser = require(\"vs/base/browser/browser\");\nvar event_1 = require(\"vs/base/browser/event\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar mouseEvent_1 = require(\"vs/base/browser/mouseEvent\");\nvar async_1 = require(\"vs/base/common/async\");\nvar charCode_1 = require(\"vs/base/common/charCode\");\nvar errors_1 = require(\"vs/base/common/errors\");\nvar event_2 = require(\"vs/base/common/event\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar platform = require(\"vs/base/common/platform\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nfunction clearNode(node) {\n    while (node.firstChild) {\n        node.removeChild(node.firstChild);\n    }\n}\nexports.clearNode = clearNode;\nfunction removeNode(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\nexports.removeNode = removeNode;\nfunction isInDOM(node) {\n    while (node) {\n        if (node === document.body) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\nexports.isInDOM = isInDOM;\nvar _manualClassList = new /** @class */ (function () {\n    function class_1() {\n    }\n    class_1.prototype._findClassName = function (node, className) {\n        var classes = node.className;\n        if (!classes) {\n            this._lastStart = -1;\n            return;\n        }\n        className = className.trim();\n        var classesLen = classes.length, classLen = className.length;\n        if (classLen === 0) {\n            this._lastStart = -1;\n            return;\n        }\n        if (classesLen < classLen) {\n            this._lastStart = -1;\n            return;\n        }\n        if (classes === className) {\n            this._lastStart = 0;\n            this._lastEnd = classesLen;\n            return;\n        }\n        var idx = -1, idxEnd;\n        while ((idx = classes.indexOf(className, idx + 1)) >= 0) {\n            idxEnd = idx + classLen;\n            // a class that is followed by another class\n            if ((idx === 0 || classes.charCodeAt(idx - 1) === charCode_1.CharCode.Space) && classes.charCodeAt(idxEnd) === charCode_1.CharCode.Space) {\n                this._lastStart = idx;\n                this._lastEnd = idxEnd + 1;\n                return;\n            }\n            // last class\n            if (idx > 0 && classes.charCodeAt(idx - 1) === charCode_1.CharCode.Space && idxEnd === classesLen) {\n                this._lastStart = idx - 1;\n                this._lastEnd = idxEnd;\n                return;\n            }\n            // equal - duplicate of cmp above\n            if (idx === 0 && idxEnd === classesLen) {\n                this._lastStart = 0;\n                this._lastEnd = idxEnd;\n                return;\n            }\n        }\n        this._lastStart = -1;\n    };\n    class_1.prototype.hasClass = function (node, className) {\n        this._findClassName(node, className);\n        return this._lastStart !== -1;\n    };\n    class_1.prototype.addClasses = function (node) {\n        var _this = this;\n        var classNames = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            classNames[_i - 1] = arguments[_i];\n        }\n        classNames.forEach(function (nameValue) { return nameValue.split(' ').forEach(function (name) { return _this.addClass(node, name); }); });\n    };\n    class_1.prototype.addClass = function (node, className) {\n        if (!node.className) { // doesn't have it for sure\n            node.className = className;\n        }\n        else {\n            this._findClassName(node, className); // see if it's already there\n            if (this._lastStart === -1) {\n                node.className = node.className + ' ' + className;\n            }\n        }\n    };\n    class_1.prototype.removeClass = function (node, className) {\n        this._findClassName(node, className);\n        if (this._lastStart === -1) {\n            return; // Prevent styles invalidation if not necessary\n        }\n        else {\n            node.className = node.className.substring(0, this._lastStart) + node.className.substring(this._lastEnd);\n        }\n    };\n    class_1.prototype.removeClasses = function (node) {\n        var _this = this;\n        var classNames = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            classNames[_i - 1] = arguments[_i];\n        }\n        classNames.forEach(function (nameValue) { return nameValue.split(' ').forEach(function (name) { return _this.removeClass(node, name); }); });\n    };\n    class_1.prototype.toggleClass = function (node, className, shouldHaveIt) {\n        this._findClassName(node, className);\n        if (this._lastStart !== -1 && (shouldHaveIt === undefined || !shouldHaveIt)) {\n            this.removeClass(node, className);\n        }\n        if (this._lastStart === -1 && (shouldHaveIt === undefined || shouldHaveIt)) {\n            this.addClass(node, className);\n        }\n    };\n    return class_1;\n}());\nvar _nativeClassList = new /** @class */ (function () {\n    function class_2() {\n    }\n    class_2.prototype.hasClass = function (node, className) {\n        return Boolean(className) && node.classList && node.classList.contains(className);\n    };\n    class_2.prototype.addClasses = function (node) {\n        var _this = this;\n        var classNames = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            classNames[_i - 1] = arguments[_i];\n        }\n        classNames.forEach(function (nameValue) { return nameValue.split(' ').forEach(function (name) { return _this.addClass(node, name); }); });\n    };\n    class_2.prototype.addClass = function (node, className) {\n        if (className && node.classList) {\n            node.classList.add(className);\n        }\n    };\n    class_2.prototype.removeClass = function (node, className) {\n        if (className && node.classList) {\n            node.classList.remove(className);\n        }\n    };\n    class_2.prototype.removeClasses = function (node) {\n        var _this = this;\n        var classNames = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            classNames[_i - 1] = arguments[_i];\n        }\n        classNames.forEach(function (nameValue) { return nameValue.split(' ').forEach(function (name) { return _this.removeClass(node, name); }); });\n    };\n    class_2.prototype.toggleClass = function (node, className, shouldHaveIt) {\n        if (node.classList) {\n            node.classList.toggle(className, shouldHaveIt);\n        }\n    };\n    return class_2;\n}());\n// In IE11 there is only partial support for `classList` which makes us keep our\n// custom implementation. Otherwise use the native implementation, see: http://caniuse.com/#search=classlist\nvar _classList = browser.isIE ? _manualClassList : _nativeClassList;\nexports.hasClass = _classList.hasClass.bind(_classList);\nexports.addClass = _classList.addClass.bind(_classList);\nexports.addClasses = _classList.addClasses.bind(_classList);\nexports.removeClass = _classList.removeClass.bind(_classList);\nexports.removeClasses = _classList.removeClasses.bind(_classList);\nexports.toggleClass = _classList.toggleClass.bind(_classList);\nvar DomListener = /** @class */ (function () {\n    function DomListener(node, type, handler, useCapture) {\n        this._node = node;\n        this._type = type;\n        this._handler = handler;\n        this._useCapture = (useCapture || false);\n        this._node.addEventListener(this._type, this._handler, this._useCapture);\n    }\n    DomListener.prototype.dispose = function () {\n        if (!this._handler) {\n            // Already disposed\n            return;\n        }\n        this._node.removeEventListener(this._type, this._handler, this._useCapture);\n        // Prevent leakers from holding on to the dom or handler func\n        this._node = null;\n        this._handler = null;\n    };\n    return DomListener;\n}());\nfunction addDisposableListener(node, type, handler, useCapture) {\n    return new DomListener(node, type, handler, useCapture);\n}\nexports.addDisposableListener = addDisposableListener;\nfunction _wrapAsStandardMouseEvent(handler) {\n    return function (e) {\n        return handler(new mouseEvent_1.StandardMouseEvent(e));\n    };\n}\nfunction _wrapAsStandardKeyboardEvent(handler) {\n    return function (e) {\n        return handler(new keyboardEvent_1.StandardKeyboardEvent(e));\n    };\n}\nexports.addStandardDisposableListener = function addStandardDisposableListener(node, type, handler, useCapture) {\n    var wrapHandler = handler;\n    if (type === 'click' || type === 'mousedown') {\n        wrapHandler = _wrapAsStandardMouseEvent(handler);\n    }\n    else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n        wrapHandler = _wrapAsStandardKeyboardEvent(handler);\n    }\n    return addDisposableListener(node, type, wrapHandler, useCapture);\n};\nfunction addDisposableNonBubblingMouseOutListener(node, handler) {\n    return addDisposableListener(node, 'mouseout', function (e) {\n        // Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements\n        var toElement = (e.relatedTarget || e.target);\n        while (toElement && toElement !== node) {\n            toElement = toElement.parentNode;\n        }\n        if (toElement === node) {\n            return;\n        }\n        handler(e);\n    });\n}\nexports.addDisposableNonBubblingMouseOutListener = addDisposableNonBubblingMouseOutListener;\nvar _animationFrame = null;\nfunction doRequestAnimationFrame(callback) {\n    if (!_animationFrame) {\n        var emulatedRequestAnimationFrame = function (callback) {\n            return setTimeout(function () { return callback(new Date().getTime()); }, 0);\n        };\n        _animationFrame = (self.requestAnimationFrame\n            || self.msRequestAnimationFrame\n            || self.webkitRequestAnimationFrame\n            || self.mozRequestAnimationFrame\n            || self.oRequestAnimationFrame\n            || emulatedRequestAnimationFrame);\n    }\n    return _animationFrame.call(self, callback);\n}\nvar AnimationFrameQueueItem = /** @class */ (function () {\n    function AnimationFrameQueueItem(runner, priority) {\n        if (priority === void 0) { priority = 0; }\n        this._runner = runner;\n        this.priority = priority;\n        this._canceled = false;\n    }\n    AnimationFrameQueueItem.prototype.dispose = function () {\n        this._canceled = true;\n    };\n    AnimationFrameQueueItem.prototype.execute = function () {\n        if (this._canceled) {\n            return;\n        }\n        try {\n            this._runner();\n        }\n        catch (e) {\n            errors_1.onUnexpectedError(e);\n        }\n    };\n    // Sort by priority (largest to lowest)\n    AnimationFrameQueueItem.sort = function (a, b) {\n        return b.priority - a.priority;\n    };\n    return AnimationFrameQueueItem;\n}());\n(function () {\n    /**\n     * The runners scheduled at the next animation frame\n     */\n    var NEXT_QUEUE = [];\n    /**\n     * The runners scheduled at the current animation frame\n     */\n    var CURRENT_QUEUE = null;\n    /**\n     * A flag to keep track if the native requestAnimationFrame was already called\n     */\n    var animFrameRequested = false;\n    /**\n     * A flag to indicate if currently handling a native requestAnimationFrame callback\n     */\n    var inAnimationFrameRunner = false;\n    var animationFrameRunner = function () {\n        animFrameRequested = false;\n        CURRENT_QUEUE = NEXT_QUEUE;\n        NEXT_QUEUE = [];\n        inAnimationFrameRunner = true;\n        while (CURRENT_QUEUE.length > 0) {\n            CURRENT_QUEUE.sort(AnimationFrameQueueItem.sort);\n            var top = CURRENT_QUEUE.shift();\n            top.execute();\n        }\n        inAnimationFrameRunner = false;\n    };\n    exports.scheduleAtNextAnimationFrame = function (runner, priority) {\n        if (priority === void 0) { priority = 0; }\n        var item = new AnimationFrameQueueItem(runner, priority);\n        NEXT_QUEUE.push(item);\n        if (!animFrameRequested) {\n            animFrameRequested = true;\n            doRequestAnimationFrame(animationFrameRunner);\n        }\n        return item;\n    };\n    exports.runAtThisOrScheduleAtNextAnimationFrame = function (runner, priority) {\n        if (inAnimationFrameRunner) {\n            var item = new AnimationFrameQueueItem(runner, priority);\n            CURRENT_QUEUE.push(item);\n            return item;\n        }\n        else {\n            return exports.scheduleAtNextAnimationFrame(runner, priority);\n        }\n    };\n})();\nfunction measure(callback) {\n    return exports.scheduleAtNextAnimationFrame(callback, 10000 /* must be early */);\n}\nexports.measure = measure;\nfunction modify(callback) {\n    return exports.scheduleAtNextAnimationFrame(callback, -10000 /* must be late */);\n}\nexports.modify = modify;\nvar MINIMUM_TIME_MS = 16;\nvar DEFAULT_EVENT_MERGER = function (lastEvent, currentEvent) {\n    return currentEvent;\n};\nvar TimeoutThrottledDomListener = /** @class */ (function (_super) {\n    tslib_1.__extends(TimeoutThrottledDomListener, _super);\n    function TimeoutThrottledDomListener(node, type, handler, eventMerger, minimumTimeMs) {\n        if (eventMerger === void 0) { eventMerger = DEFAULT_EVENT_MERGER; }\n        if (minimumTimeMs === void 0) { minimumTimeMs = MINIMUM_TIME_MS; }\n        var _this = _super.call(this) || this;\n        var lastEvent = null;\n        var lastHandlerTime = 0;\n        var timeout = _this._register(new async_1.TimeoutTimer());\n        var invokeHandler = function () {\n            lastHandlerTime = (new Date()).getTime();\n            handler(lastEvent);\n            lastEvent = null;\n        };\n        _this._register(addDisposableListener(node, type, function (e) {\n            lastEvent = eventMerger(lastEvent, e);\n            var elapsedTime = (new Date()).getTime() - lastHandlerTime;\n            if (elapsedTime >= minimumTimeMs) {\n                timeout.cancel();\n                invokeHandler();\n            }\n            else {\n                timeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);\n            }\n        }));\n        return _this;\n    }\n    return TimeoutThrottledDomListener;\n}(lifecycle_1.Disposable));\nfunction addDisposableThrottledListener(node, type, handler, eventMerger, minimumTimeMs) {\n    return new TimeoutThrottledDomListener(node, type, handler, eventMerger, minimumTimeMs);\n}\nexports.addDisposableThrottledListener = addDisposableThrottledListener;\nfunction getComputedStyle(el) {\n    return document.defaultView.getComputedStyle(el, null);\n}\nexports.getComputedStyle = getComputedStyle;\n// Adapted from WinJS\n// Converts a CSS positioning string for the specified element to pixels.\nvar convertToPixels = (function () {\n    return function (element, value) {\n        return parseFloat(value) || 0;\n    };\n})();\nfunction getDimension(element, cssPropertyName, jsPropertyName) {\n    var computedStyle = getComputedStyle(element);\n    var value = '0';\n    if (computedStyle) {\n        if (computedStyle.getPropertyValue) {\n            value = computedStyle.getPropertyValue(cssPropertyName);\n        }\n        else {\n            // IE8\n            value = computedStyle.getAttribute(jsPropertyName);\n        }\n    }\n    return convertToPixels(element, value);\n}\nfunction getClientArea(element) {\n    // Try with DOM clientWidth / clientHeight\n    if (element !== document.body) {\n        return new Dimension(element.clientWidth, element.clientHeight);\n    }\n    // Try innerWidth / innerHeight\n    if (window.innerWidth && window.innerHeight) {\n        return new Dimension(window.innerWidth, window.innerHeight);\n    }\n    // Try with document.body.clientWidth / document.body.clientHeight\n    if (document.body && document.body.clientWidth && document.body.clientHeight) {\n        return new Dimension(document.body.clientWidth, document.body.clientHeight);\n    }\n    // Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n    if (document.documentElement && document.documentElement.clientWidth && document.documentElement.clientHeight) {\n        return new Dimension(document.documentElement.clientWidth, document.documentElement.clientHeight);\n    }\n    throw new Error('Unable to figure out browser width and height');\n}\nexports.getClientArea = getClientArea;\nvar sizeUtils = {\n    getBorderLeftWidth: function (element) {\n        return getDimension(element, 'border-left-width', 'borderLeftWidth');\n    },\n    getBorderRightWidth: function (element) {\n        return getDimension(element, 'border-right-width', 'borderRightWidth');\n    },\n    getBorderTopWidth: function (element) {\n        return getDimension(element, 'border-top-width', 'borderTopWidth');\n    },\n    getBorderBottomWidth: function (element) {\n        return getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n    },\n    getPaddingLeft: function (element) {\n        return getDimension(element, 'padding-left', 'paddingLeft');\n    },\n    getPaddingRight: function (element) {\n        return getDimension(element, 'padding-right', 'paddingRight');\n    },\n    getPaddingTop: function (element) {\n        return getDimension(element, 'padding-top', 'paddingTop');\n    },\n    getPaddingBottom: function (element) {\n        return getDimension(element, 'padding-bottom', 'paddingBottom');\n    },\n    getMarginLeft: function (element) {\n        return getDimension(element, 'margin-left', 'marginLeft');\n    },\n    getMarginTop: function (element) {\n        return getDimension(element, 'margin-top', 'marginTop');\n    },\n    getMarginRight: function (element) {\n        return getDimension(element, 'margin-right', 'marginRight');\n    },\n    getMarginBottom: function (element) {\n        return getDimension(element, 'margin-bottom', 'marginBottom');\n    },\n    __commaSentinel: false\n};\n// ----------------------------------------------------------------------------------------\n// Position & Dimension\nvar Dimension = /** @class */ (function () {\n    function Dimension(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    Dimension.equals = function (a, b) {\n        if (a === b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        return a.width === b.width && a.height === b.height;\n    };\n    return Dimension;\n}());\nexports.Dimension = Dimension;\nfunction getTopLeftOffset(element) {\n    // Adapted from WinJS.Utilities.getPosition\n    // and added borders to the mix\n    var offsetParent = element.offsetParent, top = element.offsetTop, left = element.offsetLeft;\n    while ((element = element.parentNode) !== null && element !== document.body && element !== document.documentElement) {\n        top -= element.scrollTop;\n        var c = getComputedStyle(element);\n        if (c) {\n            left -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n        }\n        if (element === offsetParent) {\n            left += sizeUtils.getBorderLeftWidth(element);\n            top += sizeUtils.getBorderTopWidth(element);\n            top += element.offsetTop;\n            left += element.offsetLeft;\n            offsetParent = element.offsetParent;\n        }\n    }\n    return {\n        left: left,\n        top: top\n    };\n}\nexports.getTopLeftOffset = getTopLeftOffset;\nfunction size(element, width, height) {\n    if (typeof width === 'number') {\n        element.style.width = width + \"px\";\n    }\n    if (typeof height === 'number') {\n        element.style.height = height + \"px\";\n    }\n}\nexports.size = size;\nfunction position(element, top, right, bottom, left, position) {\n    if (position === void 0) { position = 'absolute'; }\n    if (typeof top === 'number') {\n        element.style.top = top + \"px\";\n    }\n    if (typeof right === 'number') {\n        element.style.right = right + \"px\";\n    }\n    if (typeof bottom === 'number') {\n        element.style.bottom = bottom + \"px\";\n    }\n    if (typeof left === 'number') {\n        element.style.left = left + \"px\";\n    }\n    element.style.position = position;\n}\nexports.position = position;\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nfunction getDomNodePagePosition(domNode) {\n    var bb = domNode.getBoundingClientRect();\n    return {\n        left: bb.left + exports.StandardWindow.scrollX,\n        top: bb.top + exports.StandardWindow.scrollY,\n        width: bb.width,\n        height: bb.height\n    };\n}\nexports.getDomNodePagePosition = getDomNodePagePosition;\nexports.StandardWindow = new /** @class */ (function () {\n    function class_3() {\n    }\n    Object.defineProperty(class_3.prototype, \"scrollX\", {\n        get: function () {\n            if (typeof window.scrollX === 'number') {\n                // modern browsers\n                return window.scrollX;\n            }\n            else {\n                return document.body.scrollLeft + document.documentElement.scrollLeft;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(class_3.prototype, \"scrollY\", {\n        get: function () {\n            if (typeof window.scrollY === 'number') {\n                // modern browsers\n                return window.scrollY;\n            }\n            else {\n                return document.body.scrollTop + document.documentElement.scrollTop;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return class_3;\n}());\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nfunction getTotalWidth(element) {\n    var margin = sizeUtils.getMarginLeft(element) + sizeUtils.getMarginRight(element);\n    return element.offsetWidth + margin;\n}\nexports.getTotalWidth = getTotalWidth;\nfunction getContentWidth(element) {\n    var border = sizeUtils.getBorderLeftWidth(element) + sizeUtils.getBorderRightWidth(element);\n    var padding = sizeUtils.getPaddingLeft(element) + sizeUtils.getPaddingRight(element);\n    return element.offsetWidth - border - padding;\n}\nexports.getContentWidth = getContentWidth;\nfunction getTotalScrollWidth(element) {\n    var margin = sizeUtils.getMarginLeft(element) + sizeUtils.getMarginRight(element);\n    return element.scrollWidth + margin;\n}\nexports.getTotalScrollWidth = getTotalScrollWidth;\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nfunction getContentHeight(element) {\n    var border = sizeUtils.getBorderTopWidth(element) + sizeUtils.getBorderBottomWidth(element);\n    var padding = sizeUtils.getPaddingTop(element) + sizeUtils.getPaddingBottom(element);\n    return element.offsetHeight - border - padding;\n}\nexports.getContentHeight = getContentHeight;\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nfunction getTotalHeight(element) {\n    var margin = sizeUtils.getMarginTop(element) + sizeUtils.getMarginBottom(element);\n    return element.offsetHeight + margin;\n}\nexports.getTotalHeight = getTotalHeight;\n// Gets the left coordinate of the specified element relative to the specified parent.\nfunction getRelativeLeft(element, parent) {\n    if (element === null) {\n        return 0;\n    }\n    var elementPosition = getTopLeftOffset(element);\n    var parentPosition = getTopLeftOffset(parent);\n    return elementPosition.left - parentPosition.left;\n}\nfunction getLargestChildWidth(parent, children) {\n    var childWidths = children.map(function (child) {\n        return Math.max(getTotalScrollWidth(child), getTotalWidth(child)) + getRelativeLeft(child, parent) || 0;\n    });\n    var maxWidth = Math.max.apply(Math, childWidths);\n    return maxWidth;\n}\nexports.getLargestChildWidth = getLargestChildWidth;\n// ----------------------------------------------------------------------------------------\nfunction isAncestor(testChild, testAncestor) {\n    while (testChild) {\n        if (testChild === testAncestor) {\n            return true;\n        }\n        testChild = testChild.parentNode;\n    }\n    return false;\n}\nexports.isAncestor = isAncestor;\nfunction findParentWithClass(node, clazz, stopAtClazzOrNode) {\n    while (node) {\n        if (exports.hasClass(node, clazz)) {\n            return node;\n        }\n        if (stopAtClazzOrNode) {\n            if (typeof stopAtClazzOrNode === 'string') {\n                if (exports.hasClass(node, stopAtClazzOrNode)) {\n                    return null;\n                }\n            }\n            else {\n                if (node === stopAtClazzOrNode) {\n                    return null;\n                }\n            }\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexports.findParentWithClass = findParentWithClass;\nfunction createStyleSheet(container) {\n    if (container === void 0) { container = document.getElementsByTagName('head')[0]; }\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    style.media = 'screen';\n    container.appendChild(style);\n    return style;\n}\nexports.createStyleSheet = createStyleSheet;\nvar _sharedStyleSheet = null;\nfunction getSharedStyleSheet() {\n    if (!_sharedStyleSheet) {\n        _sharedStyleSheet = createStyleSheet();\n    }\n    return _sharedStyleSheet;\n}\nfunction getDynamicStyleSheetRules(style) {\n    if (style && style.sheet && style.sheet.rules) {\n        // Chrome, IE\n        return style.sheet.rules;\n    }\n    if (style && style.sheet && style.sheet.cssRules) {\n        // FF\n        return style.sheet.cssRules;\n    }\n    return [];\n}\nfunction createCSSRule(selector, cssText, style) {\n    if (style === void 0) { style = getSharedStyleSheet(); }\n    if (!style || !cssText) {\n        return;\n    }\n    style.sheet.insertRule(selector + '{' + cssText + '}', 0);\n}\nexports.createCSSRule = createCSSRule;\nfunction removeCSSRulesContainingSelector(ruleName, style) {\n    if (style === void 0) { style = getSharedStyleSheet(); }\n    if (!style) {\n        return;\n    }\n    var rules = getDynamicStyleSheetRules(style);\n    var toDelete = [];\n    for (var i = 0; i < rules.length; i++) {\n        var rule = rules[i];\n        if (rule.selectorText.indexOf(ruleName) !== -1) {\n            toDelete.push(i);\n        }\n    }\n    for (var i = toDelete.length - 1; i >= 0; i--) {\n        style.sheet.deleteRule(toDelete[i]);\n    }\n}\nexports.removeCSSRulesContainingSelector = removeCSSRulesContainingSelector;\nfunction isHTMLElement(o) {\n    if (typeof HTMLElement === 'object') {\n        return o instanceof HTMLElement;\n    }\n    return o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';\n}\nexports.isHTMLElement = isHTMLElement;\nexports.EventType = {\n    // Mouse\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    MOUSE_UP: 'mouseup',\n    MOUSE_DOWN: 'mousedown',\n    MOUSE_OVER: 'mouseover',\n    MOUSE_MOVE: 'mousemove',\n    MOUSE_OUT: 'mouseout',\n    MOUSE_ENTER: 'mouseenter',\n    MOUSE_LEAVE: 'mouseleave',\n    CONTEXT_MENU: 'contextmenu',\n    WHEEL: 'wheel',\n    // Keyboard\n    KEY_DOWN: 'keydown',\n    KEY_PRESS: 'keypress',\n    KEY_UP: 'keyup',\n    // HTML Document\n    LOAD: 'load',\n    UNLOAD: 'unload',\n    ABORT: 'abort',\n    ERROR: 'error',\n    RESIZE: 'resize',\n    SCROLL: 'scroll',\n    // Form\n    SELECT: 'select',\n    CHANGE: 'change',\n    SUBMIT: 'submit',\n    RESET: 'reset',\n    FOCUS: 'focus',\n    FOCUS_IN: 'focusin',\n    FOCUS_OUT: 'focusout',\n    BLUR: 'blur',\n    INPUT: 'input',\n    // Local Storage\n    STORAGE: 'storage',\n    // Drag\n    DRAG_START: 'dragstart',\n    DRAG: 'drag',\n    DRAG_ENTER: 'dragenter',\n    DRAG_LEAVE: 'dragleave',\n    DRAG_OVER: 'dragover',\n    DROP: 'drop',\n    DRAG_END: 'dragend',\n    // Animation\n    ANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n    ANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n    ANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n};\nexports.EventHelper = {\n    stop: function (e, cancelBubble) {\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        else {\n            // IE8\n            e.returnValue = false;\n        }\n        if (cancelBubble) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n            else {\n                // IE8\n                e.cancelBubble = true;\n            }\n        }\n    }\n};\nfunction saveParentsScrollTop(node) {\n    var r = [];\n    for (var i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        r[i] = node.scrollTop;\n        node = node.parentNode;\n    }\n    return r;\n}\nexports.saveParentsScrollTop = saveParentsScrollTop;\nfunction restoreParentsScrollTop(node, state) {\n    for (var i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        if (node.scrollTop !== state[i]) {\n            node.scrollTop = state[i];\n        }\n        node = node.parentNode;\n    }\n}\nexports.restoreParentsScrollTop = restoreParentsScrollTop;\nvar FocusTracker = /** @class */ (function () {\n    function FocusTracker(element) {\n        var _this = this;\n        this._onDidFocus = new event_2.Emitter();\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = new event_2.Emitter();\n        this.onDidBlur = this._onDidBlur.event;\n        this.disposables = [];\n        var hasFocus = isAncestor(document.activeElement, element);\n        var loosingFocus = false;\n        var onFocus = function () {\n            loosingFocus = false;\n            if (!hasFocus) {\n                hasFocus = true;\n                _this._onDidFocus.fire();\n            }\n        };\n        var onBlur = function () {\n            if (hasFocus) {\n                loosingFocus = true;\n                window.setTimeout(function () {\n                    if (loosingFocus) {\n                        loosingFocus = false;\n                        hasFocus = false;\n                        _this._onDidBlur.fire();\n                    }\n                }, 0);\n            }\n        };\n        event_1.domEvent(element, exports.EventType.FOCUS, true)(onFocus, null, this.disposables);\n        event_1.domEvent(element, exports.EventType.BLUR, true)(onBlur, null, this.disposables);\n    }\n    FocusTracker.prototype.dispose = function () {\n        this.disposables = lifecycle_1.dispose(this.disposables);\n        this._onDidFocus.dispose();\n        this._onDidBlur.dispose();\n    };\n    return FocusTracker;\n}());\nfunction trackFocus(element) {\n    return new FocusTracker(element);\n}\nexports.trackFocus = trackFocus;\nfunction append(parent) {\n    var children = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        children[_i - 1] = arguments[_i];\n    }\n    children.forEach(function (child) { return parent.appendChild(child); });\n    return children[children.length - 1];\n}\nexports.append = append;\nfunction prepend(parent, child) {\n    parent.insertBefore(child, parent.firstChild);\n    return child;\n}\nexports.prepend = prepend;\nvar SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((.([\\w\\-]+))*)/;\nfunction $(description, attrs) {\n    var children = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        children[_i - 2] = arguments[_i];\n    }\n    var match = SELECTOR_REGEX.exec(description);\n    if (!match) {\n        throw new Error('Bad use of emmet');\n    }\n    var result = document.createElement(match[1] || 'div');\n    if (match[3]) {\n        result.id = match[3];\n    }\n    if (match[4]) {\n        result.className = match[4].replace(/\\./g, ' ').trim();\n    }\n    attrs = attrs || {};\n    Object.keys(attrs).forEach(function (name) {\n        var value = attrs[name];\n        if (/^on\\w+$/.test(name)) {\n            result[name] = value;\n        }\n        else if (name === 'selected') {\n            if (value) {\n                result.setAttribute(name, 'true');\n            }\n        }\n        else {\n            result.setAttribute(name, value);\n        }\n    });\n    arrays_1.coalesce(children)\n        .forEach(function (child) {\n        if (child instanceof Node) {\n            result.appendChild(child);\n        }\n        else {\n            result.appendChild(document.createTextNode(child));\n        }\n    });\n    return result;\n}\nexports.$ = $;\nfunction join(nodes, separator) {\n    var result = [];\n    nodes.forEach(function (node, index) {\n        if (index > 0) {\n            if (separator instanceof Node) {\n                result.push(separator.cloneNode());\n            }\n            else {\n                result.push(document.createTextNode(separator));\n            }\n        }\n        result.push(node);\n    });\n    return result;\n}\nexports.join = join;\nfunction show() {\n    var elements = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        elements[_i] = arguments[_i];\n    }\n    for (var _a = 0, elements_1 = elements; _a < elements_1.length; _a++) {\n        var element = elements_1[_a];\n        element.style.display = '';\n        element.removeAttribute('aria-hidden');\n    }\n}\nexports.show = show;\nfunction hide() {\n    var elements = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        elements[_i] = arguments[_i];\n    }\n    for (var _a = 0, elements_2 = elements; _a < elements_2.length; _a++) {\n        var element = elements_2[_a];\n        element.style.display = 'none';\n        element.setAttribute('aria-hidden', 'true');\n    }\n}\nexports.hide = hide;\nfunction findParentWithAttribute(node, attribute) {\n    while (node) {\n        if (node instanceof HTMLElement && node.hasAttribute(attribute)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nfunction removeTabIndexAndUpdateFocus(node) {\n    if (!node || !node.hasAttribute('tabIndex')) {\n        return;\n    }\n    // If we are the currently focused element and tabIndex is removed,\n    // standard DOM behavior is to move focus to the <body> element. We\n    // typically never want that, rather put focus to the closest element\n    // in the hierarchy of the parent DOM nodes.\n    if (document.activeElement === node) {\n        var parentFocusable = findParentWithAttribute(node.parentElement, 'tabIndex');\n        if (parentFocusable) {\n            parentFocusable.focus();\n        }\n    }\n    node.removeAttribute('tabindex');\n}\nexports.removeTabIndexAndUpdateFocus = removeTabIndexAndUpdateFocus;\nfunction getElementsByTagName(tag) {\n    return Array.prototype.slice.call(document.getElementsByTagName(tag), 0);\n}\nexports.getElementsByTagName = getElementsByTagName;\nfunction finalHandler(fn) {\n    return function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        fn(e);\n    };\n}\nexports.finalHandler = finalHandler;\nfunction domContentLoaded() {\n    return new Promise(function (resolve) {\n        var readyState = document.readyState;\n        if (readyState === 'complete' || (document && document.body !== null)) {\n            platform.setImmediate(resolve);\n        }\n        else {\n            window.addEventListener('DOMContentLoaded', resolve, false);\n        }\n    });\n}\nexports.domContentLoaded = domContentLoaded;\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nfunction computeScreenAwareSize(cssPx) {\n    var screenPx = window.devicePixelRatio * cssPx;\n    return Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\nexports.computeScreenAwareSize = computeScreenAwareSize;\n/**\n * See https://github.com/Microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nfunction windowOpenNoOpener(url) {\n    if (platform.isNative || browser.isEdgeWebView) {\n        // In VSCode, window.open() always returns null...\n        // The same is true for a WebView (see https://github.com/Microsoft/monaco-editor/issues/628)\n        window.open(url);\n    }\n    else {\n        var newTab = window.open();\n        if (newTab) {\n            newTab.opener = null;\n            newTab.location.href = url;\n        }\n    }\n}\nexports.windowOpenNoOpener = windowOpenNoOpener;\nfunction animate(fn) {\n    var step = function () {\n        fn();\n        stepDisposable = exports.scheduleAtNextAnimationFrame(step);\n    };\n    var stepDisposable = exports.scheduleAtNextAnimationFrame(step);\n    return lifecycle_1.toDisposable(function () { return stepDisposable.dispose(); });\n}\nexports.animate = animate;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/base/browser/dom.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/base/browser/dom.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { domEvent } from 'vs/base/browser/event';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent, StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { CharCode } from 'vs/base/common/charCode';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, IDisposable, dispose, toDisposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport { coalesce } from 'vs/base/common/arrays';\n\nexport function clearNode(node: HTMLElement): void {\n\twhile (node.firstChild) {\n\t\tnode.removeChild(node.firstChild);\n\t}\n}\n\nexport function removeNode(node: HTMLElement): void {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\nexport function isInDOM(node: Node | null): boolean {\n\twhile (node) {\n\t\tif (node === document.body) {\n\t\t\treturn true;\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\treturn false;\n}\n\ninterface IDomClassList {\n\thasClass(node: HTMLElement, className: string): boolean;\n\taddClass(node: HTMLElement, className: string): void;\n\taddClasses(node: HTMLElement, ...classNames: string[]): void;\n\tremoveClass(node: HTMLElement, className: string): void;\n\tremoveClasses(node: HTMLElement, ...classNames: string[]): void;\n\ttoggleClass(node: HTMLElement, className: string, shouldHaveIt?: boolean): void;\n}\n\nconst _manualClassList = new class implements IDomClassList {\n\n\tprivate _lastStart: number;\n\tprivate _lastEnd: number;\n\n\tprivate _findClassName(node: HTMLElement, className: string): void {\n\n\t\tlet classes = node.className;\n\t\tif (!classes) {\n\t\t\tthis._lastStart = -1;\n\t\t\treturn;\n\t\t}\n\n\t\tclassName = className.trim();\n\n\t\tlet classesLen = classes.length,\n\t\t\tclassLen = className.length;\n\n\t\tif (classLen === 0) {\n\t\t\tthis._lastStart = -1;\n\t\t\treturn;\n\t\t}\n\n\t\tif (classesLen < classLen) {\n\t\t\tthis._lastStart = -1;\n\t\t\treturn;\n\t\t}\n\n\t\tif (classes === className) {\n\t\t\tthis._lastStart = 0;\n\t\t\tthis._lastEnd = classesLen;\n\t\t\treturn;\n\t\t}\n\n\t\tlet idx = -1,\n\t\t\tidxEnd: number;\n\n\t\twhile ((idx = classes.indexOf(className, idx + 1)) >= 0) {\n\n\t\t\tidxEnd = idx + classLen;\n\n\t\t\t// a class that is followed by another class\n\t\t\tif ((idx === 0 || classes.charCodeAt(idx - 1) === CharCode.Space) && classes.charCodeAt(idxEnd) === CharCode.Space) {\n\t\t\t\tthis._lastStart = idx;\n\t\t\t\tthis._lastEnd = idxEnd + 1;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// last class\n\t\t\tif (idx > 0 && classes.charCodeAt(idx - 1) === CharCode.Space && idxEnd === classesLen) {\n\t\t\t\tthis._lastStart = idx - 1;\n\t\t\t\tthis._lastEnd = idxEnd;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// equal - duplicate of cmp above\n\t\t\tif (idx === 0 && idxEnd === classesLen) {\n\t\t\t\tthis._lastStart = 0;\n\t\t\t\tthis._lastEnd = idxEnd;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._lastStart = -1;\n\t}\n\n\thasClass(node: HTMLElement, className: string): boolean {\n\t\tthis._findClassName(node, className);\n\t\treturn this._lastStart !== -1;\n\t}\n\n\taddClasses(node: HTMLElement, ...classNames: string[]): void {\n\t\tclassNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.addClass(node, name)));\n\t}\n\n\taddClass(node: HTMLElement, className: string): void {\n\t\tif (!node.className) { // doesn't have it for sure\n\t\t\tnode.className = className;\n\t\t} else {\n\t\t\tthis._findClassName(node, className); // see if it's already there\n\t\t\tif (this._lastStart === -1) {\n\t\t\t\tnode.className = node.className + ' ' + className;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveClass(node: HTMLElement, className: string): void {\n\t\tthis._findClassName(node, className);\n\t\tif (this._lastStart === -1) {\n\t\t\treturn; // Prevent styles invalidation if not necessary\n\t\t} else {\n\t\t\tnode.className = node.className.substring(0, this._lastStart) + node.className.substring(this._lastEnd);\n\t\t}\n\t}\n\n\tremoveClasses(node: HTMLElement, ...classNames: string[]): void {\n\t\tclassNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.removeClass(node, name)));\n\t}\n\n\ttoggleClass(node: HTMLElement, className: string, shouldHaveIt?: boolean): void {\n\t\tthis._findClassName(node, className);\n\t\tif (this._lastStart !== -1 && (shouldHaveIt === undefined || !shouldHaveIt)) {\n\t\t\tthis.removeClass(node, className);\n\t\t}\n\t\tif (this._lastStart === -1 && (shouldHaveIt === undefined || shouldHaveIt)) {\n\t\t\tthis.addClass(node, className);\n\t\t}\n\t}\n};\n\nconst _nativeClassList = new class implements IDomClassList {\n\thasClass(node: HTMLElement, className: string): boolean {\n\t\treturn Boolean(className) && node.classList && node.classList.contains(className);\n\t}\n\n\taddClasses(node: HTMLElement, ...classNames: string[]): void {\n\t\tclassNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.addClass(node, name)));\n\t}\n\n\taddClass(node: HTMLElement, className: string): void {\n\t\tif (className && node.classList) {\n\t\t\tnode.classList.add(className);\n\t\t}\n\t}\n\n\tremoveClass(node: HTMLElement, className: string): void {\n\t\tif (className && node.classList) {\n\t\t\tnode.classList.remove(className);\n\t\t}\n\t}\n\n\tremoveClasses(node: HTMLElement, ...classNames: string[]): void {\n\t\tclassNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.removeClass(node, name)));\n\t}\n\n\ttoggleClass(node: HTMLElement, className: string, shouldHaveIt?: boolean): void {\n\t\tif (node.classList) {\n\t\t\tnode.classList.toggle(className, shouldHaveIt);\n\t\t}\n\t}\n};\n\n// In IE11 there is only partial support for `classList` which makes us keep our\n// custom implementation. Otherwise use the native implementation, see: http://caniuse.com/#search=classlist\nconst _classList: IDomClassList = browser.isIE ? _manualClassList : _nativeClassList;\nexport const hasClass: (node: HTMLElement, className: string) => boolean = _classList.hasClass.bind(_classList);\nexport const addClass: (node: HTMLElement, className: string) => void = _classList.addClass.bind(_classList);\nexport const addClasses: (node: HTMLElement, ...classNames: string[]) => void = _classList.addClasses.bind(_classList);\nexport const removeClass: (node: HTMLElement, className: string) => void = _classList.removeClass.bind(_classList);\nexport const removeClasses: (node: HTMLElement, ...classNames: string[]) => void = _classList.removeClasses.bind(_classList);\nexport const toggleClass: (node: HTMLElement, className: string, shouldHaveIt?: boolean) => void = _classList.toggleClass.bind(_classList);\n\nclass DomListener implements IDisposable {\n\n\tprivate _handler: (e: any) => void;\n\tprivate _node: Element | Window | Document;\n\tprivate readonly _type: string;\n\tprivate readonly _useCapture: boolean;\n\n\tconstructor(node: Element | Window | Document, type: string, handler: (e: any) => void, useCapture?: boolean) {\n\t\tthis._node = node;\n\t\tthis._type = type;\n\t\tthis._handler = handler;\n\t\tthis._useCapture = (useCapture || false);\n\t\tthis._node.addEventListener(this._type, this._handler, this._useCapture);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (!this._handler) {\n\t\t\t// Already disposed\n\t\t\treturn;\n\t\t}\n\n\t\tthis._node.removeEventListener(this._type, this._handler, this._useCapture);\n\n\t\t// Prevent leakers from holding on to the dom or handler func\n\t\tthis._node = null!;\n\t\tthis._handler = null!;\n\t}\n}\n\nexport function addDisposableListener<K extends keyof GlobalEventHandlersEventMap>(node: Element | Window | Document, type: K, handler: (event: GlobalEventHandlersEventMap[K]) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: Element | Window | Document, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: Element | Window | Document, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn new DomListener(node, type, handler, useCapture);\n}\n\nexport interface IAddStandardDisposableListenerSignature {\n\t(node: HTMLElement, type: 'click', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'mousedown', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keydown', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keypress', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keyup', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\n}\nfunction _wrapAsStandardMouseEvent(handler: (e: IMouseEvent) => void): (e: MouseEvent) => void {\n\treturn function (e: MouseEvent) {\n\t\treturn handler(new StandardMouseEvent(e));\n\t};\n}\nfunction _wrapAsStandardKeyboardEvent(handler: (e: IKeyboardEvent) => void): (e: KeyboardEvent) => void {\n\treturn function (e: KeyboardEvent) {\n\t\treturn handler(new StandardKeyboardEvent(e));\n\t};\n}\nexport let addStandardDisposableListener: IAddStandardDisposableListenerSignature = function addStandardDisposableListener(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = handler;\n\n\tif (type === 'click' || type === 'mousedown') {\n\t\twrapHandler = _wrapAsStandardMouseEvent(handler);\n\t} else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n\t\twrapHandler = _wrapAsStandardKeyboardEvent(handler);\n\t}\n\n\treturn addDisposableListener(node, type, wrapHandler, useCapture);\n};\n\nexport function addDisposableNonBubblingMouseOutListener(node: Element, handler: (event: MouseEvent) => void): IDisposable {\n\treturn addDisposableListener(node, 'mouseout', (e: MouseEvent) => {\n\t\t// Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements\n\t\tlet toElement: Node | null = <Node>(e.relatedTarget || e.target);\n\t\twhile (toElement && toElement !== node) {\n\t\t\ttoElement = toElement.parentNode;\n\t\t}\n\t\tif (toElement === node) {\n\t\t\treturn;\n\t\t}\n\n\t\thandler(e);\n\t});\n}\n\ninterface IRequestAnimationFrame {\n\t(callback: (time: number) => void): number;\n}\nlet _animationFrame: IRequestAnimationFrame | null = null;\nfunction doRequestAnimationFrame(callback: (time: number) => void): number {\n\tif (!_animationFrame) {\n\t\tconst emulatedRequestAnimationFrame = (callback: (time: number) => void): any => {\n\t\t\treturn setTimeout(() => callback(new Date().getTime()), 0);\n\t\t};\n\t\t_animationFrame = (\n\t\t\tself.requestAnimationFrame\n\t\t\t|| (<any>self).msRequestAnimationFrame\n\t\t\t|| (<any>self).webkitRequestAnimationFrame\n\t\t\t|| (<any>self).mozRequestAnimationFrame\n\t\t\t|| (<any>self).oRequestAnimationFrame\n\t\t\t|| emulatedRequestAnimationFrame\n\t\t);\n\t}\n\treturn _animationFrame.call(self, callback);\n}\n\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed immediately.\n * @return token that can be used to cancel the scheduled runner (only if `runner` was not executed immediately).\n */\nexport let runAtThisOrScheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed at the next animation frame.\n * @return token that can be used to cancel the scheduled runner.\n */\nexport let scheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n\nclass AnimationFrameQueueItem implements IDisposable {\n\n\tprivate _runner: () => void;\n\tpublic priority: number;\n\tprivate _canceled: boolean;\n\n\tconstructor(runner: () => void, priority: number = 0) {\n\t\tthis._runner = runner;\n\t\tthis.priority = priority;\n\t\tthis._canceled = false;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._canceled = true;\n\t}\n\n\tpublic execute(): void {\n\t\tif (this._canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._runner();\n\t\t} catch (e) {\n\t\t\tonUnexpectedError(e);\n\t\t}\n\t}\n\n\t// Sort by priority (largest to lowest)\n\tpublic static sort(a: AnimationFrameQueueItem, b: AnimationFrameQueueItem): number {\n\t\treturn b.priority - a.priority;\n\t}\n}\n\n(function () {\n\t/**\n\t * The runners scheduled at the next animation frame\n\t */\n\tlet NEXT_QUEUE: AnimationFrameQueueItem[] = [];\n\t/**\n\t * The runners scheduled at the current animation frame\n\t */\n\tlet CURRENT_QUEUE: AnimationFrameQueueItem[] | null = null;\n\t/**\n\t * A flag to keep track if the native requestAnimationFrame was already called\n\t */\n\tlet animFrameRequested = false;\n\t/**\n\t * A flag to indicate if currently handling a native requestAnimationFrame callback\n\t */\n\tlet inAnimationFrameRunner = false;\n\n\tlet animationFrameRunner = () => {\n\t\tanimFrameRequested = false;\n\n\t\tCURRENT_QUEUE = NEXT_QUEUE;\n\t\tNEXT_QUEUE = [];\n\n\t\tinAnimationFrameRunner = true;\n\t\twhile (CURRENT_QUEUE.length > 0) {\n\t\t\tCURRENT_QUEUE.sort(AnimationFrameQueueItem.sort);\n\t\t\tlet top = CURRENT_QUEUE.shift()!;\n\t\t\ttop.execute();\n\t\t}\n\t\tinAnimationFrameRunner = false;\n\t};\n\n\tscheduleAtNextAnimationFrame = (runner: () => void, priority: number = 0) => {\n\t\tlet item = new AnimationFrameQueueItem(runner, priority);\n\t\tNEXT_QUEUE.push(item);\n\n\t\tif (!animFrameRequested) {\n\t\t\tanimFrameRequested = true;\n\t\t\tdoRequestAnimationFrame(animationFrameRunner);\n\t\t}\n\n\t\treturn item;\n\t};\n\n\trunAtThisOrScheduleAtNextAnimationFrame = (runner: () => void, priority?: number) => {\n\t\tif (inAnimationFrameRunner) {\n\t\t\tlet item = new AnimationFrameQueueItem(runner, priority);\n\t\t\tCURRENT_QUEUE!.push(item);\n\t\t\treturn item;\n\t\t} else {\n\t\t\treturn scheduleAtNextAnimationFrame(runner, priority);\n\t\t}\n\t};\n})();\n\nexport function measure(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, 10000 /* must be early */);\n}\n\nexport function modify(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, -10000 /* must be late */);\n}\n\n/**\n * Add a throttled listener. `handler` is fired at most every 16ms or with the next animation frame (if browser supports it).\n */\nexport interface IEventMerger<R, E> {\n\t(lastEvent: R | null, currentEvent: E): R;\n}\n\nexport interface DOMEvent {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nconst MINIMUM_TIME_MS = 16;\nconst DEFAULT_EVENT_MERGER: IEventMerger<DOMEvent, DOMEvent> = function (lastEvent: DOMEvent, currentEvent: DOMEvent) {\n\treturn currentEvent;\n};\n\nclass TimeoutThrottledDomListener<R, E extends DOMEvent> extends Disposable {\n\n\tconstructor(node: any, type: string, handler: (event: R) => void, eventMerger: IEventMerger<R, E> = <any>DEFAULT_EVENT_MERGER, minimumTimeMs: number = MINIMUM_TIME_MS) {\n\t\tsuper();\n\n\t\tlet lastEvent: R | null = null;\n\t\tlet lastHandlerTime = 0;\n\t\tlet timeout = this._register(new TimeoutTimer());\n\n\t\tlet invokeHandler = () => {\n\t\t\tlastHandlerTime = (new Date()).getTime();\n\t\t\thandler(<R>lastEvent);\n\t\t\tlastEvent = null;\n\t\t};\n\n\t\tthis._register(addDisposableListener(node, type, (e) => {\n\n\t\t\tlastEvent = eventMerger(lastEvent, e);\n\t\t\tlet elapsedTime = (new Date()).getTime() - lastHandlerTime;\n\n\t\t\tif (elapsedTime >= minimumTimeMs) {\n\t\t\t\ttimeout.cancel();\n\t\t\t\tinvokeHandler();\n\t\t\t} else {\n\t\t\t\ttimeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport function addDisposableThrottledListener<R, E extends DOMEvent = DOMEvent>(node: any, type: string, handler: (event: R) => void, eventMerger?: IEventMerger<R, E>, minimumTimeMs?: number): IDisposable {\n\treturn new TimeoutThrottledDomListener<R, E>(node, type, handler, eventMerger, minimumTimeMs);\n}\n\nexport function getComputedStyle(el: HTMLElement): CSSStyleDeclaration {\n\treturn document.defaultView!.getComputedStyle(el, null);\n}\n\n// Adapted from WinJS\n// Converts a CSS positioning string for the specified element to pixels.\nconst convertToPixels: (element: HTMLElement, value: string) => number = (function () {\n\treturn function (element: HTMLElement, value: string): number {\n\t\treturn parseFloat(value) || 0;\n\t};\n})();\n\nfunction getDimension(element: HTMLElement, cssPropertyName: string, jsPropertyName: string): number {\n\tlet computedStyle: CSSStyleDeclaration = getComputedStyle(element);\n\tlet value = '0';\n\tif (computedStyle) {\n\t\tif (computedStyle.getPropertyValue) {\n\t\t\tvalue = computedStyle.getPropertyValue(cssPropertyName);\n\t\t} else {\n\t\t\t// IE8\n\t\t\tvalue = (<any>computedStyle).getAttribute(jsPropertyName);\n\t\t}\n\t}\n\treturn convertToPixels(element, value);\n}\n\nexport function getClientArea(element: HTMLElement): Dimension {\n\n\t// Try with DOM clientWidth / clientHeight\n\tif (element !== document.body) {\n\t\treturn new Dimension(element.clientWidth, element.clientHeight);\n\t}\n\n\t// Try innerWidth / innerHeight\n\tif (window.innerWidth && window.innerHeight) {\n\t\treturn new Dimension(window.innerWidth, window.innerHeight);\n\t}\n\n\t// Try with document.body.clientWidth / document.body.clientHeight\n\tif (document.body && document.body.clientWidth && document.body.clientHeight) {\n\t\treturn new Dimension(document.body.clientWidth, document.body.clientHeight);\n\t}\n\n\t// Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n\tif (document.documentElement && document.documentElement.clientWidth && document.documentElement.clientHeight) {\n\t\treturn new Dimension(document.documentElement.clientWidth, document.documentElement.clientHeight);\n\t}\n\n\tthrow new Error('Unable to figure out browser width and height');\n}\n\nconst sizeUtils = {\n\n\tgetBorderLeftWidth: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'border-left-width', 'borderLeftWidth');\n\t},\n\tgetBorderRightWidth: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'border-right-width', 'borderRightWidth');\n\t},\n\tgetBorderTopWidth: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'border-top-width', 'borderTopWidth');\n\t},\n\tgetBorderBottomWidth: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n\t},\n\n\tgetPaddingLeft: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'padding-left', 'paddingLeft');\n\t},\n\tgetPaddingRight: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'padding-right', 'paddingRight');\n\t},\n\tgetPaddingTop: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'padding-top', 'paddingTop');\n\t},\n\tgetPaddingBottom: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'padding-bottom', 'paddingBottom');\n\t},\n\n\tgetMarginLeft: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'margin-left', 'marginLeft');\n\t},\n\tgetMarginTop: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'margin-top', 'marginTop');\n\t},\n\tgetMarginRight: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'margin-right', 'marginRight');\n\t},\n\tgetMarginBottom: function (element: HTMLElement): number {\n\t\treturn getDimension(element, 'margin-bottom', 'marginBottom');\n\t},\n\t__commaSentinel: false\n};\n\n// ----------------------------------------------------------------------------------------\n// Position & Dimension\n\nexport class Dimension {\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(width: number, height: number) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n\n\tstatic equals(a: Dimension | undefined, b: Dimension | undefined): boolean {\n\t\tif (a === b) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!a || !b) {\n\t\t\treturn false;\n\t\t}\n\t\treturn a.width === b.width && a.height === b.height;\n\t}\n}\n\nexport function getTopLeftOffset(element: HTMLElement): { left: number; top: number; } {\n\t// Adapted from WinJS.Utilities.getPosition\n\t// and added borders to the mix\n\n\tlet offsetParent = element.offsetParent, top = element.offsetTop, left = element.offsetLeft;\n\n\twhile ((element = <HTMLElement>element.parentNode) !== null && element !== document.body && element !== document.documentElement) {\n\t\ttop -= element.scrollTop;\n\t\tlet c = getComputedStyle(element);\n\t\tif (c) {\n\t\t\tleft -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n\t\t}\n\n\t\tif (element === offsetParent) {\n\t\t\tleft += sizeUtils.getBorderLeftWidth(element);\n\t\t\ttop += sizeUtils.getBorderTopWidth(element);\n\t\t\ttop += element.offsetTop;\n\t\t\tleft += element.offsetLeft;\n\t\t\toffsetParent = element.offsetParent;\n\t\t}\n\t}\n\n\treturn {\n\t\tleft: left,\n\t\ttop: top\n\t};\n}\n\nexport interface IDomNodePagePosition {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n}\n\nexport function size(element: HTMLElement, width: number | null, height: number | null): void {\n\tif (typeof width === 'number') {\n\t\telement.style.width = `${width}px`;\n\t}\n\n\tif (typeof height === 'number') {\n\t\telement.style.height = `${height}px`;\n\t}\n}\n\nexport function position(element: HTMLElement, top: number, right?: number, bottom?: number, left?: number, position: string = 'absolute'): void {\n\tif (typeof top === 'number') {\n\t\telement.style.top = `${top}px`;\n\t}\n\n\tif (typeof right === 'number') {\n\t\telement.style.right = `${right}px`;\n\t}\n\n\tif (typeof bottom === 'number') {\n\t\telement.style.bottom = `${bottom}px`;\n\t}\n\n\tif (typeof left === 'number') {\n\t\telement.style.left = `${left}px`;\n\t}\n\n\telement.style.position = position;\n}\n\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nexport function getDomNodePagePosition(domNode: HTMLElement): IDomNodePagePosition {\n\tlet bb = domNode.getBoundingClientRect();\n\treturn {\n\t\tleft: bb.left + StandardWindow.scrollX,\n\t\ttop: bb.top + StandardWindow.scrollY,\n\t\twidth: bb.width,\n\t\theight: bb.height\n\t};\n}\n\nexport interface IStandardWindow {\n\treadonly scrollX: number;\n\treadonly scrollY: number;\n}\n\nexport const StandardWindow: IStandardWindow = new class implements IStandardWindow {\n\tget scrollX(): number {\n\t\tif (typeof window.scrollX === 'number') {\n\t\t\t// modern browsers\n\t\t\treturn window.scrollX;\n\t\t} else {\n\t\t\treturn document.body.scrollLeft + document.documentElement!.scrollLeft;\n\t\t}\n\t}\n\n\tget scrollY(): number {\n\t\tif (typeof window.scrollY === 'number') {\n\t\t\t// modern browsers\n\t\t\treturn window.scrollY;\n\t\t} else {\n\t\t\treturn document.body.scrollTop + document.documentElement!.scrollTop;\n\t\t}\n\t}\n};\n\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nexport function getTotalWidth(element: HTMLElement): number {\n\tlet margin = sizeUtils.getMarginLeft(element) + sizeUtils.getMarginRight(element);\n\treturn element.offsetWidth + margin;\n}\n\nexport function getContentWidth(element: HTMLElement): number {\n\tlet border = sizeUtils.getBorderLeftWidth(element) + sizeUtils.getBorderRightWidth(element);\n\tlet padding = sizeUtils.getPaddingLeft(element) + sizeUtils.getPaddingRight(element);\n\treturn element.offsetWidth - border - padding;\n}\n\nexport function getTotalScrollWidth(element: HTMLElement): number {\n\tlet margin = sizeUtils.getMarginLeft(element) + sizeUtils.getMarginRight(element);\n\treturn element.scrollWidth + margin;\n}\n\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nexport function getContentHeight(element: HTMLElement): number {\n\tlet border = sizeUtils.getBorderTopWidth(element) + sizeUtils.getBorderBottomWidth(element);\n\tlet padding = sizeUtils.getPaddingTop(element) + sizeUtils.getPaddingBottom(element);\n\treturn element.offsetHeight - border - padding;\n}\n\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nexport function getTotalHeight(element: HTMLElement): number {\n\tlet margin = sizeUtils.getMarginTop(element) + sizeUtils.getMarginBottom(element);\n\treturn element.offsetHeight + margin;\n}\n\n// Gets the left coordinate of the specified element relative to the specified parent.\nfunction getRelativeLeft(element: HTMLElement, parent: HTMLElement): number {\n\tif (element === null) {\n\t\treturn 0;\n\t}\n\n\tlet elementPosition = getTopLeftOffset(element);\n\tlet parentPosition = getTopLeftOffset(parent);\n\treturn elementPosition.left - parentPosition.left;\n}\n\nexport function getLargestChildWidth(parent: HTMLElement, children: HTMLElement[]): number {\n\tlet childWidths = children.map((child) => {\n\t\treturn Math.max(getTotalScrollWidth(child), getTotalWidth(child)) + getRelativeLeft(child, parent) || 0;\n\t});\n\tlet maxWidth = Math.max(...childWidths);\n\treturn maxWidth;\n}\n\n// ----------------------------------------------------------------------------------------\n\nexport function isAncestor(testChild: Node | null, testAncestor: Node | null): boolean {\n\twhile (testChild) {\n\t\tif (testChild === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\t\ttestChild = testChild.parentNode;\n\t}\n\n\treturn false;\n}\n\nexport function findParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): HTMLElement | null {\n\twhile (node) {\n\t\tif (hasClass(node, clazz)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tif (stopAtClazzOrNode) {\n\t\t\tif (typeof stopAtClazzOrNode === 'string') {\n\t\t\t\tif (hasClass(node, stopAtClazzOrNode)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (node === stopAtClazzOrNode) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnode = <HTMLElement>node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function createStyleSheet(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLStyleElement {\n\tlet style = document.createElement('style');\n\tstyle.type = 'text/css';\n\tstyle.media = 'screen';\n\tcontainer.appendChild(style);\n\treturn style;\n}\n\nlet _sharedStyleSheet: HTMLStyleElement | null = null;\nfunction getSharedStyleSheet(): HTMLStyleElement {\n\tif (!_sharedStyleSheet) {\n\t\t_sharedStyleSheet = createStyleSheet();\n\t}\n\treturn _sharedStyleSheet;\n}\n\nfunction getDynamicStyleSheetRules(style: any) {\n\tif (style && style.sheet && style.sheet.rules) {\n\t\t// Chrome, IE\n\t\treturn style.sheet.rules;\n\t}\n\tif (style && style.sheet && style.sheet.cssRules) {\n\t\t// FF\n\t\treturn style.sheet.cssRules;\n\t}\n\treturn [];\n}\n\nexport function createCSSRule(selector: string, cssText: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style || !cssText) {\n\t\treturn;\n\t}\n\n\t(<CSSStyleSheet>style.sheet).insertRule(selector + '{' + cssText + '}', 0);\n}\n\nexport function removeCSSRulesContainingSelector(ruleName: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style) {\n\t\treturn;\n\t}\n\n\tlet rules = getDynamicStyleSheetRules(style);\n\tlet toDelete: number[] = [];\n\tfor (let i = 0; i < rules.length; i++) {\n\t\tlet rule = rules[i];\n\t\tif (rule.selectorText.indexOf(ruleName) !== -1) {\n\t\t\ttoDelete.push(i);\n\t\t}\n\t}\n\n\tfor (let i = toDelete.length - 1; i >= 0; i--) {\n\t\t(<any>style.sheet).deleteRule(toDelete[i]);\n\t}\n}\n\nexport function isHTMLElement(o: any): o is HTMLElement {\n\tif (typeof HTMLElement === 'object') {\n\t\treturn o instanceof HTMLElement;\n\t}\n\treturn o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';\n}\n\nexport const EventType = {\n\t// Mouse\n\tCLICK: 'click' as 'click',\n\tDBLCLICK: 'dblclick' as 'dblclick',\n\tMOUSE_UP: 'mouseup' as 'mouseup',\n\tMOUSE_DOWN: 'mousedown' as 'mousedown',\n\tMOUSE_OVER: 'mouseover' as 'mouseover',\n\tMOUSE_MOVE: 'mousemove' as 'mousemove',\n\tMOUSE_OUT: 'mouseout' as 'mouseout',\n\tMOUSE_ENTER: 'mouseenter' as 'mouseenter',\n\tMOUSE_LEAVE: 'mouseleave' as 'mouseleave',\n\tCONTEXT_MENU: 'contextmenu' as 'contextmenu',\n\tWHEEL: 'wheel' as 'wheel',\n\t// Keyboard\n\tKEY_DOWN: 'keydown' as 'keydown',\n\tKEY_PRESS: 'keypress' as 'keypress',\n\tKEY_UP: 'keyup' as 'keyup',\n\t// HTML Document\n\tLOAD: 'load' as 'load',\n\tUNLOAD: 'unload' as 'unload',\n\tABORT: 'abort' as 'abort',\n\tERROR: 'error' as 'error',\n\tRESIZE: 'resize' as 'resize',\n\tSCROLL: 'scroll' as 'scroll',\n\t// Form\n\tSELECT: 'select' as 'select',\n\tCHANGE: 'change' as 'change',\n\tSUBMIT: 'submit' as 'submit',\n\tRESET: 'reset' as 'reset',\n\tFOCUS: 'focus' as 'focus',\n\tFOCUS_IN: 'focusin' as 'focusin',\n\tFOCUS_OUT: 'focusout' as 'focusout',\n\tBLUR: 'blur' as 'blur',\n\tINPUT: 'input' as 'input',\n\t// Local Storage\n\tSTORAGE: 'storage' as 'storage',\n\t// Drag\n\tDRAG_START: 'dragstart' as 'dragstart',\n\tDRAG: 'drag' as 'drag',\n\tDRAG_ENTER: 'dragenter' as 'dragenter',\n\tDRAG_LEAVE: 'dragleave' as 'dragleave',\n\tDRAG_OVER: 'dragover' as 'dragover',\n\tDROP: 'drop' as 'drop',\n\tDRAG_END: 'dragend' as 'dragend',\n\t// Animation\n\tANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n\tANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n\tANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n};\n\nexport interface EventLike {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nexport const EventHelper = {\n\tstop: function (e: EventLike, cancelBubble?: boolean) {\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\t// IE8\n\t\t\t(<any>e).returnValue = false;\n\t\t}\n\n\t\tif (cancelBubble) {\n\t\t\tif (e.stopPropagation) {\n\t\t\t\te.stopPropagation();\n\t\t\t} else {\n\t\t\t\t// IE8\n\t\t\t\t(<any>e).cancelBubble = true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport interface IFocusTracker {\n\tonDidFocus: Event<void>;\n\tonDidBlur: Event<void>;\n\tdispose(): void;\n}\n\nexport function saveParentsScrollTop(node: Element): number[] {\n\tlet r: number[] = [];\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tr[i] = node.scrollTop;\n\t\tnode = <Element>node.parentNode;\n\t}\n\treturn r;\n}\n\nexport function restoreParentsScrollTop(node: Element, state: number[]): void {\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tif (node.scrollTop !== state[i]) {\n\t\t\tnode.scrollTop = state[i];\n\t\t}\n\t\tnode = <Element>node.parentNode;\n\t}\n}\n\nclass FocusTracker implements IFocusTracker {\n\n\tprivate _onDidFocus = new Emitter<void>();\n\treadonly onDidFocus: Event<void> = this._onDidFocus.event;\n\n\tprivate _onDidBlur = new Emitter<void>();\n\treadonly onDidBlur: Event<void> = this._onDidBlur.event;\n\n\tprivate disposables: IDisposable[] = [];\n\n\tconstructor(element: HTMLElement | Window) {\n\t\tlet hasFocus = isAncestor(document.activeElement, <HTMLElement>element);\n\t\tlet loosingFocus = false;\n\n\t\tlet onFocus = () => {\n\t\t\tloosingFocus = false;\n\t\t\tif (!hasFocus) {\n\t\t\t\thasFocus = true;\n\t\t\t\tthis._onDidFocus.fire();\n\t\t\t}\n\t\t};\n\n\t\tlet onBlur = () => {\n\t\t\tif (hasFocus) {\n\t\t\t\tloosingFocus = true;\n\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\tif (loosingFocus) {\n\t\t\t\t\t\tloosingFocus = false;\n\t\t\t\t\t\thasFocus = false;\n\t\t\t\t\t\tthis._onDidBlur.fire();\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t};\n\n\t\tdomEvent(element, EventType.FOCUS, true)(onFocus, null, this.disposables);\n\t\tdomEvent(element, EventType.BLUR, true)(onBlur, null, this.disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables = dispose(this.disposables);\n\t\tthis._onDidFocus.dispose();\n\t\tthis._onDidBlur.dispose();\n\t}\n}\n\nexport function trackFocus(element: HTMLElement | Window): IFocusTracker {\n\treturn new FocusTracker(element);\n}\n\nexport function append<T extends Node>(parent: HTMLElement, ...children: T[]): T {\n\tchildren.forEach(child => parent.appendChild(child));\n\treturn children[children.length - 1];\n}\n\nexport function prepend<T extends Node>(parent: HTMLElement, child: T): T {\n\tparent.insertBefore(child, parent.firstChild);\n\treturn child;\n}\n\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((.([\\w\\-]+))*)/;\n\nexport function $<T extends HTMLElement>(description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\tlet match = SELECTOR_REGEX.exec(description);\n\n\tif (!match) {\n\t\tthrow new Error('Bad use of emmet');\n\t}\n\n\tlet result = document.createElement(match[1] || 'div');\n\n\tif (match[3]) {\n\t\tresult.id = match[3];\n\t}\n\tif (match[4]) {\n\t\tresult.className = match[4].replace(/\\./g, ' ').trim();\n\t}\n\n\tattrs = attrs || {};\n\tObject.keys(attrs).forEach(name => {\n\t\tconst value = attrs![name];\n\t\tif (/^on\\w+$/.test(name)) {\n\t\t\t(<any>result)[name] = value;\n\t\t} else if (name === 'selected') {\n\t\t\tif (value) {\n\t\t\t\tresult.setAttribute(name, 'true');\n\t\t\t}\n\n\t\t} else {\n\t\t\tresult.setAttribute(name, value);\n\t\t}\n\t});\n\n\tcoalesce(children)\n\t\t.forEach(child => {\n\t\t\tif (child instanceof Node) {\n\t\t\t\tresult.appendChild(child);\n\t\t\t} else {\n\t\t\t\tresult.appendChild(document.createTextNode(child as string));\n\t\t\t}\n\t\t});\n\n\treturn result as T;\n}\n\nexport function join(nodes: Node[], separator: Node | string): Node[] {\n\tconst result: Node[] = [];\n\n\tnodes.forEach((node, index) => {\n\t\tif (index > 0) {\n\t\t\tif (separator instanceof Node) {\n\t\t\t\tresult.push(separator.cloneNode());\n\t\t\t} else {\n\t\t\t\tresult.push(document.createTextNode(separator));\n\t\t\t}\n\t\t}\n\n\t\tresult.push(node);\n\t});\n\n\treturn result;\n}\n\nexport function show(...elements: HTMLElement[]): void {\n\tfor (let element of elements) {\n\t\telement.style.display = '';\n\t\telement.removeAttribute('aria-hidden');\n\t}\n}\n\nexport function hide(...elements: HTMLElement[]): void {\n\tfor (let element of elements) {\n\t\telement.style.display = 'none';\n\t\telement.setAttribute('aria-hidden', 'true');\n\t}\n}\n\nfunction findParentWithAttribute(node: Node | null, attribute: string): HTMLElement | null {\n\twhile (node) {\n\t\tif (node instanceof HTMLElement && node.hasAttribute(attribute)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tnode = node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function removeTabIndexAndUpdateFocus(node: HTMLElement): void {\n\tif (!node || !node.hasAttribute('tabIndex')) {\n\t\treturn;\n\t}\n\n\t// If we are the currently focused element and tabIndex is removed,\n\t// standard DOM behavior is to move focus to the <body> element. We\n\t// typically never want that, rather put focus to the closest element\n\t// in the hierarchy of the parent DOM nodes.\n\tif (document.activeElement === node) {\n\t\tlet parentFocusable = findParentWithAttribute(node.parentElement, 'tabIndex');\n\t\tif (parentFocusable) {\n\t\t\tparentFocusable.focus();\n\t\t}\n\t}\n\n\tnode.removeAttribute('tabindex');\n}\n\nexport function getElementsByTagName(tag: string): HTMLElement[] {\n\treturn Array.prototype.slice.call(document.getElementsByTagName(tag), 0);\n}\n\nexport function finalHandler<T extends DOMEvent>(fn: (event: T) => any): (event: T) => any {\n\treturn e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tfn(e);\n\t};\n}\n\nexport function domContentLoaded(): Promise<any> {\n\treturn new Promise<any>(resolve => {\n\t\tconst readyState = document.readyState;\n\t\tif (readyState === 'complete' || (document && document.body !== null)) {\n\t\t\tplatform.setImmediate(resolve);\n\t\t} else {\n\t\t\twindow.addEventListener('DOMContentLoaded', resolve, false);\n\t\t}\n\t});\n}\n\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nexport function computeScreenAwareSize(cssPx: number): number {\n\tconst screenPx = window.devicePixelRatio * cssPx;\n\treturn Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n\n/**\n * See https://github.com/Microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nexport function windowOpenNoOpener(url: string): void {\n\tif (platform.isNative || browser.isEdgeWebView) {\n\t\t// In VSCode, window.open() always returns null...\n\t\t// The same is true for a WebView (see https://github.com/Microsoft/monaco-editor/issues/628)\n\t\twindow.open(url);\n\t} else {\n\t\tlet newTab = window.open();\n\t\tif (newTab) {\n\t\t\t(newTab as any).opener = null;\n\t\t\tnewTab.location.href = url;\n\t\t}\n\t}\n}\n\nexport function animate(fn: () => void): IDisposable {\n\tconst step = () => {\n\t\tfn();\n\t\tstepDisposable = scheduleAtNextAnimationFrame(step);\n\t};\n\n\tlet stepDisposable = scheduleAtNextAnimationFrame(step);\n\treturn toDisposable(() => stepDisposable.dispose());\n}\n"]}]}