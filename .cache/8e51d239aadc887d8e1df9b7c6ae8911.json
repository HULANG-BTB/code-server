{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/watermark/browser/watermark.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/watermark/browser/watermark.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./watermark\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar objects_1 = require(\"vs/base/common/objects\");\nvar platform_1 = require(\"vs/base/common/platform\");\nvar keybinding_1 = require(\"vs/platform/keybinding/common/keybinding\");\nvar nls = require(\"vs/nls\");\nvar platform_2 = require(\"vs/platform/registry/common/platform\");\nvar configurationRegistry_1 = require(\"vs/platform/configuration/common/configurationRegistry\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar contributions_1 = require(\"vs/workbench/common/contributions\");\nvar lifecycle_2 = require(\"vs/platform/lifecycle/common/lifecycle\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar fileActions_1 = require(\"vs/workbench/contrib/files/browser/fileActions\");\nvar workspaceActions_1 = require(\"vs/workbench/browser/actions/workspaceActions\");\nvar commandsHandler_1 = require(\"vs/workbench/contrib/quickopen/browser/commandsHandler\");\nvar layoutService_1 = require(\"vs/workbench/services/layout/browser/layoutService\");\nvar debugActions_1 = require(\"vs/workbench/contrib/debug/browser/debugActions\");\nvar constants_1 = require(\"vs/workbench/contrib/search/common/constants\");\nvar quickopen_1 = require(\"vs/workbench/browser/parts/quickopen/quickopen\");\nvar terminalCommands_1 = require(\"vs/workbench/contrib/terminal/common/terminalCommands\");\nvar dom = require(\"vs/base/browser/dom\");\nvar keybindingLabel_1 = require(\"vs/base/browser/ui/keybindingLabel/keybindingLabel\");\nvar editorGroupsService_1 = require(\"vs/workbench/services/editor/common/editorGroupsService\");\nvar commands_1 = require(\"vs/platform/commands/common/commands\");\nvar $ = dom.$;\nvar showCommands = {\n    text: nls.localize('watermark.showCommands', \"Show All Commands\"),\n    id: commandsHandler_1.ShowAllCommandsAction.ID\n};\nvar quickOpen = {\n    text: nls.localize('watermark.quickOpen', \"Go to File\"),\n    id: quickopen_1.QUICKOPEN_ACTION_ID\n};\nvar openFileNonMacOnly = {\n    text: nls.localize('watermark.openFile', \"Open File\"),\n    id: workspaceActions_1.OpenFileAction.ID,\n    mac: false\n};\nvar openFolderNonMacOnly = {\n    text: nls.localize('watermark.openFolder', \"Open Folder\"),\n    id: workspaceActions_1.OpenFolderAction.ID,\n    mac: false\n};\nvar openFileOrFolderMacOnly = {\n    text: nls.localize('watermark.openFileFolder', \"Open File or Folder\"),\n    id: workspaceActions_1.OpenFileFolderAction.ID,\n    mac: true\n};\nvar openRecent = {\n    text: nls.localize('watermark.openRecent', \"Open Recent\"),\n    id: 'workbench.action.openRecent'\n};\nvar newUntitledFile = {\n    text: nls.localize('watermark.newUntitledFile', \"New Untitled File\"),\n    id: fileActions_1.GlobalNewUntitledFileAction.ID\n};\nvar newUntitledFileMacOnly = objects_1.assign({ mac: true }, newUntitledFile);\nvar toggleTerminal = {\n    text: nls.localize({ key: 'watermark.toggleTerminal', comment: ['toggle is a verb here'] }, \"Toggle Terminal\"),\n    id: terminalCommands_1.TERMINAL_COMMAND_ID.TOGGLE\n};\nvar findInFiles = {\n    text: nls.localize('watermark.findInFiles', \"Find in Files\"),\n    id: constants_1.FindInFilesActionId\n};\nvar startDebugging = {\n    text: nls.localize('watermark.startDebugging', \"Start Debugging\"),\n    id: debugActions_1.StartAction.ID\n};\nvar noFolderEntries = [\n    showCommands,\n    openFileNonMacOnly,\n    openFolderNonMacOnly,\n    openFileOrFolderMacOnly,\n    openRecent,\n    newUntitledFileMacOnly\n];\nvar folderEntries = [\n    showCommands,\n    quickOpen,\n    findInFiles,\n    startDebugging,\n    toggleTerminal\n];\nvar WORKBENCH_TIPS_ENABLED_KEY = 'workbench.tips.enabled';\nvar WatermarkContribution = /** @class */ (function () {\n    function WatermarkContribution(lifecycleService, layoutService, keybindingService, contextService, configurationService, editorGroupsService) {\n        var _this = this;\n        this.layoutService = layoutService;\n        this.keybindingService = keybindingService;\n        this.contextService = contextService;\n        this.configurationService = configurationService;\n        this.editorGroupsService = editorGroupsService;\n        this.toDispose = [];\n        this.workbenchState = contextService.getWorkbenchState();\n        lifecycleService.onShutdown(this.dispose, this);\n        this.enabled = this.configurationService.getValue(WORKBENCH_TIPS_ENABLED_KEY);\n        if (this.enabled) {\n            this.create();\n        }\n        this.toDispose.push(this.configurationService.onDidChangeConfiguration(function (e) {\n            if (e.affectsConfiguration(WORKBENCH_TIPS_ENABLED_KEY)) {\n                var enabled = _this.configurationService.getValue(WORKBENCH_TIPS_ENABLED_KEY);\n                if (enabled !== _this.enabled) {\n                    _this.enabled = enabled;\n                    if (_this.enabled) {\n                        _this.create();\n                    }\n                    else {\n                        _this.destroy();\n                    }\n                }\n            }\n        }));\n        this.toDispose.push(this.contextService.onDidChangeWorkbenchState(function (e) {\n            var previousWorkbenchState = _this.workbenchState;\n            _this.workbenchState = _this.contextService.getWorkbenchState();\n            if (_this.enabled && _this.workbenchState !== previousWorkbenchState) {\n                _this.recreate();\n            }\n        }));\n    }\n    WatermarkContribution.prototype.create = function () {\n        var _this = this;\n        var container = this.layoutService.getContainer(layoutService_1.Parts.EDITOR_PART);\n        container.classList.add('has-watermark');\n        this.watermark = $('.watermark');\n        var box = dom.append(this.watermark, $('.watermark-box'));\n        var folder = this.workbenchState !== workspace_1.WorkbenchState.EMPTY;\n        var selected = folder ? folderEntries : noFolderEntries\n            .filter(function (entry) { return !('mac' in entry) || entry.mac === platform_1.isMacintosh; })\n            .filter(function (entry) { return !!commands_1.CommandsRegistry.getCommand(entry.id); });\n        var update = function () {\n            dom.clearNode(box);\n            selected.map(function (entry) {\n                var dl = dom.append(box, $('dl'));\n                var dt = dom.append(dl, $('dt'));\n                dt.textContent = entry.text;\n                var dd = dom.append(dl, $('dd'));\n                var keybinding = new keybindingLabel_1.KeybindingLabel(dd, platform_1.OS, { renderUnboundKeybindings: true });\n                keybinding.set(_this.keybindingService.lookupKeybinding(entry.id));\n                dd.innerHTML = keybinding.element.outerHTML;\n            });\n        };\n        update();\n        dom.prepend(container.firstElementChild, this.watermark);\n        this.toDispose.push(this.keybindingService.onDidUpdateKeybindings(update));\n        this.toDispose.push(this.editorGroupsService.onDidLayout(function (dimension) { return _this.handleEditorPartSize(container, dimension); }));\n        this.handleEditorPartSize(container, this.editorGroupsService.dimension);\n    };\n    WatermarkContribution.prototype.handleEditorPartSize = function (container, dimension) {\n        if (dimension.height <= 478) {\n            dom.addClass(container, 'max-height-478px');\n        }\n        else {\n            dom.removeClass(container, 'max-height-478px');\n        }\n    };\n    WatermarkContribution.prototype.destroy = function () {\n        if (this.watermark) {\n            this.watermark.remove();\n            var container = this.layoutService.getContainer(layoutService_1.Parts.EDITOR_PART);\n            container.classList.remove('has-watermark');\n            this.dispose();\n        }\n    };\n    WatermarkContribution.prototype.recreate = function () {\n        this.destroy();\n        this.create();\n    };\n    WatermarkContribution.prototype.dispose = function () {\n        this.toDispose = lifecycle_1.dispose(this.toDispose);\n    };\n    WatermarkContribution = tslib_1.__decorate([\n        tslib_1.__param(0, lifecycle_2.ILifecycleService),\n        tslib_1.__param(1, layoutService_1.IWorkbenchLayoutService),\n        tslib_1.__param(2, keybinding_1.IKeybindingService),\n        tslib_1.__param(3, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(4, configuration_1.IConfigurationService),\n        tslib_1.__param(5, editorGroupsService_1.IEditorGroupsService)\n    ], WatermarkContribution);\n    return WatermarkContribution;\n}());\nexports.WatermarkContribution = WatermarkContribution;\nplatform_2.Registry.as(contributions_1.Extensions.Workbench)\n    .registerWorkbenchContribution(WatermarkContribution, lifecycle_2.LifecyclePhase.Restored);\nplatform_2.Registry.as(configurationRegistry_1.Extensions.Configuration)\n    .registerConfiguration({\n    'id': 'workbench',\n    'order': 7,\n    'title': nls.localize('workbenchConfigurationTitle', \"Workbench\"),\n    'properties': {\n        'workbench.tips.enabled': {\n            'type': 'boolean',\n            'default': true,\n            'description': nls.localize('tips.enabled', \"When enabled, will show the watermark tips when no editor is open.\")\n        },\n    }\n});\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/watermark/browser/watermark.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/watermark/browser/watermark.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./watermark';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { assign } from 'vs/base/common/objects';\nimport { isMacintosh, OS } from 'vs/base/common/platform';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport * as nls from 'vs/nls';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from 'vs/platform/configuration/common/configurationRegistry';\nimport { IWorkspaceContextService, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { ILifecycleService, LifecyclePhase } from 'vs/platform/lifecycle/common/lifecycle';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { GlobalNewUntitledFileAction } from 'vs/workbench/contrib/files/browser/fileActions';\nimport { OpenFolderAction, OpenFileFolderAction, OpenFileAction } from 'vs/workbench/browser/actions/workspaceActions';\nimport { ShowAllCommandsAction } from 'vs/workbench/contrib/quickopen/browser/commandsHandler';\nimport { Parts, IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { StartAction } from 'vs/workbench/contrib/debug/browser/debugActions';\nimport { FindInFilesActionId } from 'vs/workbench/contrib/search/common/constants';\nimport { QUICKOPEN_ACTION_ID } from 'vs/workbench/browser/parts/quickopen/quickopen';\nimport { TERMINAL_COMMAND_ID } from 'vs/workbench/contrib/terminal/common/terminalCommands';\nimport * as dom from 'vs/base/browser/dom';\nimport { KeybindingLabel } from 'vs/base/browser/ui/keybindingLabel/keybindingLabel';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { IDimension } from 'vs/platform/layout/browser/layoutService';\n\nconst $ = dom.$;\n\ninterface WatermarkEntry {\n\ttext: string;\n\tid: string;\n\tmac?: boolean;\n}\n\nconst showCommands: WatermarkEntry = {\n\ttext: nls.localize('watermark.showCommands', \"Show All Commands\"),\n\tid: ShowAllCommandsAction.ID\n};\nconst quickOpen: WatermarkEntry = {\n\ttext: nls.localize('watermark.quickOpen', \"Go to File\"),\n\tid: QUICKOPEN_ACTION_ID\n};\nconst openFileNonMacOnly: WatermarkEntry = {\n\ttext: nls.localize('watermark.openFile', \"Open File\"),\n\tid: OpenFileAction.ID,\n\tmac: false\n};\nconst openFolderNonMacOnly: WatermarkEntry = {\n\ttext: nls.localize('watermark.openFolder', \"Open Folder\"),\n\tid: OpenFolderAction.ID,\n\tmac: false\n};\nconst openFileOrFolderMacOnly: WatermarkEntry = {\n\ttext: nls.localize('watermark.openFileFolder', \"Open File or Folder\"),\n\tid: OpenFileFolderAction.ID,\n\tmac: true\n};\nconst openRecent: WatermarkEntry = {\n\ttext: nls.localize('watermark.openRecent', \"Open Recent\"),\n\tid: 'workbench.action.openRecent'\n};\nconst newUntitledFile: WatermarkEntry = {\n\ttext: nls.localize('watermark.newUntitledFile', \"New Untitled File\"),\n\tid: GlobalNewUntitledFileAction.ID\n};\nconst newUntitledFileMacOnly: WatermarkEntry = assign({ mac: true }, newUntitledFile);\nconst toggleTerminal: WatermarkEntry = {\n\ttext: nls.localize({ key: 'watermark.toggleTerminal', comment: ['toggle is a verb here'] }, \"Toggle Terminal\"),\n\tid: TERMINAL_COMMAND_ID.TOGGLE\n};\n\nconst findInFiles: WatermarkEntry = {\n\ttext: nls.localize('watermark.findInFiles', \"Find in Files\"),\n\tid: FindInFilesActionId\n};\nconst startDebugging: WatermarkEntry = {\n\ttext: nls.localize('watermark.startDebugging', \"Start Debugging\"),\n\tid: StartAction.ID\n};\n\nconst noFolderEntries = [\n\tshowCommands,\n\topenFileNonMacOnly,\n\topenFolderNonMacOnly,\n\topenFileOrFolderMacOnly,\n\topenRecent,\n\tnewUntitledFileMacOnly\n];\n\nconst folderEntries = [\n\tshowCommands,\n\tquickOpen,\n\tfindInFiles,\n\tstartDebugging,\n\ttoggleTerminal\n];\n\nconst WORKBENCH_TIPS_ENABLED_KEY = 'workbench.tips.enabled';\n\nexport class WatermarkContribution implements IWorkbenchContribution {\n\n\tprivate toDispose: IDisposable[] = [];\n\tprivate watermark: HTMLElement;\n\tprivate enabled: boolean;\n\tprivate workbenchState: WorkbenchState;\n\n\tconstructor(\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEditorGroupsService private readonly editorGroupsService: IEditorGroupsService\n\t) {\n\t\tthis.workbenchState = contextService.getWorkbenchState();\n\n\t\tlifecycleService.onShutdown(this.dispose, this);\n\t\tthis.enabled = this.configurationService.getValue<boolean>(WORKBENCH_TIPS_ENABLED_KEY);\n\t\tif (this.enabled) {\n\t\t\tthis.create();\n\t\t}\n\t\tthis.toDispose.push(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(WORKBENCH_TIPS_ENABLED_KEY)) {\n\t\t\t\tconst enabled = this.configurationService.getValue<boolean>(WORKBENCH_TIPS_ENABLED_KEY);\n\t\t\t\tif (enabled !== this.enabled) {\n\t\t\t\t\tthis.enabled = enabled;\n\t\t\t\t\tif (this.enabled) {\n\t\t\t\t\t\tthis.create();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(this.contextService.onDidChangeWorkbenchState(e => {\n\t\t\tconst previousWorkbenchState = this.workbenchState;\n\t\t\tthis.workbenchState = this.contextService.getWorkbenchState();\n\n\t\t\tif (this.enabled && this.workbenchState !== previousWorkbenchState) {\n\t\t\t\tthis.recreate();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate create(): void {\n\t\tconst container = this.layoutService.getContainer(Parts.EDITOR_PART);\n\t\tcontainer.classList.add('has-watermark');\n\n\t\tthis.watermark = $('.watermark');\n\t\tconst box = dom.append(this.watermark, $('.watermark-box'));\n\t\tconst folder = this.workbenchState !== WorkbenchState.EMPTY;\n\t\tconst selected = folder ? folderEntries : noFolderEntries\n\t\t\t.filter(entry => !('mac' in entry) || entry.mac === isMacintosh)\n\t\t\t.filter(entry => !!CommandsRegistry.getCommand(entry.id));\n\t\tconst update = () => {\n\t\t\tdom.clearNode(box);\n\t\t\tselected.map(entry => {\n\t\t\t\tconst dl = dom.append(box, $('dl'));\n\t\t\t\tconst dt = dom.append(dl, $('dt'));\n\t\t\t\tdt.textContent = entry.text;\n\t\t\t\tconst dd = dom.append(dl, $('dd'));\n\t\t\t\tconst keybinding = new KeybindingLabel(dd, OS, { renderUnboundKeybindings: true });\n\t\t\t\tkeybinding.set(this.keybindingService.lookupKeybinding(entry.id));\n\t\t\t\tdd.innerHTML = keybinding.element.outerHTML;\n\t\t\t});\n\t\t};\n\t\tupdate();\n\t\tdom.prepend(container.firstElementChild as HTMLElement, this.watermark);\n\t\tthis.toDispose.push(this.keybindingService.onDidUpdateKeybindings(update));\n\t\tthis.toDispose.push(this.editorGroupsService.onDidLayout(dimension => this.handleEditorPartSize(container, dimension)));\n\t\tthis.handleEditorPartSize(container, this.editorGroupsService.dimension);\n\t}\n\n\tprivate handleEditorPartSize(container: HTMLElement, dimension: IDimension): void {\n\t\tif (dimension.height <= 478) {\n\t\t\tdom.addClass(container, 'max-height-478px');\n\t\t} else {\n\t\t\tdom.removeClass(container, 'max-height-478px');\n\t\t}\n\t}\n\n\tprivate destroy(): void {\n\t\tif (this.watermark) {\n\t\t\tthis.watermark.remove();\n\t\t\tconst container = this.layoutService.getContainer(Parts.EDITOR_PART);\n\t\t\tcontainer.classList.remove('has-watermark');\n\t\t\tthis.dispose();\n\t\t}\n\t}\n\n\tprivate recreate(): void {\n\t\tthis.destroy();\n\t\tthis.create();\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.toDispose = dispose(this.toDispose);\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench)\n\t.registerWorkbenchContribution(WatermarkContribution, LifecyclePhase.Restored);\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration)\n\t.registerConfiguration({\n\t\t'id': 'workbench',\n\t\t'order': 7,\n\t\t'title': nls.localize('workbenchConfigurationTitle', \"Workbench\"),\n\t\t'properties': {\n\t\t\t'workbench.tips.enabled': {\n\t\t\t\t'type': 'boolean',\n\t\t\t\t'default': true,\n\t\t\t\t'description': nls.localize('tips.enabled', \"When enabled, will show the watermark tips when no editor is open.\")\n\t\t\t},\n\t\t}\n\t});"]}]}