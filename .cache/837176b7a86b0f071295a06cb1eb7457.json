{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/extensions/electron-browser/extensionsWidgets.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/extensions/electron-browser/extensionsWidgets.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./media/extensionsWidgets\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar extensions_1 = require(\"../common/extensions\");\nvar dom_1 = require(\"vs/base/browser/dom\");\nvar platform = require(\"vs/base/common/platform\");\nvar nls_1 = require(\"vs/nls\");\nvar extensionManagement_1 = require(\"vs/platform/extensionManagement/common/extensionManagement\");\nvar label_1 = require(\"vs/platform/label/common/label\");\nvar extensionsActions_1 = require(\"vs/workbench/contrib/extensions/electron-browser/extensionsActions\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar theme_1 = require(\"vs/workbench/common/theme\");\nvar workspace_1 = require(\"vs/platform/workspace/common/workspace\");\nvar remoteHosts_1 = require(\"vs/platform/remote/common/remoteHosts\");\nvar windows_1 = require(\"vs/platform/windows/common/windows\");\nvar ExtensionWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(ExtensionWidget, _super);\n    function ExtensionWidget() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(ExtensionWidget.prototype, \"extension\", {\n        get: function () { return this._extension; },\n        set: function (extension) { this._extension = extension; this.update(); },\n        enumerable: true,\n        configurable: true\n    });\n    ExtensionWidget.prototype.update = function () { this.render(); };\n    return ExtensionWidget;\n}(lifecycle_1.Disposable));\nexports.ExtensionWidget = ExtensionWidget;\nvar Label = /** @class */ (function (_super) {\n    tslib_1.__extends(Label, _super);\n    function Label(element, fn, extensionsWorkbenchService) {\n        var _this = _super.call(this) || this;\n        _this.element = element;\n        _this.fn = fn;\n        _this.render();\n        return _this;\n    }\n    Label.prototype.render = function () {\n        this.element.textContent = this.extension ? this.fn(this.extension) : '';\n    };\n    Label = tslib_1.__decorate([\n        tslib_1.__param(2, extensions_1.IExtensionsWorkbenchService)\n    ], Label);\n    return Label;\n}(ExtensionWidget));\nexports.Label = Label;\nvar InstallCountWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(InstallCountWidget, _super);\n    function InstallCountWidget(container, small, extensionsWorkbenchService) {\n        var _this = _super.call(this) || this;\n        _this.container = container;\n        _this.small = small;\n        dom_1.addClass(container, 'extension-install-count');\n        _this.render();\n        return _this;\n    }\n    InstallCountWidget.prototype.render = function () {\n        this.container.innerHTML = '';\n        if (!this.extension) {\n            return;\n        }\n        var installCount = this.extension.installCount;\n        if (installCount === undefined) {\n            return;\n        }\n        var installLabel;\n        if (this.small) {\n            if (installCount > 1000000) {\n                installLabel = Math.floor(installCount / 100000) / 10 + \"M\";\n            }\n            else if (installCount > 1000) {\n                installLabel = Math.floor(installCount / 1000) + \"K\";\n            }\n            else {\n                installLabel = String(installCount);\n            }\n        }\n        else {\n            installLabel = installCount.toLocaleString(platform.locale);\n        }\n        dom_1.append(this.container, dom_1.$('span.octicon.octicon-cloud-download'));\n        var count = dom_1.append(this.container, dom_1.$('span.count'));\n        count.textContent = installLabel;\n    };\n    InstallCountWidget = tslib_1.__decorate([\n        tslib_1.__param(2, extensions_1.IExtensionsWorkbenchService)\n    ], InstallCountWidget);\n    return InstallCountWidget;\n}(ExtensionWidget));\nexports.InstallCountWidget = InstallCountWidget;\nvar RatingsWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(RatingsWidget, _super);\n    function RatingsWidget(container, small) {\n        var _this = _super.call(this) || this;\n        _this.container = container;\n        _this.small = small;\n        dom_1.addClass(container, 'extension-ratings');\n        if (_this.small) {\n            dom_1.addClass(container, 'small');\n        }\n        _this.render();\n        return _this;\n    }\n    RatingsWidget.prototype.render = function () {\n        this.container.innerHTML = '';\n        if (!this.extension) {\n            return;\n        }\n        if (this.extension.rating === undefined) {\n            return;\n        }\n        if (this.small && !this.extension.ratingCount) {\n            return;\n        }\n        var rating = Math.round(this.extension.rating * 2) / 2;\n        if (this.small) {\n            dom_1.append(this.container, dom_1.$('span.full.star'));\n            var count = dom_1.append(this.container, dom_1.$('span.count'));\n            count.textContent = String(rating);\n        }\n        else {\n            for (var i = 1; i <= 5; i++) {\n                if (rating >= i) {\n                    dom_1.append(this.container, dom_1.$('span.full.star'));\n                }\n                else if (rating >= i - 0.5) {\n                    dom_1.append(this.container, dom_1.$('span.half.star'));\n                }\n                else {\n                    dom_1.append(this.container, dom_1.$('span.empty.star'));\n                }\n            }\n        }\n        this.container.title = this.extension.ratingCount === 1 ? nls_1.localize('ratedBySingleUser', \"Rated by 1 user\")\n            : typeof this.extension.ratingCount === 'number' && this.extension.ratingCount > 1 ? nls_1.localize('ratedByUsers', \"Rated by {0} users\", this.extension.ratingCount) : nls_1.localize('noRating', \"No rating\");\n    };\n    return RatingsWidget;\n}(ExtensionWidget));\nexports.RatingsWidget = RatingsWidget;\nvar RecommendationWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(RecommendationWidget, _super);\n    function RecommendationWidget(parent, themeService, extensionTipsService) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.themeService = themeService;\n        _this.extensionTipsService = extensionTipsService;\n        _this.disposables = [];\n        _this.render();\n        _this._register(lifecycle_1.toDisposable(function () { return _this.clear(); }));\n        _this._register(_this.extensionTipsService.onRecommendationChange(function () { return _this.render(); }));\n        return _this;\n    }\n    RecommendationWidget.prototype.clear = function () {\n        this.parent.title = '';\n        this.parent.setAttribute('aria-label', this.extension ? nls_1.localize('viewExtensionDetailsAria', \"{0}. Press enter for extension details.\", this.extension.displayName) : '');\n        if (this.element) {\n            this.parent.removeChild(this.element);\n        }\n        this.element = undefined;\n        this.disposables = lifecycle_1.dispose(this.disposables);\n    };\n    RecommendationWidget.prototype.render = function () {\n        this.clear();\n        if (!this.extension) {\n            return;\n        }\n        var extRecommendations = this.extensionTipsService.getAllRecommendationsWithReason();\n        if (extRecommendations[this.extension.identifier.id.toLowerCase()]) {\n            this.element = dom_1.append(this.parent, dom_1.$('div.bookmark'));\n            var recommendation_1 = dom_1.append(this.element, dom_1.$('.recommendation'));\n            dom_1.append(recommendation_1, dom_1.$('span.octicon.octicon-star'));\n            var applyBookmarkStyle = function (theme) {\n                var bgColor = theme.getColor(extensionsActions_1.extensionButtonProminentBackground);\n                var fgColor = theme.getColor(extensionsActions_1.extensionButtonProminentForeground);\n                recommendation_1.style.borderTopColor = bgColor ? bgColor.toString() : 'transparent';\n                recommendation_1.style.color = fgColor ? fgColor.toString() : 'white';\n            };\n            applyBookmarkStyle(this.themeService.getTheme());\n            this.themeService.onThemeChange(applyBookmarkStyle, this, this.disposables);\n            this.parent.title = extRecommendations[this.extension.identifier.id.toLowerCase()].reasonText;\n            this.parent.setAttribute('aria-label', nls_1.localize('viewRecommendedExtensionDetailsAria', \"{0}. {1} Press enter for extension details.\", this.extension.displayName, extRecommendations[this.extension.identifier.id.toLowerCase()].reasonText));\n        }\n    };\n    RecommendationWidget = tslib_1.__decorate([\n        tslib_1.__param(1, themeService_1.IThemeService),\n        tslib_1.__param(2, extensionManagement_1.IExtensionTipsService)\n    ], RecommendationWidget);\n    return RecommendationWidget;\n}(ExtensionWidget));\nexports.RecommendationWidget = RecommendationWidget;\nvar RemoteBadgeWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(RemoteBadgeWidget, _super);\n    function RemoteBadgeWidget(parent, labelService, themeService, extensionManagementServerService, workspaceContextService, windowService) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.labelService = labelService;\n        _this.themeService = themeService;\n        _this.extensionManagementServerService = extensionManagementServerService;\n        _this.workspaceContextService = workspaceContextService;\n        _this.windowService = windowService;\n        _this.disposables = [];\n        _this.render();\n        _this._register(lifecycle_1.toDisposable(function () { return _this.clear(); }));\n        return _this;\n    }\n    RemoteBadgeWidget.prototype.clear = function () {\n        if (this.element) {\n            this.parent.removeChild(this.element);\n        }\n        this.element = null;\n        this.disposables = lifecycle_1.dispose(this.disposables);\n    };\n    RemoteBadgeWidget.prototype.render = function () {\n        var _this = this;\n        this.clear();\n        if (!this.extension || !this.extension.local) {\n            return;\n        }\n        var server = this.extensionManagementServerService.getExtensionManagementServer(this.extension.local.location);\n        if (server === this.extensionManagementServerService.remoteExtensionManagementServer) {\n            this.element = dom_1.append(this.parent, dom_1.$('div.extension-remote-badge'));\n            dom_1.append(this.element, dom_1.$('span.octicon.octicon-file-symlink-directory'));\n            var applyBadgeStyle = function () {\n                if (!_this.element) {\n                    return;\n                }\n                var bgColor = _this.themeService.getTheme().getColor(theme_1.STATUS_BAR_HOST_NAME_BACKGROUND);\n                var fgColor = _this.workspaceContextService.getWorkbenchState() === workspace_1.WorkbenchState.EMPTY ? _this.themeService.getTheme().getColor(theme_1.STATUS_BAR_NO_FOLDER_FOREGROUND) : _this.themeService.getTheme().getColor(theme_1.STATUS_BAR_FOREGROUND);\n                _this.element.style.backgroundColor = bgColor ? bgColor.toString() : '';\n                _this.element.style.color = fgColor ? fgColor.toString() : '';\n            };\n            applyBadgeStyle();\n            this.themeService.onThemeChange(applyBadgeStyle, this, this.disposables);\n            this.workspaceContextService.onDidChangeWorkbenchState(applyBadgeStyle, this, this.disposables);\n            var updateTitle_1 = function () {\n                if (_this.element) {\n                    _this.element.title = nls_1.localize('remote extension title', \"Extension in {0}\", _this.labelService.getHostLabel(remoteHosts_1.REMOTE_HOST_SCHEME, _this.windowService.getConfiguration().remoteAuthority));\n                }\n            };\n            this.labelService.onDidChangeFormatters(function () { return updateTitle_1(); }, this, this.disposables);\n            updateTitle_1();\n        }\n    };\n    RemoteBadgeWidget = tslib_1.__decorate([\n        tslib_1.__param(1, label_1.ILabelService),\n        tslib_1.__param(2, themeService_1.IThemeService),\n        tslib_1.__param(3, extensionManagement_1.IExtensionManagementServerService),\n        tslib_1.__param(4, workspace_1.IWorkspaceContextService),\n        tslib_1.__param(5, windows_1.IWindowService)\n    ], RemoteBadgeWidget);\n    return RemoteBadgeWidget;\n}(ExtensionWidget));\nexports.RemoteBadgeWidget = RemoteBadgeWidget;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/extensions/electron-browser/extensionsWidgets.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/contrib/extensions/electron-browser/extensionsWidgets.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/extensionsWidgets';\nimport { Disposable, IDisposable, dispose, toDisposable } from 'vs/base/common/lifecycle';\nimport { IExtension, IExtensionsWorkbenchService, IExtensionContainer } from '../common/extensions';\nimport { append, $, addClass } from 'vs/base/browser/dom';\nimport * as platform from 'vs/base/common/platform';\nimport { localize } from 'vs/nls';\nimport { IExtensionManagementServerService, IExtensionTipsService } from 'vs/platform/extensionManagement/common/extensionManagement';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { extensionButtonProminentBackground, extensionButtonProminentForeground } from 'vs/workbench/contrib/extensions/electron-browser/extensionsActions';\nimport { IThemeService, ITheme } from 'vs/platform/theme/common/themeService';\nimport { STATUS_BAR_HOST_NAME_BACKGROUND, STATUS_BAR_FOREGROUND, STATUS_BAR_NO_FOLDER_FOREGROUND } from 'vs/workbench/common/theme';\nimport { IWorkspaceContextService, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { REMOTE_HOST_SCHEME } from 'vs/platform/remote/common/remoteHosts';\nimport { IWindowService } from 'vs/platform/windows/common/windows';\n\nexport abstract class ExtensionWidget extends Disposable implements IExtensionContainer {\n\tprivate _extension: IExtension;\n\tget extension(): IExtension { return this._extension; }\n\tset extension(extension: IExtension) { this._extension = extension; this.update(); }\n\tupdate(): void { this.render(); }\n\tabstract render(): void;\n}\n\nexport class Label extends ExtensionWidget {\n\n\tconstructor(\n\t\tprivate element: HTMLElement,\n\t\tprivate fn: (extension: IExtension) => string,\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService\n\t) {\n\t\tsuper();\n\t\tthis.render();\n\t}\n\n\trender(): void {\n\t\tthis.element.textContent = this.extension ? this.fn(this.extension) : '';\n\t}\n}\n\nexport class InstallCountWidget extends ExtensionWidget {\n\n\tconstructor(\n\t\tprivate container: HTMLElement,\n\t\tprivate small: boolean,\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService\n\t) {\n\t\tsuper();\n\t\taddClass(container, 'extension-install-count');\n\t\tthis.render();\n\t}\n\n\trender(): void {\n\t\tthis.container.innerHTML = '';\n\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst installCount = this.extension.installCount;\n\n\t\tif (installCount === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet installLabel: string;\n\n\t\tif (this.small) {\n\t\t\tif (installCount > 1000000) {\n\t\t\t\tinstallLabel = `${Math.floor(installCount / 100000) / 10}M`;\n\t\t\t} else if (installCount > 1000) {\n\t\t\t\tinstallLabel = `${Math.floor(installCount / 1000)}K`;\n\t\t\t} else {\n\t\t\t\tinstallLabel = String(installCount);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tinstallLabel = installCount.toLocaleString(platform.locale);\n\t\t}\n\n\t\tappend(this.container, $('span.octicon.octicon-cloud-download'));\n\t\tconst count = append(this.container, $('span.count'));\n\t\tcount.textContent = installLabel;\n\t}\n}\n\nexport class RatingsWidget extends ExtensionWidget {\n\n\tconstructor(\n\t\tprivate container: HTMLElement,\n\t\tprivate small: boolean\n\t) {\n\t\tsuper();\n\t\taddClass(container, 'extension-ratings');\n\n\t\tif (this.small) {\n\t\t\taddClass(container, 'small');\n\t\t}\n\n\t\tthis.render();\n\t}\n\n\trender(): void {\n\t\tthis.container.innerHTML = '';\n\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extension.rating === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.small && !this.extension.ratingCount) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rating = Math.round(this.extension.rating * 2) / 2;\n\n\t\tif (this.small) {\n\t\t\tappend(this.container, $('span.full.star'));\n\n\t\t\tconst count = append(this.container, $('span.count'));\n\t\t\tcount.textContent = String(rating);\n\t\t} else {\n\t\t\tfor (let i = 1; i <= 5; i++) {\n\t\t\t\tif (rating >= i) {\n\t\t\t\t\tappend(this.container, $('span.full.star'));\n\t\t\t\t} else if (rating >= i - 0.5) {\n\t\t\t\t\tappend(this.container, $('span.half.star'));\n\t\t\t\t} else {\n\t\t\t\t\tappend(this.container, $('span.empty.star'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.container.title = this.extension.ratingCount === 1 ? localize('ratedBySingleUser', \"Rated by 1 user\")\n\t\t\t: typeof this.extension.ratingCount === 'number' && this.extension.ratingCount > 1 ? localize('ratedByUsers', \"Rated by {0} users\", this.extension.ratingCount) : localize('noRating', \"No rating\");\n\t}\n}\n\nexport class RecommendationWidget extends ExtensionWidget {\n\n\tprivate element?: HTMLElement;\n\tprivate disposables: IDisposable[] = [];\n\n\tconstructor(\n\t\tprivate parent: HTMLElement,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IExtensionTipsService private readonly extensionTipsService: IExtensionTipsService\n\t) {\n\t\tsuper();\n\t\tthis.render();\n\t\tthis._register(toDisposable(() => this.clear()));\n\t\tthis._register(this.extensionTipsService.onRecommendationChange(() => this.render()));\n\t}\n\n\tprivate clear(): void {\n\t\tthis.parent.title = '';\n\t\tthis.parent.setAttribute('aria-label', this.extension ? localize('viewExtensionDetailsAria', \"{0}. Press enter for extension details.\", this.extension.displayName) : '');\n\t\tif (this.element) {\n\t\t\tthis.parent.removeChild(this.element);\n\t\t}\n\t\tthis.element = undefined;\n\t\tthis.disposables = dispose(this.disposables);\n\t}\n\n\trender(): void {\n\t\tthis.clear();\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tconst extRecommendations = this.extensionTipsService.getAllRecommendationsWithReason();\n\t\tif (extRecommendations[this.extension.identifier.id.toLowerCase()]) {\n\t\t\tthis.element = append(this.parent, $('div.bookmark'));\n\t\t\tconst recommendation = append(this.element, $('.recommendation'));\n\t\t\tappend(recommendation, $('span.octicon.octicon-star'));\n\t\t\tconst applyBookmarkStyle = (theme: ITheme) => {\n\t\t\t\tconst bgColor = theme.getColor(extensionButtonProminentBackground);\n\t\t\t\tconst fgColor = theme.getColor(extensionButtonProminentForeground);\n\t\t\t\trecommendation.style.borderTopColor = bgColor ? bgColor.toString() : 'transparent';\n\t\t\t\trecommendation.style.color = fgColor ? fgColor.toString() : 'white';\n\t\t\t};\n\t\t\tapplyBookmarkStyle(this.themeService.getTheme());\n\t\t\tthis.themeService.onThemeChange(applyBookmarkStyle, this, this.disposables);\n\t\t\tthis.parent.title = extRecommendations[this.extension.identifier.id.toLowerCase()].reasonText;\n\t\t\tthis.parent.setAttribute('aria-label', localize('viewRecommendedExtensionDetailsAria', \"{0}. {1} Press enter for extension details.\", this.extension.displayName, extRecommendations[this.extension.identifier.id.toLowerCase()].reasonText));\n\t\t}\n\t}\n\n}\n\n\nexport class RemoteBadgeWidget extends ExtensionWidget {\n\n\tprivate element: HTMLElement | null;\n\tprivate disposables: IDisposable[] = [];\n\n\tconstructor(\n\t\tprivate parent: HTMLElement,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IExtensionManagementServerService private readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IWindowService private readonly windowService: IWindowService\n\t) {\n\t\tsuper();\n\t\tthis.render();\n\t\tthis._register(toDisposable(() => this.clear()));\n\t}\n\n\tprivate clear(): void {\n\t\tif (this.element) {\n\t\t\tthis.parent.removeChild(this.element);\n\t\t}\n\t\tthis.element = null;\n\t\tthis.disposables = dispose(this.disposables);\n\t}\n\n\trender(): void {\n\t\tthis.clear();\n\t\tif (!this.extension || !this.extension.local) {\n\t\t\treturn;\n\t\t}\n\t\tconst server = this.extensionManagementServerService.getExtensionManagementServer(this.extension.local.location);\n\t\tif (server === this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\tthis.element = append(this.parent, $('div.extension-remote-badge'));\n\t\t\tappend(this.element, $('span.octicon.octicon-file-symlink-directory'));\n\n\t\t\tconst applyBadgeStyle = () => {\n\t\t\t\tif (!this.element) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst bgColor = this.themeService.getTheme().getColor(STATUS_BAR_HOST_NAME_BACKGROUND);\n\t\t\t\tconst fgColor = this.workspaceContextService.getWorkbenchState() === WorkbenchState.EMPTY ? this.themeService.getTheme().getColor(STATUS_BAR_NO_FOLDER_FOREGROUND) : this.themeService.getTheme().getColor(STATUS_BAR_FOREGROUND);\n\t\t\t\tthis.element.style.backgroundColor = bgColor ? bgColor.toString() : '';\n\t\t\t\tthis.element.style.color = fgColor ? fgColor.toString() : '';\n\t\t\t};\n\t\t\tapplyBadgeStyle();\n\t\t\tthis.themeService.onThemeChange(applyBadgeStyle, this, this.disposables);\n\t\t\tthis.workspaceContextService.onDidChangeWorkbenchState(applyBadgeStyle, this, this.disposables);\n\n\t\t\tconst updateTitle = () => {\n\t\t\t\tif (this.element) {\n\t\t\t\t\tthis.element.title = localize('remote extension title', \"Extension in {0}\", this.labelService.getHostLabel(REMOTE_HOST_SCHEME, this.windowService.getConfiguration().remoteAuthority));\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.labelService.onDidChangeFormatters(() => updateTitle(), this, this.disposables);\n\t\t\tupdateTitle();\n\t\t}\n\t}\n\n}\n"]}]}