{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/rangeDecorations.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/rangeDecorations.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar event_1 = require(\"vs/base/common/event\");\nvar editorService_1 = require(\"vs/workbench/services/editor/common/editorService\");\nvar cursorEvents_1 = require(\"vs/editor/common/controller/cursorEvents\");\nvar textModel_1 = require(\"vs/editor/common/model/textModel\");\nvar model_1 = require(\"vs/editor/common/model\");\nvar RangeHighlightDecorations = /** @class */ (function (_super) {\n    tslib_1.__extends(RangeHighlightDecorations, _super);\n    function RangeHighlightDecorations(editorService) {\n        var _this = _super.call(this) || this;\n        _this.editorService = editorService;\n        _this.rangeHighlightDecorationId = null;\n        _this.editor = null;\n        _this.editorDisposables = [];\n        _this._onHighlightRemoved = _this._register(new event_1.Emitter());\n        return _this;\n    }\n    Object.defineProperty(RangeHighlightDecorations.prototype, \"onHighlghtRemoved\", {\n        get: function () { return this._onHighlightRemoved.event; },\n        enumerable: true,\n        configurable: true\n    });\n    RangeHighlightDecorations.prototype.removeHighlightRange = function () {\n        if (this.editor && this.editor.getModel() && this.rangeHighlightDecorationId) {\n            this.editor.deltaDecorations([this.rangeHighlightDecorationId], []);\n            this._onHighlightRemoved.fire();\n        }\n        this.rangeHighlightDecorationId = null;\n    };\n    RangeHighlightDecorations.prototype.highlightRange = function (range, editor) {\n        editor = editor ? editor : this.getEditor(range);\n        if (editor) {\n            this.doHighlightRange(editor, range);\n        }\n    };\n    RangeHighlightDecorations.prototype.doHighlightRange = function (editor, selectionRange) {\n        var _this = this;\n        this.removeHighlightRange();\n        editor.changeDecorations(function (changeAccessor) {\n            _this.rangeHighlightDecorationId = changeAccessor.addDecoration(selectionRange.range, _this.createRangeHighlightDecoration(selectionRange.isWholeLine));\n        });\n        this.setEditor(editor);\n    };\n    RangeHighlightDecorations.prototype.getEditor = function (resourceRange) {\n        var activeEditor = this.editorService.activeEditor;\n        var resource = activeEditor && activeEditor.getResource();\n        if (resource) {\n            if (resource.toString() === resourceRange.resource.toString()) {\n                return this.editorService.activeTextEditorWidget;\n            }\n        }\n        return undefined;\n    };\n    RangeHighlightDecorations.prototype.setEditor = function (editor) {\n        var _this = this;\n        if (this.editor !== editor) {\n            this.disposeEditorListeners();\n            this.editor = editor;\n            this.editorDisposables.push(this.editor.onDidChangeCursorPosition(function (e) {\n                if (e.reason === cursorEvents_1.CursorChangeReason.NotSet\n                    || e.reason === cursorEvents_1.CursorChangeReason.Explicit\n                    || e.reason === cursorEvents_1.CursorChangeReason.Undo\n                    || e.reason === cursorEvents_1.CursorChangeReason.Redo) {\n                    _this.removeHighlightRange();\n                }\n            }));\n            this.editorDisposables.push(this.editor.onDidChangeModel(function () { _this.removeHighlightRange(); }));\n            this.editorDisposables.push(this.editor.onDidDispose(function () {\n                _this.removeHighlightRange();\n                _this.editor = null;\n            }));\n        }\n    };\n    RangeHighlightDecorations.prototype.disposeEditorListeners = function () {\n        this.editorDisposables.forEach(function (disposable) { return disposable.dispose(); });\n        this.editorDisposables = [];\n    };\n    RangeHighlightDecorations.prototype.createRangeHighlightDecoration = function (isWholeLine) {\n        if (isWholeLine === void 0) { isWholeLine = true; }\n        return (isWholeLine ? RangeHighlightDecorations._WHOLE_LINE_RANGE_HIGHLIGHT : RangeHighlightDecorations._RANGE_HIGHLIGHT);\n    };\n    RangeHighlightDecorations.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this.editor && this.editor.getModel()) {\n            this.removeHighlightRange();\n            this.disposeEditorListeners();\n            this.editor = null;\n        }\n    };\n    RangeHighlightDecorations._WHOLE_LINE_RANGE_HIGHLIGHT = textModel_1.ModelDecorationOptions.register({\n        stickiness: model_1.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n        className: 'rangeHighlight',\n        isWholeLine: true\n    });\n    RangeHighlightDecorations._RANGE_HIGHLIGHT = textModel_1.ModelDecorationOptions.register({\n        stickiness: model_1.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n        className: 'rangeHighlight'\n    });\n    RangeHighlightDecorations = tslib_1.__decorate([\n        tslib_1.__param(0, editorService_1.IEditorService)\n    ], RangeHighlightDecorations);\n    return RangeHighlightDecorations;\n}(lifecycle_1.Disposable));\nexports.RangeHighlightDecorations = RangeHighlightDecorations;\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/rangeDecorations.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/editor/rangeDecorations.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable, Disposable } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IRange } from 'vs/editor/common/core/range';\nimport { CursorChangeReason, ICursorPositionChangedEvent } from 'vs/editor/common/controller/cursorEvents';\nimport { ModelDecorationOptions } from 'vs/editor/common/model/textModel';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { TrackedRangeStickiness, IModelDecorationsChangeAccessor } from 'vs/editor/common/model';\n\nexport interface IRangeHighlightDecoration {\n\tresource: URI;\n\trange: IRange;\n\tisWholeLine?: boolean;\n}\n\nexport class RangeHighlightDecorations extends Disposable {\n\n\tprivate rangeHighlightDecorationId: string | null = null;\n\tprivate editor: ICodeEditor | null = null;\n\tprivate editorDisposables: IDisposable[] = [];\n\n\tprivate readonly _onHighlightRemoved: Emitter<void> = this._register(new Emitter<void>());\n\tget onHighlghtRemoved(): Event<void> { return this._onHighlightRemoved.event; }\n\n\tconstructor(@IEditorService private readonly editorService: IEditorService) {\n\t\tsuper();\n\t}\n\n\tremoveHighlightRange() {\n\t\tif (this.editor && this.editor.getModel() && this.rangeHighlightDecorationId) {\n\t\t\tthis.editor.deltaDecorations([this.rangeHighlightDecorationId], []);\n\t\t\tthis._onHighlightRemoved.fire();\n\t\t}\n\n\t\tthis.rangeHighlightDecorationId = null;\n\t}\n\n\thighlightRange(range: IRangeHighlightDecoration, editor?: ICodeEditor) {\n\t\teditor = editor ? editor : this.getEditor(range);\n\t\tif (editor) {\n\t\t\tthis.doHighlightRange(editor, range);\n\t\t}\n\t}\n\n\tprivate doHighlightRange(editor: ICodeEditor, selectionRange: IRangeHighlightDecoration) {\n\t\tthis.removeHighlightRange();\n\n\t\teditor.changeDecorations((changeAccessor: IModelDecorationsChangeAccessor) => {\n\t\t\tthis.rangeHighlightDecorationId = changeAccessor.addDecoration(selectionRange.range, this.createRangeHighlightDecoration(selectionRange.isWholeLine));\n\t\t});\n\n\t\tthis.setEditor(editor);\n\t}\n\n\tprivate getEditor(resourceRange: IRangeHighlightDecoration): ICodeEditor | undefined {\n\t\tconst activeEditor = this.editorService.activeEditor;\n\t\tconst resource = activeEditor && activeEditor.getResource();\n\t\tif (resource) {\n\t\t\tif (resource.toString() === resourceRange.resource.toString()) {\n\t\t\t\treturn this.editorService.activeTextEditorWidget as ICodeEditor;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate setEditor(editor: ICodeEditor) {\n\t\tif (this.editor !== editor) {\n\t\t\tthis.disposeEditorListeners();\n\t\t\tthis.editor = editor;\n\t\t\tthis.editorDisposables.push(this.editor.onDidChangeCursorPosition((e: ICursorPositionChangedEvent) => {\n\t\t\t\tif (\n\t\t\t\t\te.reason === CursorChangeReason.NotSet\n\t\t\t\t\t|| e.reason === CursorChangeReason.Explicit\n\t\t\t\t\t|| e.reason === CursorChangeReason.Undo\n\t\t\t\t\t|| e.reason === CursorChangeReason.Redo\n\t\t\t\t) {\n\t\t\t\t\tthis.removeHighlightRange();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.editorDisposables.push(this.editor.onDidChangeModel(() => { this.removeHighlightRange(); }));\n\t\t\tthis.editorDisposables.push(this.editor.onDidDispose(() => {\n\t\t\t\tthis.removeHighlightRange();\n\t\t\t\tthis.editor = null;\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate disposeEditorListeners() {\n\t\tthis.editorDisposables.forEach(disposable => disposable.dispose());\n\t\tthis.editorDisposables = [];\n\t}\n\n\tprivate static readonly _WHOLE_LINE_RANGE_HIGHLIGHT = ModelDecorationOptions.register({\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'rangeHighlight',\n\t\tisWholeLine: true\n\t});\n\n\tprivate static readonly _RANGE_HIGHLIGHT = ModelDecorationOptions.register({\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'rangeHighlight'\n\t});\n\n\tprivate createRangeHighlightDecoration(isWholeLine: boolean = true): ModelDecorationOptions {\n\t\treturn (isWholeLine ? RangeHighlightDecorations._WHOLE_LINE_RANGE_HIGHLIGHT : RangeHighlightDecorations._RANGE_HIGHLIGHT);\n\t}\n\n\tdispose() {\n\t\tsuper.dispose();\n\n\t\tif (this.editor && this.editor.getModel()) {\n\t\t\tthis.removeHighlightRange();\n\t\t\tthis.disposeEditorListeners();\n\t\t\tthis.editor = null;\n\t\t}\n\t}\n}\n"]}]}