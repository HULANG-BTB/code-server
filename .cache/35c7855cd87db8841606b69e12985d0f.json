{"remainingRequest":"/home/coding/workspace/node_modules/ts-loader/index.js?{\"happyPackMode\":true,\"compilerOptions\":{\"target\":\"es5\",\"lib\":[\"dom\",\"esnext\"]}}!/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/quickinput/quickInput.ts","dependencies":[{"path":"/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/quickinput/quickInput.ts","mtime":1555102317000},{"path":"/home/coding/workspace/node_modules/cache-loader/dist/cjs.js","mtime":1555844183884},{"path":"/home/coding/workspace/node_modules/ts-loader/index.js","mtime":1555844217316}],"contextDependencies":[],"result":["\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire(\"vs/css!./quickInput\");\nvar component_1 = require(\"vs/workbench/common/component\");\nvar quickInput_1 = require(\"vs/platform/quickinput/common/quickInput\");\nvar layoutService_1 = require(\"vs/workbench/services/layout/browser/layoutService\");\nvar dom = require(\"vs/base/browser/dom\");\nvar instantiation_1 = require(\"vs/platform/instantiation/common/instantiation\");\nvar themeService_1 = require(\"vs/platform/theme/common/themeService\");\nvar colorRegistry_1 = require(\"vs/platform/theme/common/colorRegistry\");\nvar theme_1 = require(\"vs/workbench/common/theme\");\nvar quickOpen_1 = require(\"vs/platform/quickOpen/common/quickOpen\");\nvar cancellation_1 = require(\"vs/base/common/cancellation\");\nvar quickInputList_1 = require(\"./quickInputList\");\nvar quickInputBox_1 = require(\"./quickInputBox\");\nvar keyCodes_1 = require(\"vs/base/common/keyCodes\");\nvar keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nvar nls_1 = require(\"vs/nls\");\nvar configuration_1 = require(\"vs/platform/configuration/common/configuration\");\nvar quickopen_1 = require(\"vs/workbench/browser/quickopen\");\nvar countBadge_1 = require(\"vs/base/browser/ui/countBadge/countBadge\");\nvar styler_1 = require(\"vs/platform/theme/common/styler\");\nvar environment_1 = require(\"vs/platform/environment/common/environment\");\nvar progressbar_1 = require(\"vs/base/browser/ui/progressbar/progressbar\");\nvar event_1 = require(\"vs/base/common/event\");\nvar button_1 = require(\"vs/base/browser/ui/button/button\");\nvar lifecycle_1 = require(\"vs/base/common/lifecycle\");\nvar severity_1 = require(\"vs/base/common/severity\");\nvar editorGroupsService_1 = require(\"vs/workbench/services/editor/common/editorGroupsService\");\nvar contextkey_1 = require(\"vs/platform/contextkey/common/contextkey\");\nvar keybindingsRegistry_1 = require(\"vs/platform/keybinding/common/keybindingsRegistry\");\nvar quickopen_2 = require(\"vs/workbench/browser/parts/quickopen/quickopen\");\nvar actionbar_1 = require(\"vs/base/browser/ui/actionbar/actionbar\");\nvar actions_1 = require(\"vs/base/common/actions\");\nvar uri_1 = require(\"vs/base/common/uri\");\nvar keybinding_1 = require(\"vs/platform/keybinding/common/keybinding\");\nvar arrays_1 = require(\"vs/base/common/arrays\");\nvar async_1 = require(\"vs/base/common/async\");\nvar quickInputUtils_1 = require(\"vs/workbench/browser/parts/quickinput/quickInputUtils\");\nvar storage_1 = require(\"vs/platform/storage/common/storage\");\nvar accessibility_1 = require(\"vs/platform/accessibility/common/accessibility\");\nvar extensions_1 = require(\"vs/platform/instantiation/common/extensions\");\nvar $ = dom.$;\nvar backButton = {\n    iconPath: {\n        dark: uri_1.URI.parse(require.toUrl('vs/workbench/browser/parts/quickinput/media/dark/arrow-left.svg')),\n        light: uri_1.URI.parse(require.toUrl('vs/workbench/browser/parts/quickinput/media/light/arrow-left.svg'))\n    },\n    tooltip: nls_1.localize('quickInput.back', \"Back\"),\n    handle: -1 // TODO\n};\nvar QuickInput = /** @class */ (function () {\n    function QuickInput(ui) {\n        this.ui = ui;\n        this.visible = false;\n        this._enabled = true;\n        this._busy = false;\n        this._ignoreFocusOut = false;\n        this._buttons = [];\n        this.buttonsUpdated = false;\n        this.onDidTriggerButtonEmitter = new event_1.Emitter();\n        this.onDidHideEmitter = new event_1.Emitter();\n        this.visibleDisposables = [];\n        this.disposables = [\n            this.onDidTriggerButtonEmitter,\n            this.onDidHideEmitter,\n        ];\n        this.onDidTriggerButton = this.onDidTriggerButtonEmitter.event;\n        this.onDidHide = this.onDidHideEmitter.event;\n    }\n    Object.defineProperty(QuickInput.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (title) {\n            this._title = title;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"step\", {\n        get: function () {\n            return this._steps;\n        },\n        set: function (step) {\n            this._steps = step;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"totalSteps\", {\n        get: function () {\n            return this._totalSteps;\n        },\n        set: function (totalSteps) {\n            this._totalSteps = totalSteps;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"enabled\", {\n        get: function () {\n            return this._enabled;\n        },\n        set: function (enabled) {\n            this._enabled = enabled;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"contextKey\", {\n        get: function () {\n            return this._contextKey;\n        },\n        set: function (contextKey) {\n            this._contextKey = contextKey;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"busy\", {\n        get: function () {\n            return this._busy;\n        },\n        set: function (busy) {\n            this._busy = busy;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"ignoreFocusOut\", {\n        get: function () {\n            return this._ignoreFocusOut;\n        },\n        set: function (ignoreFocusOut) {\n            this._ignoreFocusOut = ignoreFocusOut;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickInput.prototype, \"buttons\", {\n        get: function () {\n            return this._buttons;\n        },\n        set: function (buttons) {\n            this._buttons = buttons;\n            this.buttonsUpdated = true;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    QuickInput.prototype.show = function () {\n        var _this = this;\n        if (this.visible) {\n            return;\n        }\n        this.visibleDisposables.push(this.ui.onDidTriggerButton(function (button) {\n            if (_this.buttons.indexOf(button) !== -1) {\n                _this.onDidTriggerButtonEmitter.fire(button);\n            }\n        }));\n        this.ui.show(this);\n        this.visible = true;\n        this.update();\n    };\n    QuickInput.prototype.hide = function () {\n        if (!this.visible) {\n            return;\n        }\n        this.ui.hide();\n    };\n    QuickInput.prototype.didHide = function () {\n        this.visible = false;\n        this.visibleDisposables = lifecycle_1.dispose(this.visibleDisposables);\n        this.onDidHideEmitter.fire();\n    };\n    QuickInput.prototype.update = function () {\n        var _this = this;\n        if (!this.visible) {\n            return;\n        }\n        var title = this.getTitle();\n        if (this.ui.title.textContent !== title) {\n            this.ui.title.textContent = title;\n        }\n        if (this.busy && !this.busyDelay) {\n            this.busyDelay = new async_1.TimeoutTimer();\n            this.busyDelay.setIfNotSet(function () {\n                if (_this.visible) {\n                    _this.ui.progressBar.infinite();\n                }\n            }, 800);\n        }\n        if (!this.busy && this.busyDelay) {\n            this.ui.progressBar.stop();\n            this.busyDelay.cancel();\n            this.busyDelay = null;\n        }\n        if (this.buttonsUpdated) {\n            this.buttonsUpdated = false;\n            this.ui.leftActionBar.clear();\n            var leftButtons = this.buttons.filter(function (button) { return button === backButton; });\n            this.ui.leftActionBar.push(leftButtons.map(function (button, index) {\n                var action = new actions_1.Action(\"id-\" + index, '', button.iconClass || quickInputUtils_1.getIconClass(button.iconPath), true, function () {\n                    _this.onDidTriggerButtonEmitter.fire(button);\n                    return Promise.resolve(null);\n                });\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n            this.ui.rightActionBar.clear();\n            var rightButtons = this.buttons.filter(function (button) { return button !== backButton; });\n            this.ui.rightActionBar.push(rightButtons.map(function (button, index) {\n                var action = new actions_1.Action(\"id-\" + index, '', button.iconClass || quickInputUtils_1.getIconClass(button.iconPath), true, function () {\n                    _this.onDidTriggerButtonEmitter.fire(button);\n                    return Promise.resolve(null);\n                });\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n        }\n        this.ui.ignoreFocusOut = this.ignoreFocusOut;\n        this.ui.setEnabled(this.enabled);\n        this.ui.setContextKey(this.contextKey);\n    };\n    QuickInput.prototype.getTitle = function () {\n        if (this.title && this.step) {\n            return this.title + \" (\" + this.getSteps() + \")\";\n        }\n        if (this.title) {\n            return this.title;\n        }\n        if (this.step) {\n            return this.getSteps();\n        }\n        return '';\n    };\n    QuickInput.prototype.getSteps = function () {\n        if (this.step && this.totalSteps) {\n            return nls_1.localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\n        }\n        if (this.step) {\n            return String(this.step);\n        }\n        return '';\n    };\n    QuickInput.prototype.dispose = function () {\n        this.hide();\n        this.disposables = lifecycle_1.dispose(this.disposables);\n    };\n    return QuickInput;\n}());\nvar QuickPick = /** @class */ (function (_super) {\n    tslib_1.__extends(QuickPick, _super);\n    function QuickPick(ui) {\n        var _this = _super.call(this, ui) || this;\n        _this._value = '';\n        _this.onDidChangeValueEmitter = new event_1.Emitter();\n        _this.onDidAcceptEmitter = new event_1.Emitter();\n        _this._items = [];\n        _this.itemsUpdated = false;\n        _this._canSelectMany = false;\n        _this._matchOnDescription = false;\n        _this._matchOnDetail = false;\n        _this._matchOnLabel = true;\n        _this._autoFocusOnList = true;\n        _this._activeItems = [];\n        _this.activeItemsUpdated = false;\n        _this.activeItemsToConfirm = [];\n        _this.onDidChangeActiveEmitter = new event_1.Emitter();\n        _this._selectedItems = [];\n        _this.selectedItemsUpdated = false;\n        _this.selectedItemsToConfirm = [];\n        _this.onDidChangeSelectionEmitter = new event_1.Emitter();\n        _this.onDidTriggerItemButtonEmitter = new event_1.Emitter();\n        _this.valueSelectionUpdated = true;\n        _this.onDidChangeValue = _this.onDidChangeValueEmitter.event;\n        _this.onDidAccept = _this.onDidAcceptEmitter.event;\n        _this.onDidChangeActive = _this.onDidChangeActiveEmitter.event;\n        _this.onDidChangeSelection = _this.onDidChangeSelectionEmitter.event;\n        _this.onDidTriggerItemButton = _this.onDidTriggerItemButtonEmitter.event;\n        _this.disposables.push(_this.onDidChangeValueEmitter, _this.onDidAcceptEmitter, _this.onDidChangeActiveEmitter, _this.onDidChangeSelectionEmitter, _this.onDidTriggerItemButtonEmitter);\n        return _this;\n    }\n    Object.defineProperty(QuickPick.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        set: function (value) {\n            this._value = value || '';\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"placeholder\", {\n        get: function () {\n            return this._placeholder;\n        },\n        set: function (placeholder) {\n            this._placeholder = placeholder;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"items\", {\n        get: function () {\n            return this._items;\n        },\n        set: function (items) {\n            this._items = items;\n            this.itemsUpdated = true;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"canSelectMany\", {\n        get: function () {\n            return this._canSelectMany;\n        },\n        set: function (canSelectMany) {\n            this._canSelectMany = canSelectMany;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"matchOnDescription\", {\n        get: function () {\n            return this._matchOnDescription;\n        },\n        set: function (matchOnDescription) {\n            this._matchOnDescription = matchOnDescription;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"matchOnDetail\", {\n        get: function () {\n            return this._matchOnDetail;\n        },\n        set: function (matchOnDetail) {\n            this._matchOnDetail = matchOnDetail;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"matchOnLabel\", {\n        get: function () {\n            return this._matchOnLabel;\n        },\n        set: function (matchOnLabel) {\n            this._matchOnLabel = matchOnLabel;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"autoFocusOnList\", {\n        get: function () {\n            return this._autoFocusOnList;\n        },\n        set: function (autoFocusOnList) {\n            this._autoFocusOnList = autoFocusOnList;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"activeItems\", {\n        get: function () {\n            return this._activeItems;\n        },\n        set: function (activeItems) {\n            this._activeItems = activeItems;\n            this.activeItemsUpdated = true;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"selectedItems\", {\n        get: function () {\n            return this._selectedItems;\n        },\n        set: function (selectedItems) {\n            this._selectedItems = selectedItems;\n            this.selectedItemsUpdated = true;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"keyMods\", {\n        get: function () {\n            return this.ui.keyMods;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"valueSelection\", {\n        set: function (valueSelection) {\n            this._valueSelection = valueSelection;\n            this.valueSelectionUpdated = true;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QuickPick.prototype, \"validationMessage\", {\n        get: function () {\n            return this._validationMessage;\n        },\n        set: function (validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    QuickPick.prototype.inputHasFocus = function () {\n        return this.visible ? this.ui.inputBox.hasFocus() : false;\n    };\n    QuickPick.prototype.trySelectFirst = function () {\n        if (this.autoFocusOnList) {\n            if (!this.ui.isScreenReaderOptimized() && !this.canSelectMany) {\n                this.ui.list.focus('First');\n            }\n        }\n    };\n    QuickPick.prototype.show = function () {\n        var _this = this;\n        if (!this.visible) {\n            this.visibleDisposables.push(this.ui.inputBox.onDidChange(function (value) {\n                if (value === _this.value) {\n                    return;\n                }\n                _this._value = value;\n                _this.ui.list.filter(_this.ui.inputBox.value);\n                _this.trySelectFirst();\n                _this.onDidChangeValueEmitter.fire(value);\n            }), this.ui.inputBox.onMouseDown(function (event) {\n                if (!_this.autoFocusOnList) {\n                    _this.ui.list.clearFocus();\n                }\n            }), this.ui.inputBox.onKeyDown(function (event) {\n                switch (event.keyCode) {\n                    case keyCodes_1.KeyCode.DownArrow:\n                        _this.ui.list.focus('Next');\n                        if (_this.canSelectMany) {\n                            _this.ui.list.domFocus();\n                        }\n                        event.preventDefault();\n                        break;\n                    case keyCodes_1.KeyCode.UpArrow:\n                        if (_this.ui.list.getFocusedElements().length) {\n                            _this.ui.list.focus('Previous');\n                        }\n                        else {\n                            _this.ui.list.focus('Last');\n                        }\n                        if (_this.canSelectMany) {\n                            _this.ui.list.domFocus();\n                        }\n                        event.preventDefault();\n                        break;\n                    case keyCodes_1.KeyCode.PageDown:\n                        if (_this.ui.list.getFocusedElements().length) {\n                            _this.ui.list.focus('NextPage');\n                        }\n                        else {\n                            _this.ui.list.focus('First');\n                        }\n                        if (_this.canSelectMany) {\n                            _this.ui.list.domFocus();\n                        }\n                        event.preventDefault();\n                        break;\n                    case keyCodes_1.KeyCode.PageUp:\n                        if (_this.ui.list.getFocusedElements().length) {\n                            _this.ui.list.focus('PreviousPage');\n                        }\n                        else {\n                            _this.ui.list.focus('Last');\n                        }\n                        if (_this.canSelectMany) {\n                            _this.ui.list.domFocus();\n                        }\n                        event.preventDefault();\n                        break;\n                }\n            }), this.ui.onDidAccept(function () {\n                if (!_this.canSelectMany && _this.activeItems[0]) {\n                    _this._selectedItems = [_this.activeItems[0]];\n                    _this.onDidChangeSelectionEmitter.fire(_this.selectedItems);\n                }\n                _this.onDidAcceptEmitter.fire(undefined);\n            }), this.ui.list.onDidChangeFocus(function (focusedItems) {\n                if (_this.activeItemsUpdated) {\n                    return; // Expect another event.\n                }\n                if (_this.activeItemsToConfirm !== _this._activeItems && arrays_1.equals(focusedItems, _this._activeItems, function (a, b) { return a === b; })) {\n                    return;\n                }\n                _this._activeItems = focusedItems;\n                _this.onDidChangeActiveEmitter.fire(focusedItems);\n            }), this.ui.list.onDidChangeSelection(function (selectedItems) {\n                if (_this.canSelectMany) {\n                    if (selectedItems.length) {\n                        _this.ui.list.setSelectedElements([]);\n                    }\n                    return;\n                }\n                if (_this.selectedItemsToConfirm !== _this._selectedItems && arrays_1.equals(selectedItems, _this._selectedItems, function (a, b) { return a === b; })) {\n                    return;\n                }\n                _this._selectedItems = selectedItems;\n                _this.onDidChangeSelectionEmitter.fire(selectedItems);\n                if (selectedItems.length) {\n                    _this.onDidAcceptEmitter.fire(undefined);\n                }\n            }), this.ui.list.onChangedCheckedElements(function (checkedItems) {\n                if (!_this.canSelectMany) {\n                    return;\n                }\n                if (_this.selectedItemsToConfirm !== _this._selectedItems && arrays_1.equals(checkedItems, _this._selectedItems, function (a, b) { return a === b; })) {\n                    return;\n                }\n                _this._selectedItems = checkedItems;\n                _this.onDidChangeSelectionEmitter.fire(checkedItems);\n            }), this.ui.list.onButtonTriggered(function (event) { return _this.onDidTriggerItemButtonEmitter.fire(event); }), this.registerQuickNavigation());\n            this.valueSelectionUpdated = true;\n        }\n        _super.prototype.show.call(this); // TODO: Why have show() bubble up while update() trickles down? (Could move setComboboxAccessibility() here.)\n    };\n    QuickPick.prototype.registerQuickNavigation = function () {\n        var _this = this;\n        return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, function (e) {\n            if (_this.canSelectMany || !_this.quickNavigate) {\n                return;\n            }\n            var keyboardEvent = new keyboardEvent_1.StandardKeyboardEvent(e);\n            var keyCode = keyboardEvent.keyCode;\n            // Select element when keys are pressed that signal it\n            var quickNavKeys = _this.quickNavigate.keybindings;\n            var wasTriggerKeyPressed = keyCode === keyCodes_1.KeyCode.Enter || quickNavKeys.some(function (k) {\n                var _a = k.getParts(), firstPart = _a[0], chordPart = _a[1];\n                if (chordPart) {\n                    return false;\n                }\n                if (firstPart.shiftKey && keyCode === keyCodes_1.KeyCode.Shift) {\n                    if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n                        return false; // this is an optimistic check for the shift key being used to navigate back in quick open\n                    }\n                    return true;\n                }\n                if (firstPart.altKey && keyCode === keyCodes_1.KeyCode.Alt) {\n                    return true;\n                }\n                if (firstPart.ctrlKey && keyCode === keyCodes_1.KeyCode.Ctrl) {\n                    return true;\n                }\n                if (firstPart.metaKey && keyCode === keyCodes_1.KeyCode.Meta) {\n                    return true;\n                }\n                return false;\n            });\n            if (wasTriggerKeyPressed && _this.activeItems[0]) {\n                _this._selectedItems = [_this.activeItems[0]];\n                _this.onDidChangeSelectionEmitter.fire(_this.selectedItems);\n                _this.onDidAcceptEmitter.fire(undefined);\n            }\n        });\n    };\n    QuickPick.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (!this.visible) {\n            return;\n        }\n        if (this.ui.inputBox.value !== this.value) {\n            this.ui.inputBox.value = this.value;\n        }\n        if (this.valueSelectionUpdated) {\n            this.valueSelectionUpdated = false;\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n        }\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n            this.ui.inputBox.placeholder = (this.placeholder || '');\n        }\n        if (this.itemsUpdated) {\n            this.itemsUpdated = false;\n            this.ui.list.setElements(this.items);\n            this.ui.list.filter(this.ui.inputBox.value);\n            this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\n            this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\n            this.ui.count.setCount(this.ui.list.getCheckedCount());\n            this.trySelectFirst();\n        }\n        if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\n            if (this.canSelectMany) {\n                this.ui.list.clearFocus();\n            }\n            else {\n                this.trySelectFirst();\n            }\n        }\n        if (this.activeItemsUpdated) {\n            this.activeItemsUpdated = false;\n            this.activeItemsToConfirm = this._activeItems;\n            this.ui.list.setFocusedElements(this.activeItems);\n            if (this.activeItemsToConfirm === this._activeItems) {\n                this.activeItemsToConfirm = null;\n            }\n        }\n        if (this.selectedItemsUpdated) {\n            this.selectedItemsUpdated = false;\n            this.selectedItemsToConfirm = this._selectedItems;\n            if (this.canSelectMany) {\n                this.ui.list.setCheckedElements(this.selectedItems);\n            }\n            else {\n                this.ui.list.setSelectedElements(this.selectedItems);\n            }\n            if (this.selectedItemsToConfirm === this._selectedItems) {\n                this.selectedItemsToConfirm = null;\n            }\n        }\n        if (this.validationMessage) {\n            this.ui.message.textContent = this.validationMessage;\n            this.ui.inputBox.showDecoration(severity_1.default.Error);\n        }\n        else {\n            this.ui.message.textContent = null;\n            this.ui.inputBox.showDecoration(severity_1.default.Ignore);\n        }\n        this.ui.list.matchOnDescription = this.matchOnDescription;\n        this.ui.list.matchOnDetail = this.matchOnDetail;\n        this.ui.list.matchOnLabel = this.matchOnLabel;\n        this.ui.setComboboxAccessibility(true);\n        this.ui.inputBox.setAttribute('aria-label', QuickPick.INPUT_BOX_ARIA_LABEL);\n        this.ui.setVisibilities(this.canSelectMany ? { title: !!this.title || !!this.step, checkAll: true, inputBox: true, visibleCount: true, count: true, ok: true, list: true, message: !!this.validationMessage } : { title: !!this.title || !!this.step, inputBox: true, visibleCount: true, list: true, message: !!this.validationMessage });\n    };\n    QuickPick.INPUT_BOX_ARIA_LABEL = nls_1.localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\n    return QuickPick;\n}(QuickInput));\nvar InputBox = /** @class */ (function (_super) {\n    tslib_1.__extends(InputBox, _super);\n    function InputBox(ui) {\n        var _this = _super.call(this, ui) || this;\n        _this._value = '';\n        _this.valueSelectionUpdated = true;\n        _this._password = false;\n        _this.noValidationMessage = InputBox.noPromptMessage;\n        _this.onDidValueChangeEmitter = new event_1.Emitter();\n        _this.onDidAcceptEmitter = new event_1.Emitter();\n        _this.onDidChangeValue = _this.onDidValueChangeEmitter.event;\n        _this.onDidAccept = _this.onDidAcceptEmitter.event;\n        _this.disposables.push(_this.onDidValueChangeEmitter, _this.onDidAcceptEmitter);\n        return _this;\n    }\n    Object.defineProperty(InputBox.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        set: function (value) {\n            this._value = value || '';\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"valueSelection\", {\n        set: function (valueSelection) {\n            this._valueSelection = valueSelection;\n            this.valueSelectionUpdated = true;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"placeholder\", {\n        get: function () {\n            return this._placeholder;\n        },\n        set: function (placeholder) {\n            this._placeholder = placeholder;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"password\", {\n        get: function () {\n            return this._password;\n        },\n        set: function (password) {\n            this._password = password;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"prompt\", {\n        get: function () {\n            return this._prompt;\n        },\n        set: function (prompt) {\n            this._prompt = prompt;\n            this.noValidationMessage = prompt\n                ? nls_1.localize('inputModeEntryDescription', \"{0} (Press 'Enter' to confirm or 'Escape' to cancel)\", prompt)\n                : InputBox.noPromptMessage;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputBox.prototype, \"validationMessage\", {\n        get: function () {\n            return this._validationMessage;\n        },\n        set: function (validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InputBox.prototype.show = function () {\n        var _this = this;\n        if (!this.visible) {\n            this.visibleDisposables.push(this.ui.inputBox.onDidChange(function (value) {\n                if (value === _this.value) {\n                    return;\n                }\n                _this._value = value;\n                _this.onDidValueChangeEmitter.fire(value);\n            }), this.ui.onDidAccept(function () { return _this.onDidAcceptEmitter.fire(undefined); }));\n            this.valueSelectionUpdated = true;\n        }\n        _super.prototype.show.call(this);\n    };\n    InputBox.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (!this.visible) {\n            return;\n        }\n        if (this.ui.inputBox.value !== this.value) {\n            this.ui.inputBox.value = this.value;\n        }\n        if (this.valueSelectionUpdated) {\n            this.valueSelectionUpdated = false;\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n        }\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n            this.ui.inputBox.placeholder = (this.placeholder || '');\n        }\n        if (this.ui.inputBox.password !== this.password) {\n            this.ui.inputBox.password = this.password;\n        }\n        if (!this.validationMessage && this.ui.message.textContent !== this.noValidationMessage) {\n            this.ui.message.textContent = this.noValidationMessage;\n            this.ui.inputBox.showDecoration(severity_1.default.Ignore);\n        }\n        if (this.validationMessage && this.ui.message.textContent !== this.validationMessage) {\n            this.ui.message.textContent = this.validationMessage;\n            this.ui.inputBox.showDecoration(severity_1.default.Error);\n        }\n        this.ui.setVisibilities({ title: !!this.title || !!this.step, inputBox: true, message: true });\n    };\n    InputBox.noPromptMessage = nls_1.localize('inputModeEntry', \"Press 'Enter' to confirm your input or 'Escape' to cancel\");\n    return InputBox;\n}(QuickInput));\nvar QuickInputService = /** @class */ (function (_super) {\n    tslib_1.__extends(QuickInputService, _super);\n    function QuickInputService(environmentService, configurationService, instantiationService, quickOpenService, editorGroupService, keybindingService, contextKeyService, themeService, storageService, accessibilityService, layoutService) {\n        var _this = _super.call(this, QuickInputService.ID, themeService, storageService) || this;\n        _this.environmentService = environmentService;\n        _this.configurationService = configurationService;\n        _this.instantiationService = instantiationService;\n        _this.quickOpenService = quickOpenService;\n        _this.editorGroupService = editorGroupService;\n        _this.keybindingService = keybindingService;\n        _this.contextKeyService = contextKeyService;\n        _this.accessibilityService = accessibilityService;\n        _this.layoutService = layoutService;\n        _this.idPrefix = 'quickInput_'; // Constant since there is still only one.\n        _this.comboboxAccessibility = false;\n        _this.enabled = true;\n        _this.inQuickOpenWidgets = {};\n        _this.contexts = Object.create(null);\n        _this.onDidAcceptEmitter = _this._register(new event_1.Emitter());\n        _this.onDidTriggerButtonEmitter = _this._register(new event_1.Emitter());\n        _this.keyMods = { ctrlCmd: false, alt: false };\n        _this.controller = null;\n        _this.backButton = backButton;\n        _this.inQuickOpenContext = quickopen_2.InQuickOpenContextKey.bindTo(contextKeyService);\n        _this._register(_this.quickOpenService.onShow(function () { return _this.inQuickOpen('quickOpen', true); }));\n        _this._register(_this.quickOpenService.onHide(function () { return _this.inQuickOpen('quickOpen', false); }));\n        _this._register(_this.layoutService.onLayout(function (dimension) { return _this.layout(dimension); }));\n        _this.registerKeyModsListeners();\n        return _this;\n    }\n    QuickInputService.prototype.inQuickOpen = function (widget, open) {\n        if (open) {\n            this.inQuickOpenWidgets[widget] = true;\n        }\n        else {\n            delete this.inQuickOpenWidgets[widget];\n        }\n        if (Object.keys(this.inQuickOpenWidgets).length) {\n            if (!this.inQuickOpenContext.get()) {\n                this.inQuickOpenContext.set(true);\n            }\n        }\n        else {\n            if (this.inQuickOpenContext.get()) {\n                this.inQuickOpenContext.reset();\n            }\n        }\n    };\n    QuickInputService.prototype.setContextKey = function (id) {\n        var key;\n        if (id) {\n            key = this.contexts[id];\n            if (!key) {\n                key = new contextkey_1.RawContextKey(id, false)\n                    .bindTo(this.contextKeyService);\n                this.contexts[id] = key;\n            }\n        }\n        if (key && key.get()) {\n            return; // already active context\n        }\n        this.resetContextKeys();\n        if (key) {\n            key.set(true);\n        }\n    };\n    QuickInputService.prototype.resetContextKeys = function () {\n        for (var key in this.contexts) {\n            if (this.contexts[key].get()) {\n                this.contexts[key].reset();\n            }\n        }\n    };\n    QuickInputService.prototype.registerKeyModsListeners = function () {\n        var _this = this;\n        var workbench = this.layoutService.getWorkbenchElement();\n        this._register(dom.addDisposableListener(workbench, dom.EventType.KEY_DOWN, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case keyCodes_1.KeyCode.Ctrl:\n                case keyCodes_1.KeyCode.Meta:\n                    _this.keyMods.ctrlCmd = true;\n                    break;\n                case keyCodes_1.KeyCode.Alt:\n                    _this.keyMods.alt = true;\n                    break;\n            }\n        }));\n        this._register(dom.addDisposableListener(workbench, dom.EventType.KEY_UP, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case keyCodes_1.KeyCode.Ctrl:\n                case keyCodes_1.KeyCode.Meta:\n                    _this.keyMods.ctrlCmd = false;\n                    break;\n                case keyCodes_1.KeyCode.Alt:\n                    _this.keyMods.alt = false;\n                    break;\n            }\n        }));\n    };\n    QuickInputService.prototype.create = function () {\n        var _this = this;\n        if (this.ui) {\n            return;\n        }\n        var workbench = this.layoutService.getWorkbenchElement();\n        var container = dom.append(workbench, $('.quick-input-widget.show-file-icons'));\n        container.tabIndex = -1;\n        container.style.display = 'none';\n        this.titleBar = dom.append(container, $('.quick-input-titlebar'));\n        var leftActionBar = this._register(new actionbar_1.ActionBar(this.titleBar));\n        leftActionBar.domNode.classList.add('quick-input-left-action-bar');\n        var title = dom.append(this.titleBar, $('.quick-input-title'));\n        var rightActionBar = this._register(new actionbar_1.ActionBar(this.titleBar));\n        rightActionBar.domNode.classList.add('quick-input-right-action-bar');\n        var headerContainer = dom.append(container, $('.quick-input-header'));\n        var checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\n        checkAll.type = 'checkbox';\n        this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, function (e) {\n            var checked = checkAll.checked;\n            list.setAllVisibleChecked(checked);\n        }));\n        this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, function (e) {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space'...\n                inputBox.setFocus();\n            }\n        }));\n        this.filterContainer = dom.append(headerContainer, $('.quick-input-filter'));\n        var inputBox = this._register(new quickInputBox_1.QuickInputBox(this.filterContainer));\n        inputBox.setAttribute('aria-describedby', this.idPrefix + \"message\");\n        this.visibleCountContainer = dom.append(this.filterContainer, $('.quick-input-visible-count'));\n        this.visibleCountContainer.setAttribute('aria-live', 'polite');\n        this.visibleCountContainer.setAttribute('aria-atomic', 'true');\n        var visibleCount = new countBadge_1.CountBadge(this.visibleCountContainer, { countFormat: nls_1.localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") });\n        this.countContainer = dom.append(this.filterContainer, $('.quick-input-count'));\n        this.countContainer.setAttribute('aria-live', 'polite');\n        var count = new countBadge_1.CountBadge(this.countContainer, { countFormat: nls_1.localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") });\n        this._register(styler_1.attachBadgeStyler(count, this.themeService));\n        this.okContainer = dom.append(headerContainer, $('.quick-input-action'));\n        this.ok = new button_1.Button(this.okContainer);\n        styler_1.attachButtonStyler(this.ok, this.themeService);\n        this.ok.label = nls_1.localize('ok', \"OK\");\n        this._register(this.ok.onDidClick(function (e) {\n            _this.onDidAcceptEmitter.fire();\n        }));\n        var message = dom.append(container, $(\"#\" + this.idPrefix + \"message.quick-input-message\"));\n        var progressBar = new progressbar_1.ProgressBar(container);\n        dom.addClass(progressBar.getContainer(), 'quick-input-progress');\n        this._register(styler_1.attachProgressBarStyler(progressBar, this.themeService));\n        var list = this._register(this.instantiationService.createInstance(quickInputList_1.QuickInputList, container, this.idPrefix + 'list'));\n        this._register(list.onChangedAllVisibleChecked(function (checked) {\n            checkAll.checked = checked;\n        }));\n        this._register(list.onChangedVisibleCount(function (c) {\n            visibleCount.setCount(c);\n        }));\n        this._register(list.onChangedCheckedCount(function (c) {\n            count.setCount(c);\n        }));\n        this._register(list.onLeave(function () {\n            // Defer to avoid the input field reacting to the triggering key.\n            setTimeout(function () {\n                inputBox.setFocus();\n                if (_this.controller instanceof QuickPick && _this.controller.canSelectMany) {\n                    list.clearFocus();\n                }\n            }, 0);\n        }));\n        this._register(list.onDidChangeFocus(function () {\n            if (_this.comboboxAccessibility) {\n                _this.ui.inputBox.setAttribute('aria-activedescendant', _this.ui.list.getActiveDescendant() || '');\n            }\n        }));\n        var focusTracker = dom.trackFocus(container);\n        this._register(focusTracker);\n        this._register(focusTracker.onDidBlur(function () {\n            if (!_this.ui.ignoreFocusOut && !_this.environmentService.args['sticky-quickopen'] && _this.configurationService.getValue(quickopen_1.CLOSE_ON_FOCUS_LOST_CONFIG)) {\n                _this.hide(true);\n            }\n        }));\n        this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, function (e) {\n            var event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case keyCodes_1.KeyCode.Enter:\n                    dom.EventHelper.stop(e, true);\n                    _this.onDidAcceptEmitter.fire();\n                    break;\n                case keyCodes_1.KeyCode.Escape:\n                    dom.EventHelper.stop(e, true);\n                    _this.hide();\n                    break;\n                case keyCodes_1.KeyCode.Tab:\n                    if (!event.altKey && !event.ctrlKey && !event.metaKey) {\n                        var selectors = ['.action-label.icon'];\n                        if (container.classList.contains('show-checkboxes')) {\n                            selectors.push('input');\n                        }\n                        else {\n                            selectors.push('input[type=text]');\n                        }\n                        if (_this.ui.list.isDisplayed()) {\n                            selectors.push('.monaco-list');\n                        }\n                        var stops = container.querySelectorAll(selectors.join(', '));\n                        if (event.shiftKey && event.target === stops[0]) {\n                            dom.EventHelper.stop(e, true);\n                            stops[stops.length - 1].focus();\n                        }\n                        else if (!event.shiftKey && event.target === stops[stops.length - 1]) {\n                            dom.EventHelper.stop(e, true);\n                            stops[0].focus();\n                        }\n                    }\n                    break;\n            }\n        }));\n        this._register(this.quickOpenService.onShow(function () { return _this.hide(true); }));\n        this.ui = {\n            container: container,\n            leftActionBar: leftActionBar,\n            title: title,\n            rightActionBar: rightActionBar,\n            checkAll: checkAll,\n            inputBox: inputBox,\n            visibleCount: visibleCount,\n            count: count,\n            message: message,\n            progressBar: progressBar,\n            list: list,\n            onDidAccept: this.onDidAcceptEmitter.event,\n            onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\n            ignoreFocusOut: false,\n            keyMods: this.keyMods,\n            isScreenReaderOptimized: function () { return _this.isScreenReaderOptimized(); },\n            show: function (controller) { return _this.show(controller); },\n            hide: function () { return _this.hide(); },\n            setVisibilities: function (visibilities) { return _this.setVisibilities(visibilities); },\n            setComboboxAccessibility: function (enabled) { return _this.setComboboxAccessibility(enabled); },\n            setEnabled: function (enabled) { return _this.setEnabled(enabled); },\n            setContextKey: function (contextKey) { return _this.setContextKey(contextKey); },\n        };\n        this.updateStyles();\n    };\n    QuickInputService.prototype.pick = function (picks, options, token) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        if (token === void 0) { token = cancellation_1.CancellationToken.None; }\n        return new Promise(function (doResolve, reject) {\n            var resolve = function (result) {\n                resolve = doResolve;\n                if (options.onKeyMods) {\n                    options.onKeyMods(input.keyMods);\n                }\n                doResolve(result);\n            };\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            var input = _this.createQuickPick();\n            var activeItem;\n            var disposables = [\n                input,\n                input.onDidAccept(function () {\n                    if (input.canSelectMany) {\n                        resolve(input.selectedItems.slice());\n                        input.hide();\n                    }\n                    else {\n                        var result = input.activeItems[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidChangeActive(function (items) {\n                    var focused = items[0];\n                    if (focused && options.onDidFocus) {\n                        options.onDidFocus(focused);\n                    }\n                }),\n                input.onDidChangeSelection(function (items) {\n                    if (!input.canSelectMany) {\n                        var result = items[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidTriggerItemButton(function (event) { return options.onDidTriggerItemButton && options.onDidTriggerItemButton(tslib_1.__assign({}, event, { removeItem: function () {\n                        var index = input.items.indexOf(event.item);\n                        if (index !== -1) {\n                            var items = input.items.slice();\n                            items.splice(index, 1);\n                            input.items = items;\n                        }\n                    } })); }),\n                input.onDidChangeValue(function (value) {\n                    if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\n                        input.activeItems = [activeItem];\n                    }\n                }),\n                token.onCancellationRequested(function () {\n                    input.hide();\n                }),\n                input.onDidHide(function () {\n                    lifecycle_1.dispose(disposables);\n                    resolve(undefined);\n                }),\n            ];\n            input.canSelectMany = !!options.canPickMany;\n            input.placeholder = options.placeHolder;\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\n            input.matchOnDescription = !!options.matchOnDescription;\n            input.matchOnDetail = !!options.matchOnDetail;\n            input.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\n            input.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\n            input.quickNavigate = options.quickNavigate;\n            input.contextKey = options.contextKey;\n            input.busy = true;\n            Promise.all([picks, options.activeItem])\n                .then(function (_a) {\n                var items = _a[0], _activeItem = _a[1];\n                activeItem = _activeItem;\n                input.busy = false;\n                input.items = items;\n                if (input.canSelectMany) {\n                    input.selectedItems = items.filter(function (item) { return item.type !== 'separator' && item.picked; });\n                }\n                if (activeItem) {\n                    input.activeItems = [activeItem];\n                }\n            });\n            input.show();\n            Promise.resolve(picks).then(undefined, function (err) {\n                reject(err);\n                input.hide();\n            });\n        });\n    };\n    QuickInputService.prototype.input = function (options, token) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        if (token === void 0) { token = cancellation_1.CancellationToken.None; }\n        return new Promise(function (resolve, reject) {\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            var input = _this.createInputBox();\n            var validateInput = options.validateInput || (function () { return Promise.resolve(undefined); });\n            var onDidValueChange = event_1.Event.debounce(input.onDidChangeValue, function (last, cur) { return cur; }, 100);\n            var validationValue = options.value || '';\n            var validation = Promise.resolve(validateInput(validationValue));\n            var disposables = [\n                input,\n                onDidValueChange(function (value) {\n                    if (value !== validationValue) {\n                        validation = Promise.resolve(validateInput(value));\n                        validationValue = value;\n                    }\n                    validation.then(function (result) {\n                        if (value === validationValue) {\n                            input.validationMessage = result || undefined;\n                        }\n                    });\n                }),\n                input.onDidAccept(function () {\n                    var value = input.value;\n                    if (value !== validationValue) {\n                        validation = Promise.resolve(validateInput(value));\n                        validationValue = value;\n                    }\n                    validation.then(function (result) {\n                        if (!result) {\n                            resolve(value);\n                            input.hide();\n                        }\n                        else if (value === validationValue) {\n                            input.validationMessage = result;\n                        }\n                    });\n                }),\n                token.onCancellationRequested(function () {\n                    input.hide();\n                }),\n                input.onDidHide(function () {\n                    lifecycle_1.dispose(disposables);\n                    resolve(undefined);\n                }),\n            ];\n            input.value = options.value || '';\n            input.valueSelection = options.valueSelection;\n            input.prompt = options.prompt;\n            input.placeholder = options.placeHolder;\n            input.password = !!options.password;\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\n            input.show();\n        });\n    };\n    QuickInputService.prototype.createQuickPick = function () {\n        this.create();\n        return new QuickPick(this.ui);\n    };\n    QuickInputService.prototype.createInputBox = function () {\n        this.create();\n        return new InputBox(this.ui);\n    };\n    QuickInputService.prototype.show = function (controller) {\n        this.create();\n        this.quickOpenService.close();\n        var oldController = this.controller;\n        this.controller = controller;\n        if (oldController) {\n            oldController.didHide();\n        }\n        this.setEnabled(true);\n        this.ui.leftActionBar.clear();\n        this.ui.title.textContent = '';\n        this.ui.rightActionBar.clear();\n        this.ui.checkAll.checked = false;\n        // this.ui.inputBox.value = ''; Avoid triggering an event.\n        this.ui.inputBox.placeholder = '';\n        this.ui.inputBox.password = false;\n        this.ui.inputBox.showDecoration(severity_1.default.Ignore);\n        this.ui.visibleCount.setCount(0);\n        this.ui.count.setCount(0);\n        this.ui.message.textContent = '';\n        this.ui.progressBar.stop();\n        this.ui.list.setElements([]);\n        this.ui.list.matchOnDescription = false;\n        this.ui.list.matchOnDetail = false;\n        this.ui.list.matchOnLabel = true;\n        this.ui.ignoreFocusOut = false;\n        this.setComboboxAccessibility(false);\n        this.ui.inputBox.removeAttribute('aria-label');\n        var keybinding = this.keybindingService.lookupKeybinding(BackAction.ID);\n        backButton.tooltip = keybinding ? nls_1.localize('quickInput.backWithKeybinding', \"Back ({0})\", keybinding.getLabel()) : nls_1.localize('quickInput.back', \"Back\");\n        this.inQuickOpen('quickInput', true);\n        this.resetContextKeys();\n        this.ui.container.style.display = '';\n        this.updateLayout();\n        this.ui.inputBox.setFocus();\n    };\n    QuickInputService.prototype.setVisibilities = function (visibilities) {\n        this.ui.title.style.display = visibilities.title ? '' : 'none';\n        this.ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\n        this.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\n        this.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\n        this.countContainer.style.display = visibilities.count ? '' : 'none';\n        this.okContainer.style.display = visibilities.ok ? '' : 'none';\n        this.ui.message.style.display = visibilities.message ? '' : 'none';\n        this.ui.list.display(!!visibilities.list);\n        this.ui.container.classList[visibilities.checkAll ? 'add' : 'remove']('show-checkboxes');\n        this.updateLayout(); // TODO\n    };\n    QuickInputService.prototype.setComboboxAccessibility = function (enabled) {\n        if (enabled !== this.comboboxAccessibility) {\n            this.comboboxAccessibility = enabled;\n            if (this.comboboxAccessibility) {\n                this.ui.inputBox.setAttribute('role', 'combobox');\n                this.ui.inputBox.setAttribute('aria-haspopup', 'true');\n                this.ui.inputBox.setAttribute('aria-autocomplete', 'list');\n                this.ui.inputBox.setAttribute('aria-activedescendant', this.ui.list.getActiveDescendant() || '');\n            }\n            else {\n                this.ui.inputBox.removeAttribute('role');\n                this.ui.inputBox.removeAttribute('aria-haspopup');\n                this.ui.inputBox.removeAttribute('aria-autocomplete');\n                this.ui.inputBox.removeAttribute('aria-activedescendant');\n            }\n        }\n    };\n    QuickInputService.prototype.isScreenReaderOptimized = function () {\n        var detected = this.accessibilityService.getAccessibilitySupport() === accessibility_1.AccessibilitySupport.Enabled;\n        var config = this.configurationService.getValue('editor').accessibilitySupport;\n        return config === 'on' || (config === 'auto' && detected);\n    };\n    QuickInputService.prototype.setEnabled = function (enabled) {\n        if (enabled !== this.enabled) {\n            this.enabled = enabled;\n            for (var _i = 0, _a = this.ui.leftActionBar.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                item.getAction().enabled = enabled;\n            }\n            for (var _b = 0, _c = this.ui.rightActionBar.items; _b < _c.length; _b++) {\n                var item = _c[_b];\n                item.getAction().enabled = enabled;\n            }\n            this.ui.checkAll.disabled = !enabled;\n            // this.ui.inputBox.enabled = enabled; Avoid loosing focus.\n            this.ok.enabled = enabled;\n            this.ui.list.enabled = enabled;\n        }\n    };\n    QuickInputService.prototype.hide = function (focusLost) {\n        var controller = this.controller;\n        if (controller) {\n            this.controller = null;\n            this.inQuickOpen('quickInput', false);\n            this.resetContextKeys();\n            this.ui.container.style.display = 'none';\n            if (!focusLost) {\n                this.editorGroupService.activeGroup.focus();\n            }\n            controller.didHide();\n        }\n    };\n    QuickInputService.prototype.focus = function () {\n        if (this.isDisplayed()) {\n            this.ui.inputBox.setFocus();\n        }\n    };\n    QuickInputService.prototype.toggle = function () {\n        if (this.isDisplayed() && this.controller instanceof QuickPick && this.controller.canSelectMany) {\n            this.ui.list.toggleCheckbox();\n        }\n    };\n    QuickInputService.prototype.navigate = function (next, quickNavigate) {\n        if (this.isDisplayed() && this.ui.list.isDisplayed()) {\n            this.ui.list.focus(next ? 'Next' : 'Previous');\n            if (quickNavigate && this.controller instanceof QuickPick) {\n                this.controller.quickNavigate = quickNavigate;\n            }\n        }\n    };\n    QuickInputService.prototype.accept = function () {\n        this.onDidAcceptEmitter.fire();\n        return Promise.resolve(undefined);\n    };\n    QuickInputService.prototype.back = function () {\n        this.onDidTriggerButtonEmitter.fire(this.backButton);\n        return Promise.resolve(undefined);\n    };\n    QuickInputService.prototype.cancel = function () {\n        this.hide();\n        return Promise.resolve(undefined);\n    };\n    QuickInputService.prototype.layout = function (dimension) {\n        this.updateLayout();\n    };\n    QuickInputService.prototype.updateLayout = function () {\n        if (this.ui) {\n            var titlebarOffset = this.layoutService.getTitleBarOffset();\n            this.ui.container.style.top = titlebarOffset + \"px\";\n            var style = this.ui.container.style;\n            var width = Math.min(this.layoutService.dimension.width * 0.62 /* golden cut */, QuickInputService.MAX_WIDTH);\n            style.width = width + 'px';\n            style.marginLeft = '-' + (width / 2) + 'px';\n            this.ui.inputBox.layout();\n            this.ui.list.layout();\n        }\n    };\n    QuickInputService.prototype.updateStyles = function () {\n        var theme = this.themeService.getTheme();\n        if (this.ui) {\n            // TODO\n            var titleColor = { dark: 'rgba(255, 255, 255, 0.105)', light: 'rgba(0,0,0,.06)', hc: 'black' }[theme.type];\n            this.titleBar.style.backgroundColor = titleColor ? titleColor.toString() : null;\n            this.ui.inputBox.style(theme);\n            var sideBarBackground = theme.getColor(theme_1.SIDE_BAR_BACKGROUND);\n            this.ui.container.style.backgroundColor = sideBarBackground ? sideBarBackground.toString() : null;\n            var sideBarForeground = theme.getColor(theme_1.SIDE_BAR_FOREGROUND);\n            this.ui.container.style.color = sideBarForeground ? sideBarForeground.toString() : null;\n            var contrastBorderColor = theme.getColor(colorRegistry_1.contrastBorder);\n            this.ui.container.style.border = contrastBorderColor ? \"1px solid \" + contrastBorderColor : null;\n            var widgetShadowColor = theme.getColor(colorRegistry_1.widgetShadow);\n            this.ui.container.style.boxShadow = widgetShadowColor ? \"0 5px 8px \" + widgetShadowColor : null;\n        }\n    };\n    QuickInputService.prototype.isDisplayed = function () {\n        return this.ui && this.ui.container.style.display !== 'none';\n    };\n    QuickInputService.ID = 'workbench.component.quickinput';\n    QuickInputService.MAX_WIDTH = 600; // Max total width of quick open widget\n    QuickInputService = tslib_1.__decorate([\n        tslib_1.__param(0, environment_1.IEnvironmentService),\n        tslib_1.__param(1, configuration_1.IConfigurationService),\n        tslib_1.__param(2, instantiation_1.IInstantiationService),\n        tslib_1.__param(3, quickOpen_1.IQuickOpenService),\n        tslib_1.__param(4, editorGroupsService_1.IEditorGroupsService),\n        tslib_1.__param(5, keybinding_1.IKeybindingService),\n        tslib_1.__param(6, contextkey_1.IContextKeyService),\n        tslib_1.__param(7, themeService_1.IThemeService),\n        tslib_1.__param(8, storage_1.IStorageService),\n        tslib_1.__param(9, accessibility_1.IAccessibilityService),\n        tslib_1.__param(10, layoutService_1.IWorkbenchLayoutService)\n    ], QuickInputService);\n    return QuickInputService;\n}(component_1.Component));\nexports.QuickInputService = QuickInputService;\nexports.QuickPickManyToggle = {\n    id: 'workbench.action.quickPickManyToggle',\n    weight: keybindingsRegistry_1.KeybindingWeight.WorkbenchContrib,\n    when: quickopen_2.inQuickOpenContext,\n    primary: 0,\n    handler: function (accessor) {\n        var quickInputService = accessor.get(quickInput_1.IQuickInputService);\n        quickInputService.toggle();\n    }\n};\nvar BackAction = /** @class */ (function (_super) {\n    tslib_1.__extends(BackAction, _super);\n    function BackAction(id, label, quickInputService) {\n        var _this = _super.call(this, id, label) || this;\n        _this.quickInputService = quickInputService;\n        return _this;\n    }\n    BackAction.prototype.run = function () {\n        this.quickInputService.back();\n        return Promise.resolve();\n    };\n    BackAction.ID = 'workbench.action.quickInputBack';\n    BackAction.LABEL = nls_1.localize('back', \"Back\");\n    BackAction = tslib_1.__decorate([\n        tslib_1.__param(2, quickInput_1.IQuickInputService)\n    ], BackAction);\n    return BackAction;\n}(actions_1.Action));\nexports.BackAction = BackAction;\nextensions_1.registerSingleton(quickInput_1.IQuickInputService, QuickInputService, true);\n",{"version":3,"file":"/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/quickinput/quickInput.ts","sourceRoot":"","sources":["/home/coding/workspace/lib/vscode/src/vs/workbench/browser/parts/quickinput/quickInput.ts"],"names":[],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./quickInput';\nimport { Component } from 'vs/workbench/common/component';\nimport { IQuickInputService, IQuickPickItem, IPickOptions, IInputOptions, IQuickNavigateConfiguration, IQuickPick, IQuickInput, IQuickInputButton, IInputBox, IQuickPickItemButtonEvent, QuickPickInput, IQuickPickSeparator, IKeyMods } from 'vs/platform/quickinput/common/quickInput';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport * as dom from 'vs/base/browser/dom';\nimport { IInstantiationService, ServiceIdentifier } from 'vs/platform/instantiation/common/instantiation';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { contrastBorder, widgetShadow } from 'vs/platform/theme/common/colorRegistry';\nimport { SIDE_BAR_BACKGROUND, SIDE_BAR_FOREGROUND } from 'vs/workbench/common/theme';\nimport { IQuickOpenService } from 'vs/platform/quickOpen/common/quickOpen';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { QuickInputList } from './quickInputList';\nimport { QuickInputBox } from './quickInputBox';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { localize } from 'vs/nls';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { CLOSE_ON_FOCUS_LOST_CONFIG } from 'vs/workbench/browser/quickopen';\nimport { CountBadge } from 'vs/base/browser/ui/countBadge/countBadge';\nimport { attachBadgeStyler, attachProgressBarStyler, attachButtonStyler } from 'vs/platform/theme/common/styler';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { ProgressBar } from 'vs/base/browser/ui/progressbar/progressbar';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Button } from 'vs/base/browser/ui/button/button';\nimport { dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport Severity from 'vs/base/common/severity';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IContextKeyService, RawContextKey, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ICommandAndKeybindingRule, KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { inQuickOpenContext, InQuickOpenContextKey } from 'vs/workbench/browser/parts/quickopen/quickopen';\nimport { ActionBar, ActionItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { Action } from 'vs/base/common/actions';\nimport { URI } from 'vs/base/common/uri';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { equals } from 'vs/base/common/arrays';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { getIconClass } from 'vs/workbench/browser/parts/quickinput/quickInputUtils';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { IAccessibilityService, AccessibilitySupport } from 'vs/platform/accessibility/common/accessibility';\nimport { registerSingleton } from 'vs/platform/instantiation/common/extensions';\n\nconst $ = dom.$;\n\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\n\nconst backButton = {\n\ticonPath: {\n\t\tdark: URI.parse(require.toUrl('vs/workbench/browser/parts/quickinput/media/dark/arrow-left.svg')),\n\t\tlight: URI.parse(require.toUrl('vs/workbench/browser/parts/quickinput/media/light/arrow-left.svg'))\n\t},\n\ttooltip: localize('quickInput.back', \"Back\"),\n\thandle: -1 // TODO\n};\n\ninterface QuickInputUI {\n\tcontainer: HTMLElement;\n\tleftActionBar: ActionBar;\n\ttitle: HTMLElement;\n\trightActionBar: ActionBar;\n\tcheckAll: HTMLInputElement;\n\tinputBox: QuickInputBox;\n\tvisibleCount: CountBadge;\n\tcount: CountBadge;\n\tmessage: HTMLElement;\n\tprogressBar: ProgressBar;\n\tlist: QuickInputList;\n\tonDidAccept: Event<void>;\n\tonDidTriggerButton: Event<IQuickInputButton>;\n\tignoreFocusOut: boolean;\n\tkeyMods: Writeable<IKeyMods>;\n\tisScreenReaderOptimized(): boolean;\n\tshow(controller: QuickInput): void;\n\tsetVisibilities(visibilities: Visibilities): void;\n\tsetComboboxAccessibility(enabled: boolean): void;\n\tsetEnabled(enabled: boolean): void;\n\tsetContextKey(contextKey?: string): void;\n\thide(): void;\n}\n\ntype Visibilities = {\n\ttitle?: boolean;\n\tcheckAll?: boolean;\n\tinputBox?: boolean;\n\tvisibleCount?: boolean;\n\tcount?: boolean;\n\tmessage?: boolean;\n\tlist?: boolean;\n\tok?: boolean;\n};\n\nclass QuickInput implements IQuickInput {\n\n\tprivate _title: string;\n\tprivate _steps: number;\n\tprivate _totalSteps: number;\n\tprotected visible = false;\n\tprivate _enabled = true;\n\tprivate _contextKey: string;\n\tprivate _busy = false;\n\tprivate _ignoreFocusOut = false;\n\tprivate _buttons: IQuickInputButton[] = [];\n\tprivate buttonsUpdated = false;\n\tprivate onDidTriggerButtonEmitter = new Emitter<IQuickInputButton>();\n\tprivate onDidHideEmitter = new Emitter<void>();\n\n\tprotected visibleDisposables: IDisposable[] = [];\n\tprotected disposables: IDisposable[] = [\n\t\tthis.onDidTriggerButtonEmitter,\n\t\tthis.onDidHideEmitter,\n\t];\n\n\tprivate busyDelay: TimeoutTimer | null;\n\n\tconstructor(protected ui: QuickInputUI) {\n\t}\n\n\tget title() {\n\t\treturn this._title;\n\t}\n\n\tset title(title: string) {\n\t\tthis._title = title;\n\t\tthis.update();\n\t}\n\n\tget step() {\n\t\treturn this._steps;\n\t}\n\n\tset step(step: number) {\n\t\tthis._steps = step;\n\t\tthis.update();\n\t}\n\n\tget totalSteps() {\n\t\treturn this._totalSteps;\n\t}\n\n\tset totalSteps(totalSteps: number) {\n\t\tthis._totalSteps = totalSteps;\n\t\tthis.update();\n\t}\n\n\tget enabled() {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(enabled: boolean) {\n\t\tthis._enabled = enabled;\n\t\tthis.update();\n\t}\n\n\tget contextKey() {\n\t\treturn this._contextKey;\n\t}\n\n\tset contextKey(contextKey: string) {\n\t\tthis._contextKey = contextKey;\n\t\tthis.update();\n\t}\n\n\tget busy() {\n\t\treturn this._busy;\n\t}\n\n\tset busy(busy: boolean) {\n\t\tthis._busy = busy;\n\t\tthis.update();\n\t}\n\n\tget ignoreFocusOut() {\n\t\treturn this._ignoreFocusOut;\n\t}\n\n\tset ignoreFocusOut(ignoreFocusOut: boolean) {\n\t\tthis._ignoreFocusOut = ignoreFocusOut;\n\t\tthis.update();\n\t}\n\n\tget buttons() {\n\t\treturn this._buttons;\n\t}\n\n\tset buttons(buttons: IQuickInputButton[]) {\n\t\tthis._buttons = buttons;\n\t\tthis.buttonsUpdated = true;\n\t\tthis.update();\n\t}\n\n\tonDidTriggerButton = this.onDidTriggerButtonEmitter.event;\n\n\tshow(): void {\n\t\tif (this.visible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.visibleDisposables.push(\n\t\t\tthis.ui.onDidTriggerButton(button => {\n\t\t\t\tif (this.buttons.indexOf(button) !== -1) {\n\t\t\t\t\tthis.onDidTriggerButtonEmitter.fire(button);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis.ui.show(this);\n\t\tthis.visible = true;\n\t\tthis.update();\n\t}\n\n\thide(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ui.hide();\n\t}\n\n\tdidHide(): void {\n\t\tthis.visible = false;\n\t\tthis.visibleDisposables = dispose(this.visibleDisposables);\n\t\tthis.onDidHideEmitter.fire();\n\t}\n\n\tonDidHide = this.onDidHideEmitter.event;\n\n\tprotected update() {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\t\tconst title = this.getTitle();\n\t\tif (this.ui.title.textContent !== title) {\n\t\t\tthis.ui.title.textContent = title;\n\t\t}\n\t\tif (this.busy && !this.busyDelay) {\n\t\t\tthis.busyDelay = new TimeoutTimer();\n\t\t\tthis.busyDelay.setIfNotSet(() => {\n\t\t\t\tif (this.visible) {\n\t\t\t\t\tthis.ui.progressBar.infinite();\n\t\t\t\t}\n\t\t\t}, 800);\n\t\t}\n\t\tif (!this.busy && this.busyDelay) {\n\t\t\tthis.ui.progressBar.stop();\n\t\t\tthis.busyDelay.cancel();\n\t\t\tthis.busyDelay = null;\n\t\t}\n\t\tif (this.buttonsUpdated) {\n\t\t\tthis.buttonsUpdated = false;\n\t\t\tthis.ui.leftActionBar.clear();\n\t\t\tconst leftButtons = this.buttons.filter(button => button === backButton);\n\t\t\tthis.ui.leftActionBar.push(leftButtons.map((button, index) => {\n\t\t\t\tconst action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath!), true, () => {\n\t\t\t\t\tthis.onDidTriggerButtonEmitter.fire(button);\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t});\n\t\t\t\taction.tooltip = button.tooltip || '';\n\t\t\t\treturn action;\n\t\t\t}), { icon: true, label: false });\n\t\t\tthis.ui.rightActionBar.clear();\n\t\t\tconst rightButtons = this.buttons.filter(button => button !== backButton);\n\t\t\tthis.ui.rightActionBar.push(rightButtons.map((button, index) => {\n\t\t\t\tconst action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath!), true, () => {\n\t\t\t\t\tthis.onDidTriggerButtonEmitter.fire(button);\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t});\n\t\t\t\taction.tooltip = button.tooltip || '';\n\t\t\t\treturn action;\n\t\t\t}), { icon: true, label: false });\n\t\t}\n\t\tthis.ui.ignoreFocusOut = this.ignoreFocusOut;\n\t\tthis.ui.setEnabled(this.enabled);\n\t\tthis.ui.setContextKey(this.contextKey);\n\t}\n\n\tprivate getTitle() {\n\t\tif (this.title && this.step) {\n\t\t\treturn `${this.title} (${this.getSteps()})`;\n\t\t}\n\t\tif (this.title) {\n\t\t\treturn this.title;\n\t\t}\n\t\tif (this.step) {\n\t\t\treturn this.getSteps();\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate getSteps() {\n\t\tif (this.step && this.totalSteps) {\n\t\t\treturn localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\n\t\t}\n\t\tif (this.step) {\n\t\t\treturn String(this.step);\n\t\t}\n\t\treturn '';\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.hide();\n\t\tthis.disposables = dispose(this.disposables);\n\t}\n}\n\nclass QuickPick<T extends IQuickPickItem> extends QuickInput implements IQuickPick<T> {\n\n\tprivate static INPUT_BOX_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\n\n\tprivate _value = '';\n\tprivate _placeholder: string;\n\tprivate onDidChangeValueEmitter = new Emitter<string>();\n\tprivate onDidAcceptEmitter = new Emitter<void>();\n\tprivate _items: Array<T | IQuickPickSeparator> = [];\n\tprivate itemsUpdated = false;\n\tprivate _canSelectMany = false;\n\tprivate _matchOnDescription = false;\n\tprivate _matchOnDetail = false;\n\tprivate _matchOnLabel = true;\n\tprivate _autoFocusOnList = true;\n\tprivate _activeItems: T[] = [];\n\tprivate activeItemsUpdated = false;\n\tprivate activeItemsToConfirm: T[] | null = [];\n\tprivate onDidChangeActiveEmitter = new Emitter<T[]>();\n\tprivate _selectedItems: T[] = [];\n\tprivate selectedItemsUpdated = false;\n\tprivate selectedItemsToConfirm: T[] | null = [];\n\tprivate onDidChangeSelectionEmitter = new Emitter<T[]>();\n\tprivate onDidTriggerItemButtonEmitter = new Emitter<IQuickPickItemButtonEvent<T>>();\n\tprivate _valueSelection: Readonly<[number, number]>;\n\tprivate valueSelectionUpdated = true;\n\tprivate _validationMessage: string;\n\n\tquickNavigate: IQuickNavigateConfiguration;\n\n\tconstructor(ui: QuickInputUI) {\n\t\tsuper(ui);\n\t\tthis.disposables.push(\n\t\t\tthis.onDidChangeValueEmitter,\n\t\t\tthis.onDidAcceptEmitter,\n\t\t\tthis.onDidChangeActiveEmitter,\n\t\t\tthis.onDidChangeSelectionEmitter,\n\t\t\tthis.onDidTriggerItemButtonEmitter,\n\t\t);\n\t}\n\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\tset value(value: string) {\n\t\tthis._value = value || '';\n\t\tthis.update();\n\t}\n\n\tget placeholder() {\n\t\treturn this._placeholder;\n\t}\n\n\tset placeholder(placeholder: string) {\n\t\tthis._placeholder = placeholder;\n\t\tthis.update();\n\t}\n\n\tonDidChangeValue = this.onDidChangeValueEmitter.event;\n\n\tonDidAccept = this.onDidAcceptEmitter.event;\n\n\tget items() {\n\t\treturn this._items;\n\t}\n\n\tset items(items: Array<T | IQuickPickSeparator>) {\n\t\tthis._items = items;\n\t\tthis.itemsUpdated = true;\n\t\tthis.update();\n\t}\n\n\tget canSelectMany() {\n\t\treturn this._canSelectMany;\n\t}\n\n\tset canSelectMany(canSelectMany: boolean) {\n\t\tthis._canSelectMany = canSelectMany;\n\t\tthis.update();\n\t}\n\n\tget matchOnDescription() {\n\t\treturn this._matchOnDescription;\n\t}\n\n\tset matchOnDescription(matchOnDescription: boolean) {\n\t\tthis._matchOnDescription = matchOnDescription;\n\t\tthis.update();\n\t}\n\n\tget matchOnDetail() {\n\t\treturn this._matchOnDetail;\n\t}\n\n\tset matchOnDetail(matchOnDetail: boolean) {\n\t\tthis._matchOnDetail = matchOnDetail;\n\t\tthis.update();\n\t}\n\n\tget matchOnLabel() {\n\t\treturn this._matchOnLabel;\n\t}\n\n\tset matchOnLabel(matchOnLabel: boolean) {\n\t\tthis._matchOnLabel = matchOnLabel;\n\t\tthis.update();\n\t}\n\n\tget autoFocusOnList() {\n\t\treturn this._autoFocusOnList;\n\t}\n\n\tset autoFocusOnList(autoFocusOnList: boolean) {\n\t\tthis._autoFocusOnList = autoFocusOnList;\n\t\tthis.update();\n\t}\n\n\tget activeItems() {\n\t\treturn this._activeItems;\n\t}\n\n\tset activeItems(activeItems: T[]) {\n\t\tthis._activeItems = activeItems;\n\t\tthis.activeItemsUpdated = true;\n\t\tthis.update();\n\t}\n\n\tonDidChangeActive = this.onDidChangeActiveEmitter.event;\n\n\tget selectedItems() {\n\t\treturn this._selectedItems;\n\t}\n\n\tset selectedItems(selectedItems: T[]) {\n\t\tthis._selectedItems = selectedItems;\n\t\tthis.selectedItemsUpdated = true;\n\t\tthis.update();\n\t}\n\n\tget keyMods() {\n\t\treturn this.ui.keyMods;\n\t}\n\n\tset valueSelection(valueSelection: Readonly<[number, number]>) {\n\t\tthis._valueSelection = valueSelection;\n\t\tthis.valueSelectionUpdated = true;\n\t\tthis.update();\n\t}\n\n\tget validationMessage() {\n\t\treturn this._validationMessage;\n\t}\n\n\tset validationMessage(validationMessage: string) {\n\t\tthis._validationMessage = validationMessage;\n\t\tthis.update();\n\t}\n\n\tpublic inputHasFocus(): boolean {\n\t\treturn this.visible ? this.ui.inputBox.hasFocus() : false;\n\t}\n\n\tonDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n\tonDidTriggerItemButton = this.onDidTriggerItemButtonEmitter.event;\n\n\tprivate trySelectFirst() {\n\t\tif (this.autoFocusOnList) {\n\t\t\tif (!this.ui.isScreenReaderOptimized() && !this.canSelectMany) {\n\t\t\t\tthis.ui.list.focus('First');\n\t\t\t}\n\t\t}\n\t}\n\n\tshow() {\n\t\tif (!this.visible) {\n\t\t\tthis.visibleDisposables.push(\n\t\t\t\tthis.ui.inputBox.onDidChange(value => {\n\t\t\t\t\tif (value === this.value) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._value = value;\n\t\t\t\t\tthis.ui.list.filter(this.ui.inputBox.value);\n\t\t\t\t\tthis.trySelectFirst();\n\t\t\t\t\tthis.onDidChangeValueEmitter.fire(value);\n\t\t\t\t}),\n\t\t\t\tthis.ui.inputBox.onMouseDown(event => {\n\t\t\t\t\tif (!this.autoFocusOnList) {\n\t\t\t\t\t\tthis.ui.list.clearFocus();\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tthis.ui.inputBox.onKeyDown(event => {\n\t\t\t\t\tswitch (event.keyCode) {\n\t\t\t\t\t\tcase KeyCode.DownArrow:\n\t\t\t\t\t\t\tthis.ui.list.focus('Next');\n\t\t\t\t\t\t\tif (this.canSelectMany) {\n\t\t\t\t\t\t\t\tthis.ui.list.domFocus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase KeyCode.UpArrow:\n\t\t\t\t\t\t\tif (this.ui.list.getFocusedElements().length) {\n\t\t\t\t\t\t\t\tthis.ui.list.focus('Previous');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.ui.list.focus('Last');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.canSelectMany) {\n\t\t\t\t\t\t\t\tthis.ui.list.domFocus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase KeyCode.PageDown:\n\t\t\t\t\t\t\tif (this.ui.list.getFocusedElements().length) {\n\t\t\t\t\t\t\t\tthis.ui.list.focus('NextPage');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.ui.list.focus('First');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.canSelectMany) {\n\t\t\t\t\t\t\t\tthis.ui.list.domFocus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase KeyCode.PageUp:\n\t\t\t\t\t\t\tif (this.ui.list.getFocusedElements().length) {\n\t\t\t\t\t\t\t\tthis.ui.list.focus('PreviousPage');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.ui.list.focus('Last');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.canSelectMany) {\n\t\t\t\t\t\t\t\tthis.ui.list.domFocus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tthis.ui.onDidAccept(() => {\n\t\t\t\t\tif (!this.canSelectMany && this.activeItems[0]) {\n\t\t\t\t\t\tthis._selectedItems = [this.activeItems[0]];\n\t\t\t\t\t\tthis.onDidChangeSelectionEmitter.fire(this.selectedItems);\n\t\t\t\t\t}\n\t\t\t\t\tthis.onDidAcceptEmitter.fire(undefined);\n\t\t\t\t}),\n\t\t\t\tthis.ui.list.onDidChangeFocus(focusedItems => {\n\t\t\t\t\tif (this.activeItemsUpdated) {\n\t\t\t\t\t\treturn; // Expect another event.\n\t\t\t\t\t}\n\t\t\t\t\tif (this.activeItemsToConfirm !== this._activeItems && equals(focusedItems, this._activeItems, (a, b) => a === b)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._activeItems = focusedItems as T[];\n\t\t\t\t\tthis.onDidChangeActiveEmitter.fire(focusedItems as T[]);\n\t\t\t\t}),\n\t\t\t\tthis.ui.list.onDidChangeSelection(selectedItems => {\n\t\t\t\t\tif (this.canSelectMany) {\n\t\t\t\t\t\tif (selectedItems.length) {\n\t\t\t\t\t\t\tthis.ui.list.setSelectedElements([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.selectedItemsToConfirm !== this._selectedItems && equals(selectedItems, this._selectedItems, (a, b) => a === b)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._selectedItems = selectedItems as T[];\n\t\t\t\t\tthis.onDidChangeSelectionEmitter.fire(selectedItems as T[]);\n\t\t\t\t\tif (selectedItems.length) {\n\t\t\t\t\t\tthis.onDidAcceptEmitter.fire(undefined);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tthis.ui.list.onChangedCheckedElements(checkedItems => {\n\t\t\t\t\tif (!this.canSelectMany) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.selectedItemsToConfirm !== this._selectedItems && equals(checkedItems, this._selectedItems, (a, b) => a === b)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._selectedItems = checkedItems as T[];\n\t\t\t\t\tthis.onDidChangeSelectionEmitter.fire(checkedItems as T[]);\n\t\t\t\t}),\n\t\t\t\tthis.ui.list.onButtonTriggered(event => this.onDidTriggerItemButtonEmitter.fire(event as IQuickPickItemButtonEvent<T>)),\n\t\t\t\tthis.registerQuickNavigation()\n\t\t\t);\n\t\t\tthis.valueSelectionUpdated = true;\n\t\t}\n\t\tsuper.show(); // TODO: Why have show() bubble up while update() trickles down? (Could move setComboboxAccessibility() here.)\n\t}\n\n\tprivate registerQuickNavigation() {\n\t\treturn dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, e => {\n\t\t\tif (this.canSelectMany || !this.quickNavigate) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst keyboardEvent: StandardKeyboardEvent = new StandardKeyboardEvent(e);\n\t\t\tconst keyCode = keyboardEvent.keyCode;\n\n\t\t\t// Select element when keys are pressed that signal it\n\t\t\tconst quickNavKeys = this.quickNavigate.keybindings;\n\t\t\tconst wasTriggerKeyPressed = keyCode === KeyCode.Enter || quickNavKeys.some(k => {\n\t\t\t\tconst [firstPart, chordPart] = k.getParts();\n\t\t\t\tif (chordPart) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (firstPart.shiftKey && keyCode === KeyCode.Shift) {\n\t\t\t\t\tif (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n\t\t\t\t\t\treturn false; // this is an optimistic check for the shift key being used to navigate back in quick open\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (firstPart.altKey && keyCode === KeyCode.Alt) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (firstPart.ctrlKey && keyCode === KeyCode.Ctrl) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (firstPart.metaKey && keyCode === KeyCode.Meta) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (wasTriggerKeyPressed && this.activeItems[0]) {\n\t\t\t\tthis._selectedItems = [this.activeItems[0]];\n\t\t\t\tthis.onDidChangeSelectionEmitter.fire(this.selectedItems);\n\t\t\t\tthis.onDidAcceptEmitter.fire(undefined);\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected update() {\n\t\tsuper.update();\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.ui.inputBox.value !== this.value) {\n\t\t\tthis.ui.inputBox.value = this.value;\n\t\t}\n\t\tif (this.valueSelectionUpdated) {\n\t\t\tthis.valueSelectionUpdated = false;\n\t\t\tthis.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n\t\t}\n\t\tif (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n\t\t\tthis.ui.inputBox.placeholder = (this.placeholder || '');\n\t\t}\n\t\tif (this.itemsUpdated) {\n\t\t\tthis.itemsUpdated = false;\n\t\t\tthis.ui.list.setElements(this.items);\n\t\t\tthis.ui.list.filter(this.ui.inputBox.value);\n\t\t\tthis.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\n\t\t\tthis.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\n\t\t\tthis.ui.count.setCount(this.ui.list.getCheckedCount());\n\t\t\tthis.trySelectFirst();\n\t\t}\n\t\tif (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\n\t\t\tif (this.canSelectMany) {\n\t\t\t\tthis.ui.list.clearFocus();\n\t\t\t} else {\n\t\t\t\tthis.trySelectFirst();\n\t\t\t}\n\t\t}\n\t\tif (this.activeItemsUpdated) {\n\t\t\tthis.activeItemsUpdated = false;\n\t\t\tthis.activeItemsToConfirm = this._activeItems;\n\t\t\tthis.ui.list.setFocusedElements(this.activeItems);\n\t\t\tif (this.activeItemsToConfirm === this._activeItems) {\n\t\t\t\tthis.activeItemsToConfirm = null;\n\t\t\t}\n\t\t}\n\t\tif (this.selectedItemsUpdated) {\n\t\t\tthis.selectedItemsUpdated = false;\n\t\t\tthis.selectedItemsToConfirm = this._selectedItems;\n\t\t\tif (this.canSelectMany) {\n\t\t\t\tthis.ui.list.setCheckedElements(this.selectedItems);\n\t\t\t} else {\n\t\t\t\tthis.ui.list.setSelectedElements(this.selectedItems);\n\t\t\t}\n\t\t\tif (this.selectedItemsToConfirm === this._selectedItems) {\n\t\t\t\tthis.selectedItemsToConfirm = null;\n\t\t\t}\n\t\t}\n\t\tif (this.validationMessage) {\n\t\t\tthis.ui.message.textContent = this.validationMessage;\n\t\t\tthis.ui.inputBox.showDecoration(Severity.Error);\n\t\t} else {\n\t\t\tthis.ui.message.textContent = null;\n\t\t\tthis.ui.inputBox.showDecoration(Severity.Ignore);\n\t\t}\n\t\tthis.ui.list.matchOnDescription = this.matchOnDescription;\n\t\tthis.ui.list.matchOnDetail = this.matchOnDetail;\n\t\tthis.ui.list.matchOnLabel = this.matchOnLabel;\n\t\tthis.ui.setComboboxAccessibility(true);\n\t\tthis.ui.inputBox.setAttribute('aria-label', QuickPick.INPUT_BOX_ARIA_LABEL);\n\t\tthis.ui.setVisibilities(this.canSelectMany ? { title: !!this.title || !!this.step, checkAll: true, inputBox: true, visibleCount: true, count: true, ok: true, list: true, message: !!this.validationMessage } : { title: !!this.title || !!this.step, inputBox: true, visibleCount: true, list: true, message: !!this.validationMessage });\n\t}\n}\n\nclass InputBox extends QuickInput implements IInputBox {\n\n\tprivate static noPromptMessage = localize('inputModeEntry', \"Press 'Enter' to confirm your input or 'Escape' to cancel\");\n\n\tprivate _value = '';\n\tprivate _valueSelection: Readonly<[number, number]>;\n\tprivate valueSelectionUpdated = true;\n\tprivate _placeholder: string;\n\tprivate _password = false;\n\tprivate _prompt: string;\n\tprivate noValidationMessage = InputBox.noPromptMessage;\n\tprivate _validationMessage: string;\n\tprivate onDidValueChangeEmitter = new Emitter<string>();\n\tprivate onDidAcceptEmitter = new Emitter<void>();\n\n\tconstructor(ui: QuickInputUI) {\n\t\tsuper(ui);\n\t\tthis.disposables.push(\n\t\t\tthis.onDidValueChangeEmitter,\n\t\t\tthis.onDidAcceptEmitter,\n\t\t);\n\t}\n\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\tset value(value: string) {\n\t\tthis._value = value || '';\n\t\tthis.update();\n\t}\n\n\tset valueSelection(valueSelection: Readonly<[number, number]>) {\n\t\tthis._valueSelection = valueSelection;\n\t\tthis.valueSelectionUpdated = true;\n\t\tthis.update();\n\t}\n\n\tget placeholder() {\n\t\treturn this._placeholder;\n\t}\n\n\tset placeholder(placeholder: string) {\n\t\tthis._placeholder = placeholder;\n\t\tthis.update();\n\t}\n\n\tget password() {\n\t\treturn this._password;\n\t}\n\n\tset password(password: boolean) {\n\t\tthis._password = password;\n\t\tthis.update();\n\t}\n\n\tget prompt() {\n\t\treturn this._prompt;\n\t}\n\n\tset prompt(prompt: string) {\n\t\tthis._prompt = prompt;\n\t\tthis.noValidationMessage = prompt\n\t\t\t? localize('inputModeEntryDescription', \"{0} (Press 'Enter' to confirm or 'Escape' to cancel)\", prompt)\n\t\t\t: InputBox.noPromptMessage;\n\t\tthis.update();\n\t}\n\n\tget validationMessage() {\n\t\treturn this._validationMessage;\n\t}\n\n\tset validationMessage(validationMessage: string) {\n\t\tthis._validationMessage = validationMessage;\n\t\tthis.update();\n\t}\n\n\tonDidChangeValue = this.onDidValueChangeEmitter.event;\n\n\tonDidAccept = this.onDidAcceptEmitter.event;\n\n\tshow() {\n\t\tif (!this.visible) {\n\t\t\tthis.visibleDisposables.push(\n\t\t\t\tthis.ui.inputBox.onDidChange(value => {\n\t\t\t\t\tif (value === this.value) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._value = value;\n\t\t\t\t\tthis.onDidValueChangeEmitter.fire(value);\n\t\t\t\t}),\n\t\t\t\tthis.ui.onDidAccept(() => this.onDidAcceptEmitter.fire(undefined)),\n\t\t\t);\n\t\t\tthis.valueSelectionUpdated = true;\n\t\t}\n\t\tsuper.show();\n\t}\n\n\tprotected update() {\n\t\tsuper.update();\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.ui.inputBox.value !== this.value) {\n\t\t\tthis.ui.inputBox.value = this.value;\n\t\t}\n\t\tif (this.valueSelectionUpdated) {\n\t\t\tthis.valueSelectionUpdated = false;\n\t\t\tthis.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n\t\t}\n\t\tif (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n\t\t\tthis.ui.inputBox.placeholder = (this.placeholder || '');\n\t\t}\n\t\tif (this.ui.inputBox.password !== this.password) {\n\t\t\tthis.ui.inputBox.password = this.password;\n\t\t}\n\t\tif (!this.validationMessage && this.ui.message.textContent !== this.noValidationMessage) {\n\t\t\tthis.ui.message.textContent = this.noValidationMessage;\n\t\t\tthis.ui.inputBox.showDecoration(Severity.Ignore);\n\t\t}\n\t\tif (this.validationMessage && this.ui.message.textContent !== this.validationMessage) {\n\t\t\tthis.ui.message.textContent = this.validationMessage;\n\t\t\tthis.ui.inputBox.showDecoration(Severity.Error);\n\t\t}\n\t\tthis.ui.setVisibilities({ title: !!this.title || !!this.step, inputBox: true, message: true });\n\t}\n}\n\nexport class QuickInputService extends Component implements IQuickInputService {\n\n\tpublic _serviceBrand: ServiceIdentifier<any>;\n\n\tprivate static readonly ID = 'workbench.component.quickinput';\n\tprivate static readonly MAX_WIDTH = 600; // Max total width of quick open widget\n\n\tprivate idPrefix = 'quickInput_'; // Constant since there is still only one.\n\tprivate titleBar: HTMLElement;\n\tprivate filterContainer: HTMLElement;\n\tprivate visibleCountContainer: HTMLElement;\n\tprivate countContainer: HTMLElement;\n\tprivate okContainer: HTMLElement;\n\tprivate ok: Button;\n\tprivate ui: QuickInputUI;\n\tprivate comboboxAccessibility = false;\n\tprivate enabled = true;\n\tprivate inQuickOpenWidgets: Record<string, boolean> = {};\n\tprivate inQuickOpenContext: IContextKey<boolean>;\n\tprivate contexts: { [id: string]: IContextKey<boolean>; } = Object.create(null);\n\tprivate onDidAcceptEmitter = this._register(new Emitter<void>());\n\tprivate onDidTriggerButtonEmitter = this._register(new Emitter<IQuickInputButton>());\n\tprivate keyMods: Writeable<IKeyMods> = { ctrlCmd: false, alt: false };\n\n\tprivate controller: QuickInput | null = null;\n\n\tconstructor(\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IQuickOpenService private readonly quickOpenService: IQuickOpenService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService\n\t) {\n\t\tsuper(QuickInputService.ID, themeService, storageService);\n\t\tthis.inQuickOpenContext = InQuickOpenContextKey.bindTo(contextKeyService);\n\t\tthis._register(this.quickOpenService.onShow(() => this.inQuickOpen('quickOpen', true)));\n\t\tthis._register(this.quickOpenService.onHide(() => this.inQuickOpen('quickOpen', false)));\n\t\tthis._register(this.layoutService.onLayout(dimension => this.layout(dimension)));\n\t\tthis.registerKeyModsListeners();\n\t}\n\n\tprivate inQuickOpen(widget: 'quickInput' | 'quickOpen', open: boolean) {\n\t\tif (open) {\n\t\t\tthis.inQuickOpenWidgets[widget] = true;\n\t\t} else {\n\t\t\tdelete this.inQuickOpenWidgets[widget];\n\t\t}\n\t\tif (Object.keys(this.inQuickOpenWidgets).length) {\n\t\t\tif (!this.inQuickOpenContext.get()) {\n\t\t\t\tthis.inQuickOpenContext.set(true);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.inQuickOpenContext.get()) {\n\t\t\t\tthis.inQuickOpenContext.reset();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate setContextKey(id?: string) {\n\t\tlet key: IContextKey<boolean> | undefined;\n\t\tif (id) {\n\t\t\tkey = this.contexts[id];\n\t\t\tif (!key) {\n\t\t\t\tkey = new RawContextKey<boolean>(id, false)\n\t\t\t\t\t.bindTo(this.contextKeyService);\n\t\t\t\tthis.contexts[id] = key;\n\t\t\t}\n\t\t}\n\n\t\tif (key && key.get()) {\n\t\t\treturn; // already active context\n\t\t}\n\n\t\tthis.resetContextKeys();\n\n\t\tif (key) {\n\t\t\tkey.set(true);\n\t\t}\n\t}\n\n\tprivate resetContextKeys() {\n\t\tfor (const key in this.contexts) {\n\t\t\tif (this.contexts[key].get()) {\n\t\t\t\tthis.contexts[key].reset();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate registerKeyModsListeners() {\n\t\tconst workbench = this.layoutService.getWorkbenchElement();\n\t\tthis._register(dom.addDisposableListener(workbench, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase KeyCode.Ctrl:\n\t\t\t\tcase KeyCode.Meta:\n\t\t\t\t\tthis.keyMods.ctrlCmd = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase KeyCode.Alt:\n\t\t\t\t\tthis.keyMods.alt = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(workbench, dom.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase KeyCode.Ctrl:\n\t\t\t\tcase KeyCode.Meta:\n\t\t\t\t\tthis.keyMods.ctrlCmd = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase KeyCode.Alt:\n\t\t\t\t\tthis.keyMods.alt = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate create() {\n\t\tif (this.ui) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst workbench = this.layoutService.getWorkbenchElement();\n\t\tconst container = dom.append(workbench, $('.quick-input-widget.show-file-icons'));\n\t\tcontainer.tabIndex = -1;\n\t\tcontainer.style.display = 'none';\n\n\t\tthis.titleBar = dom.append(container, $('.quick-input-titlebar'));\n\n\t\tconst leftActionBar = this._register(new ActionBar(this.titleBar));\n\t\tleftActionBar.domNode.classList.add('quick-input-left-action-bar');\n\n\t\tconst title = dom.append(this.titleBar, $('.quick-input-title'));\n\n\t\tconst rightActionBar = this._register(new ActionBar(this.titleBar));\n\t\trightActionBar.domNode.classList.add('quick-input-right-action-bar');\n\n\t\tconst headerContainer = dom.append(container, $('.quick-input-header'));\n\n\t\tconst checkAll = <HTMLInputElement>dom.append(headerContainer, $('input.quick-input-check-all'));\n\t\tcheckAll.type = 'checkbox';\n\t\tthis._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, e => {\n\t\t\tconst checked = checkAll.checked;\n\t\t\tlist.setAllVisibleChecked(checked);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, e => {\n\t\t\tif (e.x || e.y) { // Avoid 'click' triggered by 'space'...\n\t\t\t\tinputBox.setFocus();\n\t\t\t}\n\t\t}));\n\n\t\tthis.filterContainer = dom.append(headerContainer, $('.quick-input-filter'));\n\n\t\tconst inputBox = this._register(new QuickInputBox(this.filterContainer));\n\t\tinputBox.setAttribute('aria-describedby', `${this.idPrefix}message`);\n\n\t\tthis.visibleCountContainer = dom.append(this.filterContainer, $('.quick-input-visible-count'));\n\t\tthis.visibleCountContainer.setAttribute('aria-live', 'polite');\n\t\tthis.visibleCountContainer.setAttribute('aria-atomic', 'true');\n\t\tconst visibleCount = new CountBadge(this.visibleCountContainer, { countFormat: localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") });\n\n\t\tthis.countContainer = dom.append(this.filterContainer, $('.quick-input-count'));\n\t\tthis.countContainer.setAttribute('aria-live', 'polite');\n\t\tconst count = new CountBadge(this.countContainer, { countFormat: localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") });\n\t\tthis._register(attachBadgeStyler(count, this.themeService));\n\n\t\tthis.okContainer = dom.append(headerContainer, $('.quick-input-action'));\n\t\tthis.ok = new Button(this.okContainer);\n\t\tattachButtonStyler(this.ok, this.themeService);\n\t\tthis.ok.label = localize('ok', \"OK\");\n\t\tthis._register(this.ok.onDidClick(e => {\n\t\t\tthis.onDidAcceptEmitter.fire();\n\t\t}));\n\n\t\tconst message = dom.append(container, $(`#${this.idPrefix}message.quick-input-message`));\n\n\t\tconst progressBar = new ProgressBar(container);\n\t\tdom.addClass(progressBar.getContainer(), 'quick-input-progress');\n\t\tthis._register(attachProgressBarStyler(progressBar, this.themeService));\n\n\t\tconst list = this._register(this.instantiationService.createInstance(QuickInputList, container, this.idPrefix + 'list'));\n\t\tthis._register(list.onChangedAllVisibleChecked(checked => {\n\t\t\tcheckAll.checked = checked;\n\t\t}));\n\t\tthis._register(list.onChangedVisibleCount(c => {\n\t\t\tvisibleCount.setCount(c);\n\t\t}));\n\t\tthis._register(list.onChangedCheckedCount(c => {\n\t\t\tcount.setCount(c);\n\t\t}));\n\t\tthis._register(list.onLeave(() => {\n\t\t\t// Defer to avoid the input field reacting to the triggering key.\n\t\t\tsetTimeout(() => {\n\t\t\t\tinputBox.setFocus();\n\t\t\t\tif (this.controller instanceof QuickPick && this.controller.canSelectMany) {\n\t\t\t\t\tlist.clearFocus();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}));\n\t\tthis._register(list.onDidChangeFocus(() => {\n\t\t\tif (this.comboboxAccessibility) {\n\t\t\t\tthis.ui.inputBox.setAttribute('aria-activedescendant', this.ui.list.getActiveDescendant() || '');\n\t\t\t}\n\t\t}));\n\n\t\tconst focusTracker = dom.trackFocus(container);\n\t\tthis._register(focusTracker);\n\t\tthis._register(focusTracker.onDidBlur(() => {\n\t\t\tif (!this.ui.ignoreFocusOut && !this.environmentService.args['sticky-quickopen'] && this.configurationService.getValue(CLOSE_ON_FOCUS_LOST_CONFIG)) {\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase KeyCode.Enter:\n\t\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\t\tthis.onDidAcceptEmitter.fire();\n\t\t\t\t\tbreak;\n\t\t\t\tcase KeyCode.Escape:\n\t\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\t\tthis.hide();\n\t\t\t\t\tbreak;\n\t\t\t\tcase KeyCode.Tab:\n\t\t\t\t\tif (!event.altKey && !event.ctrlKey && !event.metaKey) {\n\t\t\t\t\t\tconst selectors = ['.action-label.icon'];\n\t\t\t\t\t\tif (container.classList.contains('show-checkboxes')) {\n\t\t\t\t\t\t\tselectors.push('input');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tselectors.push('input[type=text]');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.ui.list.isDisplayed()) {\n\t\t\t\t\t\t\tselectors.push('.monaco-list');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst stops = container.querySelectorAll<HTMLElement>(selectors.join(', '));\n\t\t\t\t\t\tif (event.shiftKey && event.target === stops[0]) {\n\t\t\t\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\t\t\t\tstops[stops.length - 1].focus();\n\t\t\t\t\t\t} else if (!event.shiftKey && event.target === stops[stops.length - 1]) {\n\t\t\t\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\t\t\t\tstops[0].focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.quickOpenService.onShow(() => this.hide(true)));\n\n\t\tthis.ui = {\n\t\t\tcontainer,\n\t\t\tleftActionBar,\n\t\t\ttitle,\n\t\t\trightActionBar,\n\t\t\tcheckAll,\n\t\t\tinputBox,\n\t\t\tvisibleCount,\n\t\t\tcount,\n\t\t\tmessage,\n\t\t\tprogressBar,\n\t\t\tlist,\n\t\t\tonDidAccept: this.onDidAcceptEmitter.event,\n\t\t\tonDidTriggerButton: this.onDidTriggerButtonEmitter.event,\n\t\t\tignoreFocusOut: false,\n\t\t\tkeyMods: this.keyMods,\n\t\t\tisScreenReaderOptimized: () => this.isScreenReaderOptimized(),\n\t\t\tshow: controller => this.show(controller),\n\t\t\thide: () => this.hide(),\n\t\t\tsetVisibilities: visibilities => this.setVisibilities(visibilities),\n\t\t\tsetComboboxAccessibility: enabled => this.setComboboxAccessibility(enabled),\n\t\t\tsetEnabled: enabled => this.setEnabled(enabled),\n\t\t\tsetContextKey: contextKey => this.setContextKey(contextKey),\n\t\t};\n\t\tthis.updateStyles();\n\t}\n\n\tpick<T extends IQuickPickItem, O extends IPickOptions<T>>(picks: Promise<QuickPickInput<T>[]> | QuickPickInput<T>[], options: O = <O>{}, token: CancellationToken = CancellationToken.None): Promise<O extends { canPickMany: true } ? T[] : T> {\n\t\treturn new Promise<O extends { canPickMany: true } ? T[] : T>((doResolve, reject) => {\n\t\t\tlet resolve = (result: any) => {\n\t\t\t\tresolve = doResolve;\n\t\t\t\tif (options.onKeyMods) {\n\t\t\t\t\toptions.onKeyMods(input.keyMods);\n\t\t\t\t}\n\t\t\t\tdoResolve(result);\n\t\t\t};\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tresolve(undefined);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst input = this.createQuickPick<T>();\n\t\t\tlet activeItem: T | undefined;\n\t\t\tconst disposables = [\n\t\t\t\tinput,\n\t\t\t\tinput.onDidAccept(() => {\n\t\t\t\t\tif (input.canSelectMany) {\n\t\t\t\t\t\tresolve(<any>input.selectedItems.slice());\n\t\t\t\t\t\tinput.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst result = input.activeItems[0];\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\tresolve(<any>result);\n\t\t\t\t\t\t\tinput.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tinput.onDidChangeActive(items => {\n\t\t\t\t\tconst focused = items[0];\n\t\t\t\t\tif (focused && options.onDidFocus) {\n\t\t\t\t\t\toptions.onDidFocus(focused);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tinput.onDidChangeSelection(items => {\n\t\t\t\t\tif (!input.canSelectMany) {\n\t\t\t\t\t\tconst result = items[0];\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\tresolve(<any>result);\n\t\t\t\t\t\t\tinput.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tinput.onDidTriggerItemButton(event => options.onDidTriggerItemButton && options.onDidTriggerItemButton({\n\t\t\t\t\t...event,\n\t\t\t\t\tremoveItem: () => {\n\t\t\t\t\t\tconst index = input.items.indexOf(event.item);\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tconst items = input.items.slice();\n\t\t\t\t\t\t\titems.splice(index, 1);\n\t\t\t\t\t\t\tinput.items = items;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})),\n\t\t\t\tinput.onDidChangeValue(value => {\n\t\t\t\t\tif (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\n\t\t\t\t\t\tinput.activeItems = [activeItem];\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\ttoken.onCancellationRequested(() => {\n\t\t\t\t\tinput.hide();\n\t\t\t\t}),\n\t\t\t\tinput.onDidHide(() => {\n\t\t\t\t\tdispose(disposables);\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}),\n\t\t\t];\n\t\t\tinput.canSelectMany = !!options.canPickMany;\n\t\t\tinput.placeholder = options.placeHolder;\n\t\t\tinput.ignoreFocusOut = !!options.ignoreFocusLost;\n\t\t\tinput.matchOnDescription = !!options.matchOnDescription;\n\t\t\tinput.matchOnDetail = !!options.matchOnDetail;\n\t\t\tinput.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\n\t\t\tinput.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\n\t\t\tinput.quickNavigate = options.quickNavigate;\n\t\t\tinput.contextKey = options.contextKey;\n\t\t\tinput.busy = true;\n\t\t\tPromise.all<QuickPickInput<T>[], T | undefined>([picks, options.activeItem])\n\t\t\t\t.then(([items, _activeItem]) => {\n\t\t\t\t\tactiveItem = _activeItem;\n\t\t\t\t\tinput.busy = false;\n\t\t\t\t\tinput.items = items;\n\t\t\t\t\tif (input.canSelectMany) {\n\t\t\t\t\t\tinput.selectedItems = items.filter(item => item.type !== 'separator' && item.picked) as T[];\n\t\t\t\t\t}\n\t\t\t\t\tif (activeItem) {\n\t\t\t\t\t\tinput.activeItems = [activeItem];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tinput.show();\n\t\t\tPromise.resolve(picks).then(undefined, err => {\n\t\t\t\treject(err);\n\t\t\t\tinput.hide();\n\t\t\t});\n\t\t});\n\t}\n\n\tinput(options: IInputOptions = {}, token: CancellationToken = CancellationToken.None): Promise<string> {\n\t\treturn new Promise<string>((resolve, reject) => {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tresolve(undefined);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst input = this.createInputBox();\n\t\t\tconst validateInput = options.validateInput || (() => <Promise<undefined>>Promise.resolve(undefined));\n\t\t\tconst onDidValueChange = Event.debounce(input.onDidChangeValue, (last, cur) => cur, 100);\n\t\t\tlet validationValue = options.value || '';\n\t\t\tlet validation = Promise.resolve(validateInput(validationValue));\n\t\t\tconst disposables = [\n\t\t\t\tinput,\n\t\t\t\tonDidValueChange(value => {\n\t\t\t\t\tif (value !== validationValue) {\n\t\t\t\t\t\tvalidation = Promise.resolve(validateInput(value));\n\t\t\t\t\t\tvalidationValue = value;\n\t\t\t\t\t}\n\t\t\t\t\tvalidation.then(result => {\n\t\t\t\t\t\tif (value === validationValue) {\n\t\t\t\t\t\t\tinput.validationMessage = result || undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}),\n\t\t\t\tinput.onDidAccept(() => {\n\t\t\t\t\tconst value = input.value;\n\t\t\t\t\tif (value !== validationValue) {\n\t\t\t\t\t\tvalidation = Promise.resolve(validateInput(value));\n\t\t\t\t\t\tvalidationValue = value;\n\t\t\t\t\t}\n\t\t\t\t\tvalidation.then(result => {\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t\t\tinput.hide();\n\t\t\t\t\t\t} else if (value === validationValue) {\n\t\t\t\t\t\t\tinput.validationMessage = result;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}),\n\t\t\t\ttoken.onCancellationRequested(() => {\n\t\t\t\t\tinput.hide();\n\t\t\t\t}),\n\t\t\t\tinput.onDidHide(() => {\n\t\t\t\t\tdispose(disposables);\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}),\n\t\t\t];\n\t\t\tinput.value = options.value || '';\n\t\t\tinput.valueSelection = options.valueSelection;\n\t\t\tinput.prompt = options.prompt;\n\t\t\tinput.placeholder = options.placeHolder;\n\t\t\tinput.password = !!options.password;\n\t\t\tinput.ignoreFocusOut = !!options.ignoreFocusLost;\n\t\t\tinput.show();\n\t\t});\n\t}\n\n\tbackButton = backButton;\n\n\tcreateQuickPick<T extends IQuickPickItem>(): IQuickPick<T> {\n\t\tthis.create();\n\t\treturn new QuickPick<T>(this.ui);\n\t}\n\n\tcreateInputBox(): IInputBox {\n\t\tthis.create();\n\t\treturn new InputBox(this.ui);\n\t}\n\n\tprivate show(controller: QuickInput) {\n\t\tthis.create();\n\t\tthis.quickOpenService.close();\n\t\tconst oldController = this.controller;\n\t\tthis.controller = controller;\n\t\tif (oldController) {\n\t\t\toldController.didHide();\n\t\t}\n\n\t\tthis.setEnabled(true);\n\t\tthis.ui.leftActionBar.clear();\n\t\tthis.ui.title.textContent = '';\n\t\tthis.ui.rightActionBar.clear();\n\t\tthis.ui.checkAll.checked = false;\n\t\t// this.ui.inputBox.value = ''; Avoid triggering an event.\n\t\tthis.ui.inputBox.placeholder = '';\n\t\tthis.ui.inputBox.password = false;\n\t\tthis.ui.inputBox.showDecoration(Severity.Ignore);\n\t\tthis.ui.visibleCount.setCount(0);\n\t\tthis.ui.count.setCount(0);\n\t\tthis.ui.message.textContent = '';\n\t\tthis.ui.progressBar.stop();\n\t\tthis.ui.list.setElements([]);\n\t\tthis.ui.list.matchOnDescription = false;\n\t\tthis.ui.list.matchOnDetail = false;\n\t\tthis.ui.list.matchOnLabel = true;\n\t\tthis.ui.ignoreFocusOut = false;\n\t\tthis.setComboboxAccessibility(false);\n\t\tthis.ui.inputBox.removeAttribute('aria-label');\n\n\t\tconst keybinding = this.keybindingService.lookupKeybinding(BackAction.ID);\n\t\tbackButton.tooltip = keybinding ? localize('quickInput.backWithKeybinding', \"Back ({0})\", keybinding.getLabel()) : localize('quickInput.back', \"Back\");\n\n\t\tthis.inQuickOpen('quickInput', true);\n\t\tthis.resetContextKeys();\n\n\t\tthis.ui.container.style.display = '';\n\t\tthis.updateLayout();\n\t\tthis.ui.inputBox.setFocus();\n\t}\n\n\tprivate setVisibilities(visibilities: Visibilities) {\n\t\tthis.ui.title.style.display = visibilities.title ? '' : 'none';\n\t\tthis.ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\n\t\tthis.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\n\t\tthis.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\n\t\tthis.countContainer.style.display = visibilities.count ? '' : 'none';\n\t\tthis.okContainer.style.display = visibilities.ok ? '' : 'none';\n\t\tthis.ui.message.style.display = visibilities.message ? '' : 'none';\n\t\tthis.ui.list.display(!!visibilities.list);\n\t\tthis.ui.container.classList[visibilities.checkAll ? 'add' : 'remove']('show-checkboxes');\n\t\tthis.updateLayout(); // TODO\n\t}\n\n\tprivate setComboboxAccessibility(enabled: boolean) {\n\t\tif (enabled !== this.comboboxAccessibility) {\n\t\t\tthis.comboboxAccessibility = enabled;\n\t\t\tif (this.comboboxAccessibility) {\n\t\t\t\tthis.ui.inputBox.setAttribute('role', 'combobox');\n\t\t\t\tthis.ui.inputBox.setAttribute('aria-haspopup', 'true');\n\t\t\t\tthis.ui.inputBox.setAttribute('aria-autocomplete', 'list');\n\t\t\t\tthis.ui.inputBox.setAttribute('aria-activedescendant', this.ui.list.getActiveDescendant() || '');\n\t\t\t} else {\n\t\t\t\tthis.ui.inputBox.removeAttribute('role');\n\t\t\t\tthis.ui.inputBox.removeAttribute('aria-haspopup');\n\t\t\t\tthis.ui.inputBox.removeAttribute('aria-autocomplete');\n\t\t\t\tthis.ui.inputBox.removeAttribute('aria-activedescendant');\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate isScreenReaderOptimized() {\n\t\tconst detected = this.accessibilityService.getAccessibilitySupport() === AccessibilitySupport.Enabled;\n\t\tconst config = this.configurationService.getValue<IEditorOptions>('editor').accessibilitySupport;\n\t\treturn config === 'on' || (config === 'auto' && detected);\n\t}\n\n\tprivate setEnabled(enabled: boolean) {\n\t\tif (enabled !== this.enabled) {\n\t\t\tthis.enabled = enabled;\n\t\t\tfor (const item of this.ui.leftActionBar.items) {\n\t\t\t\t(item as ActionItem).getAction().enabled = enabled;\n\t\t\t}\n\t\t\tfor (const item of this.ui.rightActionBar.items) {\n\t\t\t\t(item as ActionItem).getAction().enabled = enabled;\n\t\t\t}\n\t\t\tthis.ui.checkAll.disabled = !enabled;\n\t\t\t// this.ui.inputBox.enabled = enabled; Avoid loosing focus.\n\t\t\tthis.ok.enabled = enabled;\n\t\t\tthis.ui.list.enabled = enabled;\n\t\t}\n\t}\n\n\tprivate hide(focusLost?: boolean) {\n\t\tconst controller = this.controller;\n\t\tif (controller) {\n\t\t\tthis.controller = null;\n\t\t\tthis.inQuickOpen('quickInput', false);\n\t\t\tthis.resetContextKeys();\n\t\t\tthis.ui.container.style.display = 'none';\n\t\t\tif (!focusLost) {\n\t\t\t\tthis.editorGroupService.activeGroup.focus();\n\t\t\t}\n\t\t\tcontroller.didHide();\n\t\t}\n\t}\n\n\tfocus() {\n\t\tif (this.isDisplayed()) {\n\t\t\tthis.ui.inputBox.setFocus();\n\t\t}\n\t}\n\n\ttoggle() {\n\t\tif (this.isDisplayed() && this.controller instanceof QuickPick && this.controller.canSelectMany) {\n\t\t\tthis.ui.list.toggleCheckbox();\n\t\t}\n\t}\n\n\tnavigate(next: boolean, quickNavigate?: IQuickNavigateConfiguration) {\n\t\tif (this.isDisplayed() && this.ui.list.isDisplayed()) {\n\t\t\tthis.ui.list.focus(next ? 'Next' : 'Previous');\n\t\t\tif (quickNavigate && this.controller instanceof QuickPick) {\n\t\t\t\tthis.controller.quickNavigate = quickNavigate;\n\t\t\t}\n\t\t}\n\t}\n\n\taccept() {\n\t\tthis.onDidAcceptEmitter.fire();\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tback() {\n\t\tthis.onDidTriggerButtonEmitter.fire(this.backButton);\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tcancel() {\n\t\tthis.hide();\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tlayout(dimension: dom.Dimension): void {\n\t\tthis.updateLayout();\n\t}\n\n\tprivate updateLayout() {\n\t\tif (this.ui) {\n\t\t\tconst titlebarOffset = this.layoutService.getTitleBarOffset();\n\t\t\tthis.ui.container.style.top = `${titlebarOffset}px`;\n\n\t\t\tconst style = this.ui.container.style;\n\t\t\tconst width = Math.min(this.layoutService.dimension.width * 0.62 /* golden cut */, QuickInputService.MAX_WIDTH);\n\t\t\tstyle.width = width + 'px';\n\t\t\tstyle.marginLeft = '-' + (width / 2) + 'px';\n\n\t\t\tthis.ui.inputBox.layout();\n\t\t\tthis.ui.list.layout();\n\t\t}\n\t}\n\n\tprotected updateStyles() {\n\t\tconst theme = this.themeService.getTheme();\n\t\tif (this.ui) {\n\t\t\t// TODO\n\t\t\tconst titleColor = { dark: 'rgba(255, 255, 255, 0.105)', light: 'rgba(0,0,0,.06)', hc: 'black' }[theme.type];\n\t\t\tthis.titleBar.style.backgroundColor = titleColor ? titleColor.toString() : null;\n\t\t\tthis.ui.inputBox.style(theme);\n\t\t\tconst sideBarBackground = theme.getColor(SIDE_BAR_BACKGROUND);\n\t\t\tthis.ui.container.style.backgroundColor = sideBarBackground ? sideBarBackground.toString() : null;\n\t\t\tconst sideBarForeground = theme.getColor(SIDE_BAR_FOREGROUND);\n\t\t\tthis.ui.container.style.color = sideBarForeground ? sideBarForeground.toString() : null;\n\t\t\tconst contrastBorderColor = theme.getColor(contrastBorder);\n\t\t\tthis.ui.container.style.border = contrastBorderColor ? `1px solid ${contrastBorderColor}` : null;\n\t\t\tconst widgetShadowColor = theme.getColor(widgetShadow);\n\t\t\tthis.ui.container.style.boxShadow = widgetShadowColor ? `0 5px 8px ${widgetShadowColor}` : null;\n\t\t}\n\t}\n\n\tprivate isDisplayed() {\n\t\treturn this.ui && this.ui.container.style.display !== 'none';\n\t}\n}\n\nexport const QuickPickManyToggle: ICommandAndKeybindingRule = {\n\tid: 'workbench.action.quickPickManyToggle',\n\tweight: KeybindingWeight.WorkbenchContrib,\n\twhen: inQuickOpenContext,\n\tprimary: 0,\n\thandler: accessor => {\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tquickInputService.toggle();\n\t}\n};\n\nexport class BackAction extends Action {\n\n\tpublic static readonly ID = 'workbench.action.quickInputBack';\n\tpublic static readonly LABEL = localize('back', \"Back\");\n\n\tconstructor(id: string, label: string, @IQuickInputService private readonly quickInputService: IQuickInputService) {\n\t\tsuper(id, label);\n\t}\n\n\tpublic run(): Promise<any> {\n\t\tthis.quickInputService.back();\n\t\treturn Promise.resolve();\n\t}\n}\n\nregisterSingleton(IQuickInputService, QuickInputService, true);"]}]}