!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(2),o=r(3);t.createStackdriverExtender=((e,t)=>{let r;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.DEBUG=100]="DEBUG",e[e.INFO=200]="INFO",e[e.NOTICE=300]="NOTICE",e[e.WARNING=400]="WARNING",e[e.ERROR=500]="ERROR",e[e.CRITICAL=600]="CRITICAL",e[e.ALERT=700]="ALERT",e[e.EMERGENCY=800]="EMERGENCY"}(r||(r={}));const i=new s.Logging({autoRetry:!0,projectId:e}).log(t);return e=>{const t=(e=>{switch(e){case"trace":case"debug":return r.DEBUG;case"info":return r.INFO;case"error":return r.ERROR;case"warn":return r.WARNING}})(e.type),s={};e.fields&&e.fields.forEach(e=>{e&&(s[e.identifier]=e.value)});const n=i.entry({severity:t},{...s,message:e.message});i.write(n).catch(e=>{o.logger.named("GCP").error("Failed to log",o.field("error",e))})}})},function(e,t){e.exports=require("@google-cloud/logging")},function(e,t,r){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(s=t.Level||(t.Level={}));class o{constructor(e,t){this.identifier=e,this.value=t}toJSON(){return{identifier:this.identifier,value:this.value}}}t.Field=o;class i{constructor(e,t){this.expected=e,this.ms=t}}t.Time=i,t.time=(e=>new i(e,Date.now())),t.field=((e,t)=>new o(e,t));class n{constructor(){this.format="",this.args=[]}flush(){const e=[this.format,...this.args];return this.format="",this.args=[],e}getType(e){switch(typeof e){case"object":return"%o";case"number":return"%d";default:return"%s"}}}t.Formatter=n;class a extends n{tag(e,t){this.format+=`%c ${e} `,this.args.push(`border: 1px solid #222; background-color: ${t}; padding-top: 1px;`+" padding-bottom: 1px; font-size: 12px; font-weight: bold; color: white;"+(4===e.length?"padding-left: 3px; padding-right: 4px;":"")),this.push(" ")}push(e,t="inherit",r="normal"){(t||r)&&(this.format+="%c",this.args.push((t?`color: ${t};`:"")+(r?`font-weight: ${r};`:""))),this.format+=this.getType(e),this.args.push(e)}fields(e){console.groupCollapsed(...this.flush()),e.forEach(e=>{this.push(e.identifier,"#3794ff","bold"),void 0!==e.value&&e.value.constructor&&e.value.constructor.name&&this.push(` (${e.value.constructor.name})`),this.push(": "),this.push(e.value),console.log(...this.flush())}),console.groupEnd()}}t.BrowserFormatter=a;class l extends n{tag(e,t){const[r,s,o]=this.hexToRgb(t);for(;e.length<5;)e+=" ";this.format+="[1m",this.format+=`[38;2;${r};${s};${o}m${e} [0m`}push(e,t,r){if("bold"===r&&(this.format+="[1m"),t){const[e,r,s]=this.hexToRgb(t);this.format+=`[38;2;${e};${r};${s}m`}this.format+=this.getType(e),(r||t)&&(this.format+="[0m"),this.args.push(e)}fields(e){const t={};this.format+="[38;2;140;140;140m",e.forEach(e=>{t[e.identifier]=e.value}),this.args.push(JSON.stringify(t)),console.log(...this.flush())}hexToRgb(e){const t=parseInt(e.substr(1),16);return[t>>16&255,t>>8&255,255&t]}}t.ServerFormatter=l;class h{constructor(e,t,r,o=[]){this._formatter=e,this.name=t,this.defaultFields=r,this.extenders=o,this.level=s.Info,this.muted=!1,t&&(this.nameColor=this.hashStringToColor(t));const i="undefined"!=typeof global&&void 0!==global.process?global.process.env.LOG_LEVEL:"";if(i)switch(i){case"trace":this.level=s.Trace;break;case"debug":this.level=s.Debug;break;case"info":this.level=s.Info;break;case"warn":this.level=s.Warning;break;case"error":this.level=s.Error}}set formatter(e){this._formatter=e}mute(){this.muted=!0}extend(e){this.extenders.push(e)}info(e,...t){this.handle({type:"info",message:e,fields:t,tagColor:"#008FBF",level:s.Info})}warn(e,...t){this.handle({type:"warn",message:e,fields:t,tagColor:"#FF9D00",level:s.Warning})}trace(e,...t){this.handle({type:"trace",message:e,fields:t,tagColor:"#888888",level:s.Trace})}debug(e,...t){this.handle({type:"debug",message:e,fields:t,tagColor:"#84009E",level:s.Debug})}error(e,...t){this.handle({type:"error",message:e,fields:t,tagColor:"#B00000",level:s.Error})}named(e,...t){const r=new h(this._formatter,e,t,this.extenders);return this.muted&&r.mute(),r}handle(e){if(this.level>e.level||this.muted)return;let t=e.fields||[];if("function"==typeof e.message){const r=e.message();e.message=r.shift(),t=r}const r=this.defaultFields?t.filter(e=>!!e).concat(this.defaultFields):t.filter(e=>!!e),s=Date.now();let o=[];const n=r&&r.length>0;n&&(o=r.filter(e=>e.value instanceof i)),this._formatter.tag(e.type.toUpperCase(),e.tagColor),this.name&&this.nameColor&&this._formatter.tag(this.name.toUpperCase(),this.nameColor),this._formatter.push(e.message),o.length>0&&o.forEach(e=>{const t=s-e.value.ms,r=t/e.value.expected,o=125*(1-r),i=125+o,n=r<1?i:o,a=r>=1?i:o;this._formatter.push(` ${e.identifier}=`,"#3794ff"),this._formatter.push(`${t}ms`,this.rgbToHex(a>0?a:0,n>0?n:0,0))}),n?this._formatter.fields(r):console.log(...this._formatter.flush()),this.extenders.forEach(t=>{t({section:this.name,fields:e.fields,level:e.level,message:e.message,type:e.type})})}djb2(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r);return t}rgbToHex(e,t,r){const s=(((255&Math.round(e))<<16)+((255&Math.round(t))<<8)+(255&Math.round(r))).toString(16);return"#"+"000000".substring(s.length)+s}hashStringToColor(e){const t=this.djb2(e);return this.rgbToHex((16711680&t)>>16,(65280&t)>>8,255&t)}}t.Logger=h,t.logger=new h("undefined"==typeof process||void 0===process.stdout?new a:new l)}]));